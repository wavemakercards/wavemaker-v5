(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function lh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const wt={},as=[],Br=()=>{},bx=()=>!1,Xc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ah=t=>t.startsWith("onUpdate:"),Gt=Object.assign,ch=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},wx=Object.prototype.hasOwnProperty,gt=(t,e)=>wx.call(t,e),Ve=Array.isArray,cs=t=>Jl(t)==="[object Map]",Zc=t=>Jl(t)==="[object Set]",Gp=t=>Jl(t)==="[object Date]",Xe=t=>typeof t=="function",It=t=>typeof t=="string",Hr=t=>typeof t=="symbol",St=t=>t!==null&&typeof t=="object",jy=t=>(St(t)||Xe(t))&&Xe(t.then)&&Xe(t.catch),Uy=Object.prototype.toString,Jl=t=>Uy.call(t),Cx=t=>Jl(t).slice(8,-1),zy=t=>Jl(t)==="[object Object]",uh=t=>It(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,el=lh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},xx=/-(\w)/g,fr=Qc(t=>t.replace(xx,(e,n)=>n?n.toUpperCase():"")),Sx=/\B([A-Z])/g,Lo=Qc(t=>t.replace(Sx,"-$1").toLowerCase()),eu=Qc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ku=Qc(t=>t?`on${eu(t)}`:""),Li=(t,e)=>!Object.is(t,e),Ra=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Ky=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},zd=t=>{const e=parseFloat(t);return isNaN(e)?t:e},kx=t=>{const e=It(t)?Number(t):NaN;return isNaN(e)?t:e};let Yp;const tu=()=>Yp||(Yp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sr(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=It(r)?Ax(r):sr(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(It(t)||St(t))return t}const Tx=/;(?![^(]*\))/g,Ox=/:([^]+)/,Ex=/\/\*[^]*?\*\//g;function Ax(t){const e={};return t.replace(Ex,"").split(Tx).forEach(n=>{if(n){const r=n.split(Ox);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function jt(t){let e="";if(It(t))e=t;else if(Ve(t))for(let n=0;n<t.length;n++){const r=jt(t[n]);r&&(e+=r+" ")}else if(St(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Mx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_x=lh(Mx);function Wy(t){return!!t||t===""}function Nx(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nu(t[r],e[r]);return n}function nu(t,e){if(t===e)return!0;let n=Gp(t),r=Gp(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Hr(t),r=Hr(e),n||r)return t===e;if(n=Ve(t),r=Ve(e),n||r)return n&&r?Nx(t,e):!1;if(n=St(t),r=St(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const s in t){const l=t.hasOwnProperty(s),a=e.hasOwnProperty(s);if(l&&!a||!l&&a||!nu(t[s],e[s]))return!1}}return String(t)===String(e)}function qy(t,e){return t.findIndex(n=>nu(n,e))}const Jy=t=>!!(t&&t.__v_isRef===!0),On=t=>It(t)?t:t==null?"":Ve(t)||St(t)&&(t.toString===Uy||!Xe(t.toString))?Jy(t)?On(t.value):JSON.stringify(t,Gy,2):String(t),Gy=(t,e)=>Jy(e)?Gy(t,e.value):cs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],o)=>(n[Wu(r,o)+" =>"]=i,n),{})}:Zc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Wu(n))}:Hr(e)?Wu(e):St(e)&&!Ve(e)&&!zy(e)?String(e):e,Wu=(t,e="")=>{var n;return Hr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sn;class Dx{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Sn,!e&&Sn&&(this.index=(Sn.scopes||(Sn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Sn;try{return Sn=this,e()}finally{Sn=n}}}on(){Sn=this}off(){Sn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Yy(){return Sn}function Px(t,e=!1){Sn&&Sn.cleanups.push(t)}let kt;const qu=new WeakSet;class Xy{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Sn&&Sn.active&&Sn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qu.has(this)&&(qu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xp(this),e1(this);const e=kt,n=Sr;kt=this,Sr=!0;try{return this.fn()}finally{t1(this),kt=e,Sr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)hh(e);this.deps=this.depsTail=void 0,Xp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Kd(this)&&this.run()}get dirty(){return Kd(this)}}let Zy=0,tl,nl;function Qy(t,e=!1){if(t.flags|=8,e){t.next=nl,nl=t;return}t.next=tl,tl=t}function dh(){Zy++}function fh(){if(--Zy>0)return;if(nl){let e=nl;for(nl=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;tl;){let e=tl;for(tl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function e1(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function t1(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),hh(r),$x(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Kd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(n1(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function n1(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Sl))return;t.globalVersion=Sl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Kd(t)){t.flags&=-3;return}const n=kt,r=Sr;kt=t,Sr=!0;try{e1(t);const i=t.fn(t._value);(e.version===0||Li(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{kt=n,Sr=r,t1(t),t.flags&=-3}}function hh(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)hh(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $x(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Sr=!0;const r1=[];function Ji(){r1.push(Sr),Sr=!1}function Gi(){const t=r1.pop();Sr=t===void 0?!0:t}function Xp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=kt;kt=void 0;try{e()}finally{kt=n}}}let Sl=0;class Lx{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ru{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!kt||!Sr||kt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==kt)n=this.activeLink=new Lx(kt,this),kt.deps?(n.prevDep=kt.depsTail,kt.depsTail.nextDep=n,kt.depsTail=n):kt.deps=kt.depsTail=n,i1(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=kt.depsTail,n.nextDep=void 0,kt.depsTail.nextDep=n,kt.depsTail=n,kt.deps===n&&(kt.deps=r)}return n}trigger(e){this.version++,Sl++,this.notify(e)}notify(e){dh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{fh()}}}function i1(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)i1(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const uc=new WeakMap,bo=Symbol(""),Wd=Symbol(""),kl=Symbol("");function un(t,e,n){if(Sr&&kt){let r=uc.get(t);r||uc.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new ru),i.map=r,i.key=n),i.track()}}function Qr(t,e,n,r,i,o){const s=uc.get(t);if(!s){Sl++;return}const l=a=>{a&&a.trigger()};if(dh(),e==="clear")s.forEach(l);else{const a=Ve(t),c=a&&uh(n);if(a&&n==="length"){const u=Number(r);s.forEach((d,f)=>{(f==="length"||f===kl||!Hr(f)&&f>=u)&&l(d)})}else switch((n!==void 0||s.has(void 0))&&l(s.get(n)),c&&l(s.get(kl)),e){case"add":a?c&&l(s.get("length")):(l(s.get(bo)),cs(t)&&l(s.get(Wd)));break;case"delete":a||(l(s.get(bo)),cs(t)&&l(s.get(Wd)));break;case"set":cs(t)&&l(s.get(bo));break}}fh()}function Ix(t,e){const n=uc.get(t);return n&&n.get(e)}function Uo(t){const e=ft(t);return e===t?e:(un(e,"iterate",kl),cr(t)?e:e.map(dn))}function iu(t){return un(t=ft(t),"iterate",kl),t}const Bx={__proto__:null,[Symbol.iterator](){return Ju(this,Symbol.iterator,dn)},concat(...t){return Uo(this).concat(...t.map(e=>Ve(e)?Uo(e):e))},entries(){return Ju(this,"entries",t=>(t[1]=dn(t[1]),t))},every(t,e){return Wr(this,"every",t,e,void 0,arguments)},filter(t,e){return Wr(this,"filter",t,e,n=>n.map(dn),arguments)},find(t,e){return Wr(this,"find",t,e,dn,arguments)},findIndex(t,e){return Wr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Wr(this,"findLast",t,e,dn,arguments)},findLastIndex(t,e){return Wr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Wr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Gu(this,"includes",t)},indexOf(...t){return Gu(this,"indexOf",t)},join(t){return Uo(this).join(t)},lastIndexOf(...t){return Gu(this,"lastIndexOf",t)},map(t,e){return Wr(this,"map",t,e,void 0,arguments)},pop(){return Rs(this,"pop")},push(...t){return Rs(this,"push",t)},reduce(t,...e){return Zp(this,"reduce",t,e)},reduceRight(t,...e){return Zp(this,"reduceRight",t,e)},shift(){return Rs(this,"shift")},some(t,e){return Wr(this,"some",t,e,void 0,arguments)},splice(...t){return Rs(this,"splice",t)},toReversed(){return Uo(this).toReversed()},toSorted(t){return Uo(this).toSorted(t)},toSpliced(...t){return Uo(this).toSpliced(...t)},unshift(...t){return Rs(this,"unshift",t)},values(){return Ju(this,"values",dn)}};function Ju(t,e,n){const r=iu(t),i=r[e]();return r!==t&&!cr(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const Vx=Array.prototype;function Wr(t,e,n,r,i,o){const s=iu(t),l=s!==t&&!cr(t),a=s[e];if(a!==Vx[e]){const d=a.apply(t,o);return l?dn(d):d}let c=n;s!==t&&(l?c=function(d,f){return n.call(this,dn(d),f,t)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,t)}));const u=a.call(s,c,r);return l&&i?i(u):u}function Zp(t,e,n,r){const i=iu(t);let o=n;return i!==t&&(cr(t)?n.length>3&&(o=function(s,l,a){return n.call(this,s,l,a,t)}):o=function(s,l,a){return n.call(this,s,dn(l),a,t)}),i[e](o,...r)}function Gu(t,e,n){const r=ft(t);un(r,"iterate",kl);const i=r[e](...n);return(i===-1||i===!1)&&gh(n[0])?(n[0]=ft(n[0]),r[e](...n)):i}function Rs(t,e,n=[]){Ji(),dh();const r=ft(t)[e].apply(t,n);return fh(),Gi(),r}const Rx=lh("__proto__,__v_isRef,__isVue"),o1=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hr));function Hx(t){Hr(t)||(t=String(t));const e=ft(this);return un(e,"has",t),e.hasOwnProperty(t)}class s1{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?Yx:u1:o?c1:a1).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Ve(e);if(!i){let a;if(s&&(a=Bx[n]))return a;if(n==="hasOwnProperty")return Hx}const l=Reflect.get(e,n,Ht(e)?e:r);return(Hr(n)?o1.has(n):Rx(n))||(i||un(e,"get",n),o)?l:Ht(l)?s&&uh(n)?l:l.value:St(l)?i?d1(l):ou(l):l}}class l1 extends s1{constructor(e=!1){super(!1,e)}set(e,n,r,i){let o=e[n];if(!this._isShallow){const a=Ao(o);if(!cr(r)&&!Ao(r)&&(o=ft(o),r=ft(r)),!Ve(e)&&Ht(o)&&!Ht(r))return a?!1:(o.value=r,!0)}const s=Ve(e)&&uh(n)?Number(n)<e.length:gt(e,n),l=Reflect.set(e,n,r,Ht(e)?e:i);return e===ft(i)&&(s?Li(r,o)&&Qr(e,"set",n,r):Qr(e,"add",n,r)),l}deleteProperty(e,n){const r=gt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Qr(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Hr(n)||!o1.has(n))&&un(e,"has",n),r}ownKeys(e){return un(e,"iterate",Ve(e)?"length":bo),Reflect.ownKeys(e)}}class Fx extends s1{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const jx=new l1,Ux=new Fx,zx=new l1(!0);const qd=t=>t,fa=t=>Reflect.getPrototypeOf(t);function Kx(t,e,n){return function(...r){const i=this.__v_raw,o=ft(i),s=cs(o),l=t==="entries"||t===Symbol.iterator&&s,a=t==="keys"&&s,c=i[t](...r),u=n?qd:e?Jd:dn;return!e&&un(o,"iterate",a?Wd:bo),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:l?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function ha(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Wx(t,e){const n={get(i){const o=this.__v_raw,s=ft(o),l=ft(i);t||(Li(i,l)&&un(s,"get",i),un(s,"get",l));const{has:a}=fa(s),c=e?qd:t?Jd:dn;if(a.call(s,i))return c(o.get(i));if(a.call(s,l))return c(o.get(l));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!t&&un(ft(i),"iterate",bo),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,s=ft(o),l=ft(i);return t||(Li(i,l)&&un(s,"has",i),un(s,"has",l)),i===l?o.has(i):o.has(i)||o.has(l)},forEach(i,o){const s=this,l=s.__v_raw,a=ft(l),c=e?qd:t?Jd:dn;return!t&&un(a,"iterate",bo),l.forEach((u,d)=>i.call(o,c(u),c(d),s))}};return Gt(n,t?{add:ha("add"),set:ha("set"),delete:ha("delete"),clear:ha("clear")}:{add(i){!e&&!cr(i)&&!Ao(i)&&(i=ft(i));const o=ft(this);return fa(o).has.call(o,i)||(o.add(i),Qr(o,"add",i,i)),this},set(i,o){!e&&!cr(o)&&!Ao(o)&&(o=ft(o));const s=ft(this),{has:l,get:a}=fa(s);let c=l.call(s,i);c||(i=ft(i),c=l.call(s,i));const u=a.call(s,i);return s.set(i,o),c?Li(o,u)&&Qr(s,"set",i,o):Qr(s,"add",i,o),this},delete(i){const o=ft(this),{has:s,get:l}=fa(o);let a=s.call(o,i);a||(i=ft(i),a=s.call(o,i)),l&&l.call(o,i);const c=o.delete(i);return a&&Qr(o,"delete",i,void 0),c},clear(){const i=ft(this),o=i.size!==0,s=i.clear();return o&&Qr(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Kx(i,t,e)}),n}function ph(t,e){const n=Wx(t,e);return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(gt(n,i)&&i in r?n:r,i,o)}const qx={get:ph(!1,!1)},Jx={get:ph(!1,!0)},Gx={get:ph(!0,!1)};const a1=new WeakMap,c1=new WeakMap,u1=new WeakMap,Yx=new WeakMap;function Xx(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zx(t){return t.__v_skip||!Object.isExtensible(t)?0:Xx(Cx(t))}function ou(t){return Ao(t)?t:mh(t,!1,jx,qx,a1)}function Qx(t){return mh(t,!1,zx,Jx,c1)}function d1(t){return mh(t,!0,Ux,Gx,u1)}function mh(t,e,n,r,i){if(!St(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=Zx(t);if(s===0)return t;const l=new Proxy(t,s===2?r:n);return i.set(t,l),l}function us(t){return Ao(t)?us(t.__v_raw):!!(t&&t.__v_isReactive)}function Ao(t){return!!(t&&t.__v_isReadonly)}function cr(t){return!!(t&&t.__v_isShallow)}function gh(t){return t?!!t.__v_raw:!1}function ft(t){const e=t&&t.__v_raw;return e?ft(e):t}function f1(t){return!gt(t,"__v_skip")&&Object.isExtensible(t)&&Ky(t,"__v_skip",!0),t}const dn=t=>St(t)?ou(t):t,Jd=t=>St(t)?d1(t):t;function Ht(t){return t?t.__v_isRef===!0:!1}function su(t){return eS(t,!1)}function eS(t,e){return Ht(t)?t:new tS(t,e)}class tS{constructor(e,n){this.dep=new ru,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ft(e),this._value=n?e:dn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||cr(e)||Ao(e);e=r?e:ft(e),Li(e,n)&&(this._rawValue=e,this._value=r?e:dn(e),this.dep.trigger())}}function xn(t){return Ht(t)?t.value:t}const nS={get:(t,e,n)=>e==="__v_raw"?t:xn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Ht(i)&&!Ht(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function h1(t){return us(t)?t:new Proxy(t,nS)}class rS{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new ru,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function iS(t){return new rS(t)}function oS(t){const e=Ve(t)?new Array(t.length):{};for(const n in t)e[n]=lS(t,n);return e}class sS{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ix(ft(this._object),this._key)}}function lS(t,e,n){const r=t[e];return Ht(r)?r:new sS(t,e,n)}class aS{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ru(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Sl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&kt!==this)return Qy(this,!0),!0}get value(){const e=this.dep.track();return n1(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function cS(t,e,n=!1){let r,i;return Xe(t)?r=t:(r=t.get,i=t.set),new aS(r,i,n)}const pa={},dc=new WeakMap;let ao;function uS(t,e=!1,n=ao){if(n){let r=dc.get(n);r||dc.set(n,r=[]),r.push(t)}}function dS(t,e,n=wt){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:l,call:a}=n,c=k=>i?k:cr(k)||i===!1||i===0?ei(k,1):ei(k);let u,d,f,p,g=!1,y=!1;if(Ht(t)?(d=()=>t.value,g=cr(t)):us(t)?(d=()=>c(t),g=!0):Ve(t)?(y=!0,g=t.some(k=>us(k)||cr(k)),d=()=>t.map(k=>{if(Ht(k))return k.value;if(us(k))return c(k);if(Xe(k))return a?a(k,2):k()})):Xe(t)?e?d=a?()=>a(t,2):t:d=()=>{if(f){Ji();try{f()}finally{Gi()}}const k=ao;ao=u;try{return a?a(t,3,[p]):t(p)}finally{ao=k}}:d=Br,e&&i){const k=d,I=i===!0?1/0:i;d=()=>ei(k(),I)}const x=Yy(),O=()=>{u.stop(),x&&x.active&&ch(x.effects,u)};if(o&&e){const k=e;e=(...I)=>{k(...I),O()}}let _=y?new Array(t.length).fill(pa):pa;const D=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(e){const I=u.run();if(i||g||(y?I.some((L,R)=>Li(L,_[R])):Li(I,_))){f&&f();const L=ao;ao=u;try{const R=[I,_===pa?void 0:y&&_[0]===pa?[]:_,p];a?a(e,3,R):e(...R),_=I}finally{ao=L}}}else u.run()};return l&&l(D),u=new Xy(d),u.scheduler=s?()=>s(D,!1):D,p=k=>uS(k,!1,u),f=u.onStop=()=>{const k=dc.get(u);if(k){if(a)a(k,4);else for(const I of k)I();dc.delete(u)}},e?r?D(!0):_=u.run():s?s(D.bind(null,!0),!0):u.run(),O.pause=u.pause.bind(u),O.resume=u.resume.bind(u),O.stop=O,O}function ei(t,e=1/0,n){if(e<=0||!St(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ht(t))ei(t.value,e,n);else if(Ve(t))for(let r=0;r<t.length;r++)ei(t[r],e,n);else if(Zc(t)||cs(t))t.forEach(r=>{ei(r,e,n)});else if(zy(t)){for(const r in t)ei(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ei(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gl(t,e,n,r){try{return r?t(...r):t()}catch(i){lu(i,e,n)}}function Tr(t,e,n,r){if(Xe(t)){const i=Gl(t,e,n,r);return i&&jy(i)&&i.catch(o=>{lu(o,e,n)}),i}if(Ve(t)){const i=[];for(let o=0;o<t.length;o++)i.push(Tr(t[o],e,n,r));return i}}function lu(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||wt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,a,c)===!1)return}l=l.parent}if(o){Ji(),Gl(o,null,10,[t,a,c]),Gi();return}}fS(t,n,i,r,s)}function fS(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const kn=[];let Nr=-1;const ds=[];let Ci=null,Yo=0;const p1=Promise.resolve();let fc=null;function au(t){const e=fc||p1;return t?e.then(this?t.bind(this):t):e}function hS(t){let e=Nr+1,n=kn.length;for(;e<n;){const r=e+n>>>1,i=kn[r],o=Tl(i);o<t||o===t&&i.flags&2?e=r+1:n=r}return e}function yh(t){if(!(t.flags&1)){const e=Tl(t),n=kn[kn.length-1];!n||!(t.flags&2)&&e>=Tl(n)?kn.push(t):kn.splice(hS(e),0,t),t.flags|=1,m1()}}function m1(){fc||(fc=p1.then(y1))}function pS(t){Ve(t)?ds.push(...t):Ci&&t.id===-1?Ci.splice(Yo+1,0,t):t.flags&1||(ds.push(t),t.flags|=1),m1()}function Qp(t,e,n=Nr+1){for(;n<kn.length;n++){const r=kn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;kn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function g1(t){if(ds.length){const e=[...new Set(ds)].sort((n,r)=>Tl(n)-Tl(r));if(ds.length=0,Ci){Ci.push(...e);return}for(Ci=e,Yo=0;Yo<Ci.length;Yo++){const n=Ci[Yo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ci=null,Yo=0}}const Tl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function y1(t){try{for(Nr=0;Nr<kn.length;Nr++){const e=kn[Nr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Gl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Nr<kn.length;Nr++){const e=kn[Nr];e&&(e.flags&=-2)}Nr=-1,kn.length=0,g1(),fc=null,(kn.length||ds.length)&&y1()}}let Vn=null,v1=null;function hc(t){const e=Vn;return Vn=t,v1=t&&t.type.__scopeId||null,e}function Hi(t,e=Vn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&um(-1);const o=hc(e);let s;try{s=t(...i)}finally{hc(o),r._d&&um(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Et(t,e){if(Vn===null)return t;const n=mu(Vn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,l,a=wt]=e[i];o&&(Xe(o)&&(o={mounted:o,updated:o}),o.deep&&ei(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:l,modifiers:a}))}return t}function to(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const l=i[s];o&&(l.oldValue=o[s].value);let a=l.dir[r];a&&(Ji(),Tr(a,n,8,[t.el,l,t,e]),Gi())}}const mS=Symbol("_vte"),b1=t=>t.__isTeleport,xi=Symbol("_leaveCb"),ma=Symbol("_enterCb");function gS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return du(()=>{t.isMounted=!0}),fu(()=>{t.isUnmounting=!0}),t}const nr=[Function,Array],w1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:nr,onEnter:nr,onAfterEnter:nr,onEnterCancelled:nr,onBeforeLeave:nr,onLeave:nr,onAfterLeave:nr,onLeaveCancelled:nr,onBeforeAppear:nr,onAppear:nr,onAfterAppear:nr,onAppearCancelled:nr},C1=t=>{const e=t.subTree;return e.component?C1(e.component):e},yS={name:"BaseTransition",props:w1,setup(t,{slots:e}){const n=Yl(),r=gS();return()=>{const i=e.default&&k1(e.default(),!0);if(!i||!i.length)return;const o=x1(i),s=ft(t),{mode:l}=s;if(r.isLeaving)return Yu(o);const a=em(o);if(!a)return Yu(o);let c=Gd(a,s,r,n,d=>c=d);a.type!==Bn&&Ol(a,c);let u=n.subTree&&em(n.subTree);if(u&&u.type!==Bn&&!fo(a,u)&&C1(n).type!==Bn){let d=Gd(u,s,r,n);if(Ol(u,d),l==="out-in"&&a.type!==Bn)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},Yu(o);l==="in-out"&&a.type!==Bn?d.delayLeave=(f,p,g)=>{const y=S1(r,u);y[String(u.key)]=u,f[xi]=()=>{p(),f[xi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function x1(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Bn){e=n;break}}return e}const vS=yS;function S1(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Gd(t,e,n,r,i){const{appear:o,mode:s,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:x,onAppear:O,onAfterAppear:_,onAppearCancelled:D}=e,k=String(t.key),I=S1(n,t),L=(T,C)=>{T&&Tr(T,r,9,C)},R=(T,C)=>{const V=C[1];L(T,C),Ve(T)?T.every(w=>w.length<=1)&&V():T.length<=1&&V()},U={mode:s,persisted:l,beforeEnter(T){let C=a;if(!n.isMounted)if(o)C=x||a;else return;T[xi]&&T[xi](!0);const V=I[k];V&&fo(t,V)&&V.el[xi]&&V.el[xi](),L(C,[T])},enter(T){let C=c,V=u,w=d;if(!n.isMounted)if(o)C=O||c,V=_||u,w=D||d;else return;let Y=!1;const J=T[ma]=he=>{Y||(Y=!0,he?L(w,[T]):L(V,[T]),U.delayedLeave&&U.delayedLeave(),T[ma]=void 0)};C?R(C,[T,J]):J()},leave(T,C){const V=String(t.key);if(T[ma]&&T[ma](!0),n.isUnmounting)return C();L(f,[T]);let w=!1;const Y=T[xi]=J=>{w||(w=!0,C(),J?L(y,[T]):L(g,[T]),T[xi]=void 0,I[V]===t&&delete I[V])};I[V]=t,p?R(p,[T,Y]):Y()},clone(T){const C=Gd(T,e,n,r,i);return i&&i(C),C}};return U}function Yu(t){if(cu(t))return t=Fi(t),t.children=null,t}function em(t){if(!cu(t))return b1(t.type)&&t.children?x1(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Xe(n.default))return n.default()}}function Ol(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ol(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function k1(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const l=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===Ze?(s.patchFlag&128&&i++,r=r.concat(k1(s.children,e,l))):(e||s.type!==Bn)&&r.push(l!=null?Fi(s,{key:l}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function vh(t,e){return Xe(t)?Gt({name:t.name},e,{setup:t}):t}function T1(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function pc(t,e,n,r,i=!1){if(Ve(t)){t.forEach((g,y)=>pc(g,e&&(Ve(e)?e[y]:e),n,r,i));return}if(rl(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&pc(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?mu(r.component):r.el,s=i?null:o,{i:l,r:a}=t,c=e&&e.r,u=l.refs===wt?l.refs={}:l.refs,d=l.setupState,f=ft(d),p=d===wt?()=>!1:g=>gt(f,g);if(c!=null&&c!==a&&(It(c)?(u[c]=null,p(c)&&(d[c]=null)):Ht(c)&&(c.value=null)),Xe(a))Gl(a,l,12,[s,u]);else{const g=It(a),y=Ht(a);if(g||y){const x=()=>{if(t.f){const O=g?p(a)?d[a]:u[a]:a.value;i?Ve(O)&&ch(O,o):Ve(O)?O.includes(o)||O.push(o):g?(u[a]=[o],p(a)&&(d[a]=u[a])):(a.value=[o],t.k&&(u[t.k]=a.value))}else g?(u[a]=s,p(a)&&(d[a]=s)):y&&(a.value=s,t.k&&(u[t.k]=s))};s?(x.id=-1,Jn(x,n)):x()}}}tu().requestIdleCallback;tu().cancelIdleCallback;const rl=t=>!!t.type.__asyncLoader,cu=t=>t.type.__isKeepAlive;function bS(t,e){O1(t,"a",e)}function wS(t,e){O1(t,"da",e)}function O1(t,e,n=on){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(uu(e,r,n),n){let i=n.parent;for(;i&&i.parent;)cu(i.parent.vnode)&&CS(r,e,n,i),i=i.parent}}function CS(t,e,n,r){const i=uu(e,t,r,!0);bh(()=>{ch(r[e],i)},n)}function uu(t,e,n=on,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{Ji();const l=Xl(n),a=Tr(e,n,t,s);return l(),Gi(),a});return r?i.unshift(o):i.push(o),o}}const hi=t=>(e,n=on)=>{(!Al||t==="sp")&&uu(t,(...r)=>e(...r),n)},xS=hi("bm"),du=hi("m"),SS=hi("bu"),kS=hi("u"),fu=hi("bum"),bh=hi("um"),TS=hi("sp"),OS=hi("rtg"),ES=hi("rtc");function AS(t,e=on){uu("ec",t,e)}const E1="components",MS="directives";function Ye(t,e){return A1(E1,t,!0,e)||t}const _S=Symbol.for("v-ndc");function wh(t){return A1(MS,t)}function A1(t,e,n=!0,r=!1){const i=Vn||on;if(i){const o=i.type;if(t===E1){const l=vk(o,!1);if(l&&(l===e||l===fr(e)||l===eu(fr(e))))return o}const s=tm(i[t]||o[t],e)||tm(i.appContext[t],e);return!s&&r?o:s}}function tm(t,e){return t&&(t[e]||t[fr(e)]||t[eu(fr(e))])}function sn(t,e,n,r){let i;const o=n,s=Ve(t);if(s||It(t)){const l=s&&us(t);let a=!1;l&&(a=!cr(t),t=iu(t)),i=new Array(t.length);for(let c=0,u=t.length;c<u;c++)i[c]=e(a?dn(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,o)}else if(St(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,o));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];i[a]=e(t[u],u,a,o)}}else i=[];return i}const Yd=t=>t?J1(t)?mu(t):Yd(t.parent):null,il=Gt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Yd(t.parent),$root:t=>Yd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>_1(t),$forceUpdate:t=>t.f||(t.f=()=>{yh(t.update)}),$nextTick:t=>t.n||(t.n=au.bind(t.proxy)),$watch:t=>QS.bind(t)}),Xu=(t,e)=>t!==wt&&!t.__isScriptSetup&&gt(t,e),NS={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(Xu(r,e))return s[e]=1,r[e];if(i!==wt&&gt(i,e))return s[e]=2,i[e];if((c=t.propsOptions[0])&&gt(c,e))return s[e]=3,o[e];if(n!==wt&&gt(n,e))return s[e]=4,n[e];Xd&&(s[e]=0)}}const u=il[e];let d,f;if(u)return e==="$attrs"&&un(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==wt&&gt(n,e))return s[e]=4,n[e];if(f=a.config.globalProperties,gt(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return Xu(i,e)?(i[e]=n,!0):r!==wt&&gt(r,e)?(r[e]=n,!0):gt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let l;return!!n[s]||t!==wt&&gt(t,s)||Xu(e,s)||(l=o[0])&&gt(l,s)||gt(r,s)||gt(il,s)||gt(i.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:gt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function nm(t){return Ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Xd=!0;function DS(t){const e=_1(t),n=t.proxy,r=t.ctx;Xd=!1,e.beforeCreate&&rm(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:g,activated:y,deactivated:x,beforeDestroy:O,beforeUnmount:_,destroyed:D,unmounted:k,render:I,renderTracked:L,renderTriggered:R,errorCaptured:U,serverPrefetch:T,expose:C,inheritAttrs:V,components:w,directives:Y,filters:J}=e;if(c&&PS(c,r,null),s)for(const Q in s){const Ce=s[Q];Xe(Ce)&&(r[Q]=Ce.bind(n))}if(i){const Q=i.call(n,n);St(Q)&&(t.data=ou(Q))}if(Xd=!0,o)for(const Q in o){const Ce=o[Q],We=Xe(Ce)?Ce.bind(n,n):Xe(Ce.get)?Ce.get.bind(n,n):Br,$e=!Xe(Ce)&&Xe(Ce.set)?Ce.set.bind(n):Br,et=tf({get:We,set:$e});Object.defineProperty(r,Q,{enumerable:!0,configurable:!0,get:()=>et.value,set:rt=>et.value=rt})}if(l)for(const Q in l)M1(l[Q],r,n,Q);if(a){const Q=Xe(a)?a.call(n):a;Reflect.ownKeys(Q).forEach(Ce=>{RS(Ce,Q[Ce])})}u&&rm(u,t,"c");function ce(Q,Ce){Ve(Ce)?Ce.forEach(We=>Q(We.bind(n))):Ce&&Q(Ce.bind(n))}if(ce(xS,d),ce(du,f),ce(SS,p),ce(kS,g),ce(bS,y),ce(wS,x),ce(AS,U),ce(ES,L),ce(OS,R),ce(fu,_),ce(bh,k),ce(TS,T),Ve(C))if(C.length){const Q=t.exposed||(t.exposed={});C.forEach(Ce=>{Object.defineProperty(Q,Ce,{get:()=>n[Ce],set:We=>n[Ce]=We})})}else t.exposed||(t.exposed={});I&&t.render===Br&&(t.render=I),V!=null&&(t.inheritAttrs=V),w&&(t.components=w),Y&&(t.directives=Y),T&&T1(t)}function PS(t,e,n=Br){Ve(t)&&(t=Zd(t));for(const r in t){const i=t[r];let o;St(i)?"default"in i?o=Ha(i.from||r,i.default,!0):o=Ha(i.from||r):o=Ha(i),Ht(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function rm(t,e,n){Tr(Ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function M1(t,e,n,r){let i=r.includes(".")?U1(n,r):()=>n[r];if(It(t)){const o=e[t];Xe(o)&&Fa(i,o)}else if(Xe(t))Fa(i,t.bind(n));else if(St(t))if(Ve(t))t.forEach(o=>M1(o,e,n,r));else{const o=Xe(t.handler)?t.handler.bind(n):e[t.handler];Xe(o)&&Fa(i,o,t)}}function _1(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,l=o.get(e);let a;return l?a=l:!i.length&&!n&&!r?a=e:(a={},i.length&&i.forEach(c=>mc(a,c,s,!0)),mc(a,e,s)),St(e)&&o.set(e,a),a}function mc(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&mc(t,o,n,!0),i&&i.forEach(s=>mc(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const l=$S[s]||n&&n[s];t[s]=l?l(t[s],e[s]):e[s]}return t}const $S={data:im,props:om,emits:om,methods:zs,computed:zs,beforeCreate:wn,created:wn,beforeMount:wn,mounted:wn,beforeUpdate:wn,updated:wn,beforeDestroy:wn,beforeUnmount:wn,destroyed:wn,unmounted:wn,activated:wn,deactivated:wn,errorCaptured:wn,serverPrefetch:wn,components:zs,directives:zs,watch:IS,provide:im,inject:LS};function im(t,e){return e?t?function(){return Gt(Xe(t)?t.call(this,this):t,Xe(e)?e.call(this,this):e)}:e:t}function LS(t,e){return zs(Zd(t),Zd(e))}function Zd(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function wn(t,e){return t?[...new Set([].concat(t,e))]:e}function zs(t,e){return t?Gt(Object.create(null),t,e):e}function om(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:Gt(Object.create(null),nm(t),nm(e??{})):e}function IS(t,e){if(!t)return e;if(!e)return t;const n=Gt(Object.create(null),t);for(const r in e)n[r]=wn(t[r],e[r]);return n}function N1(){return{app:null,config:{isNativeTag:bx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BS=0;function VS(t,e){return function(r,i=null){Xe(r)||(r=Gt({},r)),i!=null&&!St(i)&&(i=null);const o=N1(),s=new WeakSet,l=[];let a=!1;const c=o.app={_uid:BS++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:wk,get config(){return o.config},set config(u){},use(u,...d){return s.has(u)||(u&&Xe(u.install)?(s.add(u),u.install(c,...d)):Xe(u)&&(s.add(u),u(c,...d))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,d){return d?(o.components[u]=d,c):o.components[u]},directive(u,d){return d?(o.directives[u]=d,c):o.directives[u]},mount(u,d,f){if(!a){const p=c._ceVNode||lt(r,i);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),t(p,u,f),a=!0,c._container=u,u.__vue_app__=c,mu(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Tr(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return o.provides[u]=d,c},runWithContext(u){const d=fs;fs=c;try{return u()}finally{fs=d}}};return c}}let fs=null;function RS(t,e){if(on){let n=on.provides;const r=on.parent&&on.parent.provides;r===n&&(n=on.provides=Object.create(r)),n[t]=e}}function Ha(t,e,n=!1){const r=on||Vn;if(r||fs){const i=fs?fs._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Xe(e)?e.call(r&&r.proxy):e}}const D1={},P1=()=>Object.create(D1),$1=t=>Object.getPrototypeOf(t)===D1;function HS(t,e,n,r=!1){const i={},o=P1();t.propsDefaults=Object.create(null),L1(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Qx(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function FS(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,l=ft(i),[a]=t.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(hu(t.emitsOptions,f))continue;const p=e[f];if(a)if(gt(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const g=fr(f);i[g]=Qd(a,l,g,p,t,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{L1(t,e,i,o)&&(c=!0);let u;for(const d in l)(!e||!gt(e,d)&&((u=Lo(d))===d||!gt(e,u)))&&(a?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Qd(a,l,d,void 0,t,!0)):delete i[d]);if(o!==l)for(const d in o)(!e||!gt(e,d))&&(delete o[d],c=!0)}c&&Qr(t.attrs,"set","")}function L1(t,e,n,r){const[i,o]=t.propsOptions;let s=!1,l;if(e)for(let a in e){if(el(a))continue;const c=e[a];let u;i&&gt(i,u=fr(a))?!o||!o.includes(u)?n[u]=c:(l||(l={}))[u]=c:hu(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=ft(n),c=l||wt;for(let u=0;u<o.length;u++){const d=o[u];n[d]=Qd(i,a,d,c[d],t,!gt(c,d))}}return s}function Qd(t,e,n,r,i,o){const s=t[n];if(s!=null){const l=gt(s,"default");if(l&&r===void 0){const a=s.default;if(s.type!==Function&&!s.skipFactory&&Xe(a)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Xl(i);r=c[n]=a.call(null,e),u()}}else r=a;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!l?r=!1:s[1]&&(r===""||r===Lo(n))&&(r=!0))}return r}const jS=new WeakMap;function I1(t,e,n=!1){const r=n?jS:e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},l=[];let a=!1;if(!Xe(t)){const u=d=>{a=!0;const[f,p]=I1(d,e,!0);Gt(s,f),p&&l.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!a)return St(t)&&r.set(t,as),as;if(Ve(o))for(let u=0;u<o.length;u++){const d=fr(o[u]);sm(d)&&(s[d]=wt)}else if(o)for(const u in o){const d=fr(u);if(sm(d)){const f=o[u],p=s[d]=Ve(f)||Xe(f)?{type:f}:Gt({},f),g=p.type;let y=!1,x=!0;if(Ve(g))for(let O=0;O<g.length;++O){const _=g[O],D=Xe(_)&&_.name;if(D==="Boolean"){y=!0;break}else D==="String"&&(x=!1)}else y=Xe(g)&&g.name==="Boolean";p[0]=y,p[1]=x,(y||gt(p,"default"))&&l.push(d)}}const c=[s,l];return St(t)&&r.set(t,c),c}function sm(t){return t[0]!=="$"&&!el(t)}const B1=t=>t[0]==="_"||t==="$stable",Ch=t=>Ve(t)?t.map($r):[$r(t)],US=(t,e,n)=>{if(e._n)return e;const r=Hi((...i)=>Ch(e(...i)),n);return r._c=!1,r},V1=(t,e,n)=>{const r=t._ctx;for(const i in t){if(B1(i))continue;const o=t[i];if(Xe(o))e[i]=US(i,o,r);else if(o!=null){const s=Ch(o);e[i]=()=>s}}},R1=(t,e)=>{const n=Ch(e);t.slots.default=()=>n},H1=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},zS=(t,e,n)=>{const r=t.slots=P1();if(t.vnode.shapeFlag&32){const i=e._;i?(H1(r,e,n),n&&Ky(r,"_",i,!0)):V1(e,r)}else e&&R1(t,e)},KS=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=wt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?o=!1:H1(i,e,n):(o=!e.$stable,V1(e,i)),s=e}else e&&(R1(t,e),s={default:1});if(o)for(const l in i)!B1(l)&&s[l]==null&&delete i[l]},Jn=sk;function WS(t){return qS(t)}function qS(t,e){const n=tu();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=Br,insertStaticContent:g}=t,y=(N,$,H,j=null,G=null,ee=null,ae=void 0,ne=null,re=!!$.dynamicChildren)=>{if(N===$)return;N&&!fo(N,$)&&(j=z(N),rt(N,G,ee,!0),N=null),$.patchFlag===-2&&(re=!1,$.dynamicChildren=null);const{type:te,ref:ge,shapeFlag:ue}=$;switch(te){case pu:x(N,$,H,j);break;case Bn:O(N,$,H,j);break;case Qu:N==null&&_($,H,j,ae);break;case Ze:w(N,$,H,j,G,ee,ae,ne,re);break;default:ue&1?I(N,$,H,j,G,ee,ae,ne,re):ue&6?Y(N,$,H,j,G,ee,ae,ne,re):(ue&64||ue&128)&&te.process(N,$,H,j,G,ee,ae,ne,re,X)}ge!=null&&G&&pc(ge,N&&N.ref,ee,$||N,!$)},x=(N,$,H,j)=>{if(N==null)r($.el=l($.children),H,j);else{const G=$.el=N.el;$.children!==N.children&&c(G,$.children)}},O=(N,$,H,j)=>{N==null?r($.el=a($.children||""),H,j):$.el=N.el},_=(N,$,H,j)=>{[N.el,N.anchor]=g(N.children,$,H,j,N.el,N.anchor)},D=({el:N,anchor:$},H,j)=>{let G;for(;N&&N!==$;)G=f(N),r(N,H,j),N=G;r($,H,j)},k=({el:N,anchor:$})=>{let H;for(;N&&N!==$;)H=f(N),i(N),N=H;i($)},I=(N,$,H,j,G,ee,ae,ne,re)=>{$.type==="svg"?ae="svg":$.type==="math"&&(ae="mathml"),N==null?L($,H,j,G,ee,ae,ne,re):T(N,$,G,ee,ae,ne,re)},L=(N,$,H,j,G,ee,ae,ne)=>{let re,te;const{props:ge,shapeFlag:ue,transition:me,dirs:ye}=N;if(re=N.el=s(N.type,ee,ge&&ge.is,ge),ue&8?u(re,N.children):ue&16&&U(N.children,re,null,j,G,Zu(N,ee),ae,ne),ye&&to(N,null,j,"created"),R(re,N,N.scopeId,ae,j),ge){for(const Se in ge)Se!=="value"&&!el(Se)&&o(re,Se,null,ge[Se],ee,j);"value"in ge&&o(re,"value",null,ge.value,ee),(te=ge.onVnodeBeforeMount)&&_r(te,j,N)}ye&&to(N,null,j,"beforeMount");const se=JS(G,me);se&&me.beforeEnter(re),r(re,$,H),((te=ge&&ge.onVnodeMounted)||se||ye)&&Jn(()=>{te&&_r(te,j,N),se&&me.enter(re),ye&&to(N,null,j,"mounted")},G)},R=(N,$,H,j,G)=>{if(H&&p(N,H),j)for(let ee=0;ee<j.length;ee++)p(N,j[ee]);if(G){let ee=G.subTree;if($===ee||K1(ee.type)&&(ee.ssContent===$||ee.ssFallback===$)){const ae=G.vnode;R(N,ae,ae.scopeId,ae.slotScopeIds,G.parent)}}},U=(N,$,H,j,G,ee,ae,ne,re=0)=>{for(let te=re;te<N.length;te++){const ge=N[te]=ne?Si(N[te]):$r(N[te]);y(null,ge,$,H,j,G,ee,ae,ne)}},T=(N,$,H,j,G,ee,ae)=>{const ne=$.el=N.el;let{patchFlag:re,dynamicChildren:te,dirs:ge}=$;re|=N.patchFlag&16;const ue=N.props||wt,me=$.props||wt;let ye;if(H&&no(H,!1),(ye=me.onVnodeBeforeUpdate)&&_r(ye,H,$,N),ge&&to($,N,H,"beforeUpdate"),H&&no(H,!0),(ue.innerHTML&&me.innerHTML==null||ue.textContent&&me.textContent==null)&&u(ne,""),te?C(N.dynamicChildren,te,ne,H,j,Zu($,G),ee):ae||Ce(N,$,ne,null,H,j,Zu($,G),ee,!1),re>0){if(re&16)V(ne,ue,me,H,G);else if(re&2&&ue.class!==me.class&&o(ne,"class",null,me.class,G),re&4&&o(ne,"style",ue.style,me.style,G),re&8){const se=$.dynamicProps;for(let Se=0;Se<se.length;Se++){const Me=se[Se],we=ue[Me],E=me[Me];(E!==we||Me==="value")&&o(ne,Me,we,E,G,H)}}re&1&&N.children!==$.children&&u(ne,$.children)}else!ae&&te==null&&V(ne,ue,me,H,G);((ye=me.onVnodeUpdated)||ge)&&Jn(()=>{ye&&_r(ye,H,$,N),ge&&to($,N,H,"updated")},j)},C=(N,$,H,j,G,ee,ae)=>{for(let ne=0;ne<$.length;ne++){const re=N[ne],te=$[ne],ge=re.el&&(re.type===Ze||!fo(re,te)||re.shapeFlag&70)?d(re.el):H;y(re,te,ge,null,j,G,ee,ae,!0)}},V=(N,$,H,j,G)=>{if($!==H){if($!==wt)for(const ee in $)!el(ee)&&!(ee in H)&&o(N,ee,$[ee],null,G,j);for(const ee in H){if(el(ee))continue;const ae=H[ee],ne=$[ee];ae!==ne&&ee!=="value"&&o(N,ee,ne,ae,G,j)}"value"in H&&o(N,"value",$.value,H.value,G)}},w=(N,$,H,j,G,ee,ae,ne,re)=>{const te=$.el=N?N.el:l(""),ge=$.anchor=N?N.anchor:l("");let{patchFlag:ue,dynamicChildren:me,slotScopeIds:ye}=$;ye&&(ne=ne?ne.concat(ye):ye),N==null?(r(te,H,j),r(ge,H,j),U($.children||[],H,ge,G,ee,ae,ne,re)):ue>0&&ue&64&&me&&N.dynamicChildren?(C(N.dynamicChildren,me,H,G,ee,ae,ne),($.key!=null||G&&$===G.subTree)&&F1(N,$,!0)):Ce(N,$,H,ge,G,ee,ae,ne,re)},Y=(N,$,H,j,G,ee,ae,ne,re)=>{$.slotScopeIds=ne,N==null?$.shapeFlag&512?G.ctx.activate($,H,j,ae,re):J($,H,j,G,ee,ae,re):he(N,$,re)},J=(N,$,H,j,G,ee,ae)=>{const ne=N.component=hk(N,j,G);if(cu(N)&&(ne.ctx.renderer=X),pk(ne,!1,ae),ne.asyncDep){if(G&&G.registerDep(ne,ce,ae),!N.el){const re=ne.subTree=lt(Bn);O(null,re,$,H)}}else ce(ne,N,$,H,G,ee,ae)},he=(N,$,H)=>{const j=$.component=N.component;if(ik(N,$,H))if(j.asyncDep&&!j.asyncResolved){Q(j,$,H);return}else j.next=$,j.update();else $.el=N.el,j.vnode=$},ce=(N,$,H,j,G,ee,ae)=>{const ne=()=>{if(N.isMounted){let{next:ue,bu:me,u:ye,parent:se,vnode:Se}=N;{const A=j1(N);if(A){ue&&(ue.el=Se.el,Q(N,ue,ae)),A.asyncDep.then(()=>{N.isUnmounted||ne()});return}}let Me=ue,we;no(N,!1),ue?(ue.el=Se.el,Q(N,ue,ae)):ue=Se,me&&Ra(me),(we=ue.props&&ue.props.onVnodeBeforeUpdate)&&_r(we,se,ue,Se),no(N,!0);const E=am(N),v=N.subTree;N.subTree=E,y(v,E,d(v.el),z(v),N,G,ee),ue.el=E.el,Me===null&&ok(N,E.el),ye&&Jn(ye,G),(we=ue.props&&ue.props.onVnodeUpdated)&&Jn(()=>_r(we,se,ue,Se),G)}else{let ue;const{el:me,props:ye}=$,{bm:se,m:Se,parent:Me,root:we,type:E}=N,v=rl($);no(N,!1),se&&Ra(se),!v&&(ue=ye&&ye.onVnodeBeforeMount)&&_r(ue,Me,$),no(N,!0);{we.ce&&we.ce._injectChildStyle(E);const A=N.subTree=am(N);y(null,A,H,j,N,G,ee),$.el=A.el}if(Se&&Jn(Se,G),!v&&(ue=ye&&ye.onVnodeMounted)){const A=$;Jn(()=>_r(ue,Me,A),G)}($.shapeFlag&256||Me&&rl(Me.vnode)&&Me.vnode.shapeFlag&256)&&N.a&&Jn(N.a,G),N.isMounted=!0,$=H=j=null}};N.scope.on();const re=N.effect=new Xy(ne);N.scope.off();const te=N.update=re.run.bind(re),ge=N.job=re.runIfDirty.bind(re);ge.i=N,ge.id=N.uid,re.scheduler=()=>yh(ge),no(N,!0),te()},Q=(N,$,H)=>{$.component=N;const j=N.vnode.props;N.vnode=$,N.next=null,FS(N,$.props,j,H),KS(N,$.children,H),Ji(),Qp(N),Gi()},Ce=(N,$,H,j,G,ee,ae,ne,re=!1)=>{const te=N&&N.children,ge=N?N.shapeFlag:0,ue=$.children,{patchFlag:me,shapeFlag:ye}=$;if(me>0){if(me&128){$e(te,ue,H,j,G,ee,ae,ne,re);return}else if(me&256){We(te,ue,H,j,G,ee,ae,ne,re);return}}ye&8?(ge&16&&dt(te,G,ee),ue!==te&&u(H,ue)):ge&16?ye&16?$e(te,ue,H,j,G,ee,ae,ne,re):dt(te,G,ee,!0):(ge&8&&u(H,""),ye&16&&U(ue,H,j,G,ee,ae,ne,re))},We=(N,$,H,j,G,ee,ae,ne,re)=>{N=N||as,$=$||as;const te=N.length,ge=$.length,ue=Math.min(te,ge);let me;for(me=0;me<ue;me++){const ye=$[me]=re?Si($[me]):$r($[me]);y(N[me],ye,H,null,G,ee,ae,ne,re)}te>ge?dt(N,G,ee,!0,!1,ue):U($,H,j,G,ee,ae,ne,re,ue)},$e=(N,$,H,j,G,ee,ae,ne,re)=>{let te=0;const ge=$.length;let ue=N.length-1,me=ge-1;for(;te<=ue&&te<=me;){const ye=N[te],se=$[te]=re?Si($[te]):$r($[te]);if(fo(ye,se))y(ye,se,H,null,G,ee,ae,ne,re);else break;te++}for(;te<=ue&&te<=me;){const ye=N[ue],se=$[me]=re?Si($[me]):$r($[me]);if(fo(ye,se))y(ye,se,H,null,G,ee,ae,ne,re);else break;ue--,me--}if(te>ue){if(te<=me){const ye=me+1,se=ye<ge?$[ye].el:j;for(;te<=me;)y(null,$[te]=re?Si($[te]):$r($[te]),H,se,G,ee,ae,ne,re),te++}}else if(te>me)for(;te<=ue;)rt(N[te],G,ee,!0),te++;else{const ye=te,se=te,Se=new Map;for(te=se;te<=me;te++){const F=$[te]=re?Si($[te]):$r($[te]);F.key!=null&&Se.set(F.key,te)}let Me,we=0;const E=me-se+1;let v=!1,A=0;const B=new Array(E);for(te=0;te<E;te++)B[te]=0;for(te=ye;te<=ue;te++){const F=N[te];if(we>=E){rt(F,G,ee,!0);continue}let K;if(F.key!=null)K=Se.get(F.key);else for(Me=se;Me<=me;Me++)if(B[Me-se]===0&&fo(F,$[Me])){K=Me;break}K===void 0?rt(F,G,ee,!0):(B[K-se]=te+1,K>=A?A=K:v=!0,y(F,$[K],H,null,G,ee,ae,ne,re),we++)}const M=v?GS(B):as;for(Me=M.length-1,te=E-1;te>=0;te--){const F=se+te,K=$[F],de=F+1<ge?$[F+1].el:j;B[te]===0?y(null,K,H,de,G,ee,ae,ne,re):v&&(Me<0||te!==M[Me]?et(K,H,de,2):Me--)}}},et=(N,$,H,j,G=null)=>{const{el:ee,type:ae,transition:ne,children:re,shapeFlag:te}=N;if(te&6){et(N.component.subTree,$,H,j);return}if(te&128){N.suspense.move($,H,j);return}if(te&64){ae.move(N,$,H,X);return}if(ae===Ze){r(ee,$,H);for(let ue=0;ue<re.length;ue++)et(re[ue],$,H,j);r(N.anchor,$,H);return}if(ae===Qu){D(N,$,H);return}if(j!==2&&te&1&&ne)if(j===0)ne.beforeEnter(ee),r(ee,$,H),Jn(()=>ne.enter(ee),G);else{const{leave:ue,delayLeave:me,afterLeave:ye}=ne,se=()=>r(ee,$,H),Se=()=>{ue(ee,()=>{se(),ye&&ye()})};me?me(ee,se,Se):Se()}else r(ee,$,H)},rt=(N,$,H,j=!1,G=!1)=>{const{type:ee,props:ae,ref:ne,children:re,dynamicChildren:te,shapeFlag:ge,patchFlag:ue,dirs:me,cacheIndex:ye}=N;if(ue===-2&&(G=!1),ne!=null&&pc(ne,null,H,N,!0),ye!=null&&($.renderCache[ye]=void 0),ge&256){$.ctx.deactivate(N);return}const se=ge&1&&me,Se=!rl(N);let Me;if(Se&&(Me=ae&&ae.onVnodeBeforeUnmount)&&_r(Me,$,N),ge&6)je(N.component,H,j);else{if(ge&128){N.suspense.unmount(H,j);return}se&&to(N,null,$,"beforeUnmount"),ge&64?N.type.remove(N,$,H,X,j):te&&!te.hasOnce&&(ee!==Ze||ue>0&&ue&64)?dt(te,$,H,!1,!0):(ee===Ze&&ue&384||!G&&ge&16)&&dt(re,$,H),j&&vt(N)}(Se&&(Me=ae&&ae.onVnodeUnmounted)||se)&&Jn(()=>{Me&&_r(Me,$,N),se&&to(N,null,$,"unmounted")},H)},vt=N=>{const{type:$,el:H,anchor:j,transition:G}=N;if($===Ze){Te(H,j);return}if($===Qu){k(N);return}const ee=()=>{i(H),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(N.shapeFlag&1&&G&&!G.persisted){const{leave:ae,delayLeave:ne}=G,re=()=>ae(H,ee);ne?ne(N.el,ee,re):re()}else ee()},Te=(N,$)=>{let H;for(;N!==$;)H=f(N),i(N),N=H;i($)},je=(N,$,H)=>{const{bum:j,scope:G,job:ee,subTree:ae,um:ne,m:re,a:te}=N;lm(re),lm(te),j&&Ra(j),G.stop(),ee&&(ee.flags|=8,rt(ae,N,$,H)),ne&&Jn(ne,$),Jn(()=>{N.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},dt=(N,$,H,j=!1,G=!1,ee=0)=>{for(let ae=ee;ae<N.length;ae++)rt(N[ae],$,H,j,G)},z=N=>{if(N.shapeFlag&6)return z(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const $=f(N.anchor||N.el),H=$&&$[mS];return H?f(H):$};let W=!1;const Z=(N,$,H)=>{N==null?$._vnode&&rt($._vnode,null,null,!0):y($._vnode||null,N,$,null,null,null,H),$._vnode=N,W||(W=!0,Qp(),g1(),W=!1)},X={p:y,um:rt,m:et,r:vt,mt:J,mc:U,pc:Ce,pbc:C,n:z,o:t};return{render:Z,hydrate:void 0,createApp:VS(Z)}}function Zu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function no({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function JS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function F1(t,e,n=!1){const r=t.children,i=e.children;if(Ve(r)&&Ve(i))for(let o=0;o<r.length;o++){const s=r[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=Si(i[o]),l.el=s.el),!n&&l.patchFlag!==-2&&F1(s,l)),l.type===pu&&(l.el=s.el)}}function GS(t){const e=t.slice(),n=[0];let r,i,o,s,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)l=o+s>>1,t[n[l]]<c?o=l+1:s=l;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}function j1(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:j1(e)}function lm(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const YS=Symbol.for("v-scx"),XS=()=>Ha(YS);function ZS(t,e){return xh(t,null,e)}function Fa(t,e,n){return xh(t,e,n)}function xh(t,e,n=wt){const{immediate:r,deep:i,flush:o,once:s}=n,l=Gt({},n),a=e&&r||!e&&o!=="post";let c;if(Al){if(o==="sync"){const p=XS();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=Br,p.resume=Br,p.pause=Br,p}}const u=on;l.call=(p,g,y)=>Tr(p,u,g,y);let d=!1;o==="post"?l.scheduler=p=>{Jn(p,u&&u.suspense)}:o!=="sync"&&(d=!0,l.scheduler=(p,g)=>{g?p():yh(p)}),l.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=dS(t,e,l);return Al&&(c?c.push(f):a&&f()),f}function QS(t,e,n){const r=this.proxy,i=It(t)?t.includes(".")?U1(r,t):()=>r[t]:t.bind(r,r);let o;Xe(e)?o=e:(o=e.handler,n=e);const s=Xl(this),l=xh(i,o.bind(r),n);return s(),l}function U1(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const ek=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${fr(e)}Modifiers`]||t[`${Lo(e)}Modifiers`];function tk(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||wt;let i=n;const o=e.startsWith("update:"),s=o&&ek(r,e.slice(7));s&&(s.trim&&(i=n.map(u=>It(u)?u.trim():u)),s.number&&(i=n.map(zd)));let l,a=r[l=Ku(e)]||r[l=Ku(fr(e))];!a&&o&&(a=r[l=Ku(Lo(e))]),a&&Tr(a,t,6,i);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Tr(c,t,6,i)}}function z1(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let s={},l=!1;if(!Xe(t)){const a=c=>{const u=z1(c,e,!0);u&&(l=!0,Gt(s,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!l?(St(t)&&r.set(t,null),null):(Ve(o)?o.forEach(a=>s[a]=null):Gt(s,o),St(t)&&r.set(t,s),s)}function hu(t,e){return!t||!Xc(e)?!1:(e=e.slice(2).replace(/Once$/,""),gt(t,e[0].toLowerCase()+e.slice(1))||gt(t,Lo(e))||gt(t,e))}function am(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:l,emit:a,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:g,inheritAttrs:y}=t,x=hc(t);let O,_;try{if(n.shapeFlag&4){const k=i||r,I=k;O=$r(c.call(I,k,u,d,p,f,g)),_=l}else{const k=e;O=$r(k.length>1?k(d,{attrs:l,slots:s,emit:a}):k(d,null)),_=e.props?l:nk(l)}}catch(k){ol.length=0,lu(k,t,1),O=lt(Bn)}let D=O;if(_&&y!==!1){const k=Object.keys(_),{shapeFlag:I}=D;k.length&&I&7&&(o&&k.some(ah)&&(_=rk(_,o)),D=Fi(D,_,!1,!0))}return n.dirs&&(D=Fi(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&Ol(D,n.transition),O=D,hc(x),O}const nk=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xc(n))&&((e||(e={}))[n]=t[n]);return e},rk=(t,e)=>{const n={};for(const r in t)(!ah(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function ik(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:l,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?cm(r,s,c):!!s;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(s[f]!==r[f]&&!hu(c,f))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===s?!1:r?s?cm(r,s,c):!0:!!s;return!1}function cm(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!hu(n,o))return!0}return!1}function ok({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const K1=t=>t.__isSuspense;function sk(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):pS(t)}const Ze=Symbol.for("v-fgt"),pu=Symbol.for("v-txt"),Bn=Symbol.for("v-cmt"),Qu=Symbol.for("v-stc"),ol=[];let Zn=null;function q(t=!1){ol.push(Zn=t?null:[])}function lk(){ol.pop(),Zn=ol[ol.length-1]||null}let El=1;function um(t,e=!1){El+=t,t<0&&Zn&&e&&(Zn.hasOnce=!0)}function W1(t){return t.dynamicChildren=El>0?Zn||as:null,lk(),El>0&&Zn&&Zn.push(t),t}function oe(t,e,n,r,i,o){return W1(S(t,e,n,r,i,o,!0))}function Tt(t,e,n,r,i){return W1(lt(t,e,n,r,i,!0))}function gc(t){return t?t.__v_isVNode===!0:!1}function fo(t,e){return t.type===e.type&&t.key===e.key}const q1=({key:t})=>t??null,ja=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?It(t)||Ht(t)||Xe(t)?{i:Vn,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,i=null,o=t===Ze?0:1,s=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&q1(e),ref:e&&ja(e),scopeId:v1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Vn};return l?(Sh(a,n),o&128&&t.normalize(a)):n&&(a.shapeFlag|=It(n)?8:16),El>0&&!s&&Zn&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Zn.push(a),a}const lt=ak;function ak(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===_S)&&(t=Bn),gc(t)){const l=Fi(t,e,!0);return n&&Sh(l,n),El>0&&!o&&Zn&&(l.shapeFlag&6?Zn[Zn.indexOf(t)]=l:Zn.push(l)),l.patchFlag=-2,l}if(bk(t)&&(t=t.__vccOpts),e){e=ck(e);let{class:l,style:a}=e;l&&!It(l)&&(e.class=jt(l)),St(a)&&(gh(a)&&!Ve(a)&&(a=Gt({},a)),e.style=sr(a))}const s=It(t)?1:K1(t)?128:b1(t)?64:St(t)?4:Xe(t)?2:0;return S(t,e,n,r,i,s,o,!0)}function ck(t){return t?gh(t)||$1(t)?Gt({},t):t:null}function Fi(t,e,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:l,transition:a}=t,c=e?uk(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&q1(c),ref:e&&e.ref?n&&o?Ve(o)?o.concat(ja(e)):[o,ja(e)]:ja(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Fi(t.ssContent),ssFallback:t.ssFallback&&Fi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&Ol(u,a.clone(u)),u}function br(t=" ",e=0){return lt(pu,null,t,e)}function Ne(t="",e=!1){return e?(q(),Tt(Bn,null,t)):lt(Bn,null,t)}function $r(t){return t==null||typeof t=="boolean"?lt(Bn):Ve(t)?lt(Ze,null,t.slice()):gc(t)?Si(t):lt(pu,null,String(t))}function Si(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Fi(t)}function Sh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ve(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Sh(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!$1(e)?e._ctx=Vn:i===3&&Vn&&(Vn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Xe(e)?(e={default:e,_ctx:Vn},n=32):(e=String(e),r&64?(n=16,e=[br(e)]):n=8);t.children=e,t.shapeFlag|=n}function uk(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=jt([e.class,r.class]));else if(i==="style")e.style=sr([e.style,r.style]);else if(Xc(i)){const o=e[i],s=r[i];s&&o!==s&&!(Ve(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function _r(t,e,n,r=null){Tr(t,e,7,[n,r])}const dk=N1();let fk=0;function hk(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||dk,o={uid:fk++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Dx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:I1(r,i),emitsOptions:z1(r,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=tk.bind(null,o),t.ce&&t.ce(o),o}let on=null;const Yl=()=>on||Vn;let yc,ef;{const t=tu(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};yc=e("__VUE_INSTANCE_SETTERS__",n=>on=n),ef=e("__VUE_SSR_SETTERS__",n=>Al=n)}const Xl=t=>{const e=on;return yc(t),t.scope.on(),()=>{t.scope.off(),yc(e)}},dm=()=>{on&&on.scope.off(),yc(null)};function J1(t){return t.vnode.shapeFlag&4}let Al=!1;function pk(t,e=!1,n=!1){e&&ef(e);const{props:r,children:i}=t.vnode,o=J1(t);HS(t,r,o,e),zS(t,i,n);const s=o?mk(t,e):void 0;return e&&ef(!1),s}function mk(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,NS);const{setup:r}=n;if(r){Ji();const i=t.setupContext=r.length>1?yk(t):null,o=Xl(t),s=Gl(r,t,0,[t.props,i]),l=jy(s);if(Gi(),o(),(l||t.sp)&&!rl(t)&&T1(t),l){if(s.then(dm,dm),e)return s.then(a=>{fm(t,a)}).catch(a=>{lu(a,t,0)});t.asyncDep=s}else fm(t,s)}else G1(t)}function fm(t,e,n){Xe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:St(e)&&(t.setupState=h1(e)),G1(t)}function G1(t,e,n){const r=t.type;t.render||(t.render=r.render||Br);{const i=Xl(t);Ji();try{DS(t)}finally{Gi(),i()}}}const gk={get(t,e){return un(t,"get",""),t[e]}};function yk(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,gk),slots:t.slots,emit:t.emit,expose:e}}function mu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(h1(f1(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in il)return il[n](t)},has(e,n){return n in e||n in il}})):t.proxy}function vk(t,e=!0){return Xe(t)?t.displayName||t.name:t.name||e&&t.__name}function bk(t){return Xe(t)&&"__vccOpts"in t}const tf=(t,e)=>cS(t,e,Al);function gu(t,e,n){const r=arguments.length;return r===2?St(e)&&!Ve(e)?gc(e)?lt(t,null,[e]):lt(t,e):lt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&gc(n)&&(n=[n]),lt(t,e,n))}const wk="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nf;const hm=typeof window<"u"&&window.trustedTypes;if(hm)try{nf=hm.createPolicy("vue",{createHTML:t=>t})}catch{}const Y1=nf?t=>nf.createHTML(t):t=>t,Ck="http://www.w3.org/2000/svg",xk="http://www.w3.org/1998/Math/MathML",Yr=typeof document<"u"?document:null,pm=Yr&&Yr.createElement("template"),Sk={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Yr.createElementNS(Ck,t):e==="mathml"?Yr.createElementNS(xk,t):n?Yr.createElement(t,{is:n}):Yr.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Yr.createTextNode(t),createComment:t=>Yr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{pm.innerHTML=Y1(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=pm.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},gi="transition",Hs="animation",Ml=Symbol("_vtc"),X1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},kk=Gt({},w1,X1),Tk=t=>(t.displayName="Transition",t.props=kk,t),Ok=Tk((t,{slots:e})=>gu(vS,Ek(t),e)),ro=(t,e=[])=>{Ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},mm=t=>t?Ve(t)?t.some(e=>e.length>1):t.length>1:!1;function Ek(t){const e={};for(const w in t)w in X1||(e[w]=t[w]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=o,appearActiveClass:c=s,appearToClass:u=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=Ak(i),y=g&&g[0],x=g&&g[1],{onBeforeEnter:O,onEnter:_,onEnterCancelled:D,onLeave:k,onLeaveCancelled:I,onBeforeAppear:L=O,onAppear:R=_,onAppearCancelled:U=D}=e,T=(w,Y,J,he)=>{w._enterCancelled=he,io(w,Y?u:l),io(w,Y?c:s),J&&J()},C=(w,Y)=>{w._isLeaving=!1,io(w,d),io(w,p),io(w,f),Y&&Y()},V=w=>(Y,J)=>{const he=w?R:_,ce=()=>T(Y,w,J);ro(he,[Y,ce]),gm(()=>{io(Y,w?a:o),qr(Y,w?u:l),mm(he)||ym(Y,r,y,ce)})};return Gt(e,{onBeforeEnter(w){ro(O,[w]),qr(w,o),qr(w,s)},onBeforeAppear(w){ro(L,[w]),qr(w,a),qr(w,c)},onEnter:V(!1),onAppear:V(!0),onLeave(w,Y){w._isLeaving=!0;const J=()=>C(w,Y);qr(w,d),w._enterCancelled?(qr(w,f),wm()):(wm(),qr(w,f)),gm(()=>{w._isLeaving&&(io(w,d),qr(w,p),mm(k)||ym(w,r,x,J))}),ro(k,[w,J])},onEnterCancelled(w){T(w,!1,void 0,!0),ro(D,[w])},onAppearCancelled(w){T(w,!0,void 0,!0),ro(U,[w])},onLeaveCancelled(w){C(w),ro(I,[w])}})}function Ak(t){if(t==null)return null;if(St(t))return[ed(t.enter),ed(t.leave)];{const e=ed(t);return[e,e]}}function ed(t){return kx(t)}function qr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ml]||(t[Ml]=new Set)).add(e)}function io(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ml];n&&(n.delete(e),n.size||(t[Ml]=void 0))}function gm(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Mk=0;function ym(t,e,n,r){const i=t._endId=++Mk,o=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:s,timeout:l,propCount:a}=_k(t,e);if(!s)return r();const c=s+"end";let u=0;const d=()=>{t.removeEventListener(c,f),o()},f=p=>{p.target===t&&++u>=a&&d()};setTimeout(()=>{u<a&&d()},l+1),t.addEventListener(c,f)}function _k(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),i=r(`${gi}Delay`),o=r(`${gi}Duration`),s=vm(i,o),l=r(`${Hs}Delay`),a=r(`${Hs}Duration`),c=vm(l,a);let u=null,d=0,f=0;e===gi?s>0&&(u=gi,d=s,f=o.length):e===Hs?c>0&&(u=Hs,d=c,f=a.length):(d=Math.max(s,c),u=d>0?s>c?gi:Hs:null,f=u?u===gi?o.length:a.length:0);const p=u===gi&&/\b(transform|all)(,|$)/.test(r(`${gi}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function vm(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>bm(n)+bm(t[r])))}function bm(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function wm(){return document.body.offsetHeight}function Nk(t,e,n){const r=t[Ml];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Cm=Symbol("_vod"),Dk=Symbol("_vsh"),Pk=Symbol(""),$k=/(^|;)\s*display\s*:/;function Lk(t,e,n){const r=t.style,i=It(n);let o=!1;if(n&&!i){if(e)if(It(e))for(const s of e.split(";")){const l=s.slice(0,s.indexOf(":")).trim();n[l]==null&&Ua(r,l,"")}else for(const s in e)n[s]==null&&Ua(r,s,"");for(const s in n)s==="display"&&(o=!0),Ua(r,s,n[s])}else if(i){if(e!==n){const s=r[Pk];s&&(n+=";"+s),r.cssText=n,o=$k.test(n)}}else e&&t.removeAttribute("style");Cm in t&&(t[Cm]=o?r.display:"",t[Dk]&&(r.display="none"))}const xm=/\s*!important$/;function Ua(t,e,n){if(Ve(n))n.forEach(r=>Ua(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Ik(t,e);xm.test(n)?t.setProperty(Lo(r),n.replace(xm,""),"important"):t[r]=n}}const Sm=["Webkit","Moz","ms"],td={};function Ik(t,e){const n=td[e];if(n)return n;let r=fr(e);if(r!=="filter"&&r in t)return td[e]=r;r=eu(r);for(let i=0;i<Sm.length;i++){const o=Sm[i]+r;if(o in t)return td[e]=o}return e}const km="http://www.w3.org/1999/xlink";function Tm(t,e,n,r,i,o=_x(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(km,e.slice(6,e.length)):t.setAttributeNS(km,e,n):n==null||o&&!Wy(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Hr(n)?String(n):n)}function Om(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Y1(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Wy(n):n==null&&l==="string"?(n="",s=!0):l==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(i||e)}function ho(t,e,n,r){t.addEventListener(e,n,r)}function Bk(t,e,n,r){t.removeEventListener(e,n,r)}const Em=Symbol("_vei");function Vk(t,e,n,r,i=null){const o=t[Em]||(t[Em]={}),s=o[e];if(r&&s)s.value=r;else{const[l,a]=Rk(e);if(r){const c=o[e]=jk(r,i);ho(t,l,c,a)}else s&&(Bk(t,l,s,a),o[e]=void 0)}}const Am=/(?:Once|Passive|Capture)$/;function Rk(t){let e;if(Am.test(t)){e={};let r;for(;r=t.match(Am);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Lo(t.slice(2)),e]}let nd=0;const Hk=Promise.resolve(),Fk=()=>nd||(Hk.then(()=>nd=0),nd=Date.now());function jk(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Tr(Uk(r,n.value),e,5,[r])};return n.value=t,n.attached=Fk(),n}function Uk(t,e){if(Ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Mm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,zk=(t,e,n,r,i,o)=>{const s=i==="svg";e==="class"?Nk(t,r,s):e==="style"?Lk(t,n,r):Xc(e)?ah(e)||Vk(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Kk(t,e,r,s))?(Om(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Tm(t,e,r,s,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!It(r))?Om(t,fr(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Tm(t,e,r,s))};function Kk(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Mm(e)&&Xe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Mm(e)&&It(n)?!1:e in t}const vc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ve(e)?n=>Ra(e,n):e};function Wk(t){t.target.composing=!0}function _m(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hs=Symbol("_assign"),_t={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[hs]=vc(i);const o=r||i.props&&i.props.type==="number";ho(t,e?"change":"input",s=>{if(s.target.composing)return;let l=t.value;n&&(l=l.trim()),o&&(l=zd(l)),t[hs](l)}),n&&ho(t,"change",()=>{t.value=t.value.trim()}),e||(ho(t,"compositionstart",Wk),ho(t,"compositionend",_m),ho(t,"change",_m))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(t[hs]=vc(s),t.composing)return;const l=(o||t.type==="number")&&!/^0\d/.test(t.value)?zd(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===a)||(t.value=a))}},qk={deep:!0,created(t,e,n){t[hs]=vc(n),ho(t,"change",()=>{const r=t._modelValue,i=Jk(t),o=t.checked,s=t[hs];if(Ve(r)){const l=qy(r,i),a=l!==-1;if(o&&!a)s(r.concat(i));else if(!o&&a){const c=[...r];c.splice(l,1),s(c)}}else if(Zc(r)){const l=new Set(r);o?l.add(i):l.delete(i),s(l)}else s(Z1(t,o))})},mounted:Nm,beforeUpdate(t,e,n){t[hs]=vc(n),Nm(t,e,n)}};function Nm(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Ve(e))i=qy(e,r.props.value)>-1;else if(Zc(e))i=e.has(r.props.value);else{if(e===n)return;i=nu(e,Z1(t,!0))}t.checked!==i&&(t.checked=i)}function Jk(t){return"_value"in t?t._value:t.value}function Z1(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Gk=["ctrl","shift","alt","meta"],Yk={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Gk.some(n=>t[`${n}Key`]&&!e.includes(n))},yi=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...o)=>{for(let s=0;s<e.length;s++){const l=Yk[e[s]];if(l&&l(i,e))return}return t(i,...o)})},Xk=Gt({patchProp:zk},Sk);let Dm;function Zk(){return Dm||(Dm=WS(Xk))}const Qk=(...t)=>{const e=Zk().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=t2(r);if(!i)return;const o=e._component;!Xe(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,e2(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function e2(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function t2(t){return It(t)?document.querySelector(t):t}const Ot=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ft=Object.keys,hn=Array.isArray;function En(t,e){return typeof e!="object"||Ft(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Ot.Promise||(Ot.Promise=Promise);const _l=Object.getPrototypeOf,n2={}.hasOwnProperty;function er(t,e){return n2.call(t,e)}function ws(t,e){typeof e=="function"&&(e=e(_l(t))),(typeof Reflect>"u"?Ft:Reflect.ownKeys)(e).forEach(n=>{oi(t,n,e[n])})}const Q1=Object.defineProperty;function oi(t,e,n,r){Q1(t,e,En(n&&er(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ps(t){return{from:function(e){return t.prototype=Object.create(e.prototype),oi(t.prototype,"constructor",t),{extend:ws.bind(null,t.prototype)}}}}const r2=Object.getOwnPropertyDescriptor;function kh(t,e){let n;return r2(t,e)||(n=_l(t))&&kh(n,e)}const i2=[].slice;function bc(t,e,n){return i2.call(t,e,n)}function ev(t,e){return e(t)}function Ks(t){if(!t)throw new Error("Assertion Failed")}function tv(t){Ot.setImmediate?setImmediate(t):setTimeout(t,0)}function nv(t,e){return t.reduce((n,r,i)=>{var o=e(r,i);return o&&(n[o[0]]=o[1]),n},{})}function si(t,e){if(typeof e=="string"&&er(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var o=si(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(s!==-1){var l=t[e.substr(0,s)];return l==null?void 0:si(l,e.substr(s+1))}}function kr(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Ks(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)kr(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var s=e.substr(0,o),l=e.substr(o+1);if(l==="")n===void 0?hn(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var a=t[s];a&&er(t,s)||(a=t[s]={}),kr(a,l,n)}}else n===void 0?hn(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function rv(t){var e={};for(var n in t)er(t,n)&&(e[n]=t[n]);return e}const o2=[].concat;function iv(t){return o2.apply([],t)}const ov="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(iv([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Ot[t]),s2=ov.map(t=>Ot[t]);nv(ov,t=>[t,!0]);let ki=null;function Zl(t){ki=typeof WeakMap<"u"&&new WeakMap;const e=rf(t);return ki=null,e}function rf(t){if(!t||typeof t!="object")return t;let e=ki&&ki.get(t);if(e)return e;if(hn(t)){e=[],ki&&ki.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(rf(t[n]))}else if(s2.indexOf(t.constructor)>=0)e=t;else{const o=_l(t);for(var i in e=o===Object.prototype?{}:Object.create(o),ki&&ki.set(t,e),t)er(t,i)&&(e[i]=rf(t[i]))}return e}const{toString:l2}={};function of(t){return l2.call(t).slice(8,-1)}const sf=typeof Symbol<"u"?Symbol.iterator:"@@iterator",a2=typeof sf=="symbol"?function(t){var e;return t!=null&&(e=t[sf])&&e.apply(t)}:function(){return null},Xo={};function ti(t){var e,n,r,i;if(arguments.length===1){if(hn(t))return t.slice();if(this===Xo&&typeof t=="string")return[t];if(i=a2(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Th=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Kr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function sv(t,e){Kr=t,lv=e}var lv=()=>!0;const c2=!new Error("").stack;function Io(){if(c2)try{throw Io.arguments,new Error}catch(t){return t}return new Error}function lf(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(lv).map(r=>`
`+r).join("")):""}var av=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Oh=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(av),u2={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ms(t,e){this._e=Io(),this.name=t,this.message=e}function cv(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function wc(t,e,n,r){this._e=Io(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=cv(t,e)}function sl(t,e){this._e=Io(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=cv(t,e)}ps(ms).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+lf(this._e,2))}},toString:function(){return this.name+": "+this.message}}),ps(wc).from(ms),ps(sl).from(ms);var Eh=Oh.reduce((t,e)=>(t[e]=e+"Error",t),{});const d2=ms;var Ke=Oh.reduce((t,e)=>{var n=e+"Error";function r(i,o){this._e=Io(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=u2[e]||n,this.inner=null)}return ps(r).from(d2),t[e]=r,t},{});Ke.Syntax=SyntaxError,Ke.Type=TypeError,Ke.Range=RangeError;var Pm=av.reduce((t,e)=>(t[e+"Error"]=Ke[e],t),{}),za=Oh.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=Ke[e]),t),{});function Ct(){}function Nl(t){return t}function f2(t,e){return t==null||t===Nl?e:function(n){return e(t(n))}}function Mo(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function h2(t,e){return t===Ct?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Mo(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Mo(i,this.onerror):i),o!==void 0?o:n}}function p2(t,e){return t===Ct?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Mo(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Mo(r,this.onerror):r)}}function m2(t,e){return t===Ct?e:function(n){var r=t.apply(this,arguments);En(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Mo(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Mo(o,this.onerror):o),r===void 0?s===void 0?void 0:s:En(r,s)}}function g2(t,e){return t===Ct?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Ah(t,e){return t===Ct?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}za.ModifyError=wc,za.DexieError=ms,za.BulkError=sl;var Dl={};const uv=100,[af,Cc,cf]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,_l(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,_l(e),t]})(),dv=Cc&&Cc.then,Ka=af&&af.constructor,Mh=!!cf;var uf=!1,y2=cf?()=>{cf.then(ga)}:Ot.setImmediate?setImmediate.bind(null,ga):Ot.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{ga(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(ga,0)},ll=function(t,e){Ws.push([t,e]),xc&&(y2(),xc=!1)},df=!0,xc=!0,wo=[],Wa=[],ff=null,hf=Nl,gs={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Im,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Im(t[0],t[1])}catch{}})}},Be=gs,Ws=[],Co=0,qa=[];function Ae(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ct,this._lib=!1;var e=this._PSD=Be;if(Kr&&(this._stackHolder=Io(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Dl)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&mf(this,this._value))}this._state=null,this._value=null,++e.ref,hv(this,t)}const pf={get:function(){var t=Be,e=Sc;function n(r,i){var o=!t.global&&(t!==Be||e!==Sc);const s=o&&!ui();var l=new Ae((a,c)=>{_h(this,new fv(kc(r,t,o,s),kc(i,t,o,s),a,c,t))});return Kr&&gv(l,this),l}return n.prototype=Dl,n},set:function(t){oi(this,"then",t&&t.prototype===Dl?pf:{get:function(){return t},set:pf.set})}};function fv(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function hv(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Ql();n&&typeof n.then=="function"?hv(t,(i,o)=>{n instanceof Ae?n._then(i,o):n.then(i,o)}):(t._state=!0,t._value=n,pv(t)),r&&ea()}},mf.bind(null,t))}catch(n){mf(t,n)}}function mf(t,e){if(Wa.push(e),t._state===null){var n=t._lib&&Ql();e=hf(e),t._state=!1,t._value=e,Kr&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,o){try{r.apply(null,o)}catch{}}(()=>{var r=kh(e,"stack");e._promise=t,oi(e,"stack",{get:()=>uf?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){wo.some(i=>i._value===r._value)||wo.push(r)}(t),pv(t),n&&ea()}}function pv(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)_h(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Co===0&&(++Co,ll(()=>{--Co==0&&Nh()},[]))}function _h(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Co,ll(v2,[n,t,e])}else t._listeners.push(e)}function v2(t,e,n){try{ff=e;var r,i=e._value;e._state?r=t(i):(Wa.length&&(Wa=[]),r=t(i),Wa.indexOf(i)===-1&&function(o){for(var s=wo.length;s;)if(wo[--s]._value===o._value)return void wo.splice(s,1)}(e)),n.resolve(r)}catch(o){n.reject(o)}finally{ff=null,--Co==0&&Nh(),--n.psd.ref||n.psd.finalize()}}function mv(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,o,s=t._value;s!=null?(i=s.name||"Error",o=s.message||s,r=lf(s,0)):(i=s,o=""),e.push(i+(o?": "+o:"")+r)}return Kr&&((r=lf(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&mv(t._prev,e,n)),e}function gv(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function ga(){Ql()&&ea()}function Ql(){var t=df;return df=!1,xc=!1,t}function ea(){var t,e,n;do for(;Ws.length>0;)for(t=Ws,Ws=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Ws.length>0);df=!0,xc=!0}function Nh(){var t=wo;wo=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=qa.slice(0),n=e.length;n;)e[--n]()}function ya(t){return new Ae(Dl,!1,t)}function Mt(t,e){var n=Be;return function(){var r=Ql(),i=Be;try{return Ui(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{Ui(i,!1),r&&ea()}}}ws(Ae.prototype,{then:pf,_then:function(t,e){_h(this,new fv(null,null,t,e,Be))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):ya(r)):this.then(null,r=>r&&r.name===e?n(r):ya(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),ya(e)))},stack:{get:function(){if(this._stack)return this._stack;try{uf=!0;var t=mv(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{uf=!1}}},timeout:function(t,e){return t<1/0?new Ae((n,r)=>{var i=setTimeout(()=>r(new Ke.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&oi(Ae.prototype,Symbol.toStringTag,"Dexie.Promise"),gs.env=yv(),ws(Ae,{all:function(){var t=ti.apply(null,arguments).map(va);return new Ae(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,o)=>Ae.resolve(i).then(s=>{t[o]=s,--r||e(t)},n))})},resolve:t=>{if(t instanceof Ae)return t;if(t&&typeof t.then=="function")return new Ae((n,r)=>{t.then(n,r)});var e=new Ae(Dl,!0,t);return gv(e,ff),e},reject:ya,race:function(){var t=ti.apply(null,arguments).map(va);return new Ae((e,n)=>{t.map(r=>Ae.resolve(r).then(e,n))})},PSD:{get:()=>Be,set:t=>Be=t},totalEchoes:{get:()=>Sc},newPSD:ji,usePSD:$s,scheduler:{get:()=>ll,set:t=>{ll=t}},rejectionMapper:{get:()=>hf,set:t=>{hf=t}},follow:(t,e)=>new Ae((n,r)=>ji((i,o)=>{var s=Be;s.unhandleds=[],s.onunhandled=o,s.finalize=Mo(function(){(function(l){function a(){l(),qa.splice(qa.indexOf(a),1)}qa.push(a),++Co,ll(()=>{--Co==0&&Nh()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),t()},e,n,r))}),Ka&&(Ka.allSettled&&oi(Ae,"allSettled",function(){const t=ti.apply(null,arguments).map(va);return new Ae(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,o)=>Ae.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||e(r)))})}),Ka.any&&typeof AggregateError<"u"&&oi(Ae,"any",function(){const t=ti.apply(null,arguments).map(va);return new Ae((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((o,s)=>Ae.resolve(o).then(l=>e(l),l=>{i[s]=l,--r||n(new AggregateError(i))}))})}));const fn={awaits:0,echoes:0,id:0};var b2=0,Ja=[],rd=0,Sc=0,w2=0;function ji(t,e,n,r){var i=Be,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++w2;var s=gs.env;o.env=Mh?{Promise:Ae,PromiseProp:{value:Ae,configurable:!0,writable:!0},all:Ae.all,race:Ae.race,allSettled:Ae.allSettled,any:Ae.any,resolve:Ae.resolve,reject:Ae.reject,nthen:$m(s.nthen,o),gthen:$m(s.gthen,o)}:{},e&&En(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=$s(o,t,n,r);return o.ref===0&&o.finalize(),l}function Ps(){return fn.id||(fn.id=++b2),++fn.awaits,fn.echoes+=uv,fn.id}function ui(){return!!fn.awaits&&(--fn.awaits==0&&(fn.id=0),fn.echoes=fn.awaits*uv,!0)}function va(t){return fn.echoes&&t&&t.constructor===Ka?(Ps(),t.then(e=>(ui(),e),e=>(ui(),Kt(e)))):t}function C2(t){++Sc,fn.echoes&&--fn.echoes!=0||(fn.echoes=fn.id=0),Ja.push(Be),Ui(t,!0)}function x2(){var t=Ja[Ja.length-1];Ja.pop(),Ui(t,!1)}function Ui(t,e){var n=Be;if((e?!fn.echoes||rd++&&t===Be:!rd||--rd&&t===Be)||vv(e?C2.bind(null,t):x2),t!==Be&&(Be=t,n===gs&&(gs.env=yv()),Mh)){var r=gs.env.Promise,i=t.env;Cc.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(Ot,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function yv(){var t=Ot.Promise;return Mh?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Ot,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Cc.then,gthen:t.prototype.then}:{}}function $s(t,e,n,r,i){var o=Be;try{return Ui(t,!0),e(n,r,i)}finally{Ui(o,!1)}}function vv(t){dv.call(af,t)}function kc(t,e,n,r){return typeof t!="function"?t:function(){var i=Be;n&&Ps(),Ui(e,!0);try{return t.apply(this,arguments)}finally{Ui(i,!1),r&&vv(ui)}}}function $m(t,e){return function(n,r){return t.call(this,kc(n,e),kc(r,e))}}(""+dv).indexOf("[native code]")===-1&&(Ps=ui=Ct);const Lm="unhandledrejection";function Im(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(Ot.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Lm,!0,!0),En(r,i)):Ot.CustomEvent&&En(r=new CustomEvent(Lm,{detail:i}),i),r&&Ot.dispatchEvent&&(dispatchEvent(r),!Ot.PromiseRejectionEvent&&Ot.onunhandledrejection))try{Ot.onunhandledrejection(r)}catch{}Kr&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Kt=Ae.reject;function gf(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Be.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===Eh.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>gf(t,e,n,r))):Kt(o)}return i._promise(e,(o,s)=>ji(()=>(Be.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(t._state.openComplete)return Kt(new Ke.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Kt(new Ke.DatabaseClosed);t.open().catch(Ct)}return t._state.dbReadyPromise.then(()=>gf(t,e,n,r))}const Bm="3.2.7",go="￿",yf=-1/0,Jr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bv="String expected.",al=[],yu=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),S2=yu,k2=yu,wv=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),vu="__dbnames",id="readonly",od="readwrite";function _o(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Cv={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ba(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Zl(e))[t],e)}let T2=class{_trans(e,n,r){const i=this._tx||Be.trans,o=this.name;function s(a,c,u){if(!u.schema[o])throw new Ke.NotFound("Table "+o+" not part of transaction");return n(u.idbtrans,u)}const l=Ql();try{return i&&i.db===this.db?i===Be.trans?i._promise(e,s,r):ji(()=>i._promise(e,s,r),{trans:i,transless:Be.transless||Be}):gf(this.db,e,[this.name],s)}finally{l&&ea()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(hn(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Ft(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==go){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!r&&Kr&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(c,u){try{return o.cmp(c,u)===0}catch{return!1}}const[l,a]=n.reduce(([c,u],d)=>{const f=i[d],p=e[d];return[c||f,c||!f?_o(u,f&&f.multi?g=>{const y=si(g,d);return hn(y)&&y.some(x=>s(p,x))}:g=>s(p,si(g,d))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,hn(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var o in r)if(er(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){En(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=ba(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?Ae.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{kr(e,i,s)}catch{}return s})}update(e,n){if(typeof e!="object"||hn(e))return this.where(":id").equals(e).modify(n);{const r=si(e,this.schema.primKey.keyPath);if(r===void 0)return Kt(new Ke.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Ft(n).forEach(i=>{kr(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=ba(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?Ae.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{kr(e,i,s)}catch{}return s})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?Ae.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Cv})).then(e=>e.numFailures?Ae.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new Ke.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Ke.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(ba(a)):e;return this.core.mutate({trans:s,type:"add",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:f,lastResult:p,failures:g})=>{if(d===0)return o?f:p;throw new sl(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,g)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new Ke.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Ke.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(ba(a)):e;return this.core.mutate({trans:s,type:"put",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:f,lastResult:p,failures:g})=>{if(d===0)return o?f:p;throw new sl(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new sl(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}};function cl(t){var e={},n=function(s,l){if(l){for(var a=arguments.length,c=new Array(a-1);--a;)c[a-1]=arguments[a];return e[s].subscribe.apply(null,c),t}if(typeof s=="string")return e[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,l,a){if(typeof s!="object"){var c;l||(l=g2),a||(a=Ct);var u={subscribers:[],fire:a,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=l(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(f){return f!==d}),u.fire=u.subscribers.reduce(l,a)}};return e[s]=n[s]=u,u}Ft(c=s).forEach(function(d){var f=c[d];if(hn(f))o(d,c[d][0],c[d][1]);else{if(f!=="asap")throw new Ke.InvalidArgument("Invalid event config");var p=o(d,Nl,function(){for(var g=arguments.length,y=new Array(g);g--;)y[g]=arguments[g];p.subscribers.forEach(function(x){tv(function(){x.apply(null,y)})})})}})}}function Fs(t,e){return ps(e).from({prototype:t}),e}function zo(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function sd(t,e){t.filter=_o(t.filter,e)}function ld(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>_o(r(),e()):e,t.justLimit=n&&!r}function Ga(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new Ke.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Vm(t,e,n){const r=Ga(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function wa(t,e,n,r){const i=t.replayFilter?_o(t.filter,t.replayFilter()):t.filter;if(t.or){const o={},s=(l,a,c)=>{if(!i||i(a,c,f=>a.stop(f),f=>a.fail(f))){var u=a.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),er(o,d)||(o[d]=!0,e(l,a,c))}};return Promise.all([t.or._iterate(s,n),Rm(Vm(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Rm(Vm(t,r,n),_o(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Rm(t,e,n,r){var i=Mt(r?(o,s,l)=>n(r(o),s,l):n);return t.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();e&&!e(o,l=>s=l,l=>{o.stop(l),s=Ct},l=>{o.fail(l),s=Ct})||i(o.value,o,l=>s=l),s()})})}function Tn(t,e){try{const n=Hm(t),r=Hm(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c)if(i[c]!==o[c])return i[c]<o[c]?-1:1;return s===l?0:s<l?-1:1}(Fm(t),Fm(e));case"Array":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c){const u=Tn(i[c],o[c]);if(u!==0)return u}return s===l?0:s<l?-1:1}(t,e)}}catch{}return NaN}function Hm(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=of(t);return n==="ArrayBuffer"?"binary":n}function Fm(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}let O2=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Kt.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Kt.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=_o(n.algorithm,e)}_iterate(e,n){return wa(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&En(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>wa(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(zo(r,!0))return i.count({trans:n,query:{index:Ga(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return wa(r,()=>(++o,!1),n,i).then(()=>o)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],o=r.length-1;function s(c,u){return u?s(c[r[u]],u-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function a(c,u){var d=s(c,o),f=s(u,o);return d<f?-l:d>f?l:0}return this.toArray(function(c){return c.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&zo(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=Ga(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return wa(r,o=>i.push(o),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,zo(n)?ld(n,()=>{var r=e;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):ld(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ld(this._ctx,()=>{var n=e;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(e,n){return sd(this._ctx,function(r,i,o){return!e(r.value)||(i(o),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return sd(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=_o(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&zo(n,!0)&&n.limit>0)return this._read(i=>{var o=Ga(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return sd(this._ctx,function(i){var o=i.primaryKey.toString(),s=er(r,o);return r[o]=!0,!s}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var o=Ft(e),s=o.length;i=function(y){for(var x=!1,O=0;O<s;++O){var _=o[O],D=e[_];si(y,_)!==D&&(kr(y,_,D),x=!0)}return x}}const l=n.table.core,{outbound:a,extractKey:c}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let f=0;const p=[],g=(y,x)=>{const{failures:O,numFailures:_}=x;f+=y-_;for(let D of Ft(O))d.push(O[D])};return this.clone().primaryKeys().then(y=>{const x=O=>{const _=Math.min(u,y.length-O);return l.getMany({trans:r,keys:y.slice(O,O+_),cache:"immutable"}).then(D=>{const k=[],I=[],L=a?[]:null,R=[];for(let T=0;T<_;++T){const C=D[T],V={value:Zl(C),primKey:y[O+T]};i.call(V,V.value,V)!==!1&&(V.value==null?R.push(y[O+T]):a||Tn(c(C),c(V.value))===0?(I.push(V.value),a&&L.push(y[O+T])):(R.push(y[O+T]),k.push(V.value)))}const U=zo(n)&&n.limit===1/0&&(typeof e!="function"||e===ad)&&{index:n.index,range:n.range};return Promise.resolve(k.length>0&&l.mutate({trans:r,type:"add",values:k}).then(T=>{for(let C in T.failures)R.splice(parseInt(C),1);g(k.length,T)})).then(()=>(I.length>0||U&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:L,values:I,criteria:U,changeSpec:typeof e!="function"&&e}).then(T=>g(I.length,T))).then(()=>(R.length>0||U&&e===ad)&&l.mutate({trans:r,type:"delete",keys:R,criteria:U}).then(T=>g(R.length,T))).then(()=>y.length>O+_&&x(O+u))})};return x(0).then(()=>{if(d.length>0)throw new wc("Error modifying one or more objects",d,f,p);return y.length})})})}delete(){var e=this._ctx,n=e.range;return zo(e)&&(e.isPrimKey&&!k2||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,o=n;return e.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:l,lastResult:a,results:c,numFailures:u})=>{if(u)throw new wc("Could not delete some values",Object.keys(l).map(d=>l[d]),s-u);return s-u}))}):this.modify(ad)}};const ad=(t,e)=>e.value=null;function E2(t,e){return t<e?-1:t===e?0:1}function A2(t,e){return t>e?-1:t===e?0:1}function Wn(t,e,n){var r=t instanceof Sv?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Ko(t){return new t.Collection(t,()=>xv("")).limit(0)}function M2(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),l=-1,a=0;a<s;++a){var c=e[a];if(c!==r[a])return i(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):i(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;i(t[a],c)<0&&(l=a)}return s<r.length&&o==="next"?t+n.substr(t.length):s<t.length&&o==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function Ca(t,e,n,r){var i,o,s,l,a,c,u,d=n.length;if(!n.every(y=>typeof y=="string"))return Wn(t,bv);function f(y){i=function(O){return O==="next"?_=>_.toUpperCase():_=>_.toLowerCase()}(y),o=function(O){return O==="next"?_=>_.toLowerCase():_=>_.toUpperCase()}(y),s=y==="next"?E2:A2;var x=n.map(function(O){return{lower:o(O),upper:i(O)}}).sort(function(O,_){return s(O.lower,_.lower)});l=x.map(function(O){return O.upper}),a=x.map(function(O){return O.lower}),c=y,u=y==="next"?"":r}f("next");var p=new t.Collection(t,()=>bi(l[0],a[d-1]+r));p._ondirectionchange=function(y){f(y)};var g=0;return p._addAlgorithm(function(y,x,O){var _=y.key;if(typeof _!="string")return!1;var D=o(_);if(e(D,a,g))return!0;for(var k=null,I=g;I<d;++I){var L=M2(_,D,l[I],a[I],s,c);L===null&&k===null?g=I+1:(k===null||s(k,L)>0)&&(k=L)}return x(k!==null?function(){y.continue(k+u)}:O),!1}),p}function bi(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function xv(t){return{type:1,lower:t,upper:t}}let Sv=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?Ko(this):new this.Collection(this,()=>bi(e,n,!r,!i))}catch{return Wn(this,Jr)}}equals(e){return e==null?Wn(this,Jr):new this.Collection(this,()=>xv(e))}above(e){return e==null?Wn(this,Jr):new this.Collection(this,()=>bi(e,void 0,!0))}aboveOrEqual(e){return e==null?Wn(this,Jr):new this.Collection(this,()=>bi(e,void 0,!1))}below(e){return e==null?Wn(this,Jr):new this.Collection(this,()=>bi(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Wn(this,Jr):new this.Collection(this,()=>bi(void 0,e))}startsWith(e){return typeof e!="string"?Wn(this,bv):this.between(e,e+go,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Ca(this,(n,r)=>n.indexOf(r[0])===0,[e],go)}equalsIgnoreCase(e){return Ca(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=ti.apply(Xo,arguments);return e.length===0?Ko(this):Ca(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=ti.apply(Xo,arguments);return e.length===0?Ko(this):Ca(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,go)}anyOf(){const e=ti.apply(Xo,arguments);let n=this._cmp;try{e.sort(n)}catch{return Wn(this,Jr)}if(e.length===0)return Ko(this);const r=new this.Collection(this,()=>bi(e[0],e[e.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((o,s,l)=>{const a=o.key;for(;n(a,e[i])>0;)if(++i,i===e.length)return s(l),!1;return n(a,e[i])===0||(s(()=>{o.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[yf,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=ti.apply(Xo,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Wn(this,Jr)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[yf,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,l=this._max;if(e.length===0)return Ko(this);if(!e.every(_=>_[0]!==void 0&&_[1]!==void 0&&i(_[0],_[1])<=0))return Wn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ke.InvalidArgument);const a=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=i;function f(_,D){return d(_[0],D[0])}try{u=e.reduce(function(_,D){let k=0,I=_.length;for(;k<I;++k){const L=_[k];if(r(D[0],L[1])<0&&r(D[1],L[0])>0){L[0]=s(L[0],D[0]),L[1]=l(L[1],D[1]);break}}return k===I&&_.push(D),_},[]),u.sort(f)}catch{return Wn(this,Jr)}let p=0;const g=c?_=>i(_,u[p][1])>0:_=>i(_,u[p][1])>=0,y=a?_=>o(_,u[p][0])>0:_=>o(_,u[p][0])>=0;let x=g;const O=new this.Collection(this,()=>bi(u[0][0],u[u.length-1][1],!a,!c));return O._ondirectionchange=_=>{_==="next"?(x=g,d=i):(x=y,d=o),u.sort(f)},O._addAlgorithm((_,D,k)=>{for(var I=_.key;x(I);)if(++p,p===u.length)return D(k),!1;return!!function(L){return!g(L)&&!y(L)}(I)||(this._cmp(I,u[p][1])===0||this._cmp(I,u[p][0])===0||D(()=>{d===i?_.continue(u[p][0]):_.continue(u[p][1])}),!1)}),O}startsWithAnyOf(){const e=ti.apply(Xo,arguments);return e.every(n=>typeof n=="string")?e.length===0?Ko(this):this.inAnyRange(e.map(n=>[n,n+go])):Wn(this,"startsWithAnyOf() only works with strings")}};function Pr(t){return Mt(function(e){return Pl(e),t(e.target.error),!1})}function Pl(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const $l="storagemutated",Ai="x-storagemutated-1",zi=cl(null,$l);class _2{_lock(){return Ks(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this}_unlock(){if(Ks(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{$s(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&Be.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Ks(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Ke.DatabaseClosed(r);case"MissingAPIError":throw new Ke.MissingAPI(r.message,r);default:throw new Ke.OpenFailed(r)}if(!this.active)throw new Ke.TransactionInactive;return Ks(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Mt(i=>{Pl(i),this._reject(e.error)}),e.onabort=Mt(i=>{Pl(i),this.active&&this._reject(new Ke.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Mt(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&zi.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return Kt(new Ke.ReadOnly("Transaction is readonly"));if(!this.active)return Kt(new Ke.TransactionInactive);if(this._locked())return new Ae((o,s)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(o,s)},Be])});if(r)return ji(()=>{var o=new Ae((s,l)=>{this._lock();const a=n(s,l,this);a&&a.then&&a.then(s,l)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new Ae((o,s)=>{var l=n(o,s,this);l&&l.then&&l.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=Ae.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new Ae((s,l)=>{r.then(a=>n._waitingQueue.push(Mt(s.bind(null,a))),a=>n._waitingQueue.push(Mt(l.bind(null,a)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ke.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(er(n,e))return n[e];const r=this.schema[e];if(!r)throw new Ke.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function vf(t,e,n,r,i,o,s){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+kv(e)}}function kv(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Tv(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:nv(n,r=>[r.name,r])}}let Ll=t=>{try{return t.only([[]]),Ll=()=>[[]],[[]]}catch{return Ll=()=>go,go}};function bf(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>si(r,e)}(t):e=>si(e,t)}function jm(t){return[].slice.call(t)}let N2=0;function ul(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function D2(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:f}=a;return c===void 0?u===void 0?null:e.upperBound(u,!!f):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!f)}const{schema:i,hasGetAll:o}=function(a,c){const u=jm(a.objectStoreNames);return{schema:{name:a.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:f,autoIncrement:p}=d,g=hn(f),y=f==null,x={},O={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:g,keyPath:f,autoIncrement:p,unique:!0,extractKey:bf(f)},indexes:jm(d.indexNames).map(_=>d.index(_)).map(_=>{const{name:D,unique:k,multiEntry:I,keyPath:L}=_,R={name:D,compound:hn(L),keyPath:L,unique:k,multiEntry:I,extractKey:bf(L)};return x[ul(L)]=R,R}),getIndexByKeyPath:_=>x[ul(_)]};return x[":id"]=O.primaryKey,f!=null&&(x[ul(f)]=O.primaryKey),O})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),s=i.tables.map(a=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:f,keys:p,values:g,range:y}){return new Promise((x,O)=>{x=Mt(x);const _=d.objectStore(u),D=_.keyPath==null,k=f==="put"||f==="add";if(!k&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);const{length:I}=p||g||{length:1};if(p&&g&&p.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(I===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});let L;const R=[],U=[];let T=0;const C=w=>{++T,Pl(w)};if(f==="deleteRange"){if(y.type===4)return x({numFailures:T,failures:U,results:[],lastResult:void 0});y.type===3?R.push(L=_.clear()):R.push(L=_.delete(r(y)))}else{const[w,Y]=k?D?[g,p]:[g,null]:[p,null];if(k)for(let J=0;J<I;++J)R.push(L=Y&&Y[J]!==void 0?_[f](w[J],Y[J]):_[f](w[J])),L.onerror=C;else for(let J=0;J<I;++J)R.push(L=_[f](w[J])),L.onerror=C}const V=w=>{const Y=w.target.result;R.forEach((J,he)=>J.error!=null&&(U[he]=J.error)),x({numFailures:T,failures:U,results:f==="delete"?p:R.map(J=>J.result),lastResult:Y})};L.onerror=w=>{C(w),V(w)},L.onsuccess=V})},getMany:({trans:d,keys:f})=>new Promise((p,g)=>{p=Mt(p);const y=d.objectStore(u),x=f.length,O=new Array(x);let _,D=0,k=0;const I=R=>{const U=R.target;O[U._pos]=U.result,++k===D&&p(O)},L=Pr(g);for(let R=0;R<x;++R)f[R]!=null&&(_=y.get(f[R]),_._pos=R,_.onsuccess=I,_.onerror=L,++D);D===0&&p(O)}),get:({trans:d,key:f})=>new Promise((p,g)=>{p=Mt(p);const y=d.objectStore(u).get(f);y.onsuccess=x=>p(x.target.result),y.onerror=Pr(g)}),query:function(d){return f=>new Promise((p,g)=>{p=Mt(p);const{trans:y,values:x,limit:O,query:_}=f,D=O===1/0?void 0:O,{index:k,range:I}=_,L=y.objectStore(u),R=k.isPrimaryKey?L:L.index(k.name),U=r(I);if(O===0)return p({result:[]});if(d){const T=x?R.getAll(U,D):R.getAllKeys(U,D);T.onsuccess=C=>p({result:C.target.result}),T.onerror=Pr(g)}else{let T=0;const C=x||!("openKeyCursor"in R)?R.openCursor(U):R.openKeyCursor(U),V=[];C.onsuccess=w=>{const Y=C.result;return Y?(V.push(x?Y.value:Y.primaryKey),++T===O?p({result:V}):void Y.continue()):p({result:V})},C.onerror=Pr(g)}})}(o),openCursor:function({trans:d,values:f,query:p,reverse:g,unique:y}){return new Promise((x,O)=>{x=Mt(x);const{index:_,range:D}=p,k=d.objectStore(u),I=_.isPrimaryKey?k:k.index(_.name),L=g?y?"prevunique":"prev":y?"nextunique":"next",R=f||!("openKeyCursor"in I)?I.openCursor(r(D),L):I.openKeyCursor(r(D),L);R.onerror=Pr(O),R.onsuccess=Mt(U=>{const T=R.result;if(!T)return void x(null);T.___id=++N2,T.done=!1;const C=T.continue.bind(T);let V=T.continuePrimaryKey;V&&(V=V.bind(T));const w=T.advance.bind(T),Y=()=>{throw new Error("Cursor not stopped")};T.trans=d,T.stop=T.continue=T.continuePrimaryKey=T.advance=()=>{throw new Error("Cursor not started")},T.fail=Mt(O),T.next=function(){let J=1;return this.start(()=>J--?this.continue():this.stop()).then(()=>this)},T.start=J=>{const he=new Promise((Q,Ce)=>{Q=Mt(Q),R.onerror=Pr(Ce),T.fail=Ce,T.stop=We=>{T.stop=T.continue=T.continuePrimaryKey=T.advance=Y,Q(We)}}),ce=()=>{if(R.result)try{J()}catch(Q){T.fail(Q)}else T.done=!0,T.start=()=>{throw new Error("Cursor behind last entry")},T.stop()};return R.onsuccess=Mt(Q=>{R.onsuccess=ce,ce()}),T.continue=C,T.continuePrimaryKey=V,T.advance=w,ce(),he},x(T)},O)})},count({query:d,trans:f}){const{index:p,range:g}=d;return new Promise((y,x)=>{const O=f.objectStore(u),_=p.isPrimaryKey?O:O.index(p.name),D=r(g),k=D?_.count(D):_.count();k.onsuccess=Mt(I=>y(I.target.result)),k.onerror=Pr(x)})}}}(a)),l={};return s.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:Ll(e),schema:i}}function wf({_novip:t},e){const n=e.db,r=function(i,o,{IDBKeyRange:s,indexedDB:l},a){return{dbcore:function(u,d){return d.reduce((f,{create:p})=>({...f,...p(f)}),u)}(D2(o,s,a),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const o=i.name;t.core.schema.tables.some(s=>s.name===o)&&(i.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=i.core))})}function Tc({_novip:t},e,n,r){n.forEach(i=>{const o=r[i];e.forEach(s=>{const l=kh(s,i);(!l||"value"in l&&l.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?oi(s,i,{get(){return this.table(i)},set(a){Q1(this,i,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new t.Table(i,o))})})}function Cf({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function P2(t,e){return t._cfg.version-e._cfg.version}function $2(t,e,n,r){const i=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),l=Be.transless||Be;ji(()=>{Be.trans=o,Be.transless=l,e===0?(Ft(i).forEach(a=>{cd(n,a,i[a].primKey,i[a].indexes)}),wf(t,n),Ae.follow(()=>t.on.populate.fire(o)).catch(s)):function({_novip:a},c,u,d){const f=[],p=a._versions;let g=a._dbSchema=Sf(a,a.idbdb,d),y=!1;const x=p.filter(_=>_._cfg.version>=c);function O(){return f.length?Ae.resolve(f.shift()(u.idbtrans)).then(O):Ae.resolve()}return x.forEach(_=>{f.push(()=>{const D=g,k=_._cfg.dbschema;kf(a,D,d),kf(a,k,d),g=a._dbSchema=k;const I=Ov(D,k);I.add.forEach(R=>{cd(d,R[0],R[1].primKey,R[1].indexes)}),I.change.forEach(R=>{if(R.recreate)throw new Ke.Upgrade("Not yet support for changing primary key");{const U=d.objectStore(R.name);R.add.forEach(T=>xf(U,T)),R.change.forEach(T=>{U.deleteIndex(T.name),xf(U,T)}),R.del.forEach(T=>U.deleteIndex(T))}});const L=_._cfg.contentUpgrade;if(L&&_._cfg.version>c){wf(a,d),u._memoizedTables={},y=!0;let R=rv(k);I.del.forEach(V=>{R[V]=D[V]}),Cf(a,[a.Transaction.prototype]),Tc(a,[a.Transaction.prototype],Ft(R),R),u.schema=R;const U=Th(L);let T;U&&Ps();const C=Ae.follow(()=>{if(T=L(u),T&&U){var V=ui.bind(null,null);T.then(V,V)}});return T&&typeof T.then=="function"?Ae.resolve(T):C.then(()=>T)}}),f.push(D=>{(!y||!S2)&&function(k,I){[].slice.call(I.db.objectStoreNames).forEach(L=>k[L]==null&&I.db.deleteObjectStore(L))}(_._cfg.dbschema,D),Cf(a,[a.Transaction.prototype]),Tc(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema})}),O().then(()=>{var _,D;D=d,Ft(_=g).forEach(k=>{D.db.objectStoreNames.contains(k)||cd(D,k,_[k].primKey,_[k].indexes)})})}(t,e,o,n).catch(s)})}function Ov(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],o=e[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!yu)s.recreate=!0,n.change.push(s);else{const l=i.idxByName,a=o.idxByName;let c;for(c in l)a[c]||s.del.push(c);for(c in a){const u=l[c],d=a[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function cd(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>xf(i,o)),i}function xf(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Sf(t,e,n){const r={};return bc(e.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const l=vf(kv(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),a=[];for(let u=0;u<o.indexNames.length;++u){const d=o.index(o.indexNames[u]);s=d.keyPath;var c=vf(d.name,s,!!d.unique,!!d.multiEntry,!1,s&&typeof s!="string",!1);a.push(c)}r[i]=Tv(i,l,a)}),r}function kf({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);t._hasGetAll="getAll"in s;for(let l=0;l<s.indexNames.length;++l){const a=s.indexNames[l],c=s.index(a).keyPath,u=typeof c=="string"?c:"["+bc(c).join("+")+"]";if(e[o]){const d=e[o].idxByName[u];d&&(d.name=a,delete e[o].idxByName[u],e[o].idxByName[a]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ot.WorkerGlobalScope&&Ot instanceof Ot.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let L2=class{_parseStoresSpec(e,n){Ft(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((s,l)=>{const a=(s=s.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return vf(a,c||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),hn(c),l===0)}),o=i.shift();if(o.multi)throw new Ke.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new Ke.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new Ke.Schema("Index must have a name and cannot be an empty string")}),n[r]=Tv(r,o,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?En(this._cfg.storesSource,e):e;const r=n._versions,i={};let o={};return r.forEach(s=>{En(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,Cf(n,[n._allTables,n,n.Transaction.prototype]),Tc(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Ft(o),o),n._storeNames=Ft(o),this}upgrade(e){return this._cfg.contentUpgrade=Ah(this._cfg.contentUpgrade||Ct,e),this}};function Dh(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new zt(vu,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ph(t){return t&&typeof t.databases=="function"}function Tf(t){return ji(function(){return Be.letThrough=!0,t()})}function I2(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function B2(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Kt(e.dbOpenError):t);Kr&&(e.openCanceller._stackHolder=Io()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new Ke.DatabaseClosed("db.open() was cancelled")}let o=e.dbReadyResolve,s=null,l=!1;const a=()=>new Ae((c,u)=>{if(i(),!n)throw new Ke.MissingAPI;const d=t.name,f=e.autoSchema?n.open(d):n.open(d,Math.round(10*t.verno));if(!f)throw new Ke.MissingAPI;f.onerror=Pr(u),f.onblocked=Mt(t._fireOnBlocked),f.onupgradeneeded=Mt(p=>{if(s=f.transaction,e.autoSchema&&!t._options.allowEmptyDB){f.onerror=Pl,s.abort(),f.result.close();const y=n.deleteDatabase(d);y.onsuccess=y.onerror=Mt(()=>{u(new Ke.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=Pr(u);var g=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;l=g<1,t._novip.idbdb=f.result,$2(t,g/10,s,u)}},u),f.onsuccess=Mt(()=>{s=null;const p=t._novip.idbdb=f.result,g=bc(p.objectStoreNames);if(g.length>0)try{const x=p.transaction((y=g).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:O},_,D){O.verno=_.version/10;const k=O._dbSchema=Sf(0,_,D);O._storeNames=bc(_.objectStoreNames,0),Tc(O,[O._allTables],Ft(k),k)}(t,p,x):(kf(t,t._dbSchema,x),function(O,_){const D=Ov(Sf(0,O.idbdb,_),O._dbSchema);return!(D.add.length||D.change.some(k=>k.add.length||k.change.length))}(t,x)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wf(t,x)}catch{}var y;al.push(t),p.onversionchange=Mt(x=>{e.vcFired=!0,t.on("versionchange").fire(x)}),p.onclose=Mt(x=>{t.on("close").fire(x)}),l&&function({indexedDB:x,IDBKeyRange:O},_){!Ph(x)&&_!==vu&&Dh(x,O).put({name:_}).catch(Ct)}(t._deps,d),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),a()):Ae.reject(c));return Ae.race([r,(typeof navigator>"u"?Ae.resolve():I2()).then(a)]).then(()=>(i(),e.onReadyBeingFired=[],Ae.resolve(Tf(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Ah,Ct);return e.onReadyBeingFired=[],Ae.resolve(Tf(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),Kt(c)}).finally(()=>{e.openComplete=!0,o()})}function Of(t){var e=o=>t.next(o),n=i(e),r=i(o=>t.throw(o));function i(o){return s=>{var l=o(s),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):hn(a)?Promise.all(a).then(n,r):n(a)}}return i(e)()}function V2(t,e,n){var r=arguments.length;if(r<2)throw new Ke.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,iv(i),n]}function Ev(t,e,n,r,i){return Ae.resolve().then(()=>{const o=Be.transless||Be,s=t._createTransaction(e,n,t._dbSchema,r),l={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===Eh.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Ev(t,e,n,null,i))):Kt(d)}const a=Th(i);let c;a&&Ps();const u=Ae.follow(()=>{if(c=i.call(s,s),c)if(a){var d=ui.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Of(c))},l);return(c&&typeof c.then=="function"?Ae.resolve(c).then(d=>s.active?d:Kt(new Ke.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),Kt(d)))})}function xa(t,e,n){const r=hn(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const R2={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},o=[];function s(u,d,f){const p=ul(u),g=i[p]=i[p]||[],y=u==null?0:typeof u=="string"?1:u.length,x=d>0,O={...f,isVirtual:x,keyTail:d,keyLength:y,extractKey:bf(u),unique:!x&&f.unique};return g.push(O),O.isPrimaryKey||o.push(O),y>1&&s(y===2?u[0]:u.slice(0,y-1),d+1,f),g.sort((_,D)=>_.keyTail-D.keyTail),O}const l=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const u of r.indexes)s(u.keyPath,0,u);function a(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(f=u.query.range,p=d.keyTail,{type:f.type===1?2:f.type,lower:xa(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,p),lowerOpen:!0,upper:xa(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,p),upperOpen:!0})}}:u;var f,p}return{...n,schema:{...r,primaryKey:l,indexes:o,getIndexByKeyPath:function(u){const d=i[ul(u)];return d&&d[0]}},count:u=>n.count(a(u)),query:u=>n.query(a(u)),openCursor(u){const{keyTail:d,isVirtual:f,keyLength:p}=u.query.index;return f?n.openCursor(a(u)).then(g=>g&&function(y){return Object.create(y,{continue:{value:function(O){O!=null?y.continue(xa(O,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?y.continue(y.key.slice(0,p).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):y.continue()}},continuePrimaryKey:{value(O,_){y.continuePrimaryKey(xa(O,t.MAX_KEY,d),_)}},primaryKey:{get:()=>y.primaryKey},key:{get(){const O=y.key;return p===1?O[0]:O.slice(0,p)}},value:{get:()=>y.value}})}(g)):n.openCursor(u)}}}}}};function $h(t,e,n,r){return n=n||{},r=r||"",Ft(t).forEach(i=>{if(er(e,i)){var o=t[i],s=e[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const l=of(o);l!==of(s)?n[r+i]=e[i]:l==="Object"?$h(o,s,n,r+i+"."):o!==s&&(n[r+i]=e[i])}else o!==s&&(n[r+i]=e[i])}else n[r+i]=void 0}),Ft(e).forEach(i=>{er(t,i)||(n[r+i]=e[i])}),n}const H2={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=Be.trans,{deleting:l,creating:a,updating:c}=s.table(e).hook;switch(o.type){case"add":if(a.fire===Ct)break;return s._promise("readwrite",()=>u(o),!0);case"put":if(a.fire===Ct&&c.fire===Ct)break;return s._promise("readwrite",()=>u(o),!0);case"delete":if(l.fire===Ct)break;return s._promise("readwrite",()=>u(o),!0);case"deleteRange":if(l.fire===Ct)break;return s._promise("readwrite",()=>function(f){return d(f.trans,f.range,1e4)}(o),!0)}return n.mutate(o);function u(f){const p=Be.trans,g=f.keys||function(y,x){return x.type==="delete"?x.keys:x.keys||x.values.map(y.extractKey)}(r,f);if(!g)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?{...f,keys:g}:{...f}).type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function(y,x,O){return x.type==="add"?Promise.resolve([]):y.getMany({trans:x.trans,keys:O,cache:"immutable"})}(n,f,g).then(y=>{const x=g.map((O,_)=>{const D=y[_],k={onerror:null,onsuccess:null};if(f.type==="delete")l.fire.call(k,O,D,p);else if(f.type==="add"||D===void 0){const I=a.fire.call(k,O,f.values[_],p);O==null&&I!=null&&(O=I,f.keys[_]=O,r.outbound||kr(f.values[_],r.keyPath,O))}else{const I=$h(D,f.values[_]),L=c.fire.call(k,I,O,D,p);if(L){const R=f.values[_];Object.keys(L).forEach(U=>{er(R,U)?R[U]=L[U]:kr(R,U,L[U])})}}return k});return n.mutate(f).then(({failures:O,results:_,numFailures:D,lastResult:k})=>{for(let I=0;I<g.length;++I){const L=_?_[I]:g[I],R=x[I];L==null?R.onerror&&R.onerror(O[I]):R.onsuccess&&R.onsuccess(f.type==="put"&&y[I]?f.values[I]:L)}return{failures:O,results:_,numFailures:D,lastResult:k}}).catch(O=>(x.forEach(_=>_.onerror&&_.onerror(O)),Promise.reject(O)))})}function d(f,p,g){return n.query({trans:f,values:!1,query:{index:r,range:p},limit:g}).then(({result:y})=>u({type:"delete",keys:y,trans:f}).then(x=>x.numFailures>0?Promise.reject(x.failures[0]):y.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(f,{...p,lower:y[y.length-1],lowerOpen:!0},g)))}}}}})};function Av(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,o=0;i<e.keys.length&&o<t.length;++i)Tn(e.keys[i],t[o])===0&&(r.push(n?Zl(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch{return null}}const F2={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Av(r.keys,r.trans._cache,r.cache==="clone");return i?Ae.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Zl(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Lh(t){return!("from"in t)}const Zr=function(t,e){if(!this){const n=new Zr;return t&&"d"in t&&En(n,t),n}En(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Il(t,e,n){const r=Tn(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Lh(t))return En(t,{from:e,to:n,d:1});const i=t.l,o=t.r;if(Tn(n,t.from)<0)return i?Il(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Um(t);if(Tn(e,t.to)>0)return o?Il(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Um(t);Tn(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),Tn(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const s=!t.r;i&&!t.l&&Oc(t,i),o&&s&&Oc(t,o)}function Oc(t,e){Lh(e)||function n(r,{from:i,to:o,l:s,r:l}){Il(r,i,o),s&&n(r,s),l&&n(r,l)}(t,e)}function j2(t,e){const n=Ef(e);let r=n.next();if(r.done)return!1;let i=r.value;const o=Ef(t);let s=o.next(i.from),l=s.value;for(;!r.done&&!s.done;){if(Tn(l.from,i.to)<=0&&Tn(l.to,i.from)>=0)return!0;Tn(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(s=o.next(i.from)).value}return!1}function Ef(t){let e=Lh(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Tn(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Tn(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Um(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...t},l=t[i];t.from=l.from,t.to=l.to,t[i]=l[i],s[i]=l[o],t[o]=s,s.d=zm(s)}t.d=zm(t)}function zm({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}ws(Zr.prototype,{add(t){return Oc(this,t),this},addKey(t){return Il(this,t,t),this},addKeys(t){return t.forEach(e=>Il(this,e,e)),this},[sf](){return Ef(this)}});const U2={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Zr(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:l,outbound:a}=s,c={...i,mutate:f=>{const p=f.trans,g=p.mutatedParts||(p.mutatedParts={}),y=L=>{const R=`idb://${e}/${r}/${L}`;return g[R]||(g[R]=new Zr)},x=y(""),O=y(":dels"),{type:_}=f;let[D,k]=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];const I=f.trans._cache;return i.mutate(f).then(L=>{if(hn(D)){_!=="delete"&&(D=L.results),x.addKeys(D);const R=Av(D,I);R||_==="add"||O.addKeys(D),(R||k)&&function(U,T,C,V){function w(Y){const J=U(Y.name||"");function he(Q){return Q!=null?Y.extractKey(Q):null}const ce=Q=>Y.multiEntry&&hn(Q)?Q.forEach(Ce=>J.addKey(Ce)):J.addKey(Q);(C||V).forEach((Q,Ce)=>{const We=C&&he(C[Ce]),$e=V&&he(V[Ce]);Tn(We,$e)!==0&&(We!=null&&ce(We),$e!=null&&ce($e))})}T.indexes.forEach(w)}(y,o,R,k)}else if(D){const R={from:D.lower,to:D.upper};O.add(R),x.add(R)}else x.add(n),O.add(n),o.indexes.forEach(R=>y(R.name).add(n));return L})}},u=({query:{index:f,range:p}})=>{var g,y;return[f,new Zr((g=p.lower)!==null&&g!==void 0?g:t.MIN_KEY,(y=p.upper)!==null&&y!==void 0?y:t.MAX_KEY)]},d={get:f=>[s,new Zr(f.key)],getMany:f=>[s,new Zr().addKeys(f.keys)],count:u,query:u,openCursor:u};return Ft(d).forEach(f=>{c[f]=function(p){const{subscr:g}=Be;if(g){const y=k=>{const I=`idb://${e}/${r}/${k}`;return g[I]||(g[I]=new Zr)},x=y(""),O=y(":dels"),[_,D]=d[f](p);if(y(_.name||"").add(D),!_.isPrimaryKey){if(f!=="count"){const k=f==="query"&&a&&p.values&&i.query({...p,values:!1});return i[f].apply(this,arguments).then(I=>{if(f==="query"){if(a&&p.values)return k.then(({result:R})=>(x.addKeys(R),I));const L=p.values?I.result.map(l):I.result;p.values?x.addKeys(L):O.addKeys(L)}else if(f==="openCursor"){const L=I,R=p.values;return L&&Object.create(L,{key:{get:()=>(O.addKey(L.primaryKey),L.key)},primaryKey:{get(){const U=L.primaryKey;return O.addKey(U),U}},value:{get:()=>(R&&x.addKey(L.primaryKey),L.value)}})}return I})}O.add(n)}}return i[f].apply(this,arguments)}}),c}}}};let zt=class Ya{constructor(e,n){this._middlewares={},this.verno=0;const r=Ya.dependencies;this._options=n={addons:Ya.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ct,dbReadyPromise:null,cancelOpen:Ct,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new Ae(l=>{o.dbReadyResolve=l}),o.openCanceller=new Ae((l,a)=>{o.cancelOpen=a}),this._state=o,this.name=e,this.on=cl(this,"populate","blocked","versionchange","close",{ready:[Ah,Ct]}),this.on.ready.subscribe=ev(this.on.ready.subscribe,l=>(a,c)=>{Ya.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||Ae.resolve().then(a),c&&l(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&l(a);else{l(a);const d=this;c||l(function f(){d.on.ready.unsubscribe(a),d.on.ready.unsubscribe(f)})}})}),this.Collection=(s=this,Fs(O2.prototype,function(l,a){this.db=s;let c=Cv,u=null;if(a)try{c=a()}catch(g){u=g}const d=l._ctx,f=d.table,p=f.hook.reading.fire;this._ctx={table:f,index:d.index,isPrimKey:!d.index||f.schema.primKey.keyPath&&d.index===f.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:p!==Nl?p:null}})),this.Table=function(l){return Fs(T2.prototype,function(a,c,u){this.db=l,this._tx=u,this.name=a,this.schema=c,this.hook=l._allTables[a]?l._allTables[a].hook:cl(null,{creating:[h2,Ct],reading:[f2,Nl],updating:[m2,Ct],deleting:[p2,Ct]})})}(this),this.Transaction=function(l){return Fs(_2.prototype,function(a,c,u,d,f){this.db=l,this.mode=a,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=cl(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ae((p,g)=>{this._resolve=p,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},p=>{var g=this.active;return this.active=!1,this.on.error.fire(p),this.parent?this.parent._reject(p):g&&this.idbtrans&&this.idbtrans.abort(),Kt(p)})})}(this),this.Version=function(l){return Fs(L2.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Fs(Sv.prototype,function(a,c,u){this.db=l,this._ctx={table:a,index:c===":id"?null:c,or:u};const d=l._deps.indexedDB;if(!d)throw new Ke.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(f,p)=>d.cmp(p,f),this._max=(f,p)=>d.cmp(f,p)>0?f:p,this._min=(f,p)=>d.cmp(f,p)<0?f:p,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=Ll(n.IDBKeyRange),this._createTransaction=(l,a,c,u)=>new this.Transaction(l,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),al.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(R2),this.use(H2),this.use(U2),this.use(F2),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new Ke.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Ke.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(P2),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?e():new Ae((n,r)=>{if(this._state.openComplete)return r(new Ke.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Ke.DatabaseClosed);this.open().catch(Ct)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:r??10,name:i}),o.sort((s,l)=>s.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return B2(this)}_close(){const e=this._state,n=al.indexOf(this);if(n>=0&&al.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new Ae(r=>{e.dbReadyResolve=r}),e.openCanceller=new Ae((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Ke.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new Ae((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Mt(()=>{(function({indexedDB:l,IDBKeyRange:a},c){!Ph(l)&&c!==vu&&Dh(l,a).delete(c).catch(Ct)})(this._deps,this.name),r()}),s.onerror=Pr(i),s.onblocked=this._fireOnBlocked};if(e)throw new Ke.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Ft(this._allTables).map(e=>this._allTables[e])}transaction(){const e=V2.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=Be.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const o=e.indexOf("?")!==-1;let s,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===id)s=id;else{if(e!="rw"&&e!=od)throw new Ke.InvalidArgument("Invalid transaction mode: "+e);s=od}if(i){if(i.mode===id&&s===od){if(!o)throw new Ke.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!o)throw new Ke.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(u,d)=>{d(c)}):Kt(c)}const a=Ev.bind(null,this,s,l,i,r);return i?i._promise(s,a,"lock"):Be.trans?$s(Be.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!er(this._allTables,e))throw new Ke.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}};const z2=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";let K2=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[z2](){return this}};function Mv(t,e){return Ft(e).forEach(n=>{Oc(t[n]||(t[n]=new Zr),e[n])}),t}function _v(t){let e,n=!1;const r=new K2(i=>{const o=Th(t);let s=!1,l={},a={};const c={get closed(){return s},unsubscribe:()=>{s=!0,zi.storagemutated.unsubscribe(p)}};i.start&&i.start(c);let u=!1,d=!1;function f(){return Ft(a).some(y=>l[y]&&j2(l[y],a[y]))}const p=y=>{Mv(l,y),f()&&g()},g=()=>{if(u||s)return;l={};const y={},x=function(O){o&&Ps();const _=()=>ji(t,{subscr:O,trans:null}),D=Be.trans?$s(Be.transless,_):_();return o&&D.then(ui,ui),D}(y);d||(zi($l,p),d=!0),u=!0,Promise.resolve(x).then(O=>{n=!0,e=O,u=!1,s||(f()?g():(l={},a=y,i.next&&i.next(O)))},O=>{u=!1,n=!1,i.error&&i.error(O),c.unsubscribe()})};return g(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let Af;try{Af={indexedDB:Ot.indexedDB||Ot.mozIndexedDB||Ot.webkitIndexedDB||Ot.msIndexedDB,IDBKeyRange:Ot.IDBKeyRange||Ot.webkitIDBKeyRange}}catch{Af={indexedDB:null,IDBKeyRange:null}}const oo=zt;function Xa(t){let e=ni;try{ni=!0,zi.storagemutated.fire(t)}finally{ni=e}}ws(oo,{...za,delete:t=>new oo(t,{addons:[]}).delete(),exists:t=>new oo(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Ph(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==vu)):Dh(e,n).toCollection().primaryKeys()}(oo.dependencies).then(t)}catch{return Kt(new Ke.MissingAPI)}},defineClass:()=>function(t){En(this,t)},ignoreTransaction:t=>Be.trans?$s(Be.transless,t):t(),vip:Tf,async:function(t){return function(){try{var e=Of(t.apply(this,arguments));return e&&typeof e.then=="function"?e:Ae.resolve(e)}catch(n){return Kt(n)}}},spawn:function(t,e,n){try{var r=Of(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:Ae.resolve(r)}catch(i){return Kt(i)}},currentTransaction:{get:()=>Be.trans||null},waitFor:function(t,e){const n=Ae.resolve(typeof t=="function"?oo.ignoreTransaction(t):t).timeout(e||6e4);return Be.trans?Be.trans.waitFor(n):n},Promise:Ae,debug:{get:()=>Kr,set:t=>{sv(t,t==="dexie"?()=>!0:wv)}},derive:ps,extend:En,props:ws,override:ev,Events:cl,on:zi,liveQuery:_v,extendObservabilitySet:Mv,getByKeyPath:si,setByKeyPath:kr,delByKeyPath:function(t,e){typeof e=="string"?kr(t,e,void 0):"length"in e&&[].map.call(e,function(n){kr(t,n,void 0)})},shallowClone:rv,deepClone:Zl,getObjectDiff:$h,cmp:Tn,asap:tv,minKey:yf,addons:[],connections:al,errnames:Eh,dependencies:Af,semVer:Bm,version:Bm.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),oo.maxKey=Ll(oo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zi($l,t=>{if(!ni){let e;yu?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ai,!0,!0,t)):e=new CustomEvent(Ai,{detail:t}),ni=!0,dispatchEvent(e),ni=!1}}),addEventListener(Ai,({detail:t})=>{ni||Xa(t)}));let ni=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Ai);typeof t.unref=="function"&&t.unref(),zi($l,e=>{ni||t.postMessage(e)}),t.onmessage=e=>{e.data&&Xa(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){zi($l,e=>{try{ni||(typeof localStorage<"u"&&localStorage.setItem(Ai,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ai,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ai){const n=JSON.parse(e.newValue);n&&Xa(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Ai&&Xa(e.changedParts)})}Ae.rejectionMapper=function(t,e){if(!t||t instanceof ms||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Pm[t.name])return t;var n=new Pm[t.name](e||t.message,t);return"stack"in t&&oi(n,"stack",{get:function(){return this.inner.stack}}),n},sv(Kr,wv);var Km={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ec=function(){return Ec=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ec.apply(this,arguments)};function Ki(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(d){s(d)}}function a(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(t,[])).next())})}function Cr(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function W2(t){var e=[t.schema.primKey].concat(t.schema.indexes);return e.map(function(n){return n.src}).join(",")}function q2(t){for(var e={},n=0,r=t.tables;n<r.length;n++){var i=r[n];e[i.name]=i.schema}return e}function Nv(t,e){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},e==="binary"?i.readAsArrayBuffer(t):i.readAsText(t)})}function Dv(t,e){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=e==="binary"?n.readAsArrayBuffer(t):n.readAsText(t);return r}var Mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ih(t,e){return e={exports:{}},t(e,e.exports),e.exports}var bu=Ih(function(t,e){(function(n,r){t.exports=r()})(Mf,function(){function n(z){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(W){return typeof W}:n=function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(z)}function r(z,W,Z,X,fe,N,$){try{var H=z[N]($),j=H.value}catch(G){Z(G);return}H.done?W(j):Promise.resolve(j).then(X,fe)}function i(z){return function(){var W=this,Z=arguments;return new Promise(function(X,fe){var N=z.apply(W,Z);function $(j){r(N,X,fe,$,H,"next",j)}function H(j){r(N,X,fe,$,H,"throw",j)}$(void 0)})}}function o(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")}function s(z,W){for(var Z=0;Z<W.length;Z++){var X=W[Z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(z,X.key,X)}}function l(z,W,Z){return W&&s(z.prototype,W),z}function a(z,W,Z){return W in z?Object.defineProperty(z,W,{value:Z,enumerable:!0,configurable:!0,writable:!0}):z[W]=Z,z}function c(z,W){var Z=Object.keys(z);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(z);W&&(X=X.filter(function(fe){return Object.getOwnPropertyDescriptor(z,fe).enumerable})),Z.push.apply(Z,X)}return Z}function u(z){for(var W=1;W<arguments.length;W++){var Z=arguments[W]!=null?arguments[W]:{};W%2?c(Object(Z),!0).forEach(function(X){a(z,X,Z[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(Z)):c(Object(Z)).forEach(function(X){Object.defineProperty(z,X,Object.getOwnPropertyDescriptor(Z,X))})}return z}function d(z,W){return g(z)||x(z,W)||_()}function f(z){return p(z)||y(z)||O()}function p(z){if(Array.isArray(z)){for(var W=0,Z=new Array(z.length);W<z.length;W++)Z[W]=z[W];return Z}}function g(z){if(Array.isArray(z))return z}function y(z){if(Symbol.iterator in Object(z)||Object.prototype.toString.call(z)==="[object Arguments]")return Array.from(z)}function x(z,W){if(Symbol.iterator in Object(z)||Object.prototype.toString.call(z)==="[object Arguments]"){var Z=[],X=!0,fe=!1,N=void 0;try{for(var $=z[Symbol.iterator](),H;!(X=(H=$.next()).done)&&(Z.push(H.value),!(W&&Z.length===W));X=!0);}catch(j){fe=!0,N=j}finally{try{!X&&$.return!=null&&$.return()}finally{if(fe)throw N}}return Z}}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var D=function z(W){o(this,z),this.p=new Promise(W)};D.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(D.prototype[Symbol.toStringTag]="TypesonPromise"),D.prototype.then=function(z,W){var Z=this;return new D(function(X,fe){Z.p.then(function(N){X(z?z(N):N)}).catch(function(N){return W?W(N):Promise.reject(N)}).then(X,fe)})},D.prototype.catch=function(z){return this.then(null,z)},D.resolve=function(z){return new D(function(W){W(z)})},D.reject=function(z){return new D(function(W,Z){Z(z)})},["all","race"].forEach(function(z){D[z]=function(W){return new D(function(Z,X){Promise[z](W.map(function(fe){return fe&&fe.constructor&&fe.constructor.__typeson__type__==="TypesonPromise"?fe.p:fe})).then(Z,X)})}});var k={},I=k.toString,L={}.hasOwnProperty,R=Object.getPrototypeOf,U=L.toString;function T(z,W){return J(z)&&typeof z.then=="function"&&(!W||typeof z.catch=="function")}function C(z){return I.call(z).slice(8,-1)}function V(z,W){if(!z||n(z)!=="object")return!1;var Z=R(z);if(!Z)return W===null;var X=L.call(Z,"constructor")&&Z.constructor;return typeof X!="function"?W===null:W===X||W!==null&&U.call(X)===U.call(W)||typeof W=="function"&&typeof X.__typeson__type__=="string"&&X.__typeson__type__===W.__typeson__type__}function w(z){if(!z||C(z)!=="Object")return!1;var W=R(z);return W?V(z,Object):!0}function Y(z){if(!z||C(z)!=="Object")return!1;var W=R(z);return W?V(z,Object)||Y(W):!0}function J(z){return z&&n(z)==="object"}function he(z){return z.replace(/~/g,"~0").replace(/\./g,"~1")}function ce(z){return z.replace(/~1/g,".").replace(/~0/g,"~")}function Q(z,W){if(W==="")return z;var Z=W.indexOf(".");if(Z>-1){var X=z[ce(W.slice(0,Z))];return X===void 0?void 0:Q(X,W.slice(Z+1))}return z[ce(W)]}function Ce(z,W,Z){if(W==="")return Z;var X=W.indexOf(".");if(X>-1){var fe=z[ce(W.slice(0,X))];return Ce(fe,W.slice(X+1),Z)}return z[ce(W)]=Z,z}function We(z){return z===null?"null":Array.isArray(z)?"array":n(z)}var $e=Object.keys,et=Array.isArray,rt={}.hasOwnProperty,vt=["type","replaced","iterateIn","iterateUnsetNumeric"];function Te(z,W){if(z.keypath==="")return-1;var Z=z.keypath.match(/\./g)||0,X=W.keypath.match(/\./g)||0;return Z&&(Z=Z.length),X&&(X=X.length),Z>X?-1:Z<X?1:z.keypath<W.keypath?-1:z.keypath>W.keypath}var je=function(){function z(W){o(this,z),this.options=W,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(z,[{key:"stringify",value:function(Z,X,fe,N){N=u({},this.options,{},N,{stringification:!0});var $=this.encapsulate(Z,null,N);return et($)?JSON.stringify($[0],X,fe):$.then(function(H){return JSON.stringify(H,X,fe)})}},{key:"stringifySync",value:function(Z,X,fe,N){return this.stringify(Z,X,fe,u({throwOnBadSyncType:!0},N,{sync:!0}))}},{key:"stringifyAsync",value:function(Z,X,fe,N){return this.stringify(Z,X,fe,u({throwOnBadSyncType:!0},N,{sync:!1}))}},{key:"parse",value:function(Z,X,fe){return fe=u({},this.options,{},fe,{parse:!0}),this.revive(JSON.parse(Z,X),fe)}},{key:"parseSync",value:function(Z,X,fe){return this.parse(Z,X,u({throwOnBadSyncType:!0},fe,{sync:!0}))}},{key:"parseAsync",value:function(Z,X,fe){return this.parse(Z,X,u({throwOnBadSyncType:!0},fe,{sync:!1}))}},{key:"specialTypeNames",value:function(Z,X){var fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fe.returnTypeNames=!0,this.encapsulate(Z,X,fe)}},{key:"rootTypeName",value:function(Z,X){var fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fe.iterateNone=!0,this.encapsulate(Z,X,fe)}},{key:"encapsulate",value:function(Z,X,fe){fe=u({sync:!0},this.options,{},fe);var N=fe,$=N.sync,H=this,j={},G=[],ee=[],ae=[],ne="cyclic"in fe?fe.cyclic:!0,re=fe,te=re.encapsulateObserver,ge=Se("",Z,ne,X||{},ae);function ue(we){var E=Object.values(j);if(fe.iterateNone)return E.length?E[0]:z.getJSONType(we);if(E.length){if(fe.returnTypeNames)return f(new Set(E));!we||!w(we)||rt.call(we,"$types")?we={$:we,$types:{$:j}}:we.$types=j}else J(we)&&rt.call(we,"$types")&&(we={$:we,$types:!0});return fe.returnTypeNames?!1:we}function me(we,E){return ye.apply(this,arguments)}function ye(){return ye=i(regeneratorRuntime.mark(function we(E,v){var A;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Promise.all(v.map(function(F){return F[1].p}));case 2:return A=M.sent,M.next=5,Promise.all(A.map(function(){var F=i(regeneratorRuntime.mark(function K(de){var ie,Oe,Le,qe,xe,tt,it,ct,at,Fe,Nt,Ee,be,Ie;return regeneratorRuntime.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(ie=[],Oe=v.splice(0,1),Le=d(Oe,1),qe=Le[0],xe=d(qe,7),tt=xe[0],it=xe[2],ct=xe[3],at=xe[4],Fe=xe[5],Nt=xe[6],Ee=Se(tt,de,it,ct,ie,!0,Nt),be=V(Ee,D),!(tt&&be)){He.next=11;break}return He.next=8,Ee.p;case 8:return Ie=He.sent,at[Fe]=Ie,He.abrupt("return",me(E,ie));case 11:return tt?at[Fe]=Ee:be?E=Ee.p:E=Ee,He.abrupt("return",me(E,ie));case 13:case"end":return He.stop()}},K)}));return function(K){return F.apply(this,arguments)}}()));case 5:return M.abrupt("return",E);case 6:case"end":return M.stop()}},we)})),ye.apply(this,arguments)}function se(we,E,v){Object.assign(we,E);var A=vt.map(function(B){var M=we[B];return delete we[B],M});v(),vt.forEach(function(B,M){we[B]=A[M]})}function Se(we,E,v,A,B,M,F){var K,de={},ie=n(E),Oe=te?function(be){var Ie=F||A.type||z.getJSONType(E);te(Object.assign(be||de,{keypath:we,value:E,cyclic:v,stateObj:A,promisesData:B,resolvingTypesonPromise:M,awaitingTypesonPromise:V(E,D)},{type:Ie}))}:null;if(["string","boolean","number","undefined"].includes(ie))return E===void 0||ie==="number"&&(isNaN(E)||E===-1/0||E===1/0)?(A.replaced?K=E:K=Me(we,E,A,B,!1,M,Oe),K!==E&&(de={replaced:K})):K=E,Oe&&Oe(),K;if(E===null)return Oe&&Oe(),E;if(v&&!A.iterateIn&&!A.iterateUnsetNumeric&&E&&n(E)==="object"){var Le=G.indexOf(E);if(Le<0)v===!0&&(G.push(E),ee.push(we));else return j[we]="#",Oe&&Oe({cyclicKeypath:ee[Le]}),"#"+ee[Le]}var qe=w(E),xe=et(E),tt=(qe||xe)&&(!H.plainObjectReplacers.length||A.replaced)||A.iterateIn?E:Me(we,E,A,B,qe||xe,null,Oe),it;if(tt!==E?(K=tt,de={replaced:tt}):we===""&&V(E,D)?(B.push([we,E,v,A,void 0,void 0,A.type]),K=E):xe&&A.iterateIn!=="object"||A.iterateIn==="array"?(it=new Array(E.length),de={clone:it}):!["function","symbol"].includes(n(E))&&!("toJSON"in E)&&!V(E,D)&&!V(E,Promise)&&!V(E,ArrayBuffer)||qe||A.iterateIn==="object"?(it={},A.addLength&&(it.length=E.length),de={clone:it}):K=E,Oe&&Oe(),fe.iterateNone)return it||K;if(!it)return K;if(A.iterateIn){var ct=function(Ie){var De={ownKeys:rt.call(E,Ie)};se(A,De,function(){var He=we+(we?".":"")+he(Ie),st=Se(He,E[Ie],!!v,A,B,M);V(st,D)?B.push([He,st,!!v,A,it,Ie,A.type]):st!==void 0&&(it[Ie]=st)})};for(var at in E)ct(at);Oe&&Oe({endIterateIn:!0,end:!0})}else $e(E).forEach(function(be){var Ie=we+(we?".":"")+he(be),De={ownKeys:!0};se(A,De,function(){var He=Se(Ie,E[be],!!v,A,B,M);V(He,D)?B.push([Ie,He,!!v,A,it,be,A.type]):He!==void 0&&(it[be]=He)})}),Oe&&Oe({endIterateOwn:!0,end:!0});if(A.iterateUnsetNumeric){for(var Fe=E.length,Nt=function(Ie){if(!(Ie in E)){var De=we+(we?".":"")+Ie,He={ownKeys:!1};se(A,He,function(){var st=Se(De,void 0,!!v,A,B,M);V(st,D)?B.push([De,st,!!v,A,it,Ie,A.type]):st!==void 0&&(it[Ie]=st)})}},Ee=0;Ee<Fe;Ee++)Nt(Ee);Oe&&Oe({endIterateUnsetNumeric:!0,end:!0})}return it}function Me(we,E,v,A,B,M,F){for(var K=B?H.plainObjectReplacers:H.nonplainObjectReplacers,de=K.length;de--;){var ie=K[de];if(ie.test(E,v)){var Oe=ie.type;if(H.revivers[Oe]){var Le=j[we];j[we]=Le?[Oe].concat(Le):Oe}if(Object.assign(v,{type:Oe,replaced:!0}),($||!ie.replaceAsync)&&!ie.replace)return F&&F({typeDetected:!0}),Se(we,E,ne&&"readonly",v,A,M,Oe);F&&F({replacing:!0});var qe=$||!ie.replaceAsync?"replace":"replaceAsync";return Se(we,ie[qe](E,v),ne&&"readonly",v,A,M,Oe)}}return E}return ae.length?$&&fe.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(me(ge,ae)).then(ue):!$&&fe.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():fe.stringification&&$?[ue(ge)]:$?ue(ge):Promise.resolve(ue(ge))}},{key:"encapsulateSync",value:function(Z,X,fe){return this.encapsulate(Z,X,u({throwOnBadSyncType:!0},fe,{sync:!0}))}},{key:"encapsulateAsync",value:function(Z,X,fe){return this.encapsulate(Z,X,u({throwOnBadSyncType:!0},fe,{sync:!1}))}},{key:"revive",value:function(Z,X){var fe=Z&&Z.$types;if(!fe)return Z;if(fe===!0)return Z.$;X=u({sync:!0},this.options,{},X);var N=X,$=N.sync,H=[],j={},G=!0;fe.$&&w(fe.$)&&(Z=Z.$,fe=fe.$,G=!1);var ee=this;function ae(ye,se){var Se=ee.revivers[ye]||[],Me=d(Se,1),we=Me[0];if(!we)throw new Error("Unregistered type: "+ye);return $&&!("revive"in we)?se:we[$&&we.revive?"revive":!$&&we.reviveAsync?"reviveAsync":"revive"](se,j)}function ne(){var ye=[];if(Object.entries(fe).forEach(function(se){var Se=d(se,2),Me=Se[0],we=Se[1];we!=="#"&&[].concat(we).forEach(function(E){var v=ee.revivers[E]||[null,{}],A=d(v,2),B=A[1].plain;B&&(ye.push({keypath:Me,type:E}),delete fe[Me])})}),!!ye.length)return ye.sort(Te).reduce(function se(Se,Me){var we=Me.keypath,E=Me.type;if(T(Se))return Se.then(function(B){return se(B,{keypath:we,type:E})});var v=Q(Z,we);if(v=ae(E,v),V(v,D))return v.then(function(B){var M=Ce(Z,we,B);M===B&&(Z=M)});var A=Ce(Z,we,v);A===v&&(Z=A)},void 0)}var re=[];function te(ye,se,Se,Me,we){if(!(G&&ye==="$types")){var E=fe[ye],v=et(se);if(v||w(se)){var A=v?new Array(se.length):{};for($e(se).forEach(function(Le){var qe=te(ye+(ye?".":"")+he(Le),se[Le],Se||A,A,Le),xe=function(it){return V(it,dt)?A[Le]=void 0:it!==void 0&&(A[Le]=it),it};V(qe,D)?re.push(qe.then(function(tt){return xe(tt)})):xe(qe)}),se=A;H.length;){var B=d(H[0],4),M=B[0],F=B[1],K=B[2],de=B[3],ie=Q(M,F);if(ie!==void 0)K[de]=ie;else break;H.splice(0,1)}}if(!E)return se;if(E==="#"){var Oe=Q(Se,se.slice(1));return Oe===void 0&&H.push([Se,se.slice(1),Me,we]),Oe}return[].concat(E).reduce(function Le(qe,xe){return V(qe,D)?qe.then(function(tt){return Le(tt,xe)}):ae(xe,qe)},se)}}function ge(ye){return V(ye,dt)?void 0:ye}var ue=ne(),me;return V(ue,D)?me=ue.then(function(){return Z}):(me=te("",Z,null),re.length&&(me=D.resolve(me).then(function(ye){return D.all([ye].concat(re))}).then(function(ye){var se=d(ye,1),Se=se[0];return Se}))),T(me)?$&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():V(me,D)?me.p.then(ge):me:!$&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():$?ge(me):Promise.resolve(ge(me))}},{key:"reviveSync",value:function(Z,X){return this.revive(Z,u({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"reviveAsync",value:function(Z,X){return this.revive(Z,u({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"register",value:function(Z,X){return X=X||{},[].concat(Z).forEach(function fe(N){var $=this;if(et(N))return N.map(function(H){return fe.call($,H)});N&&$e(N).forEach(function(H){if(H==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(z.JSON_TYPES.includes(H))throw new TypeError("Plain JSON object types are reserved as type names");var j=N[H],G=j&&j.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,ee=G.filter(function(Se){return Se.type===H});if(ee.length&&(G.splice(G.indexOf(ee[0]),1),delete this.revivers[H],delete this.types[H]),typeof j=="function"){var ae=j;j={test:function(Me){return Me&&Me.constructor===ae},replace:function(Me){return u({},Me)},revive:function(Me){return Object.assign(Object.create(ae.prototype),Me)}}}else if(et(j)){var ne=j,re=d(ne,3),te=re[0],ge=re[1],ue=re[2];j={test:te,replace:ge,revive:ue}}if(!(!j||!j.test)){var me={type:H,test:j.test.bind(j)};j.replace&&(me.replace=j.replace.bind(j)),j.replaceAsync&&(me.replaceAsync=j.replaceAsync.bind(j));var ye=typeof X.fallback=="number"?X.fallback:X.fallback?0:1/0;if(j.testPlainObjects?this.plainObjectReplacers.splice(ye,0,me):this.nonplainObjectReplacers.splice(ye,0,me),j.revive||j.reviveAsync){var se={};j.revive&&(se.revive=j.revive.bind(j)),j.reviveAsync&&(se.reviveAsync=j.reviveAsync.bind(j)),this.revivers[H]=[se,{plain:j.testPlainObjects}]}this.types[H]=j}},this)},this),this}}]),z}(),dt=function z(){o(this,z)};return dt.__typeson__type__="TypesonUndefined",je.Undefined=dt,je.Promise=D,je.isThenable=T,je.toStringTag=C,je.hasConstructorOf=V,je.isObject=J,je.isPlainObject=w,je.isUserObject=Y,je.escapeKeyPathComponent=he,je.unescapeKeyPathComponent=ce,je.getByKeyPath=Q,je.getJSONType=We,je.JSON_TYPES=["null","boolean","number","string","array","object"],je})}),J2=Ih(function(t,e){(function(n,r){t.exports=r()})(Mf,function(){function n(E){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(E)}function r(E,v){if(!(E instanceof v))throw new TypeError("Cannot call a class as a function")}function i(E,v){for(var A=0;A<v.length;A++){var B=v[A];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(E,B.key,B)}}function o(E,v,A){return v in E?Object.defineProperty(E,v,{value:A,enumerable:!0,configurable:!0,writable:!0}):E[v]=A,E}function s(E,v){var A=Object.keys(E);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(E);v&&(B=B.filter(function(M){return Object.getOwnPropertyDescriptor(E,M).enumerable})),A.push.apply(A,B)}return A}function l(E){return function(A){if(Array.isArray(A))return a(A)}(E)||function(A){if(typeof Symbol<"u"&&Symbol.iterator in Object(A))return Array.from(A)}(E)||function(A,B){if(A){if(typeof A=="string")return a(A,B);var M=Object.prototype.toString.call(A).slice(8,-1);if(M==="Object"&&A.constructor&&(M=A.constructor.name),M==="Map"||M==="Set")return Array.from(A);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return a(A,B)}}(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(E,v){(v==null||v>E.length)&&(v=E.length);for(var A=0,B=new Array(v);A<v;A++)B[A]=E[A];return B}function c(E){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(E)}function u(E,v){if(!(E instanceof v))throw new TypeError("Cannot call a class as a function")}function d(E,v){for(var A=0;A<v.length;A++){var B=v[A];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(E,B.key,B)}}function f(E,v,A){return v in E?Object.defineProperty(E,v,{value:A,enumerable:!0,configurable:!0,writable:!0}):E[v]=A,E}function p(E,v){var A=Object.keys(E);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(E);v&&(B=B.filter(function(M){return Object.getOwnPropertyDescriptor(E,M).enumerable})),A.push.apply(A,B)}return A}function g(E){for(var v=1;v<arguments.length;v++){var A=arguments[v]!=null?arguments[v]:{};v%2?p(Object(A),!0).forEach(function(B){f(E,B,A[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(A)):p(Object(A)).forEach(function(B){Object.defineProperty(E,B,Object.getOwnPropertyDescriptor(A,B))})}return E}function y(E,v){return function(B){if(Array.isArray(B))return B}(E)||function(B,M){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(B)))){var F=[],K=!0,de=!1,ie=void 0;try{for(var Oe,Le=B[Symbol.iterator]();!(K=(Oe=Le.next()).done)&&(F.push(Oe.value),!M||F.length!==M);K=!0);}catch(qe){de=!0,ie=qe}finally{try{K||Le.return==null||Le.return()}finally{if(de)throw ie}}return F}}(E,v)||O(E,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x(E){return function(A){if(Array.isArray(A))return _(A)}(E)||function(A){if(typeof Symbol<"u"&&Symbol.iterator in Object(A))return Array.from(A)}(E)||O(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(E,v){if(E){if(typeof E=="string")return _(E,v);var A=Object.prototype.toString.call(E).slice(8,-1);return A==="Object"&&E.constructor&&(A=E.constructor.name),A==="Map"||A==="Set"?Array.from(E):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?_(E,v):void 0}}function _(E,v){(v==null||v>E.length)&&(v=E.length);for(var A=0,B=new Array(v);A<v;A++)B[A]=E[A];return B}var D=function E(v){u(this,E),this.p=new Promise(v)};D.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(D.prototype[Symbol.toStringTag]="TypesonPromise"),D.prototype.then=function(E,v){var A=this;return new D(function(B,M){A.p.then(function(F){B(E?E(F):F)}).catch(function(F){return v?v(F):Promise.reject(F)}).then(B,M)})},D.prototype.catch=function(E){return this.then(null,E)},D.resolve=function(E){return new D(function(v){v(E)})},D.reject=function(E){return new D(function(v,A){A(E)})},["all","race"].forEach(function(E){D[E]=function(v){return new D(function(A,B){Promise[E](v.map(function(M){return M&&M.constructor&&M.constructor.__typeson__type__==="TypesonPromise"?M.p:M})).then(A,B)})}});var k={}.toString,I={}.hasOwnProperty,L=Object.getPrototypeOf,R=I.toString;function U(E,v){return w(E)&&typeof E.then=="function"&&(!v||typeof E.catch=="function")}function T(E){return k.call(E).slice(8,-1)}function C(E,v){if(!E||c(E)!=="object")return!1;var A=L(E);if(!A)return v===null;var B=I.call(A,"constructor")&&A.constructor;return typeof B!="function"?v===null:v===B||v!==null&&R.call(B)===R.call(v)||typeof v=="function"&&typeof B.__typeson__type__=="string"&&B.__typeson__type__===v.__typeson__type__}function V(E){return!(!E||T(E)!=="Object")&&(!L(E)||C(E,Object))}function w(E){return E&&c(E)==="object"}function Y(E){return E.replace(/~/g,"~0").replace(/\./g,"~1")}function J(E){return E.replace(/~1/g,".").replace(/~0/g,"~")}function he(E,v){if(v==="")return E;var A=v.indexOf(".");if(A>-1){var B=E[J(v.slice(0,A))];return B===void 0?void 0:he(B,v.slice(A+1))}return E[J(v)]}function ce(E,v,A){if(v==="")return A;var B=v.indexOf(".");return B>-1?ce(E[J(v.slice(0,B))],v.slice(B+1),A):(E[J(v)]=A,E)}function Q(E,v,A){return A?v?v(E):E:(E&&E.then||(E=Promise.resolve(E)),v?E.then(v):E)}var Ce=Object.keys,We=Array.isArray,$e={}.hasOwnProperty,et=["type","replaced","iterateIn","iterateUnsetNumeric"];function rt(E){return function(){for(var v=[],A=0;A<arguments.length;A++)v[A]=arguments[A];try{return Promise.resolve(E.apply(this,v))}catch(B){return Promise.reject(B)}}}function vt(E,v){if(E.keypath==="")return-1;var A=E.keypath.match(/\./g)||0,B=v.keypath.match(/\./g)||0;return A&&(A=A.length),B&&(B=B.length),A>B?-1:A<B?1:E.keypath<v.keypath?-1:E.keypath>v.keypath}var Te=function(){function E(v){u(this,E),this.options=v,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(A,B,M){return B&&d(A.prototype,B),A}(E,[{key:"stringify",value:function(A,B,M,F){F=g(g(g({},this.options),F),{},{stringification:!0});var K=this.encapsulate(A,null,F);return We(K)?JSON.stringify(K[0],B,M):K.then(function(de){return JSON.stringify(de,B,M)})}},{key:"stringifySync",value:function(A,B,M,F){return this.stringify(A,B,M,g(g({throwOnBadSyncType:!0},F),{},{sync:!0}))}},{key:"stringifyAsync",value:function(A,B,M,F){return this.stringify(A,B,M,g(g({throwOnBadSyncType:!0},F),{},{sync:!1}))}},{key:"parse",value:function(A,B,M){return M=g(g(g({},this.options),M),{},{parse:!0}),this.revive(JSON.parse(A,B),M)}},{key:"parseSync",value:function(A,B,M){return this.parse(A,B,g(g({throwOnBadSyncType:!0},M),{},{sync:!0}))}},{key:"parseAsync",value:function(A,B,M){return this.parse(A,B,g(g({throwOnBadSyncType:!0},M),{},{sync:!1}))}},{key:"specialTypeNames",value:function(A,B){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M.returnTypeNames=!0,this.encapsulate(A,B,M)}},{key:"rootTypeName",value:function(A,B){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M.iterateNone=!0,this.encapsulate(A,B,M)}},{key:"encapsulate",value:function(A,B,M){var F=rt(function(Ee,be){return Q(Promise.all(be.map(function(Ie){return Ie[1].p})),function(Ie){return Q(Promise.all(Ie.map(rt(function(De){var He=!1,st=[],yn=y(be.splice(0,1),1),bt=y(yn[0],7),ln=bt[0],Pn=bt[2],mt=bt[3],$n=bt[4],yt=bt[5],vn=bt[6],Xt=Fe(ln,De,Pn,mt,st,!0,vn),Un=C(Xt,D);return function(Qe,Vo){var mi=Qe();return mi&&mi.then?mi.then(Vo):Vo(mi)}(function(){if(ln&&Un)return Q(Xt.p,function(zn){return $n[yt]=zn,He=!0,F(Ee,st)})},function(zn){return He?zn:(ln?$n[yt]=Xt:Ee=Un?Xt.p:Xt,F(Ee,st))})}))),function(){return Ee})})}),K=(M=g(g({sync:!0},this.options),M)).sync,de=this,ie={},Oe=[],Le=[],qe=[],xe=!("cyclic"in M)||M.cyclic,tt=M.encapsulateObserver,it=Fe("",A,xe,B||{},qe);function ct(Ee){var be=Object.values(ie);if(M.iterateNone)return be.length?be[0]:E.getJSONType(Ee);if(be.length){if(M.returnTypeNames)return x(new Set(be));Ee&&V(Ee)&&!$e.call(Ee,"$types")?Ee.$types=ie:Ee={$:Ee,$types:{$:ie}}}else w(Ee)&&$e.call(Ee,"$types")&&(Ee={$:Ee,$types:!0});return!M.returnTypeNames&&Ee}function at(Ee,be,Ie){Object.assign(Ee,be);var De=et.map(function(He){var st=Ee[He];return delete Ee[He],st});Ie(),et.forEach(function(He,st){Ee[He]=De[st]})}function Fe(Ee,be,Ie,De,He,st,yn){var bt,ln={},Pn=c(be),mt=tt?function(Ar){var Zt=yn||De.type||E.getJSONType(be);tt(Object.assign(Ar||ln,{keypath:Ee,value:be,cyclic:Ie,stateObj:De,promisesData:He,resolvingTypesonPromise:st,awaitingTypesonPromise:C(be,D)},{type:Zt}))}:null;if(["string","boolean","number","undefined"].includes(Pn))return be===void 0||Number.isNaN(be)||be===Number.NEGATIVE_INFINITY||be===Number.POSITIVE_INFINITY?(bt=De.replaced?be:Nt(Ee,be,De,He,!1,st,mt))!==be&&(ln={replaced:bt}):bt=be,mt&&mt(),bt;if(be===null)return mt&&mt(),be;if(Ie&&!De.iterateIn&&!De.iterateUnsetNumeric&&be&&c(be)==="object"){var $n=Oe.indexOf(be);if(!($n<0))return ie[Ee]="#",mt&&mt({cyclicKeypath:Le[$n]}),"#"+Le[$n];Ie===!0&&(Oe.push(be),Le.push(Ee))}var yt,vn=V(be),Xt=We(be),Un=(vn||Xt)&&(!de.plainObjectReplacers.length||De.replaced)||De.iterateIn?be:Nt(Ee,be,De,He,vn||Xt,null,mt);if(Un!==be?(bt=Un,ln={replaced:Un}):Ee===""&&C(be,D)?(He.push([Ee,be,Ie,De,void 0,void 0,De.type]),bt=be):Xt&&De.iterateIn!=="object"||De.iterateIn==="array"?(yt=new Array(be.length),ln={clone:yt}):(["function","symbol"].includes(c(be))||"toJSON"in be||C(be,D)||C(be,Promise)||C(be,ArrayBuffer))&&!vn&&De.iterateIn!=="object"?bt=be:(yt={},De.addLength&&(yt.length=be.length),ln={clone:yt}),mt&&mt(),M.iterateNone)return yt||bt;if(!yt)return bt;if(De.iterateIn){var zn=function(Zt){var mr={ownKeys:$e.call(be,Zt)};at(De,mr,function(){var gr=Ee+(Ee?".":"")+Y(Zt),Mr=Fe(gr,be[Zt],!!Ie,De,He,st);C(Mr,D)?He.push([gr,Mr,!!Ie,De,yt,Zt,De.type]):Mr!==void 0&&(yt[Zt]=Mr)})};for(var Qe in be)zn(Qe);mt&&mt({endIterateIn:!0,end:!0})}else Ce(be).forEach(function(Ar){var Zt=Ee+(Ee?".":"")+Y(Ar);at(De,{ownKeys:!0},function(){var mr=Fe(Zt,be[Ar],!!Ie,De,He,st);C(mr,D)?He.push([Zt,mr,!!Ie,De,yt,Ar,De.type]):mr!==void 0&&(yt[Ar]=mr)})}),mt&&mt({endIterateOwn:!0,end:!0});if(De.iterateUnsetNumeric){for(var Vo=be.length,mi=function(Zt){if(!(Zt in be)){var mr=Ee+(Ee?".":"")+Zt;at(De,{ownKeys:!1},function(){var gr=Fe(mr,void 0,!!Ie,De,He,st);C(gr,D)?He.push([mr,gr,!!Ie,De,yt,Zt,De.type]):gr!==void 0&&(yt[Zt]=gr)})}},Is=0;Is<Vo;Is++)mi(Is);mt&&mt({endIterateUnsetNumeric:!0,end:!0})}return yt}function Nt(Ee,be,Ie,De,He,st,yn){for(var bt=He?de.plainObjectReplacers:de.nonplainObjectReplacers,ln=bt.length;ln--;){var Pn=bt[ln];if(Pn.test(be,Ie)){var mt=Pn.type;if(de.revivers[mt]){var $n=ie[Ee];ie[Ee]=$n?[mt].concat($n):mt}return Object.assign(Ie,{type:mt,replaced:!0}),!K&&Pn.replaceAsync||Pn.replace?(yn&&yn({replacing:!0}),Fe(Ee,Pn[K||!Pn.replaceAsync?"replace":"replaceAsync"](be,Ie),xe&&"readonly",Ie,De,st,mt)):(yn&&yn({typeDetected:!0}),Fe(Ee,be,xe&&"readonly",Ie,De,st,mt))}}return be}return qe.length?K&&M.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(F(it,qe)).then(ct):!K&&M.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():M.stringification&&K?[ct(it)]:K?ct(it):Promise.resolve(ct(it))}},{key:"encapsulateSync",value:function(A,B,M){return this.encapsulate(A,B,g(g({throwOnBadSyncType:!0},M),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(A,B,M){return this.encapsulate(A,B,g(g({throwOnBadSyncType:!0},M),{},{sync:!1}))}},{key:"revive",value:function(A,B){var M=A&&A.$types;if(!M)return A;if(M===!0)return A.$;var F=(B=g(g({sync:!0},this.options),B)).sync,K=[],de={},ie=!0;M.$&&V(M.$)&&(A=A.$,M=M.$,ie=!1);var Oe=this;function Le(ct,at){var Fe=y(Oe.revivers[ct]||[],1)[0];if(!Fe)throw new Error("Unregistered type: "+ct);return F&&!("revive"in Fe)?at:Fe[F&&Fe.revive?"revive":!F&&Fe.reviveAsync?"reviveAsync":"revive"](at,de)}var qe=[];function xe(ct){return C(ct,je)?void 0:ct}var tt,it=function(){var at=[];if(Object.entries(M).forEach(function(Fe){var Nt=y(Fe,2),Ee=Nt[0],be=Nt[1];be!=="#"&&[].concat(be).forEach(function(Ie){y(Oe.revivers[Ie]||[null,{}],2)[1].plain&&(at.push({keypath:Ee,type:Ie}),delete M[Ee])})}),at.length)return at.sort(vt).reduce(function Fe(Nt,Ee){var be=Ee.keypath,Ie=Ee.type;if(U(Nt))return Nt.then(function(st){return Fe(st,{keypath:be,type:Ie})});var De=he(A,be);if(C(De=Le(Ie,De),D))return De.then(function(st){var yn=ce(A,be,st);yn===st&&(A=yn)});var He=ce(A,be,De);He===De&&(A=He)},void 0)}();return C(it,D)?tt=it.then(function(){return A}):(tt=function ct(at,Fe,Nt,Ee,be){if(!ie||at!=="$types"){var Ie=M[at],De=We(Fe);if(De||V(Fe)){var He=De?new Array(Fe.length):{};for(Ce(Fe).forEach(function(yt){var vn=ct(at+(at?".":"")+Y(yt),Fe[yt],Nt||He,He,yt),Xt=function(zn){return C(zn,je)?He[yt]=void 0:zn!==void 0&&(He[yt]=zn),zn};C(vn,D)?qe.push(vn.then(function(Un){return Xt(Un)})):Xt(vn)}),Fe=He;K.length;){var st=y(K[0],4),yn=st[0],bt=st[1],ln=st[2],Pn=st[3],mt=he(yn,bt);if(mt===void 0)break;ln[Pn]=mt,K.splice(0,1)}}if(!Ie)return Fe;if(Ie==="#"){var $n=he(Nt,Fe.slice(1));return $n===void 0&&K.push([Nt,Fe.slice(1),Ee,be]),$n}return[].concat(Ie).reduce(function yt(vn,Xt){return C(vn,D)?vn.then(function(Un){return yt(Un,Xt)}):Le(Xt,vn)},Fe)}}("",A,null),qe.length&&(tt=D.resolve(tt).then(function(ct){return D.all([ct].concat(qe))}).then(function(ct){return y(ct,1)[0]}))),U(tt)?F&&B.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():C(tt,D)?tt.p.then(xe):tt:!F&&B.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():F?xe(tt):Promise.resolve(xe(tt))}},{key:"reviveSync",value:function(A,B){return this.revive(A,g(g({throwOnBadSyncType:!0},B),{},{sync:!0}))}},{key:"reviveAsync",value:function(A,B){return this.revive(A,g(g({throwOnBadSyncType:!0},B),{},{sync:!1}))}},{key:"register",value:function(A,B){return B=B||{},[].concat(A).forEach(function M(F){var K=this;if(We(F))return F.map(function(de){return M.call(K,de)});F&&Ce(F).forEach(function(de){if(de==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(E.JSON_TYPES.includes(de))throw new TypeError("Plain JSON object types are reserved as type names");var ie=F[de],Oe=ie&&ie.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Le=Oe.filter(function(at){return at.type===de});if(Le.length&&(Oe.splice(Oe.indexOf(Le[0]),1),delete this.revivers[de],delete this.types[de]),typeof ie=="function"){var qe=ie;ie={test:function(Fe){return Fe&&Fe.constructor===qe},replace:function(Fe){return g({},Fe)},revive:function(Fe){return Object.assign(Object.create(qe.prototype),Fe)}}}else if(We(ie)){var xe=y(ie,3);ie={test:xe[0],replace:xe[1],revive:xe[2]}}if(ie&&ie.test){var tt={type:de,test:ie.test.bind(ie)};ie.replace&&(tt.replace=ie.replace.bind(ie)),ie.replaceAsync&&(tt.replaceAsync=ie.replaceAsync.bind(ie));var it=typeof B.fallback=="number"?B.fallback:B.fallback?0:Number.POSITIVE_INFINITY;if(ie.testPlainObjects?this.plainObjectReplacers.splice(it,0,tt):this.nonplainObjectReplacers.splice(it,0,tt),ie.revive||ie.reviveAsync){var ct={};ie.revive&&(ct.revive=ie.revive.bind(ie)),ie.reviveAsync&&(ct.reviveAsync=ie.reviveAsync.bind(ie)),this.revivers[de]=[ct,{plain:ie.testPlainObjects}]}this.types[de]=ie}},this)},this),this}}]),E}(),je=function E(){u(this,E)};je.__typeson__type__="TypesonUndefined",Te.Undefined=je,Te.Promise=D,Te.isThenable=U,Te.toStringTag=T,Te.hasConstructorOf=C,Te.isObject=w,Te.isPlainObject=V,Te.isUserObject=function E(v){if(!v||T(v)!=="Object")return!1;var A=L(v);return!A||C(v,Object)||E(A)},Te.escapeKeyPathComponent=Y,Te.unescapeKeyPathComponent=J,Te.getByKeyPath=he,Te.getJSONType=function(v){return v===null?"null":Array.isArray(v)?"array":c(v)},Te.JSON_TYPES=["null","boolean","number","string","array","object"];for(var dt={userObject:{test:function(v,A){return Te.isUserObject(v)},replace:function(v){return function(B){for(var M=1;M<arguments.length;M++){var F=arguments[M]!=null?arguments[M]:{};M%2?s(Object(F),!0).forEach(function(K){o(B,K,F[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(F)):s(Object(F)).forEach(function(K){Object.defineProperty(B,K,Object.getOwnPropertyDescriptor(F,K))})}return B}({},v)},revive:function(v){return v}}},z=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(v,A){return!!Array.isArray(v)&&(Object.keys(v).some(function(B){return String(Number.parseInt(B))!==B})&&(A.iterateIn="object",A.addLength=!0),!0)},replace:function(v,A){return A.iterateUnsetNumeric=!0,v},revive:function(v){if(Array.isArray(v))return v;var A=[];return Object.keys(v).forEach(function(B){var M=v[B];A[B]=M}),A}}},{sparseUndefined:{test:function(v,A){return v===void 0&&A.ownKeys===!1},replace:function(v){return 0},revive:function(v){}}}],W={undef:{test:function(v,A){return v===void 0&&(A.ownKeys||!("ownKeys"in A))},replace:function(v){return 0},revive:function(v){return new Te.Undefined}}},Z={StringObject:{test:function(v){return Te.toStringTag(v)==="String"&&n(v)==="object"},replace:function(v){return String(v)},revive:function(v){return new String(v)}},BooleanObject:{test:function(v){return Te.toStringTag(v)==="Boolean"&&n(v)==="object"},replace:function(v){return!!v},revive:function(v){return new Boolean(v)}},NumberObject:{test:function(v){return Te.toStringTag(v)==="Number"&&n(v)==="object"},replace:function(v){return Number(v)},revive:function(v){return new Number(v)}}},X=[{nan:{test:function(v){return Number.isNaN(v)},replace:function(v){return"NaN"},revive:function(v){return Number.NaN}}},{infinity:{test:function(v){return v===Number.POSITIVE_INFINITY},replace:function(v){return"Infinity"},revive:function(v){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(v){return v===Number.NEGATIVE_INFINITY},replace:function(v){return"-Infinity"},revive:function(v){return Number.NEGATIVE_INFINITY}}}],fe={date:{test:function(v){return Te.toStringTag(v)==="Date"},replace:function(v){var A=v.getTime();return Number.isNaN(A)?"NaN":A},revive:function(v){return v==="NaN"?new Date(Number.NaN):new Date(v)}}},N={regexp:{test:function(v){return Te.toStringTag(v)==="RegExp"},replace:function(v){return{source:v.source,flags:(v.global?"g":"")+(v.ignoreCase?"i":"")+(v.multiline?"m":"")+(v.sticky?"y":"")+(v.unicode?"u":"")}},revive:function(v){var A=v.source,B=v.flags;return new RegExp(A,B)}}},$={map:{test:function(v){return Te.toStringTag(v)==="Map"},replace:function(v){return l(v.entries())},revive:function(v){return new Map(v)}}},H={set:{test:function(v){return Te.toStringTag(v)==="Set"},replace:function(v){return l(v.values())},revive:function(v){return new Set(v)}}},j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=new Uint8Array(256),ee=0;ee<j.length;ee++)G[j.charCodeAt(ee)]=ee;var ae=function(v,A,B){B==null&&(B=v.byteLength);for(var M=new Uint8Array(v,0,B),F=M.length,K="",de=0;de<F;de+=3)K+=j[M[de]>>2],K+=j[(3&M[de])<<4|M[de+1]>>4],K+=j[(15&M[de+1])<<2|M[de+2]>>6],K+=j[63&M[de+2]];return F%3==2?K=K.slice(0,-1)+"=":F%3==1&&(K=K.slice(0,-2)+"=="),K},ne=function(v){var A,B,M,F,K=v.length,de=.75*v.length,ie=0;v[v.length-1]==="="&&(de--,v[v.length-2]==="="&&de--);for(var Oe=new ArrayBuffer(de),Le=new Uint8Array(Oe),qe=0;qe<K;qe+=4)A=G[v.charCodeAt(qe)],B=G[v.charCodeAt(qe+1)],M=G[v.charCodeAt(qe+2)],F=G[v.charCodeAt(qe+3)],Le[ie++]=A<<2|B>>4,Le[ie++]=(15&B)<<4|M>>2,Le[ie++]=(3&M)<<6|63&F;return Oe},re={arraybuffer:{test:function(v){return Te.toStringTag(v)==="ArrayBuffer"},replace:function(v,A){A.buffers||(A.buffers=[]);var B=A.buffers.indexOf(v);return B>-1?{index:B}:(A.buffers.push(v),ae(v))},revive:function(v,A){if(A.buffers||(A.buffers=[]),n(v)==="object")return A.buffers[v.index];var B=ne(v);return A.buffers.push(B),B}}},te=typeof self>"u"?Mf:self,ge={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(E){var v=E,A=te[v];A&&(ge[E.toLowerCase()]={test:function(M){return Te.toStringTag(M)===v},replace:function(M,F){var K=M.buffer,de=M.byteOffset,ie=M.length;F.buffers||(F.buffers=[]);var Oe=F.buffers.indexOf(K);return Oe>-1?{index:Oe,byteOffset:de,length:ie}:(F.buffers.push(K),{encoded:ae(K),byteOffset:de,length:ie})},revive:function(M,F){F.buffers||(F.buffers=[]);var K,de=M.byteOffset,ie=M.length,Oe=M.encoded,Le=M.index;return"index"in M?K=F.buffers[Le]:(K=ne(Oe),F.buffers.push(K)),new A(K,de,ie)}})});var ue={dataview:{test:function(v){return Te.toStringTag(v)==="DataView"},replace:function(v,A){var B=v.buffer,M=v.byteOffset,F=v.byteLength;A.buffers||(A.buffers=[]);var K=A.buffers.indexOf(B);return K>-1?{index:K,byteOffset:M,byteLength:F}:(A.buffers.push(B),{encoded:ae(B),byteOffset:M,byteLength:F})},revive:function(v,A){A.buffers||(A.buffers=[]);var B,M=v.byteOffset,F=v.byteLength,K=v.encoded,de=v.index;return"index"in v?B=A.buffers[de]:(B=ne(K),A.buffers.push(B)),new DataView(B,M,F)}}},me={IntlCollator:{test:function(v){return Te.hasConstructorOf(v,Intl.Collator)},replace:function(v){return v.resolvedOptions()},revive:function(v){return new Intl.Collator(v.locale,v)}},IntlDateTimeFormat:{test:function(v){return Te.hasConstructorOf(v,Intl.DateTimeFormat)},replace:function(v){return v.resolvedOptions()},revive:function(v){return new Intl.DateTimeFormat(v.locale,v)}},IntlNumberFormat:{test:function(v){return Te.hasConstructorOf(v,Intl.NumberFormat)},replace:function(v){return v.resolvedOptions()},revive:function(v){return new Intl.NumberFormat(v.locale,v)}}};function ye(E){for(var v=new Uint8Array(E.length),A=0;A<E.length;A++)v[A]=E.charCodeAt(A);return v.buffer}var se={file:{test:function(v){return Te.toStringTag(v)==="File"},replace:function(v){var A=new XMLHttpRequest;if(A.overrideMimeType("text/plain; charset=x-user-defined"),A.open("GET",URL.createObjectURL(v),!1),A.send(),A.status!==200&&A.status!==0)throw new Error("Bad File access: "+A.status);return{type:v.type,stringContents:A.responseText,name:v.name,lastModified:v.lastModified}},revive:function(v){var A=v.name,B=v.type,M=v.stringContents,F=v.lastModified;return new File([ye(M)],A,{type:B,lastModified:F})},replaceAsync:function(v){return new Te.Promise(function(A,B){var M=new FileReader;M.addEventListener("load",function(){A({type:v.type,stringContents:M.result,name:v.name,lastModified:v.lastModified})}),M.addEventListener("error",function(){B(M.error)}),M.readAsBinaryString(v)})}}},Se={bigint:{test:function(v){return typeof v=="bigint"},replace:function(v){return String(v)},revive:function(v){return BigInt(v)}}},Me={bigintObject:{test:function(v){return n(v)==="object"&&Te.hasConstructorOf(v,BigInt)},replace:function(v){return String(v)},revive:function(v){return new Object(BigInt(v))}}},we={cryptokey:{test:function(v){return Te.toStringTag(v)==="CryptoKey"&&v.extractable},replaceAsync:function(v){return new Te.Promise(function(A,B){crypto.subtle.exportKey("jwk",v).catch(function(M){B(M)}).then(function(M){A({jwk:M,algorithm:v.algorithm,usages:v.usages})})})},revive:function(v){var A=v.jwk,B=v.algorithm,M=v.usages;return crypto.subtle.importKey("jwk",A,B,!0,M)}}};return[dt,W,z,Z,X,fe,N,{imagedata:{test:function(v){return Te.toStringTag(v)==="ImageData"},replace:function(v){return{array:l(v.data),width:v.width,height:v.height}},revive:function(v){return new ImageData(new Uint8ClampedArray(v.array),v.width,v.height)}}},{imagebitmap:{test:function(v){return Te.toStringTag(v)==="ImageBitmap"||v&&v.dataset&&v.dataset.toStringTag==="ImageBitmap"},replace:function(v){var A=document.createElement("canvas");return A.getContext("2d").drawImage(v,0,0),A.toDataURL()},revive:function(v){var A=document.createElement("canvas"),B=A.getContext("2d"),M=document.createElement("img");return M.addEventListener("load",function(){B.drawImage(M,0,0)}),M.src=v,A},reviveAsync:function(v){var A=document.createElement("canvas"),B=A.getContext("2d"),M=document.createElement("img");return M.addEventListener("load",function(){B.drawImage(M,0,0)}),M.src=v,createImageBitmap(A)}}},se,{file:se.file,filelist:{test:function(v){return Te.toStringTag(v)==="FileList"},replace:function(v){for(var A=[],B=0;B<v.length;B++)A[B]=v.item(B);return A},revive:function(v){return new(function(){function A(){r(this,A),this._files=arguments[0],this.length=this._files.length}return function(M,F,K){return F&&i(M.prototype,F),M}(A,[{key:"item",value:function(M){return this._files[M]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),A}())(v)}}},{blob:{test:function(v){return Te.toStringTag(v)==="Blob"},replace:function(v){var A=new XMLHttpRequest;if(A.overrideMimeType("text/plain; charset=x-user-defined"),A.open("GET",URL.createObjectURL(v),!1),A.send(),A.status!==200&&A.status!==0)throw new Error("Bad Blob access: "+A.status);return{type:v.type,stringContents:A.responseText}},revive:function(v){var A=v.type,B=v.stringContents;return new Blob([ye(B)],{type:A})},replaceAsync:function(v){return new Te.Promise(function(A,B){var M=new FileReader;M.addEventListener("load",function(){A({type:v.type,stringContents:M.result})}),M.addEventListener("error",function(){B(M.error)}),M.readAsBinaryString(v)})}}}].concat(typeof Map=="function"?$:[],typeof Set=="function"?H:[],typeof ArrayBuffer=="function"?re:[],typeof Uint8Array=="function"?ge:[],typeof DataView=="function"?ue:[],typeof Intl<"u"?me:[],typeof crypto<"u"?we:[],typeof BigInt<"u"?[Se,Me]:[])})}),ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qs=new Uint8Array(256);for(var Sa=0;Sa<ns.length;Sa++)qs[ns.codePointAt(Sa)]=Sa;var _f=function(e,n,r){r==null&&(r=e.byteLength);for(var i=new Uint8Array(e,0,r),o=i.length,s="",l=0;l<o;l+=3)s+=ns[i[l]>>2],s+=ns[(i[l]&3)<<4|i[l+1]>>4],s+=ns[(i[l+1]&15)<<2|i[l+2]>>6],s+=ns[i[l+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},Pv=function(e){var n=e.length,r=e.length*.75,i=0,o,s,l,a;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),u=new Uint8Array(c),d=0;d<n;d+=4)o=qs[e.codePointAt(d)],s=qs[e.codePointAt(d+1)],l=qs[e.codePointAt(d+2)],a=qs[e.codePointAt(d+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|l>>2,u[i++]=(l&3)<<6|a&63;return c},G2=typeof self>"u"?global:self,$v={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){var e=t,n=G2[e];n&&($v[t.toLowerCase()+"2"]={test:function(r){return bu.toStringTag(r)===e},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var Y2={arraybuffer:{test:function(t){return bu.toStringTag(t)==="ArrayBuffer"},replace:function(t){return _f(t,0,t.byteLength)},revive:function(t){var e=Pv(t);return e}}},ir=new bu().register(J2),X2="FileReaderSync"in self,Ac=[],Za=0;ir.register([Y2,$v,{blob2:{test:function(t){return bu.toStringTag(t)==="Blob"},replace:function(t){if(t.isClosed)throw new Error("The Blob is closed");if(X2){var e=Dv(t,"binary"),n=_f(e,0,e.byteLength);return{type:t.type,data:n}}else{Ac.push(t);var r={type:t.type,data:{start:Za,end:Za+t.size}};return Za+=t.size,r}},finalize:function(t,e){t.data=_f(e,0,e.byteLength)},revive:function(t){var e=t.type,n=t.data;return new Blob([Pv(n)],{type:e})}}}]);ir.mustFinalize=function(){return Ac.length>0};ir.finalize=function(t){return Ki(void 0,void 0,void 0,function(){var e,n,r,i,o,s,l,a,c,u,d,f;return Cr(this,function(p){switch(p.label){case 0:return[4,Nv(new Blob(Ac),"binary")];case 1:if(e=p.sent(),t){for(n=0,r=t;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(l in o)a=o[l],c=ir.types[a],c&&c.finalize&&(u=zt.getByKeyPath(i,s?"$."+l:l),c.finalize(u,e.slice((d=u.data)===null||d===void 0?void 0:d.start,(f=u.data)===null||f===void 0?void 0:f.end)))}}return Ac=[],Za=0,[2]}})})};var Z2=2e3;function Q2(t,e){return Ki(this,void 0,void 0,function(){function n(){return Ki(this,void 0,void 0,function(){var d,f,p,g,y,x,O,_,D,k;return Cr(this,function(I){switch(I.label){case 0:return[4,Promise.all(i.map(function(L){return L.count()}))];case 1:d=I.sent(),d.forEach(function(L,R){return s[R].rowCount=L}),u.totalRows=d.reduce(function(L,R){return L+R}),f=JSON.stringify(a,void 0,l?2:void 0),p=f.lastIndexOf("]"),g=f.substring(0,p),o.push(g),y=e.filter,x=e.transform,O=function(L){var R,U,T,C,V,w,Y,J,he,ce,Q,Ce;return Cr(this,function(We){switch(We.label){case 0:R=t.table(L),U=R.schema.primKey,T=!!U.keyPath,C=e.numRowsPerChunk||Z2,V=T?{tableName:R.name,inbound:!0,rows:[]}:{tableName:R.name,inbound:!1,rows:[]},w=JSON.stringify(V,void 0,l?2:void 0),l&&(w=w.split(`
`).join(`
    `)),Y=w.lastIndexOf("]"),o.push(w.substring(0,Y)),J=null,he=0,ce=!0,Q=function(){var $e,et,rt,vt,Te,W,je,dt,z,W;return Cr(this,function(Z){switch(Z.label){case 0:return c&&zt.ignoreTransaction(function(){return c(u)}),$e=J==null?R.limit(C):R.where(":id").above(J).limit(C),[4,$e.toArray()];case 1:return et=Z.sent(),et.length===0?[2,"break"]:(J!=null&&he>0&&(o.push(","),l&&o.push(`
      `)),ce=et.length===C,T?(rt=y?et.filter(function(X){return y(L,X)}):et,vt=x?rt.map(function(X){return x(L,X).value}):rt,Te=vt.map(function(X){return ir.encapsulate(X)}),ir.mustFinalize()?[4,zt.waitFor(ir.finalize(Te))]:[3,3]):[3,4]);case 2:Z.sent(),Z.label=3;case 3:return W=JSON.stringify(Te,void 0,l?2:void 0),l&&(W=W.split(`
`).join(`
      `)),o.push(new Blob([W.substring(1,W.length-1)])),he=vt.length,J=et.length>0?zt.getByKeyPath(et[et.length-1],U.keyPath):null,[3,8];case 4:return[4,$e.primaryKeys()];case 5:return je=Z.sent(),dt=je.map(function(X,fe){return[X,et[fe]]}),y&&(dt=dt.filter(function(X){var fe=X[0],N=X[1];return y(L,N,fe)})),x&&(dt=dt.map(function(X){var fe=X[0],N=X[1],$=x(L,N,fe);return[$.key,$.value]})),z=dt.map(function(X){return ir.encapsulate(X)}),ir.mustFinalize()?[4,zt.waitFor(ir.finalize(z))]:[3,7];case 6:Z.sent(),Z.label=7;case 7:W=JSON.stringify(z,void 0,l?2:void 0),l&&(W=W.split(`
`).join(`
      `)),o.push(new Blob([W.substring(1,W.length-1)])),he=dt.length,J=je.length>0?je[je.length-1]:null,Z.label=8;case 8:return u.completedRows+=et.length,[2]}})},We.label=1;case 1:return ce?[5,Q()]:[3,3];case 2:return Ce=We.sent(),Ce==="break"?[3,3]:[3,1];case 3:return o.push(w.substr(Y)),u.completedTables+=1,u.completedTables<u.totalTables&&o.push(","),[2]}})},_=0,D=s,I.label=2;case 2:return _<D.length?(k=D[_].name,[5,O(k)]):[3,5];case 3:I.sent(),I.label=4;case 4:return _++,[3,2];case 5:return o.push(f.substr(p)),u.done=!0,c&&zt.ignoreTransaction(function(){return c(u)}),[2]}})})}var r,i,o,s,l,a,c,u;return Cr(this,function(d){switch(d.label){case 0:e=e||{},r=e.skipTables?e.skipTables:[],i=t.tables.filter(function(f){return!r.includes(f.name)}),o=[],s=i.map(function(f){return{name:f.name,schema:W2(f),rowCount:0}}),l=e.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:t.name,databaseVersion:t.verno,tables:s,data:[]}},c=e.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:s.length},d.label=1;case 1:return d.trys.push([1,,6,7]),e.noTransaction?[4,n()]:[3,3];case 2:return d.sent(),[3,5];case 3:return[4,t.transaction("r",t.tables,n)];case 4:d.sent(),d.label=5;case 5:return[3,7];case 6:return ir.finalize(),[7];case 7:return[2,new Blob(o,{type:"text/json"})]}})})}var eT=1,tT={Stream:function(){}},nT=Ih(function(t,e){(function(n){var r=typeof process=="object"&&Km?Km:self;n.parser=function(T){return new p(T)},n.CParser=p,n.CStream=y,n.createStream=g,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(T){return T!=="error"&&T!=="end"}),s=0,l;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var a in n.STATE)n.STATE[n.STATE[a]]=a;s=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(T){function C(){this.__proto__=T}return C.prototype=T,new C}),Object.getPrototypeOf||(Object.getPrototypeOf=function(T){return T.__proto__}),Object.keys||(Object.keys=function(T){var C=[];for(var V in T)T.hasOwnProperty(V)&&C.push(V);return C});function u(T){var C=Math.max(n.MAX_BUFFER_LENGTH,10),V=0;for(var w in i){var Y=T[w]===void 0?0:T[w].length;if(Y>C)switch(w){case"text":closeText(T);break;default:I(T,"Max buffer length exceeded: "+w)}V=Math.max(V,Y)}T.bufferCheckPosition=n.MAX_BUFFER_LENGTH-V+T.position}function d(T){for(var C in i)T[C]=i[C]}var f=/[\\"\n]/g;function p(T){if(!(this instanceof p))return new p(T);var C=this;d(C),C.bufferCheckPosition=n.MAX_BUFFER_LENGTH,C.q=C.c=C.p="",C.opt=T||{},C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.state=s.BEGIN,C.stack=new Array,C.position=C.column=0,C.line=1,C.slashed=!1,C.unicodeI=0,C.unicodeS=null,C.depth=0,x(C,"onready")}p.prototype={end:function(){L(this)},write:U,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=tT.Stream}catch{l=function(){}}function g(T){return new y(T)}function y(T){if(!(this instanceof y))return new y(T);this._parser=new p(T),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var C=this;l.apply(C),this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(V){C.emit("error",V),C._parser.error=null},o.forEach(function(V){Object.defineProperty(C,"on"+V,{get:function(){return C._parser["on"+V]},set:function(w){if(!w)return C.removeAllListeners(V),C._parser["on"+V]=w,w;C.on(V,w)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(l.prototype,{constructor:{value:y}}),y.prototype.write=function(T){T=new Buffer(T);for(var C=0;C<T.length;C++){var V=T[C];if(this.bytes_remaining>0){for(var w=0;w<this.bytes_remaining;w++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+w]=T[w];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,C=C+w-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&V>=128)if(V>=194&&V<=223&&(this.bytes_in_sequence=2),V>=224&&V<=239&&(this.bytes_in_sequence=3),V>=240&&V<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+C>T.length){for(var Y=0;Y<=T.length-1-C;Y++)this.temp_buffs[this.bytes_in_sequence][Y]=T[C+Y];return this.bytes_remaining=C+this.bytes_in_sequence-T.length,!0}else{this.string=T.slice(C,C+this.bytes_in_sequence).toString(),C=C+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var J=C;J<T.length&&!(T[J]>=128);J++);this.string=T.slice(C,J).toString(),this._parser.write(this.string),this.emit("data",this.string),C=J-1}},y.prototype.end=function(T){return T&&T.length&&this._parser.write(T.toString()),this._parser.end(),!0},y.prototype.on=function(T,C){var V=this;return!V._parser["on"+T]&&o.indexOf(T)!==-1&&(V._parser["on"+T]=function(){var w=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);w.splice(0,0,T),V.emit.apply(V,w)}),l.prototype.on.call(V,T,C)},y.prototype.destroy=function(){d(this._parser),this.emit("close")};function x(T,C,V){n.INFO&&console.log("-- emit",C,V),T[C]&&T[C](V)}function O(T,C,V){_(T),x(T,C,V)}function _(T,C){T.textNode=k(T.opt,T.textNode),T.textNode!==void 0&&x(T,C||"onvalue",T.textNode),T.textNode=void 0}function D(T){T.numberNode&&x(T,"onvalue",parseFloat(T.numberNode)),T.numberNode=""}function k(T,C){return C===void 0||(T.trim&&(C=C.trim()),T.normalize&&(C=C.replace(/\s+/g," "))),C}function I(T,C){return _(T),C+=`
Line: `+T.line+`
Column: `+T.column+`
Char: `+T.c,C=new Error(C),T.error=C,x(T,"onerror",C),T}function L(T){return(T.state!==s.VALUE||T.depth!==0)&&I(T,"Unexpected end"),_(T),T.c="",T.closed=!0,x(T,"onend"),p.call(T,T.opt),T}function R(T){return T===c.carriageReturn||T===c.lineFeed||T===c.space||T===c.tab}function U(T){var C=this;if(this.error)throw this.error;if(C.closed)return I(C,"Cannot write after close. Assign an onready handler.");if(T===null)return L(C);var V=0,w=T.charCodeAt(0),Y=C.p;for(n.DEBUG&&console.log("write -> ["+T+"]");w&&(Y=w,C.c=w=T.charCodeAt(V++),Y!==w?C.p=Y:Y=C.p,!!w);)switch(n.DEBUG&&console.log(V,w,n.STATE[C.state]),C.position++,w===c.lineFeed?(C.line++,C.column=0):C.column++,C.state){case s.BEGIN:w===c.openBrace?C.state=s.OPEN_OBJECT:w===c.openBracket?C.state=s.OPEN_ARRAY:R(w)||I(C,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(R(w))continue;if(C.state===s.OPEN_KEY)C.stack.push(s.CLOSE_KEY);else if(w===c.closeBrace){x(C,"onopenobject"),this.depth++,x(C,"oncloseobject"),this.depth--,C.state=C.stack.pop()||s.VALUE;continue}else C.stack.push(s.CLOSE_OBJECT);w===c.doubleQuote?C.state=s.STRING:I(C,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(R(w))continue;C.state,s.CLOSE_KEY,w===c.colon?(C.state===s.CLOSE_OBJECT?(C.stack.push(s.CLOSE_OBJECT),_(C,"onopenobject"),this.depth++):_(C,"onkey"),C.state=s.VALUE):w===c.closeBrace?(O(C,"oncloseobject"),this.depth--,C.state=C.stack.pop()||s.VALUE):w===c.comma?(C.state===s.CLOSE_OBJECT&&C.stack.push(s.CLOSE_OBJECT),_(C),C.state=s.OPEN_KEY):I(C,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(R(w))continue;if(C.state===s.OPEN_ARRAY)if(x(C,"onopenarray"),this.depth++,C.state=s.VALUE,w===c.closeBracket){x(C,"onclosearray"),this.depth--,C.state=C.stack.pop()||s.VALUE;continue}else C.stack.push(s.CLOSE_ARRAY);w===c.doubleQuote?C.state=s.STRING:w===c.openBrace?C.state=s.OPEN_OBJECT:w===c.openBracket?C.state=s.OPEN_ARRAY:w===c.t?C.state=s.TRUE:w===c.f?C.state=s.FALSE:w===c.n?C.state=s.NULL:w===c.minus?C.numberNode+="-":c._0<=w&&w<=c._9?(C.numberNode+=String.fromCharCode(w),C.state=s.NUMBER_DIGIT):I(C,"Bad value");continue;case s.CLOSE_ARRAY:if(w===c.comma)C.stack.push(s.CLOSE_ARRAY),_(C,"onvalue"),C.state=s.VALUE;else if(w===c.closeBracket)O(C,"onclosearray"),this.depth--,C.state=C.stack.pop()||s.VALUE;else{if(R(w))continue;I(C,"Bad array")}continue;case s.STRING:C.textNode===void 0&&(C.textNode="");var J=V-1,he=C.slashed,ce=C.unicodeI;e:for(;;){for(n.DEBUG&&console.log(V,w,n.STATE[C.state],he);ce>0;)if(C.unicodeS+=String.fromCharCode(w),w=T.charCodeAt(V++),C.position++,ce===4?(C.textNode+=String.fromCharCode(parseInt(C.unicodeS,16)),ce=0,J=V-1):ce++,!w)break e;if(w===c.doubleQuote&&!he){C.state=C.stack.pop()||s.VALUE,C.textNode+=T.substring(J,V-1),C.position+=V-1-J;break}if(w===c.backslash&&!he&&(he=!0,C.textNode+=T.substring(J,V-1),C.position+=V-1-J,w=T.charCodeAt(V++),C.position++,!w))break;if(he){if(he=!1,w===c.n?C.textNode+=`
`:w===c.r?C.textNode+="\r":w===c.t?C.textNode+="	":w===c.f?C.textNode+="\f":w===c.b?C.textNode+="\b":w===c.u?(ce=1,C.unicodeS=""):C.textNode+=String.fromCharCode(w),w=T.charCodeAt(V++),C.position++,J=V-1,w)continue;break}f.lastIndex=V;var Q=f.exec(T);if(Q===null){V=T.length+1,C.textNode+=T.substring(J,V-1),C.position+=V-1-J;break}if(V=Q.index+1,w=T.charCodeAt(Q.index),!w){C.textNode+=T.substring(J,V-1),C.position+=V-1-J;break}}C.slashed=he,C.unicodeI=ce;continue;case s.TRUE:w===c.r?C.state=s.TRUE2:I(C,"Invalid true started with t"+w);continue;case s.TRUE2:w===c.u?C.state=s.TRUE3:I(C,"Invalid true started with tr"+w);continue;case s.TRUE3:w===c.e?(x(C,"onvalue",!0),C.state=C.stack.pop()||s.VALUE):I(C,"Invalid true started with tru"+w);continue;case s.FALSE:w===c.a?C.state=s.FALSE2:I(C,"Invalid false started with f"+w);continue;case s.FALSE2:w===c.l?C.state=s.FALSE3:I(C,"Invalid false started with fa"+w);continue;case s.FALSE3:w===c.s?C.state=s.FALSE4:I(C,"Invalid false started with fal"+w);continue;case s.FALSE4:w===c.e?(x(C,"onvalue",!1),C.state=C.stack.pop()||s.VALUE):I(C,"Invalid false started with fals"+w);continue;case s.NULL:w===c.u?C.state=s.NULL2:I(C,"Invalid null started with n"+w);continue;case s.NULL2:w===c.l?C.state=s.NULL3:I(C,"Invalid null started with nu"+w);continue;case s.NULL3:w===c.l?(x(C,"onvalue",null),C.state=C.stack.pop()||s.VALUE):I(C,"Invalid null started with nul"+w);continue;case s.NUMBER_DECIMAL_POINT:w===c.period?(C.numberNode+=".",C.state=s.NUMBER_DIGIT):I(C,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:c._0<=w&&w<=c._9?C.numberNode+=String.fromCharCode(w):w===c.period?(C.numberNode.indexOf(".")!==-1&&I(C,"Invalid number has two dots"),C.numberNode+="."):w===c.e||w===c.E?((C.numberNode.indexOf("e")!==-1||C.numberNode.indexOf("E")!==-1)&&I(C,"Invalid number has two exponential"),C.numberNode+="e"):w===c.plus||w===c.minus?(Y===c.e||Y===c.E||I(C,"Invalid symbol in number"),C.numberNode+=String.fromCharCode(w)):(D(C),V--,C.state=C.stack.pop()||s.VALUE);continue;default:I(C,"Unknown state: "+C.state)}return C.position>=C.bufferCheckPosition&&u(C),C}})(e)});function rT(t){var e=0,n=iT(),r={pullAsync:function(i){return Ki(this,void 0,void 0,function(){var o,s,l;return Cr(this,function(a){switch(a.label){case 0:return o=t.slice(e,e+i),e+=i,[4,Nv(o,"text")];case 1:return s=a.sent(),l=n.write(s),r.result=l||{},[2,l]}})})},pullSync:function(i){var o=t.slice(e,e+i);e+=i;var s=Dv(o,"text"),l=n.write(s);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return e>=t.size},result:{}};return r}function iT(t){var e=nT.parser(),n=0,r,i=[],o,s,l=!1,a=!1;return e.onopenobject=function(c){var u={};u.incomplete=!0,r||(r=u),o&&(i.push([s,o,a]),a?o.push(u):o[s]=u),o=u,s=c,a=!1,++n},e.onkey=function(c){return s=c},e.onvalue=function(c){return a?o.push(c):o[s]=c},e.oncloseobject=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},e.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),o&&(i.push([s,o,a]),a?o.push(c):o[s]=c),o=c,a=!0,s=null,++n},e.onclosearray=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},{write:function(c){return e.write(c),r},done:function(){return l}}}var Lv=1024;function Iv(t,e){return Ki(this,void 0,void 0,function(){var n,r,i,o;return Cr(this,function(s){switch(s.label){case 0:return e=e||{},n=e.chunkSizeBytes||Lv*1024,[4,Vv(t,n)];case 1:return r=s.sent(),i=r.result.data,o=new zt(e.name!==void 0?e.name:i.databaseName),o.version(i.databaseVersion).stores(q2(i)),[4,Bv(o,r,e.name!==void 0?Ec(Ec({},e),{acceptNameDiff:!0}):e)];case 2:return s.sent(),[2,o]}})})}function Bv(t,e,n){return Ki(this,void 0,void 0,function(){function r(){return Ki(this,void 0,void 0,function(){var y,x,O,_,D;return Cr(this,function(k){switch(k.label){case 0:y=function(I){var L,R,U,T,C,V,w,Y,J,he,ce,Q,Ce;return Cr(this,function(We){switch(We.label){case 0:if(c.includes(I.tableName))return[2,"continue"];if(!I.rows)return[2,"break"];if(!I.rows.incomplete&&I.rows.length===0)return[2,"continue"];if(u&&zt.ignoreTransaction(function(){return u(d)}),L=I.tableName,R=t.table(L),U=a.tables.filter(function($e){return $e.name===L})[0].schema,!R){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(I.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&U.split(",")[0]!=R.schema.primKey.src)throw new Error("Primary key differs for table ".concat(I.tableName,". "));for(T=I.rows,C=[],V=0;V<T.length&&(w=T[V],!w.incomplete);V++)C.push(ir.revive(w));return Y=n.filter,J=n.transform,he=Y?I.inbound?C.filter(function($e){return Y(L,$e)}):C.filter(function($e){var et=$e[0],rt=$e[1];return Y(L,rt,et)}):C,J&&(he=he.map(I.inbound?function($e){return J(L,$e).value}:function($e){var et=$e[0],rt=$e[1],vt=J(L,rt,et);return[vt.key,vt.value]})),ce=I.inbound?[void 0,he]:[he.map(function($e){return $e[0]}),C.map(function($e){return $e[1]})],Q=ce[0],Ce=ce[1],n.overwriteValues?[4,R.bulkPut(Ce,Q)]:[3,2];case 1:return We.sent(),[3,4];case 2:return[4,R.bulkAdd(Ce,Q)];case 3:We.sent(),We.label=4;case 4:return d.completedRows+=C.length,C.incomplete||(d.completedTables+=1),T.splice(0,C.length),[2]}})},x=0,O=a.data,k.label=1;case 1:return x<O.length?(_=O[x],[5,y(_)]):[3,4];case 2:if(D=k.sent(),D==="break")return[3,4];k.label=3;case 3:return x++,[3,1];case 4:for(;a.data.length>0&&a.data[0].rows&&!a.data[0].rows.incomplete;)a.data.splice(0,1);return!o.done()&&!o.eof()?l?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,zt.waitFor(o.pullAsync(i))];case 6:k.sent(),k.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,l,a,c,u,d,f,p,g;return Cr(this,function(y){switch(y.label){case 0:return n=n||{},i=n.chunkSizeBytes||Lv*1024,[4,Vv(e,i)];case 1:if(o=y.sent(),s=o.result,l="FileReaderSync"in self,a=s.data,c=n.skipTables?n.skipTables:[],!n.acceptNameDiff&&t.name!==a.databaseName)throw new Error("Name differs. Current database name is ".concat(t.name," but export is ").concat(a.databaseName));if(!n.acceptVersionDiff&&t.verno!==a.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(t.verno," but export is ").concat(a.databaseVersion));if(u=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:a.tables.reduce(function(x,O){return x+O.rowCount},0),totalTables:a.tables.length},u&&zt.ignoreTransaction(function(){return u(d)}),!n.clearTablesBeforeImport)return[3,5];f=0,p=t.tables,y.label=2;case 2:return f<p.length?(g=p[f],c.includes(g.name)?[3,4]:[4,g.clear()]):[3,5];case 3:y.sent(),y.label=4;case 4:return f++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return y.sent(),[3,9];case 7:return[4,t.transaction("rw",t.tables,r)];case 8:y.sent(),y.label=9;case 9:return d.done=!0,u&&zt.ignoreTransaction(function(){return u(d)}),[2]}})})}function Vv(t,e){return Ki(this,void 0,void 0,function(){var n,r;return Cr(this,function(i){switch(i.label){case 0:n="slice"in t?rT(t):t,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(e)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>eT)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}zt.prototype.export=function(t){return Q2(this,t)};zt.prototype.import=function(t,e){return Bv(this,t,e)};zt.import=function(t,e){return Iv(t,e)};function oT(t){return Yy()?(Px(t),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function sT(t,e){const n=su(e==null?void 0:e.initialValue),r=t.subscribe({next:i=>n.value=i,error:e==null?void 0:e.onError});return oT(()=>{r.unsubscribe()}),n}let ka;const lT=new Uint8Array(16);function aT(){if(!ka&&(ka=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ka))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ka(lT)}const Qt=[];for(let t=0;t<256;++t)Qt.push((t+256).toString(16).slice(1));function cT(t,e=0){return Qt[t[e+0]]+Qt[t[e+1]]+Qt[t[e+2]]+Qt[t[e+3]]+"-"+Qt[t[e+4]]+Qt[t[e+5]]+"-"+Qt[t[e+6]]+Qt[t[e+7]]+"-"+Qt[t[e+8]]+Qt[t[e+9]]+"-"+Qt[t[e+10]]+Qt[t[e+11]]+Qt[t[e+12]]+Qt[t[e+13]]+Qt[t[e+14]]+Qt[t[e+15]]}const uT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wm={randomUUID:uT};function dT(t,e,n){if(Wm.randomUUID&&!e&&!t)return Wm.randomUUID();t=t||{};const r=t.random||(t.rng||aT)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return cT(r)}const fT=async t=>await t.export(),hT={data(){return{dbRef:null,db:null,databaseName:null,dblist:[],useObservable:sT,liveQuery:_v,uuid:dT,syncdb:{},DBstores:{Settings:"uuid, settings, lastupdated",Writer:"uuid, title, description, files, lastupdated",Cards:"uuid, title,description,content,style,labels,options,lastupdated",Files:"uuid, writerid, title, content, lastupdated",Snowflake:"uuid, title, description,content,lastupdated",Timeline:"uuid, title, description,content,lastupdated",Gridplanner:"uuid, title, description,content,lastupdated",Mindmap:"uuid, title, description,content,lastupdated",ImageLibrary:"uuid, title, base64"}}},methods:{async getDatabases(){},async initDatabase(){console.log(this.databaseName),this.databaseName||(console.log("New Db Created"),this.databaseName=this.uuid()),this.db||(console.log("Creating new database"),this.db=await new zt(this.databaseName),console.log("Creating new stores"),this.db.version(1).stores(this.DBstores));let t=await this.db.Settings.toArray(),e={};if(t){if(t.length)e=t[0],this.dbRef=e.uuid;else{let n=JSON.parse(JSON.stringify(this.$root.SettingsTemplate));n.uuid=this.$root.uuid(),n.ProjectName="New Project",await this.$root.AddRecord("Settings",n),this.dbRef=n.uuid}if(this.syncdb.Settings=await this.useObservable(this.liveQuery(async()=>await this.db.Settings.get(this.dbRef))),this.syncdb.Cards=await this.useObservable(this.liveQuery(async()=>await this.db.Cards.toArray())),this.syncdb.Files=await this.useObservable(this.liveQuery(async()=>await this.db.Files.toArray())),this.syncdb.Gridplanner=await this.useObservable(this.liveQuery(async()=>await this.db.Gridplanner.toArray())),this.syncdb.ImageLibrary=await this.useObservable(this.liveQuery(async()=>await this.db.ImageLibrary.toArray())),this.syncdb.Mindmap=await this.useObservable(this.liveQuery(async()=>await this.db.Mindmap.toArray())),this.syncdb.Snowflake=await this.useObservable(this.liveQuery(async()=>await this.db.Snowflake.toArray())),this.syncdb.Timeline=await this.useObservable(this.liveQuery(async()=>await this.db.Timeline.toArray())),this.syncdb.Writer=await this.useObservable(this.liveQuery(async()=>await this.db.Writer.toArray())),console.log(this.$root.currentTool,this.$root.urlSelected),this.$root.currentTool){console.log("New Window link");const n=this.$root.currentTool,r=n.charAt(0).toUpperCase()+n.slice(1);this.$root.urlSelected&&(this.$root.tools[this.$root.currentTool].selected=await this.db[r].get(this.$root.urlSelected))}}},async dbImport(t){this.databaseName=t.data.databaseName;const e=new Blob([JSON.stringify(t)],{type:"text/json;charset=utf-8"});this.db=await Iv(e,{clearTablesBeforeImport:!0}),await this.initDatabase()},async dbExport(){const t=await new zt(this.databaseName).open(),e=await fT(t);return t.close(),e},async getImage(t){return await this.$root.db.ImageLibrary.get(t)},async AddRecord(t,e){return e.lastupdated=Date.now(),await this.db[t].add(e)},async UpdateRecord(t,e,n){return n.uuid=e,n.lastupdated=Date.now(),await this.db[t].put(JSON.parse(JSON.stringify(n)))},async DeleteRecord(t,e){return await this.db[t].delete(e)},clearDatabase(){this.$root.db.Settings.clear(),this.$root.db.Writer.clear(),this.$root.db.Cards.clear(),this.$root.db.Files.clear(),this.$root.db.Mindmap.clear(),this.$root.db.ImageLibrary.clear(),this.$root.db.Gridplanner.clear(),this.$root.db.Snowflake.clear(),this.$root.db.Timeline.clear()},async closeProject(){this.$swal({title:"Are you sure?",text:"This will close the project any unsaved changes will be lost!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, close it!"}).then(async t=>{t.isConfirmed&&(window.removeEventListener("beforeunload",this.$root.unloadEvent),this.dbRef=null,this.$root.clearDatabase(),await this.$root.db.delete(),location.reload())})},async closeAndDeleteDatabase(){this.db&&(await this.db.close(),await zt.delete(this.databaseName),console.log(`Database ${this.databaseName} closed and deleted.`))}},async mounted(){this.databaseName?await this.initDatabase():this.getDatabases(),console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))},beforeDestroy(){console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))}},pT={data(){return{SettingsTemplate:{documentprefs:{align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-align")),fontsize:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-fontsize")),lspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-lspacing")),indentation:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-indentation")),pspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-pspacing")),page:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-page")),font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-font")),color:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-color")),bgcolor:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-bgcolor")),h1align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h1align")),h2align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h2align")),h3align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h3align")),h4align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h4align")),distractionfree_font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-font")),distractionfree_bg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-bg")),distractionfree_fg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-fg")),typesound:!1,caretfocus:!1}},writerTemplate:{title:"Another Great Novel",author:"A.N. Author",description:" ... ",files:[]},fileTemplate:{title:"New Section",content:"",notes:[]}}},methods:{dotrim(t){return t[0]===" "&&(t=t.substring(1)),t},async makeNewCard(t){let e=this.$root.uuid();t&&(e=t);let n={};n.uuid=e,n.title="",n.description="",n.showdesc=!1,n.content="",n.labels=[],n.images=[],n.style="",n.options={},n.color="cardcolor0",console.log(n),await this.$root.AddRecord("Cards",n),this.$root.modal=!0,this.$root.tools.cards.selected=n},async makeMindmap(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Mindmap",e.description="",e.content={links:[],nodes:{}},await this.$root.AddRecord("Mindmap",e),this.$root.tools.mindmap.selected=e},async makeTimeline(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Timeline",e.description="",e.content={items:[]},await this.$root.AddRecord("Timeline",e),this.$root.tools.timeline.selected=e},async makeGridplanner(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Gridplanner",e.description="",e.content={headers:[],rows:[]},await this.$root.AddRecord("Gridplanner",e),this.$root.tools.gridplanner.selected=e},async makeSnowflake(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="",e.description="",e.content=[],await this.$root.AddRecord("Snowflake",e),this.$root.tools.snowflake.selected=e}}},mT={data(){return{}},methods:{handleKeyPress(t){this.$root.databaseName&&t.keyCode==83&&(navigator.userAgent.includes("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.saveFile())},async openFile(){try{[this.$root.fileHandle]=await window.showOpenFilePicker({types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]},extensions:["wmc"]}]});const e=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(e),this.$root.dbImport(this.$root.jsonData)}catch(t){console.error("Error opening file:",t)}},async snapShot(){let t=this.sanitizeFilename(this.$root.syncdb.Settings.ProjectName);const n=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(n);const r=new Blob([JSON.stringify(this.$root.jsonData,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},sanitizeFilename(t){const e=new Date,n=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}`;return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")+`-${n}.wmc`},async saveFile(){const e=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(e);try{this.$root.fileHandle||(this.$root.fileHandle=await window.showSaveFilePicker({suggestedName:"untitled.wmc",types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]}}]}));const n=await this.$root.fileHandle.createWritable();await n.write(JSON.stringify(this.$root.jsonData,null,2)),await n.close(),this.$swal({title:"Your File Was saved",text:"The file was saved successfully",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch{this.$swal({title:"Your file was not saved",text:"Please try again, or use other export tools to make a backup.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}},async clearFile(){this.$root.closeProject()}},created(){"launchQueue"in window&&"files"in window.LaunchParams.prototype&&window.launchQueue.setConsumer(async t=>{if(!t.files.length)return;this.$root.fileHandle=t.files[0];const n=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(n),await this.$root.dbImport(this.$root.jsonData)})},mounted(){window.addEventListener("keydown",this.handleKeyPress)},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyPress)}},gT={data(){return{windowID:null,parentID:null,mainwindow:!0,childWindows:[]}},methods:{openNewWindow(){let t="",e="";this.$root.currentTool&&(t=this.$root.currentTool,this.$root.tools[this.$root.currentTool].selected&&(e=this.$root.tools[this.$root.currentTool].selected.uuid,console.log(e)));let n=window.location.href;n=n+"?parentid="+this.windowID,n=n+"&dbname="+this.$root.databaseName,n=n+"&tool="+t,n=n+"&selected="+e;const r=window.open(n,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600");this.childWindows.push(r),r.onload=function(){new URL(r.location)}},closeChildWindows(){this.childWindows.forEach(t=>{t&&!t.closed&&t.close()}),this.childWindows=[]}},async created(){const t=new URLSearchParams(window.location.search);for(const[e,n]of t.entries())console.log(`${e}: ${n}`);this.parentID=t.get("parentid"),this.$root.databaseName=t.get("dbname"),this.$root.currentTool=t.get("tool"),this.$root.urlSelected=t.get("selected"),console.log("SubWindow",this.parentID),this.parentID&&(this.mainwindow=!1),this.windowID=this.uuid(),window.addEventListener("beforeunload",this.closeChildWindows)},beforeDestroy(){window.removeEventListener("beforeunload",this.closeChildWindows)}},ht=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},yT={},vT={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 453.543 453.543","xml:space":"preserve",class:"wm-logo"};function bT(t,e){return q(),oe("svg",vT,e[0]||(e[0]=[S("path",{d:"M464.632 212.901 337.566 83.292a55.653 55.653 0 0 0-79.771 0l-126.63 129.386a19.322 19.322 0 0 0 0 27.122l38.359 39.127 25.5 24.232c7.628 7.114 19.18 7.114 26.808 0l51.219-48.242c14.167-13.338 35.744-13.338 49.693 0l51.219 48.242c7.629 7.114 19.18 7.114 26.809 0l25.501-24.232 38.359-38.904c7.193-7.337 7.193-19.563 0-27.122z",class:"wm-logo-top",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1),S("path",{d:"m58.804 367.853 198.991 202.973a55.657 55.657 0 0 0 79.771 0l198.991-202.973c34.437-35.125 10.244-45.574-15.039-70.029L490.35 267.59c-7.409-7.336-19.18-7.113-26.808 0l-51.218 48.242c-14.169 13.339-35.744 13.339-49.694 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-51.219 48.242c-14.167 13.339-35.744 13.339-49.693 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-28.77 27.123c-26.37 24.899-54.05 36.236-18.088 73.14z",class:"wm-logo-bottom",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1)]))}const Bh=ht(yT,[["render",bT]]),wT={components:{Logo:Bh},methods:{}},CT={class:"toptoolbar"},xT={class:"floatRight"},ST={key:3};function kT(t,e,n,r,i,o){const s=Ye("Logo");return q(),oe("div",CT,[S("div",null,[S("button",{onClick:e[0]||(e[0]=l=>t.$root.currentTool=null),class:"titlebtn"},[lt(s,{style:{width:"30px",height:"30px"}})]),S("button",{onClick:e[1]||(e[1]=l=>t.$root.currentTool="writer")},e[14]||(e[14]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1)])),S("button",{onClick:e[2]||(e[2]=l=>t.$root.currentTool="gridplanner")},e[15]||(e[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)])),S("button",{onClick:e[3]||(e[3]=l=>t.$root.currentTool="mindmap")},e[16]||(e[16]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1)])),S("button",{onClick:e[4]||(e[4]=l=>t.$root.currentTool="timeline")},e[17]||(e[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"timeline-outline"),S("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1)])),S("button",{onClick:e[5]||(e[5]=l=>t.$root.currentTool="snowflake")},e[18]||(e[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"snowflake"),S("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1)])),S("button",{onClick:e[6]||(e[6]=l=>t.$root.currentTool="cardsdatabase")},e[19]||(e[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"cards-outline"),S("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1)]))]),S("span",xT,[t.$root.dbRef?Ne("",!0):(q(),oe("button",{key:0,onClick:e[7]||(e[7]=(...l)=>t.$root.openFileFromGoogleDrive&&t.$root.openFileFromGoogleDrive(...l))},e[20]||(e[20]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Google Drive"),S("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})],-1)]))),t.$root.dbRef?Ne("",!0):(q(),oe("button",{key:1,onClick:e[8]||(e[8]=(...l)=>t.$root.openFileFromDropBox&&t.$root.openFileFromDropBox(...l))},e[21]||(e[21]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Dropbox"),S("path",{d:"M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z"})],-1)]))),t.$root.dbRef?Ne("",!0):(q(),oe("button",{key:2,onClick:e[9]||(e[9]=l=>t.$root.openFile())},e[22]||(e[22]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Load your Project"),S("path",{d:"M20 18H4V8H20M20 6H12L10 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V8A2 2 0 0 0 20 6M16 17H14V13H11L15 9L19 13H16Z"})],-1)]))),t.$root.dbRef?(q(),oe("span",ST,[S("button",{title:"Open in a new window",onClick:e[10]||(e[10]=l=>t.$root.openNewWindow())},e[23]||(e[23]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Open New Window"),S("path",{d:"M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z"})],-1)])),S("button",{onClick:e[11]||(e[11]=l=>t.$root.snapShot())},e[24]||(e[24]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Snapshot Project"),S("path",{d:"M20,4H16.83L15,2H9L7.17,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,18H4V6H8.05L9.88,4H14.12L15.95,6H20V18M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15Z"})],-1)])),S("button",{onClick:e[12]||(e[12]=l=>t.$root.saveFile())},e[25]||(e[25]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Save Project"),S("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z"})],-1)])),S("button",{onClick:e[13]||(e[13]=l=>t.$root.clearFile())},e[26]||(e[26]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Close Project"),S("path",{d:"M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,8.4L13.4,12L17,15.6L15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4Z"})],-1)]))])):Ne("",!0)])])}const TT=ht(wT,[["render",kT],["__scopeId","data-v-d8a606c3"]]),OT={name:"CardEditor",data(){return{colorlist:["cardcolor0","cardcolor1","cardcolor2","cardcolor3","cardcolor4","cardcolor5","cardcolor6"]}},methods:{update(){this.$root.UpdateRecord("Cards",this.$root.tools.cards.selected.uuid,this.$root.tools.cards.selected)},setColor(t){console.log(t),this.$root.tools.cards.selected.color=t,this.update()}}},ET={key:0},AT=["onClick"];function MT(t,e,n,r,i,o){return q(),oe(Ze,null,[t.$root.tools.cards.selected?Ne("",!0):(q(),oe("div",ET,[e[9]||(e[9]=br(" no card picked - so its gonna be link or new ")),S("button",{onClick:e[0]||(e[0]=s=>t.$root.makeNewCard())},"New Card")])),t.$root.tools.cards.selected?(q(),oe("div",{key:1,class:jt(["card",t.$root.tools.cards.selected.color])},[S("div",null,[(q(!0),oe(Ze,null,sn(i.colorlist,s=>(q(),oe("button",{class:jt(["colorbtn",s]),onClick:l=>o.setColor(s)},null,10,AT))),256))]),S("h1",null,[Et(S("input",{type:"text",placeholder:"Card Title","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.cards.selected.title=s),onBlur:e[2]||(e[2]=s=>o.update())},null,544),[[_t,t.$root.tools.cards.selected.title]])]),e[11]||(e[11]=S("h2",null,"Description",-1)),S("label",null,[Et(S("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>t.$root.tools.cards.selected.showdesc=s),onBlur:e[4]||(e[4]=s=>o.update())},null,544),[[qk,t.$root.tools.cards.selected.showdesc]]),e[10]||(e[10]=br(" Show on card"))]),S("p",null,[Et(S("textarea",{placeholder:"card summary","onUpdate:modelValue":e[5]||(e[5]=s=>t.$root.tools.cards.selected.description=s),onBlur:e[6]||(e[6]=s=>o.update())},null,544),[[_t,t.$root.tools.cards.selected.description]])]),e[12]||(e[12]=S("h2",null,"Content",-1)),S("p",null,[Et(S("textarea",{placeholder:"card details","onUpdate:modelValue":e[7]||(e[7]=s=>t.$root.tools.cards.selected.content=s),onBlur:e[8]||(e[8]=s=>o.update())},null,544),[[_t,t.$root.tools.cards.selected.content]])]),e[13]||(e[13]=S("p",null,null,-1))],2)):Ne("",!0)],64)}const _T=ht(OT,[["render",MT],["__scopeId","data-v-b312094a"]]),NT={components:{CardEditor:_T}},DT={class:"centreme"};function PT(t,e,n,r,i,o){const s=Ye("CardEditor");return q(),oe(Ze,null,[S("div",{class:"blackout",onClick:e[0]||(e[0]=l=>t.$root.modal=!1)}),S("div",DT,[S("button",{onClick:e[1]||(e[1]=l=>t.$root.modal=!1),class:"modalclose"},e[2]||(e[2]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)])),lt(s)])],64)}const $T=ht(NT,[["render",PT],["__scopeId","data-v-de5fc5de"]]),LT={},IT={class:"footerbar"};function BT(t,e){return q(),oe("div",IT," Wavemaker Cards v5 © 2025 ")}const VT=ht(LT,[["render",BT],["__scopeId","data-v-5ca223e1"]]),RT={data(){return{deferredPrompt:null,showInstallBanner:!1}},mounted(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showInstallBanner=!0})},methods:{async installApp(){this.showInstallBanner=!1,this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;console.log(t==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null}}},HT={key:0,id:"install-banner"};function FT(t,e,n,r,i,o){return i.showInstallBanner?(q(),oe("div",HT,[e[1]||(e[1]=S("p",null,"Install our app for a better experience!",-1)),S("button",{onClick:e[0]||(e[0]=(...s)=>o.installApp&&o.installApp(...s))},"Install")])):Ne("",!0)}const jT=ht(RT,[["render",FT],["__scopeId","data-v-2d43b47a"]]),UT={components:{Logo:Bh},data(){return{}},methods:{async newProject(){this.$root.initDatabase()}}},zT={id:"WelcomeScreen"},KT={class:"hero"},WT={style:{display:"flex","justify-content":"center","align-items":"center"}};function qT(t,e,n,r,i,o){const s=Ye("Logo");return q(),oe("div",zT,[S("div",KT,[S("div",WT,[lt(s,{style:{width:"50px"}}),e[2]||(e[2]=S("h1",null,"Wavemaker Cards",-1))]),e[5]||(e[5]=S("p",null,[S("strong",null,"Version 5")],-1)),e[6]||(e[6]=S("p",{style:{padding:"10px","font-size":"1rem"}},"Start Writing",-1)),S("div",null,[S("button",{onClick:e[0]||(e[0]=l=>o.newProject())},e[3]||(e[3]=[S("svg",{viewBox:"0 0 24 24"},[S("path",{d:"M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})],-1),S("span",null," Create a new project",-1)])),S("button",{onClick:e[1]||(e[1]=l=>t.$root.openFile())},e[4]||(e[4]=[S("svg",{viewBox:"0 0 24 24"},[S("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),S("span",null," Load a project (.wmc file) ",-1)]))])])])}const JT=ht(UT,[["render",qT],["__scopeId","data-v-ab27e937"]]),GT={methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)}}},YT={key:0};function XT(t,e,n,r,i,o){return this.$root.syncdb.Settings?(q(),oe("span",YT,[Et(S("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>this.$root.syncdb.Settings.ProjectName=s),placeholder:"Project Name",onBlur:e[1]||(e[1]=s=>o.update())},null,544),[[_t,this.$root.syncdb.Settings.ProjectName]])])):Ne("",!0)}const ZT=ht(GT,[["render",XT]]),QT={data(){return{currentdate:new Date,wordcountprogress:0,month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{monthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n+1,0).getDate()},prevMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n,0).getDate()},nextMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n-1,0).getDate()}},mounted(){this.$root.syncdb.Settings.tracker||(this.$root.syncdb.Settings.tracker={wordcount:0,target:2500,log:{"2025-02-01":123,"2025-02-02":432,"2025-02-03":234,"2025-02-04":345,"2025-02-05":456,"2025-02-06":567,"2025-02-07":678,"2025-02-08":789,"2025-02-09":890,"2025-02-10":901,"2025-02-11":123,"2025-02-12":234,"2025-02-13":345,"2025-02-14":456,"2025-02-15":567,"2025-02-16":678,"2025-02-17":789,"2025-02-18":890,"2025-02-19":901,"2025-02-20":123,"2025-02-21":234,"2025-02-22":345,"2025-02-23":456,"2025-02-24":567,"2025-02-25":678,"2025-02-26":789,"2025-02-27":890,"2025-02-28":901,"2025-03-01":123,"2025-03-02":234,"2025-03-03":345,"2025-03-04":456,"2025-03-05":567,"2025-03-06":678,"2025-03-07":789,"2025-03-08":890,"2025-03-09":901,"2025-03-10":123,"2025-03-11":234,"2025-03-12":345,"2025-03-13":456,"2025-03-14":567,"2025-03-15":678,"2025-03-16":789,"2025-03-17":890,"2025-03-18":901,"2025-03-19":123,"2025-03-20":234,"2025-03-21":345}})},methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)},monthName(t=0){let e=this.currentdate.getMonth()+t;return e===-1&&(e=11),e===12&&(e=0),this.month[e]},getLogValue(t,e){const n=this.currentdate.getFullYear(),r=this.currentdate.getMonth()+e,i=String(t).padStart(2,"0"),o=`${n}-${String(r).padStart(2,"0")}-${i}`,s=this.$root.syncdb.Settings.tracker.log[o]||0,l=this.$root.syncdb.Settings.tracker.target||1,a=s/l;return{count:s,percent:a}},advanceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()+1),this.currentdate=t},reduceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()-1),this.currentdate=t}}},eO={key:0},tO={class:"calendars"},nO={class:"month"},rO={class:"calendar"},iO=["title"],oO={class:"month"},sO={class:"calendar"},lO=["title"],aO={class:"progress-container"},cO={class:"progress-circle",viewBox:"0 0 36 36"};function uO(t,e,n,r,i,o){return this.$root.syncdb.Settings.tracker?(q(),oe("div",eO,[S("h3",null,On(t.$root.syncdb.Settings.tracker.wordcount)+" Words",1),S("label",null,[e[3]||(e[3]=br("Daily Wordcount Target ")),Et(S("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>t.$root.syncdb.Settings.tracker.target=s)},null,512),[[_t,t.$root.syncdb.Settings.tracker.target]])]),e[5]||(e[5]=S("p",{style:{"text-align":"center"}},"Your Goals",-1)),S("div",null,[S("button",{onClick:e[1]||(e[1]=(...s)=>o.reduceMonth&&o.reduceMonth(...s))},"Previous Month"),S("button",{onClick:e[2]||(e[2]=(...s)=>o.advanceMonth&&o.advanceMonth(...s))},"Next Month")]),S("div",tO,[S("div",null,[S("div",nO,On(o.monthName(-1)),1),S("div",rO,[(q(!0),oe(Ze,null,sn(o.prevMonthDays,s=>(q(),oe("div",{class:"day",title:o.getLogValue(s,0).count+" Words"},[S("div",{class:"block",style:sr(`opacity:${o.getLogValue(s,0).percent}`)},null,4)],8,iO))),256))])]),S("div",null,[S("div",oO,On(o.monthName()),1),S("div",sO,[(q(!0),oe(Ze,null,sn(o.monthDays,s=>(q(),oe("div",{class:"day",title:o.getLogValue(s,1).count+" Words"},[S("div",{class:"block",style:sr(`opacity:${o.getLogValue(s,1).percent}`)},null,4)],8,lO))),256))])]),S("div",aO,[(q(),oe("svg",cO,[e[4]||(e[4]=S("path",{class:"circle-bg",d:`M18 2.0845\r
                     a 15.9155 15.9155 0 0 1 0 31.831\r
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,-1)),S("path",{class:"circle",style:sr(`stroke-dasharray: ${i.wordcountprogress}, 100`),d:`M18 2.0845\r
                     a 15.9155 15.9155 0 0 1 0 31.831\r
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,4)]))])])])):Ne("",!0)}const dO=ht(QT,[["render",uO]]),fO={name:"ProjectHome",components:{Logo:Bh,ProjectName:ZT,GridLogger:dO},mounted(){this.$root.tools.writer.selected=null,this.$root.tools.gridplanner.selected=null,this.$root.tools.timeline.selected=null,this.$root.tools.mindmap.selected=null,this.$root.tools.snowflake.selected=null,this.$root.tools.planningboard.selected=null},methods:{}},hO={key:0,class:"project-home"},pO={style:{"text-align":"center"}},mO={open:""},gO={class:"inputstyle"},yO={class:"mainnav"};function vO(t,e,n,r,i,o){const s=Ye("Logo"),l=Ye("ProjectName"),a=Ye("GridLogger");return this.$root.syncdb.Settings?(q(),oe("div",hO,[S("div",pO,[lt(s,{style:{width:"150px",height:"150px"}})]),S("details",mO,[e[6]||(e[6]=S("summary",null,"Project Settings",-1)),e[7]||(e[7]=S("p",{style:{"text-align":"center"}},"What is this project called?",-1)),S("h2",gO,[lt(l)]),lt(a)]),S("div",yO,[S("button",{onClick:e[0]||(e[0]=c=>t.$root.currentTool="writer")},e[8]||(e[8]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1),br(" Your Books ")])),S("button",{onClick:e[1]||(e[1]=c=>t.$root.currentTool="gridplanner")},e[9]||(e[9]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1),br(" Grid Planner ")])),S("button",{onClick:e[2]||(e[2]=c=>t.$root.currentTool="mindmap")},e[10]||(e[10]=[S("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[S("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1),br(" Mindmap Builder ")])),S("button",{onClick:e[3]||(e[3]=c=>t.$root.currentTool="timeline")},e[11]||(e[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"timeline-outline"),S("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1),br(" Timeline Creator ")])),S("button",{onClick:e[4]||(e[4]=c=>t.$root.currentTool="snowflake")},e[12]||(e[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"snowflake"),S("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1),br(" Snowflake Tool ")])),S("button",{onClick:e[5]||(e[5]=c=>t.$root.currentTool="cardsdatabase")},e[13]||(e[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"cards-outline"),S("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1),br(" Cards Database ")]))])])):Ne("",!0)}const bO=ht(fO,[["render",vO],["__scopeId","data-v-b0b67c9c"]]);var wO=Object.defineProperty,Mc=Object.getOwnPropertySymbols,Rv=Object.prototype.hasOwnProperty,Hv=Object.prototype.propertyIsEnumerable,qm=(t,e,n)=>e in t?wO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rs=(t,e)=>{for(var n in e||(e={}))Rv.call(e,n)&&qm(t,n,e[n]);if(Mc)for(var n of Mc(e))Hv.call(e,n)&&qm(t,n,e[n]);return t},Fv=(t,e)=>{var n={};for(var r in t)Rv.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Mc)for(var r of Mc(t))e.indexOf(r)<0&&Hv.call(t,r)&&(n[r]=t[r]);return n};const jv="[vue-draggable-plus]: ";function CO(t){console.warn(jv+t)}function xO(t){console.error(jv+t)}function Jm(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function SO(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function kO(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[SO(n)]=t[n]),e),{})}function Gm(t,e){return Array.isArray(t)&&t.splice(e,1),t}function Ym(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function TO(t){return typeof t>"u"}function OO(t){return typeof t=="string"}function Xm(t,e,n){const r=t.children[n];t.insertBefore(e,r)}function ud(t){t.parentNode&&t.parentNode.removeChild(t)}function EO(t,e=document){var n;let r=null;return typeof(e==null?void 0:e.querySelector)=="function"?r=(n=e==null?void 0:e.querySelector)==null?void 0:n.call(e,t):r=document.querySelector(t),r||CO(`Element not found: ${t}`),r}function AO(t,e,n=null){return function(...r){return t.apply(n,r),e.apply(n,r)}}function MO(t,e){const n=rs({},t);return Object.keys(e).forEach(r=>{n[r]?n[r]=AO(t[r],e[r]):n[r]=e[r]}),n}function _O(t){return t instanceof HTMLElement}function Zm(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function NO(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const DO=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Qm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qm(Object(n),!0).forEach(function(r){PO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qa(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qa=function(e){return typeof e}:Qa=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qa(t)}function PO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function di(){return di=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},di.apply(this,arguments)}function $O(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LO(t,e){if(t==null)return{};var n=$O(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var IO="1.15.2";function li(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var pi=li(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ta=li(/Edge/i),eg=li(/firefox/i),dl=li(/safari/i)&&!li(/chrome/i)&&!li(/android/i),Uv=li(/iP(ad|od|hone)/i),zv=li(/chrome/i)&&li(/android/i),Kv={capture:!1,passive:!1};function pt(t,e,n){t.addEventListener(e,n,!pi&&Kv)}function ut(t,e,n){t.removeEventListener(e,n,!pi&&Kv)}function _c(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function BO(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function vr(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&_c(t,e):_c(t,e))||r&&t===n)return t;if(t===n)break}while(t=BO(t))}return null}var tg=/\s+/g;function qn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(tg," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(tg," ")}}function Ue(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ys(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Ue(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Wv(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Vr(){var t=document.scrollingElement;return t||document.documentElement}function Vt(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var o,s,l,a,c,u,d;if(t!==window&&t.parentNode&&t!==Vr()?(o=t.getBoundingClientRect(),s=o.top,l=o.left,a=o.bottom,c=o.right,u=o.height,d=o.width):(s=0,l=0,a=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!pi))do if(i&&i.getBoundingClientRect&&(Ue(i,"transform")!=="none"||n&&Ue(i,"position")!=="static")){var f=i.getBoundingClientRect();s-=f.top+parseInt(Ue(i,"border-top-width")),l-=f.left+parseInt(Ue(i,"border-left-width")),a=s+o.height,c=l+o.width;break}while(i=i.parentNode);if(r&&t!==window){var p=ys(i||t),g=p&&p.a,y=p&&p.d;p&&(s/=y,l/=g,d/=g,u/=y,a=s+u,c=l+d)}return{top:s,left:l,bottom:a,right:c,width:d,height:u}}}function ng(t,e,n){for(var r=Ni(t,!0),i=Vt(t)[e];r;){var o=Vt(r)[n],s=void 0;if(s=i>=o,!s)return r;if(r===Vr())break;r=Ni(r,!1)}return!1}function Cs(t,e,n,r){for(var i=0,o=0,s=t.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==ze.ghost&&(r||s[o]!==ze.dragged)&&vr(s[o],n.draggable,t,!1)){if(i===e)return s[o];i++}o++}return null}function Vh(t,e){for(var n=t.lastElementChild;n&&(n===ze.ghost||Ue(n,"display")==="none"||e&&!_c(n,e));)n=n.previousElementSibling;return n||null}function rr(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ze.clone&&(!e||_c(t,e))&&n++;return n}function rg(t){var e=0,n=0,r=Vr();if(t)do{var i=ys(t),o=i.a,s=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*s}while(t!==r&&(t=t.parentNode));return[e,n]}function VO(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Ni(t,e){if(!t||!t.getBoundingClientRect)return Vr();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Ue(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Vr();if(r||e)return n;r=!0}}while(n=n.parentNode);return Vr()}function RO(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function dd(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var fl;function qv(t,e){return function(){if(!fl){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),fl=setTimeout(function(){fl=void 0},e)}}}function HO(){clearTimeout(fl),fl=void 0}function Jv(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Gv(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Yv(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var o,s,l,a;if(!(!vr(i,e.draggable,t,!1)||i.animated||i===n)){var c=Vt(i);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,c.right),r.bottom=Math.max((a=r.bottom)!==null&&a!==void 0?a:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Yn="Sortable"+new Date().getTime();function FO(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Ue(r,"display")==="none"||r===ze.ghost)){t.push({target:r,rect:Vt(r)});var i=Fr({},t[t.length-1].rect);if(r.thisAnimationDuration){var o=ys(r,!0);o&&(i.top-=o.f,i.left-=o.e)}r.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(VO(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,o=0;t.forEach(function(s){var l=0,a=s.target,c=a.fromRect,u=Vt(a),d=a.prevFromRect,f=a.prevToRect,p=s.rect,g=ys(a,!0);g&&(u.top-=g.f,u.left-=g.e),a.toRect=u,a.thisAnimationDuration&&dd(d,u)&&!dd(c,u)&&(p.top-u.top)/(p.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(l=UO(p,d,f,r.options)),dd(u,c)||(a.prevFromRect=c,a.prevToRect=u,l||(l=r.options.animation),r.animate(a,p,u,l)),l&&(i=!0,o=Math.max(o,l),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},l),a.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),t=[]},animate:function(n,r,i,o){if(o){Ue(n,"transition",""),Ue(n,"transform","");var s=ys(this.el),l=s&&s.a,a=s&&s.d,c=(r.left-i.left)/(l||1),u=(r.top-i.top)/(a||1);n.animatingX=!!c,n.animatingY=!!u,Ue(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=jO(n),Ue(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Ue(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Ue(n,"transition",""),Ue(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function jO(t){return t.offsetWidth}function UO(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Wo=[],fd={initializeByDefault:!0},na={mount:function(t){for(var e in fd)fd.hasOwnProperty(e)&&!(e in t)&&(t[e]=fd[e]);Wo.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Wo.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=t+"Global";Wo.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][i]&&e[o.pluginName][i](Fr({sortable:e},n)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](Fr({sortable:e},n)))})},initializePlugins:function(t,e,n,r){Wo.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var a=new s(t,e,t.options);a.sortable=t,a.options=t.options,t[l]=a,di(n,a.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var o=this.modifyOption(t,i,t.options[i]);typeof o<"u"&&(t.options[i]=o)}},getEventProperties:function(t,e){var n={};return Wo.forEach(function(r){typeof r.eventProperties=="function"&&di(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return Wo.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[e]=="function"&&(r=i.optionListeners[e].call(t[i.pluginName],n))}),r}};function zO(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,s=t.toEl,l=t.fromEl,a=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,p=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[Yn],!!e){var y,x=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!pi&&!ta?y=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(r,!0,!0)),y.to=s||n,y.from=l||n,y.item=i||n,y.clone=o,y.oldIndex=a,y.newIndex=c,y.oldDraggableIndex=u,y.newDraggableIndex=d,y.originalEvent=f,y.pullMode=p?p.lastPutMode:void 0;var _=Fr(Fr({},g),na.getEventProperties(r,e));for(var D in _)y[D]=_[D];n&&n.dispatchEvent(y),x[O]&&x[O].call(e,y)}}var KO=["evt"],In=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=LO(n,KO);na.pluginEvent.bind(ze)(t,e,Fr({dragEl:ve,parentEl:Pt,ghostEl:Ge,rootEl:At,nextEl:co,lastDownEl:ec,cloneEl:Dt,cloneHidden:Mi,dragStarted:Js,putSortable:en,activeSortable:ze.active,originalEvent:r,oldIndex:is,oldDraggableIndex:hl,newIndex:Gn,newDraggableIndex:Ti,hideGhostForTarget:eb,unhideGhostForTarget:tb,cloneNowHidden:function(){Mi=!0},cloneNowShown:function(){Mi=!1},dispatchSortableEvent:function(o){Cn({sortable:e,name:o,originalEvent:r})}},i))};function Cn(t){zO(Fr({putSortable:en,cloneEl:Dt,targetEl:ve,rootEl:At,oldIndex:is,oldDraggableIndex:hl,newIndex:Gn,newDraggableIndex:Ti},t))}var ve,Pt,Ge,At,co,ec,Dt,Mi,is,Gn,hl,Ti,Ta,en,Zo=!1,Nc=!1,Dc=[],so,yr,hd,pd,ig,og,Js,qo,pl,ml=!1,Oa=!1,tc,an,md=[],Nf=!1,Pc=[],wu=typeof document<"u",Ea=Uv,sg=ta||pi?"cssFloat":"float",WO=wu&&!zv&&!Uv&&"draggable"in document.createElement("div"),Xv=function(){if(wu){if(pi)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Zv=function(t,e){var n=Ue(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Cs(t,0,e),o=Cs(t,1,e),s=i&&Ue(i),l=o&&Ue(o),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Vt(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Vt(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||a>=r&&n[sg]==="none"||o&&n[sg]==="none"&&a+c>r)?"vertical":"horizontal"},qO=function(t,e,n){var r=n?t.left:t.top,i=n?t.right:t.bottom,o=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,a=n?e.width:e.height;return r===s||i===l||r+o/2===s+a/2},JO=function(t,e){var n;return Dc.some(function(r){var i=r[Yn].options.emptyInsertThreshold;if(!(!i||Vh(r))){var o=Vt(r),s=t>=o.left-i&&t<=o.right+i,l=e>=o.top-i&&e<=o.bottom+i;if(s&&l)return n=r}}),n},Qv=function(t){function e(i,o){return function(s,l,a,c){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(o||u))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return e(i(s,l,a,c),o)(s,l,a,c);var d=(o?s:l).options.group.name;return i===!0||typeof i=="string"&&i===d||i.join&&i.indexOf(d)>-1}}var n={},r=t.group;(!r||Qa(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},eb=function(){!Xv&&Ge&&Ue(Ge,"display","none")},tb=function(){!Xv&&Ge&&Ue(Ge,"display","")};wu&&!zv&&document.addEventListener("click",function(t){if(Nc)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Nc=!1,!1},!0);var lo=function(t){if(ve){t=t.touches?t.touches[0]:t;var e=JO(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Yn]._onDragOver(n)}}},GO=function(t){ve&&ve.parentNode[Yn]._isOutsideThisEl(t.target)};function ze(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=di({},e),t[Yn]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Zv(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ze.supportPointer!==!1&&"PointerEvent"in window&&!dl,emptyInsertThreshold:5};na.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);Qv(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:WO,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?pt(t,"pointerdown",this._onTapStart):(pt(t,"mousedown",this._onTapStart),pt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(pt(t,"dragover",this),pt(t,"dragenter",this)),Dc.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),di(this,FO())}ze.prototype={constructor:ze,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(qo=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,ve):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,i=r.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=r.filter;if(rE(n),!ve&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||r.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&dl&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=vr(l,r.draggable,n,!1),!(l&&l.animated)&&ec!==l)){if(is=rr(l),hl=rr(l,r.draggable),typeof c=="function"){if(c.call(this,t,l,this)){Cn({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:n,fromEl:n}),In("filter",e,{evt:t}),i&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=vr(a,u.trim(),n,!1),u)return Cn({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:n,toEl:n}),In("filter",e,{evt:t}),!0}),c)){i&&t.cancelable&&t.preventDefault();return}r.handle&&!vr(a,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,i=r.el,o=r.options,s=i.ownerDocument,l;if(n&&!ve&&n.parentNode===i){var a=Vt(n);if(At=i,ve=n,Pt=ve.parentNode,co=ve.nextSibling,ec=n,Ta=o.group,ze.dragged=ve,so={target:ve,clientX:(e||t).clientX,clientY:(e||t).clientY},ig=so.clientX-a.left,og=so.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,ve.style["will-change"]="all",l=function(){if(In("delayEnded",r,{evt:t}),ze.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!eg&&r.nativeDraggable&&(ve.draggable=!0),r._triggerDragStart(t,e),Cn({sortable:r,name:"choose",originalEvent:t}),qn(ve,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){Wv(ve,c.trim(),gd)}),pt(s,"dragover",lo),pt(s,"mousemove",lo),pt(s,"touchmove",lo),pt(s,"mouseup",r._onDrop),pt(s,"touchend",r._onDrop),pt(s,"touchcancel",r._onDrop),eg&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ve.draggable=!0),In("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(ta||pi))){if(ze.eventCanceled){this._onDrop();return}pt(s,"mouseup",r._disableDelayedDrag),pt(s,"touchend",r._disableDelayedDrag),pt(s,"touchcancel",r._disableDelayedDrag),pt(s,"mousemove",r._delayedDragTouchMoveHandler),pt(s,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&pt(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ve&&gd(ve),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ut(t,"mouseup",this._disableDelayedDrag),ut(t,"touchend",this._disableDelayedDrag),ut(t,"touchcancel",this._disableDelayedDrag),ut(t,"mousemove",this._delayedDragTouchMoveHandler),ut(t,"touchmove",this._delayedDragTouchMoveHandler),ut(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?pt(document,"pointermove",this._onTouchMove):e?pt(document,"touchmove",this._onTouchMove):pt(document,"mousemove",this._onTouchMove):(pt(ve,"dragend",this),pt(At,"dragstart",this._onDragStart));try{document.selection?nc(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Zo=!1,At&&ve){In("dragStarted",this,{evt:e}),this.nativeDraggable&&pt(document,"dragover",GO);var n=this.options;!t&&qn(ve,n.dragClass,!1),qn(ve,n.ghostClass,!0),ze.active=this,t&&this._appendGhost(),Cn({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(yr){this._lastX=yr.clientX,this._lastY=yr.clientY,eb();for(var t=document.elementFromPoint(yr.clientX,yr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(yr.clientX,yr.clientY),t!==e);)e=t;if(ve.parentNode[Yn]._isOutsideThisEl(t),e)do{if(e[Yn]){var n=void 0;if(n=e[Yn]._onDragOver({clientX:yr.clientX,clientY:yr.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);tb()}},_onTouchMove:function(t){if(so){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=Ge&&ys(Ge,!0),s=Ge&&o&&o.a,l=Ge&&o&&o.d,a=Ea&&an&&rg(an),c=(i.clientX-so.clientX+r.x)/(s||1)+(a?a[0]-md[0]:0)/(s||1),u=(i.clientY-so.clientY+r.y)/(l||1)+(a?a[1]-md[1]:0)/(l||1);if(!ze.active&&!Zo){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ge){o?(o.e+=c-(hd||0),o.f+=u-(pd||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Ue(Ge,"webkitTransform",d),Ue(Ge,"mozTransform",d),Ue(Ge,"msTransform",d),Ue(Ge,"transform",d),hd=c,pd=u,yr=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ge){var t=this.options.fallbackOnBody?document.body:At,e=Vt(ve,!0,Ea,!0,t),n=this.options;if(Ea){for(an=t;Ue(an,"position")==="static"&&Ue(an,"transform")==="none"&&an!==document;)an=an.parentNode;an!==document.body&&an!==document.documentElement?(an===document&&(an=Vr()),e.top+=an.scrollTop,e.left+=an.scrollLeft):an=Vr(),md=rg(an)}Ge=ve.cloneNode(!0),qn(Ge,n.ghostClass,!1),qn(Ge,n.fallbackClass,!0),qn(Ge,n.dragClass,!0),Ue(Ge,"transition",""),Ue(Ge,"transform",""),Ue(Ge,"box-sizing","border-box"),Ue(Ge,"margin",0),Ue(Ge,"top",e.top),Ue(Ge,"left",e.left),Ue(Ge,"width",e.width),Ue(Ge,"height",e.height),Ue(Ge,"opacity","0.8"),Ue(Ge,"position",Ea?"absolute":"fixed"),Ue(Ge,"zIndex","100000"),Ue(Ge,"pointerEvents","none"),ze.ghost=Ge,t.appendChild(Ge),Ue(Ge,"transform-origin",ig/parseInt(Ge.style.width)*100+"% "+og/parseInt(Ge.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,i=n.options;if(In("dragStart",this,{evt:t}),ze.eventCanceled){this._onDrop();return}In("setupClone",this),ze.eventCanceled||(Dt=Gv(ve),Dt.removeAttribute("id"),Dt.draggable=!1,Dt.style["will-change"]="",this._hideClone(),qn(Dt,this.options.chosenClass,!1),ze.clone=Dt),n.cloneId=nc(function(){In("clone",n),!ze.eventCanceled&&(n.options.removeCloneOnHide||At.insertBefore(Dt,ve),n._hideClone(),Cn({sortable:n,name:"clone"}))}),!e&&qn(ve,i.dragClass,!0),e?(Nc=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ut(document,"mouseup",n._onDrop),ut(document,"touchend",n._onDrop),ut(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,ve)),pt(document,"drop",n),Ue(ve,"transform","translateZ(0)")),Zo=!0,n._dragStartId=nc(n._dragStarted.bind(n,e,t)),pt(document,"selectstart",n),Js=!0,dl&&Ue(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,i,o,s=this.options,l=s.group,a=ze.active,c=Ta===l,u=s.sort,d=en||a,f,p=this,g=!1;if(Nf)return;function y(Q,Ce){In(Q,p,Fr({evt:t,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:r,targetRect:i,canSort:u,fromSortable:d,target:n,completed:O,onMove:function(We,$e){return Aa(At,e,ve,r,We,Vt(We),t,$e)},changed:_},Ce))}function x(){y("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function O(Q){return y("dragOverCompleted",{insertion:Q}),Q&&(c?a._hideClone():a._showClone(p),p!==d&&(qn(ve,en?en.options.ghostClass:a.options.ghostClass,!1),qn(ve,s.ghostClass,!0)),en!==p&&p!==ze.active?en=p:p===ze.active&&en&&(en=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){y("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===ve&&!ve.animated||n===e&&!n.animated)&&(qo=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(ve.parentNode[Yn]._isOutsideThisEl(t.target),!Q&&lo(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function _(){Gn=rr(ve),Ti=rr(ve,s.draggable),Cn({sortable:p,name:"change",toEl:e,newIndex:Gn,newDraggableIndex:Ti,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=vr(n,s.draggable,e,!0),y("dragOver"),ze.eventCanceled)return g;if(ve.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return O(!1);if(Nc=!1,a&&!s.disabled&&(c?u||(o=Pt!==At):en===this||(this.lastPutMode=Ta.checkPull(this,a,ve,t))&&l.checkPut(this,a,ve,t))){if(f=this._getDirection(t,n)==="vertical",r=Vt(ve),y("dragOverValid"),ze.eventCanceled)return g;if(o)return Pt=At,x(),this._hideClone(),y("revert"),ze.eventCanceled||(co?At.insertBefore(ve,co):At.appendChild(ve)),O(!0);var D=Vh(e,s.draggable);if(!D||QO(t,f,this)&&!D.animated){if(D===ve)return O(!1);if(D&&e===t.target&&(n=D),n&&(i=Vt(n)),Aa(At,e,ve,r,n,i,t,!!n)!==!1)return x(),D&&D.nextSibling?e.insertBefore(ve,D.nextSibling):e.appendChild(ve),Pt=e,_(),O(!0)}else if(D&&ZO(t,f,this)){var k=Cs(e,0,s,!0);if(k===ve)return O(!1);if(n=k,i=Vt(n),Aa(At,e,ve,r,n,i,t,!1)!==!1)return x(),e.insertBefore(ve,k),Pt=e,_(),O(!0)}else if(n.parentNode===e){i=Vt(n);var I=0,L,R=ve.parentNode!==e,U=!qO(ve.animated&&ve.toRect||r,n.animated&&n.toRect||i,f),T=f?"top":"left",C=ng(n,"top","top")||ng(ve,"top","top"),V=C?C.scrollTop:void 0;qo!==n&&(L=i[T],ml=!1,Oa=!U&&s.invertSwap||R),I=eE(t,n,i,f,U?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Oa,qo===n);var w;if(I!==0){var Y=rr(ve);do Y-=I,w=Pt.children[Y];while(w&&(Ue(w,"display")==="none"||w===Ge))}if(I===0||w===n)return O(!1);qo=n,pl=I;var J=n.nextElementSibling,he=!1;he=I===1;var ce=Aa(At,e,ve,r,n,i,t,he);if(ce!==!1)return(ce===1||ce===-1)&&(he=ce===1),Nf=!0,setTimeout(XO,30),x(),he&&!J?e.appendChild(ve):n.parentNode.insertBefore(ve,he?J:n),C&&Jv(C,0,V-C.scrollTop),Pt=ve.parentNode,L!==void 0&&!Oa&&(tc=Math.abs(L-Vt(n)[T])),_(),O(!0)}if(e.contains(ve))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ut(document,"mousemove",this._onTouchMove),ut(document,"touchmove",this._onTouchMove),ut(document,"pointermove",this._onTouchMove),ut(document,"dragover",lo),ut(document,"mousemove",lo),ut(document,"touchmove",lo)},_offUpEvents:function(){var t=this.el.ownerDocument;ut(t,"mouseup",this._onDrop),ut(t,"touchend",this._onDrop),ut(t,"pointerup",this._onDrop),ut(t,"touchcancel",this._onDrop),ut(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Gn=rr(ve),Ti=rr(ve,n.draggable),In("drop",this,{evt:t}),Pt=ve&&ve.parentNode,Gn=rr(ve),Ti=rr(ve,n.draggable),ze.eventCanceled){this._nulling();return}Zo=!1,Oa=!1,ml=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Df(this.cloneId),Df(this._dragStartId),this.nativeDraggable&&(ut(document,"drop",this),ut(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),dl&&Ue(document.body,"user-select",""),Ue(ve,"transform",""),t&&(Js&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ge&&Ge.parentNode&&Ge.parentNode.removeChild(Ge),(At===Pt||en&&en.lastPutMode!=="clone")&&Dt&&Dt.parentNode&&Dt.parentNode.removeChild(Dt),ve&&(this.nativeDraggable&&ut(ve,"dragend",this),gd(ve),ve.style["will-change"]="",Js&&!Zo&&qn(ve,en?en.options.ghostClass:this.options.ghostClass,!1),qn(ve,this.options.chosenClass,!1),Cn({sortable:this,name:"unchoose",toEl:Pt,newIndex:null,newDraggableIndex:null,originalEvent:t}),At!==Pt?(Gn>=0&&(Cn({rootEl:Pt,name:"add",toEl:Pt,fromEl:At,originalEvent:t}),Cn({sortable:this,name:"remove",toEl:Pt,originalEvent:t}),Cn({rootEl:Pt,name:"sort",toEl:Pt,fromEl:At,originalEvent:t}),Cn({sortable:this,name:"sort",toEl:Pt,originalEvent:t})),en&&en.save()):Gn!==is&&Gn>=0&&(Cn({sortable:this,name:"update",toEl:Pt,originalEvent:t}),Cn({sortable:this,name:"sort",toEl:Pt,originalEvent:t})),ze.active&&((Gn==null||Gn===-1)&&(Gn=is,Ti=hl),Cn({sortable:this,name:"end",toEl:Pt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){In("nulling",this),At=ve=Pt=Ge=co=Dt=ec=Mi=so=yr=Js=Gn=Ti=is=hl=qo=pl=en=Ta=ze.dragged=ze.ghost=ze.clone=ze.active=null,Pc.forEach(function(t){t.checked=!0}),Pc.length=hd=pd=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ve&&(this._onDragOver(t),YO(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)e=n[r],vr(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||nE(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(i,o){var s=r.children[o];vr(s,this.options.draggable,r,!1)&&(n[i]=s)},this),e&&this.captureAnimationState(),t.forEach(function(i){n[i]&&(r.removeChild(n[i]),r.appendChild(n[i]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return vr(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=na.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&Qv(n)},destroy:function(){In("destroy",this);var t=this.el;t[Yn]=null,ut(t,"mousedown",this._onTapStart),ut(t,"touchstart",this._onTapStart),ut(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ut(t,"dragover",this),ut(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Dc.splice(Dc.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Mi){if(In("hideClone",this),ze.eventCanceled)return;Ue(Dt,"display","none"),this.options.removeCloneOnHide&&Dt.parentNode&&Dt.parentNode.removeChild(Dt),Mi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Mi){if(In("showClone",this),ze.eventCanceled)return;ve.parentNode==At&&!this.options.group.revertClone?At.insertBefore(Dt,ve):co?At.insertBefore(Dt,co):At.appendChild(Dt),this.options.group.revertClone&&this.animate(ve,Dt),Ue(Dt,"display",""),Mi=!1}}};function YO(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Aa(t,e,n,r,i,o,s,l){var a,c=t[Yn],u=c.options.onMove,d;return window.CustomEvent&&!pi&&!ta?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=r,a.related=i||e,a.relatedRect=o||Vt(e),a.willInsertAfter=l,a.originalEvent=s,t.dispatchEvent(a),u&&(d=u.call(c,a,s)),d}function gd(t){t.draggable=!1}function XO(){Nf=!1}function ZO(t,e,n){var r=Vt(Cs(n.el,0,n.options,!0)),i=Yv(n.el,n.options,Ge),o=10;return e?t.clientX<i.left-o||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-o||t.clientY<r.bottom&&t.clientX<r.left}function QO(t,e,n){var r=Vt(Vh(n.el,n.options.draggable)),i=Yv(n.el,n.options,Ge),o=10;return e?t.clientX>i.right+o||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+o||t.clientX>r.right&&t.clientY>r.top}function eE(t,e,n,r,i,o,s,l){var a=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!s){if(l&&tc<c*i){if(!ml&&(pl===1?a>u+c*o/2:a<d-c*o/2)&&(ml=!0),ml)f=!0;else if(pl===1?a<u+tc:a>d-tc)return-pl}else if(a>u+c*(1-i)/2&&a<d-c*(1-i)/2)return tE(e)}return f=f||s,f&&(a<u+c*o/2||a>d-c*o/2)?a>u+c/2?1:-1:0}function tE(t){return rr(ve)<rr(t)?1:-1}function nE(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function rE(t){Pc.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Pc.push(r)}}function nc(t){return setTimeout(t,0)}function Df(t){return clearTimeout(t)}wu&&pt(document,"touchmove",function(t){(ze.active||Zo)&&t.cancelable&&t.preventDefault()});ze.utils={on:pt,off:ut,css:Ue,find:Wv,is:function(t,e){return!!vr(t,e,t,!1)},extend:RO,throttle:qv,closest:vr,toggleClass:qn,clone:Gv,index:rr,nextTick:nc,cancelNextTick:Df,detectDirection:Zv,getChild:Cs};ze.get=function(t){return t[Yn]};ze.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(ze.utils=Fr(Fr({},ze.utils),r.utils)),na.mount(r)})};ze.create=function(t,e){return new ze(t,e)};ze.version=IO;var Bt=[],Gs,Pf,$f=!1,yd,vd,$c,Ys;function iE(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?pt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?pt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?pt(document,"touchmove",this._handleFallbackAutoScroll):pt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ut(document,"dragover",this._handleAutoScroll):(ut(document,"pointermove",this._handleFallbackAutoScroll),ut(document,"touchmove",this._handleFallbackAutoScroll),ut(document,"mousemove",this._handleFallbackAutoScroll)),lg(),rc(),HO()},nulling:function(){$c=Pf=Gs=$f=Ys=yd=vd=null,Bt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(i,o);if($c=e,n||this.options.forceAutoScrollFallback||ta||pi||dl){bd(e,this.options,s,n);var l=Ni(s,!0);$f&&(!Ys||i!==yd||o!==vd)&&(Ys&&lg(),Ys=setInterval(function(){var a=Ni(document.elementFromPoint(i,o),!0);a!==l&&(l=a,rc()),bd(e,r.options,a,n)},10),yd=i,vd=o)}else{if(!this.options.bubbleScroll||Ni(s,!0)===Vr()){rc();return}bd(e,this.options,Ni(s,!1),!1)}}},di(t,{pluginName:"scroll",initializeByDefault:!0})}function rc(){Bt.forEach(function(t){clearInterval(t.pid)}),Bt=[]}function lg(){clearInterval(Ys)}var bd=qv(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,a=Vr(),c=!1,u;Pf!==n&&(Pf=n,rc(),Gs=e.scroll,u=e.scrollFn,Gs===!0&&(Gs=Ni(n,!0)));var d=0,f=Gs;do{var p=f,g=Vt(p),y=g.top,x=g.bottom,O=g.left,_=g.right,D=g.width,k=g.height,I=void 0,L=void 0,R=p.scrollWidth,U=p.scrollHeight,T=Ue(p),C=p.scrollLeft,V=p.scrollTop;p===a?(I=D<R&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),L=k<U&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(I=D<R&&(T.overflowX==="auto"||T.overflowX==="scroll"),L=k<U&&(T.overflowY==="auto"||T.overflowY==="scroll"));var w=I&&(Math.abs(_-i)<=s&&C+D<R)-(Math.abs(O-i)<=s&&!!C),Y=L&&(Math.abs(x-o)<=s&&V+k<U)-(Math.abs(y-o)<=s&&!!V);if(!Bt[d])for(var J=0;J<=d;J++)Bt[J]||(Bt[J]={});(Bt[d].vx!=w||Bt[d].vy!=Y||Bt[d].el!==p)&&(Bt[d].el=p,Bt[d].vx=w,Bt[d].vy=Y,clearInterval(Bt[d].pid),(w!=0||Y!=0)&&(c=!0,Bt[d].pid=setInterval((function(){r&&this.layer===0&&ze.active._onTouchMove($c);var he=Bt[this.layer].vy?Bt[this.layer].vy*l:0,ce=Bt[this.layer].vx?Bt[this.layer].vx*l:0;typeof u=="function"&&u.call(ze.dragged.parentNode[Yn],ce,he,t,$c,Bt[this.layer].el)!=="continue"||Jv(Bt[this.layer].el,ce,he)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==a&&(f=Ni(f,!1)));$f=c}},30),nb=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=n||i;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);l(),a&&!a.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Rh(){}Rh.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Cs(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:nb};di(Rh,{pluginName:"revertOnSpill"});function Hh(){}Hh.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:nb};di(Hh,{pluginName:"removeOnSpill"});ze.mount(new iE);ze.mount(Hh,Rh);function oE(t){return t==null?t:JSON.parse(JSON.stringify(t))}function sE(t){Yl()&&bh(t)}function lE(t){Yl()?du(t):au(t)}let rb=null,ib=null;function ag(t=null,e=null){rb=t,ib=e}function aE(){return{data:rb,clonedData:ib}}const cg=Symbol("cloneElement");function cE(...t){var e,n;const r=(e=Yl())==null?void 0:e.proxy;let i=null;const o=t[0];let[,s,l]=t;Array.isArray(xn(s))||(l=s,s=null);let a=null;const{immediate:c=!0,clone:u=oE,customUpdate:d}=(n=xn(l))!=null?n:{};function f(U){var T;const{from:C,oldIndex:V,item:w}=U;i=Array.from(C.childNodes);const Y=xn((T=xn(s))==null?void 0:T[V]),J=u(Y);ag(Y,J),w[cg]=J}function p(U){const T=U.item[cg];if(!TO(T)){if(ud(U.item),Ht(s)){const C=[...xn(s)];s.value=Ym(C,U.newDraggableIndex,T);return}Ym(xn(s),U.newDraggableIndex,T)}}function g(U){const{from:T,item:C,oldIndex:V,oldDraggableIndex:w,pullMode:Y,clone:J}=U;if(Xm(T,C,V),Y==="clone"){ud(J);return}if(Ht(s)){const he=[...xn(s)];s.value=Gm(he,w);return}Gm(xn(s),w)}function y(U){if(d){d(U);return}const{from:T,item:C,oldIndex:V,oldDraggableIndex:w,newDraggableIndex:Y}=U;if(ud(C),Xm(T,C,V),Ht(s)){const J=[...xn(s)];s.value=Jm(J,w,Y);return}Jm(xn(s),w,Y)}function x(U){const{newIndex:T,oldIndex:C,from:V,to:w}=U;let Y=null;const J=T===C&&V===w;try{if(J){let he=null;i==null||i.some((ce,Q)=>{if(he&&(i==null?void 0:i.length)!==w.childNodes.length)return V.insertBefore(he,ce.nextSibling),!0;const Ce=w.childNodes[Q];he=w==null?void 0:w.replaceChild(ce,Ce)})}}catch(he){Y=he}finally{i=null}au(()=>{if(ag(),Y)throw Y})}const O={onUpdate:y,onStart:f,onAdd:p,onRemove:g,onEnd:x};function _(U){const T=xn(o);return U||(U=OO(T)?EO(T,r==null?void 0:r.$el):T),U&&!_O(U)&&(U=U.$el),U||xO("Root element not found"),U}function D(){var U;const T=(U=xn(l))!=null?U:{},{immediate:C,clone:V}=T,w=Fv(T,["immediate","clone"]);return Zm(w,(Y,J)=>{NO(Y)&&(w[Y]=(he,...ce)=>{const Q=aE();return DO(he,Q),J(he,...ce)})}),MO(s===null?{}:O,w)}const k=U=>{U=_(U),a&&I.destroy(),a=new ze(U,D())};Fa(()=>l,()=>{a&&Zm(D(),(U,T)=>{a==null||a.option(U,T)})},{deep:!0});const I={option:(U,T)=>a==null?void 0:a.option(U,T),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...U)=>a==null?void 0:a.closest(...U)},L=()=>I==null?void 0:I.option("disabled",!0),R=()=>I==null?void 0:I.option("disabled",!1);return lE(()=>{c&&k()}),sE(I.destroy),rs({start:k,pause:L,resume:R},I)}const Lf=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],uE=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Lf.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],Cu=vh({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:uE,emits:["update:modelValue",...Lf],setup(t,{slots:e,emit:n,expose:r,attrs:i}){const o=Lf.reduce((u,d)=>{const f=`on${d.replace(/^\S/,p=>p.toUpperCase())}`;return u[f]=(...p)=>n(d,...p),u},{}),s=tf(()=>{const u=oS(t),{modelValue:d}=u,f=Fv(u,["modelValue"]),p=Object.entries(f).reduce((g,[y,x])=>{const O=xn(x);return O!==void 0&&(g[y]=O),g},{});return rs(rs({},o),kO(rs(rs({},i),p)))}),l=tf({get:()=>t.modelValue,set:u=>n("update:modelValue",u)}),a=su(),c=ou(cE(t.target||a,l,s));return r(c),()=>{var u;return gu(t.tag||"div",{ref:a},(u=e==null?void 0:e.default)==null?void 0:u.call(e,c))}}}),dE={props:["myuuid","formmode"],data(){return{myfile:null,editme:!1}},async mounted(){this.formmode&&(this.editme=!0),this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.myuuid)))},methods:{update(){this.myfile.title==""&&(this.myfile.title="...."),console.log(this.myfile),this.$root.UpdateRecord("Files",this.myuuid,this.myfile),this.formmode||(this.editme=!1)}}},fE={key:0};function hE(t,e,n,r,i,o){return i.myfile?(q(),oe("span",fE,[i.editme?Ne("",!0):(q(),oe("div",{key:0,onDblclick:e[0]||(e[0]=s=>i.editme=!0)},On(i.myfile.title),33)),i.editme?Et((q(),oe("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>i.myfile.title=s),placeholder:"......",onBlur:e[2]||(e[2]=s=>o.update())},null,544)),[[_t,i.myfile.title]]):Ne("",!0)])):Ne("",!0)}const ob=ht(dE,[["render",hE]]),pE={props:{modelValue:{required:!0,type:Array}},components:{VueDraggable:Cu,FileName:ob},computed:{list:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{handleChange(t){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.$root.tools.writer.selected)}},name:"DocStructureNode"},mE={class:"btn"},gE=["onClick"],yE={key:0,viewBox:"0 0 24 24"},vE={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},bE=["onClick"];function wE(t,e,n,r,i,o){const s=Ye("FileName"),l=Ye("DocStructureNode",!0),a=Ye("VueDraggable");return q(),Tt(a,{class:"dragArea",tag:"ul",modelValue:o.list,"onUpdate:modelValue":e[0]||(e[0]=c=>o.list=c),animation:150,group:"files","item-key":"name",onEnd:o.handleChange},{default:Hi(()=>[(q(!0),oe(Ze,null,sn(n.modelValue,(c,u)=>(q(),oe("li",{class:"node",key:u},[S("div",mE,[S("button",{onClick:d=>c.open=!c.open,class:"toggle"},[c.open?Ne("",!0):(q(),oe("svg",yE,e[1]||(e[1]=[S("title",null,"chevron-right",-1),S("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,-1)]))),c.open?(q(),oe("svg",vE,e[2]||(e[2]=[S("title",null,"chevron-down-box",-1),S("path",{d:"M19,3H5A2,2 0 0,0 3,5V19C3,20.11 3.9,21 5,21H19C20.11,21 21,20.11 21,19V5A2,2 0 0,0 19,3M12,15.71L6,9.71L7.41,8.29L12,12.88L16.59,8.29L18,9.71L12,15.71Z"},null,-1)]))):Ne("",!0)],8,gE),S("button",{class:jt(["labelbtn",{selected:t.$root.tools.writer.selectednode===c.uuid}]),onClick:d=>t.$root.tools.writer.selectednode=c.uuid},[(q(),Tt(s,{myuuid:c.uuid,key:c.uuid},null,8,["myuuid"]))],10,bE)]),c.open?(q(),Tt(l,{key:0,modelValue:c.files,"onUpdate:modelValue":d=>c.files=d},null,8,["modelValue","onUpdate:modelValue"])):Ne("",!0)]))),128))]),_:1},8,["modelValue","onEnd"])}const CE=ht(pE,[["render",wE],["__scopeId","data-v-1943c2c1"]]),xE={name:"DocStructure",components:{DocStructureNode:CE},data(){return{bookwatch:null}},async mounted(){this.bookwatch=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected.uuid))),this.$watch("bookwatch",(t,e)=>{this.$root.tools.writer.selected=JSON.parse(JSON.stringify(t))})},methods:{async addNode(){let t=JSON.parse(JSON.stringify(this.$root.fileTemplate));t.writerid=this.$root.tools.writer.selected.uuid,t.uuid=this.$root.uuid(),await this.$root.AddRecord("Files",t);let e={};e.open=!1,e.uuid=t.uuid,e.files=[];let n=null;this.$root.tools.writer.selectednode?n=this.findNodeByUUID(this.$root.tools.writer.selectednode,this.$root.tools.writer.selected):n=this.$root.tools.writer.selected,n.files.push(e),n.open=!0,this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.$root.tools.writer.selected)},findNodeByUUID(t,e){if(e.uuid===t)return e;for(let n of e.files){let r=this.findNodeByUUID(t,n);if(r)return r}return null}}},SE={key:0,class:"documentStructure"},kE={class:"lhstools"},TE={class:"docsettings"},OE={style:{padding:"10px"}},EE={class:"lhsscrollcontainer"};function AE(t,e,n,r,i,o){const s=Ye("DocStructureNode");return this.$root.tools.writer.selected?(q(),oe("div",SE,[S("div",kE,[S("button",{onClick:e[0]||(e[0]=(...l)=>o.addNode&&o.addNode(...l)),class:"btn"},e[3]||(e[3]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"Add File"),S("path",{d:"M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H13.81C13.28 21.09 13 20.05 13 19C13 15.69 15.69 13 19 13C19.34 13 19.67 13.03 20 13.08V8L14 2M13 9V3.5L18.5 9H13M23 20H20V23H18V20H15V18H18V15H20V18H23V20Z"})],-1),S("span",null,"Add",-1)]))]),S("div",null,[S("div",TE,[S("button",{class:"btn",onClick:e[1]||(e[1]=l=>t.$root.tools.writer.selectednode=null)},e[4]||(e[4]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"book-open-page-variant-outline"),S("path",{d:"M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z"})],-1),br(" Document Settings ")]))]),S("div",OE,[S("div",EE,[this.$root.tools.writer.selected.files.length?(q(),Tt(s,{key:0,modelValue:this.$root.tools.writer.selected.files,"onUpdate:modelValue":e[2]||(e[2]=l=>this.$root.tools.writer.selected.files=l)},null,8,["modelValue"])):Ne("",!0)])])])])):Ne("",!0)}const ME=ht(xE,[["render",AE],["__scopeId","data-v-6a46a83d"]]);function tn(t){this.content=t}tn.prototype={constructor:tn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new tn(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new tn(n)},addToStart:function(t,e){return new tn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new tn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new tn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=tn.from(t),t.size?new tn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=tn.from(t),t.size?new tn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=tn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};tn.from=function(t){if(t instanceof tn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new tn(e)};function sb(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=sb(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function lb(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=lb(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class le{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new le(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new le(r,i)}cutByIndex(e,n){return e==n?le.empty:e==0&&n==this.content.length?this:new le(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new le(i,o)}addToStart(e){return new le([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new le(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return sb(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return lb(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ma(0,e);if(e==this.size)return Ma(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Ma(r+1,s):Ma(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return le.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new le(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return le.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new le(n||e,r)}static from(e){if(!e)return le.empty;if(e instanceof le)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new le([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}le.empty=new le([],0);const wd={index:0,offset:0};function Ma(t,e){return wd.index=t,wd.offset=e,wd}function Lc(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Lc(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Lc(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let xt=class If{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Lc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return If.none;if(e instanceof If)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};xt.none=[];class Ic extends Error{}class ke{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=cb(this.content,e+this.openStart,n);return r&&new ke(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ke(ab(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ke.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ke(le.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new ke(e,r,i)}}ke.empty=new ke(le.empty,0,0);function ab(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(ab(o.content,e-i-1,n-i-1)))}function cb(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=cb(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function _E(t,e,n){if(n.openStart>t.depth)throw new Ic("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ic("Inconsistent open depths");return ub(t,e,n,0)}function ub(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=ub(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return So(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=NE(n,t);return So(o,fb(t,s,l,e,r))}else return So(o,Bc(t,e,r))}function db(t,e){if(!e.type.compatibleContent(t.type))throw new Ic("Cannot join "+e.type.name+" onto "+t.type.name)}function Bf(t,e,n){let r=t.node(n);return db(r,e.node(n)),r}function xo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function gl(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(xo(t.nodeAfter,r),o++));for(let l=o;l<s;l++)xo(i.child(l),r);e&&e.depth==n&&e.textOffset&&xo(e.nodeBefore,r)}function So(t,e){return t.type.checkContent(e),t.copy(e)}function fb(t,e,n,r,i){let o=t.depth>i&&Bf(t,e,i+1),s=r.depth>i&&Bf(n,r,i+1),l=[];return gl(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(db(o,s),xo(So(o,fb(t,e,n,r,i+1)),l)):(o&&xo(So(o,Bc(t,e,i+1)),l),gl(e,n,i,l),s&&xo(So(s,Bc(n,r,i+1)),l)),gl(r,null,i,l),new le(l)}function Bc(t,e,n){let r=[];if(gl(null,t,n,r),t.depth>n){let i=Bf(t,e,n+1);xo(So(i,Bc(t,e,n+1)),r)}return gl(e,null,n,r),new le(r)}function NE(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(le.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Bl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return xt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Vc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(r.push(s,l,i+a),!c||(s=s.child(l),s.isText))break;o=c-1,i+=a+1}return new Bl(n,r,o)}static resolveCached(e,n){let r=ug.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else ug.set(e,r=new DE);let i=r.elts[r.i]=Bl.resolve(e,n);return r.i=(r.i+1)%PE,i}}class DE{constructor(){this.elts=[],this.i=0}}const PE=12,ug=new WeakMap;class Vc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $E=Object.create(null);let Ii=class Vf{constructor(e,n,r,i=xt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||le.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Lc(this.attrs,n||e.defaultAttrs||$E)&&xt.sameSet(this.marks,r||xt.none)}copy(e=null){return e==this.content?this:new Vf(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Vf(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ke.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),c=i.node(s).content.cut(i.pos-l,o.pos-l);return new ke(c,i.depth-s,o.depth-s)}replace(e,n,r){return _E(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Bl.resolveCached(this,e)}resolveNoCache(e){return Bl.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),hb(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=le.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=xt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!xt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=le.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Ii.prototype.text=void 0;class Rc extends Ii{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):hb(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Rc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Rc(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function hb(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class No{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new LE(e,n);if(r.next==null)return No.empty;let i=pb(r);r.next&&r.err("Unexpected trailing text");let o=jE(FE(i));return UE(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return le.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,l.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}No.empty=new No(!0);class LE{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function pb(t){let e=[];do e.push(IE(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function IE(t){let e=[];do e.push(BE(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function BE(t){let e=HE(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=VE(t,e);else break;return e}function dg(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function VE(t,e){let n=dg(t),r=n;return t.eat(",")&&(t.next!="}"?r=dg(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function RE(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function HE(t){if(t.eat("(")){let e=pb(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=RE(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function FE(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;i(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,a),u),a=u}if(s.max==-1)i(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=n();r(a,u),i(o(s.expr,a),u),a=u}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function mb(t,e){return e-t}function fg(t,e){let n=[];return r(e),n.sort(mb);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function jE(t){let e=Object.create(null);return n(fg(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);fg(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new No(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(mb);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function UE(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function gb(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function yb(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function vb(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function bb(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new KE(t,r,e[r]);return n}let hg=class wb{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=bb(e,r.attrs),this.defaultAttrs=gb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==No.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:yb(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ii(this,this.computeAttrs(e),le.from(n),xt.setFrom(r))}createChecked(e=null,n,r){return n=le.from(n),this.checkContent(n),new Ii(this,this.computeAttrs(e),n,xt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=le.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(le.empty,!0);return o?new Ii(this,e,n.append(o),xt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){vb(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:xt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new wb(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function zE(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class KE{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?zE(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class xu{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=bb(e,i.attrs),this.excluded=null;let o=gb(this.attrs);this.instance=o?new xt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new xt(this,yb(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new xu(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){vb(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Cb{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=tn.from(e.nodes),n.marks=tn.from(e.marks||{}),this.nodes=hg.compile(this.spec.nodes,this),this.marks=xu.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=No.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?pg(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:pg(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof hg){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Rc(r,r.defaultAttrs,e,xt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Ii.fromJSON(this,e)}markFromJSON(e){return xt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function pg(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function WE(t){return t.tag!=null}function qE(t){return t.style!=null}let yl=class Rf{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(WE(i))this.tags.push(i);else if(qE(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new gg(this,n,!1);return r.addAll(e,xt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new gg(this,n,!0);return r.addAll(e,xt.none,n.from,n.to),ke.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(YE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=yg(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=yg(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Rf(e,Rf.schemaRules(e)))}};const xb={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},JE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Sb={ol:!0,ul:!0},Vl=1,Hf=2,ic=4;function mg(t,e,n){return e!=null?(e?Vl:0)|(e==="full"?Hf:0):t&&t.whitespace=="pre"?Vl|Hf:n&-5}class _a{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=xt.none,this.match=o||(s&ic?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(le.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Vl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=le.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(le.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!xb.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class gg{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=mg(null,n.preserveWhitespace,0)|(r?ic:0);i?o=new _a(i.type,i.attrs,xt.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new _a(null,null,xt.none,!0,null,s):o=new _a(e.schema.topNodeType,null,xt.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Hf?"full":this.localPreserveWS||(i.options&Vl)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;Sb.hasOwnProperty(s)&&this.parser.normalizeLists&&GE(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:JE.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(xb.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=xt.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):vg(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=mg(e,o,s.options);s.options&ic&&s.content.length==0&&(l|=ic);let a=xt.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):vg(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new _a(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Vl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function GE(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Sb.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function YE(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function yg(t){let e={};for(let n in t)e[n]=t[n];return e}function vg(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class Bo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Cd(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(o[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=oc(Cd(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&oc(Cd(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return oc(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Bo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=bg(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return bg(e.marks)}}function bg(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Cd(t){return t.document||window.document}const wg=new WeakMap;function XE(t){let e=wg.get(t);return e===void 0&&wg.set(t,e=ZE(t)),e}function ZE(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function oc(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=XE(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:g}=oc(t,f,n,r);if(a.appendChild(p),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const kb=65535,Tb=Math.pow(2,16);function QE(t,e){return t+e*Tb}function Cg(t){return t&kb}function eA(t){return(t-(t&kb))/Tb}const Ob=1,Eb=2,sc=4,Ab=8;class Ff{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Ab)>0}get deletedBefore(){return(this.delInfo&(Ob|sc))>0}get deletedAfter(){return(this.delInfo&(Eb|sc))>0}get deletedAcross(){return(this.delInfo&sc)>0}}class Xn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Xn.empty)return Xn.empty}recover(e){let n=0,r=Cg(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+eA(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+o],u=this.ranges[l+s],d=a+c;if(e<=d){let f=c?e==a?-1:e==d?1:n:n,p=a+i+(f<0?0:u);if(r)return p;let g=e==(n<0?a:d)?null:QE(l/3,e-a),y=e==a?Eb:e==d?Ob:sc;return(n<0?e!=a:e!=d)&&(y|=Ab),new Ff(p,y,g)}i+=u-c}return r?e+i:new Ff(e+i,0,null)}touches(e,n){let r=0,i=Cg(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),o+=u-c}}invert(){return new Xn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Xn.empty:new Xn(e<0?[0,-e,0]:[0,0,e])}}Xn.empty=new Xn([]);class Rl{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Rl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Rl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Ff(e,i,null)}}const xd=Object.create(null);class gn{getMap(){return Xn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xd[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xd)throw new RangeError("Duplicate use of step JSON ID "+e);return xd[e]=n,n.prototype.jsonID=e,n}}class Rt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Rt(e,null)}static fail(e){return new Rt(null,e)}static fromReplace(e,n,r,i){try{return Rt.ok(e.replace(n,r,i))}catch(o){if(o instanceof Ic)return Rt.fail(o.message);throw o}}}function Fh(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Fh(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return le.fromArray(r)}class Di extends gn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new ke(Fh(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,o)}invert(){return new Ir(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Di(n.pos,r.pos,this.mark)}merge(e){return e instanceof Di&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Di(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Di(n.from,n.to,e.markFromJSON(n.mark))}}gn.jsonID("addMark",Di);class Ir extends gn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ke(Fh(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,r)}invert(){return new Di(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ir(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ir&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ir(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ir(n.from,n.to,e.markFromJSON(n.mark))}}gn.jsonID("removeMark",Ir);class Pi extends gn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new ke(le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Pi(this.pos,n.marks[i]);return new Pi(this.pos,this.mark)}}return new xs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Pi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Pi(n.pos,e.markFromJSON(n.mark))}}gn.jsonID("addNodeMark",Pi);class xs extends gn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new ke(le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Pi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new xs(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new xs(n.pos,e.markFromJSON(n.mark))}}gn.jsonID("removeNodeMark",xs);class Wt extends gn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&jf(e,this.from,this.to)?Rt.fail("Structure replace would overwrite content"):Rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Wt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Wt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Wt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ke.empty:new ke(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Wt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ke.empty:new ke(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Wt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Wt(n.from,n.to,ke.fromJSON(e,n.slice),!!n.structure)}}gn.jsonID("replace",Wt);class qt extends gn{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(jf(e,this.from,this.gapFrom)||jf(e,this.gapTo,this.to)))return Rt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Rt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Rt.fromReplace(e,this.from,this.to,r):Rt.fail("Content does not fit in gap")}getMap(){return new Xn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new qt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new qt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qt(n.from,n.to,n.gapFrom,n.gapTo,ke.fromJSON(e,n.slice),n.insert,!!n.structure)}}gn.jsonID("replaceAround",qt);function jf(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function tA(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+a.nodeSize,n),g=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(g)||(s&&s.to==f&&s.mark.eq(d[y])?s.to=p:i.push(s=new Ir(f,p,d[y])));l&&l.to==f?l.to=p:o.push(l=new Di(f,p,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function nA(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof xu){let c=s.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],f;for(let p=0;p<i.length;p++){let g=i[p];g.step==o-1&&d.eq(i[p].style)&&(f=g)}f?(f.to=c,f.step=o):i.push({style:d,from:Math.max(l,e),to:c,step:o})}}}),i.forEach(s=>t.step(new Ir(s.from,s.to,s.style)))}function jh(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let c=o.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new Wt(l,u,ke.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Ir(l,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,g;for(;f=p.exec(c.text);)g||(g=new ke(le.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Wt(l+f.index,l+f.index+f[0].length,g))}}l=u}if(!r.validEnd){let a=r.fillBefore(le.empty,!0);t.replace(l,l,new ke(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function rA(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ls(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!rA(i,o,s))break}return null}function iA(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,c=l,u=le.empty,d=0;for(let g=o,y=!1;g>n;g--)y||r.index(g)>0?(y=!0,u=le.from(r.node(g).copy(u)),d++):a--;let f=le.empty,p=0;for(let g=o,y=!1;g>n;g--)y||i.after(g+1)<i.end(g)?(y=!0,f=le.from(i.node(g).copy(f)),p++):c++;t.step(new qt(a,c,s,l,new ke(u.append(f),d,p),u.size-d,!0))}function Uh(t,e,n=null,r=t){let i=oA(t,e),o=i&&sA(r,e);return o?i.map(xg).concat({type:e,attrs:n}).concat(o.map(xg)):null}function xg(t){return{type:t,attrs:null}}function oA(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function sA(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function lA(t,e,n){let r=le.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=le.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new qt(i,o,i,o,new ke(r,0,0),n.length,!0))}function aA(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&cA(t.doc,t.mapping.slice(o).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!g?c=!1:!p&&g&&(c=!0)}c===!1&&_b(t,s,l,o),jh(t,t.mapping.slice(o).map(l,1),r,void 0,c===null);let u=t.mapping.slice(o),d=u.map(l,1),f=u.map(l+s.nodeSize,1);return t.step(new qt(d,f,d+1,f-1,new ke(le.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&Mb(t,s,l,o),!1}})}function Mb(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function _b(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function cA(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function uA(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new qt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ke(le.from(s),0,0),1,!0))}function ai(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),g=r&&r[u+1];g&&(p=p.replaceChild(0,g.type.create(g.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(p))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function dA(t,e,n=1,r){let i=t.doc.resolve(e),o=le.empty,s=le.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){o=le.from(i.node(l).copy(o));let u=r&&r[c];s=le.from(u?u.type.create(u.attrs,s):i.node(l).copy(s))}t.step(new Wt(e,e,new ke(o.append(s),n,n),!0))}function Yi(t,e){let n=t.resolve(e),r=n.index();return Nb(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function fA(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function Nb(t,e){return!!(t&&e&&!t.isLeaf&&fA(t,e))}function Su(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&Nb(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function hA(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);_b(t,u.node(),u.before(),l)}s.inlineContent&&jh(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Wt(c,a.map(e+n,-1),ke.empty,!0)),r===!0){let u=t.doc.resolve(c);Mb(t,u.node(),u.before(),t.steps.length)}return t}function pA(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Db(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(a,a,i);else{let d=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function ku(t,e,n=e,r=ke.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Pb(i,o,r)?new Wt(e,n,r):new mA(i,o,r).fit()}function Pb(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class mA{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=le.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=le.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new ke(o,s,l);return e>-1?new qt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Wt(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Sd(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(le.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Sd(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ke(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Sd(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new ke(Xs(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new ke(Xs(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let y=0;y<o.length;y++)this.openFrontierNode(o[y]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)u.push(i.child(y));d=d.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let y=l.child(c),x=d.matchType(y.type);if(!x)break;c++,(c>1||a==0||y.content.size)&&(d=x,u.push($b(y.mark(f.allowedMarks(y.marks)),c==1?a:0,c==l.childCount?p:-1)))}let g=c==l.childCount;g||(p=-1),this.placed=Zs(this.placed,n,le.from(u)),this.frontier[n].match=d,g&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,x=l;y<p;y++){let O=x.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),x=O.content}this.unplaced=g?e==0?ke.empty:new ke(Xs(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new ke(Xs(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!kd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=kd(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=kd(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Zs(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Zs(this.placed,this.depth,le.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(le.empty,!0);n.childCount&&(this.placed=Zs(this.placed,this.frontier.length,n))}}function Xs(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Xs(t.firstChild.content,e-1,n)))}function Zs(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Zs(t.lastChild.content,e-1,n)))}function Sd(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function $b(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,$b(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(le.empty,!0)))),t.copy(r)}function kd(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!gA(n,o.content,s)?l:null}function gA(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function yA(t){return t.spec.defining||t.spec.definingForContent}function vA(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(Pb(i,o,r))return t.step(new Wt(e,n,r));let s=Ib(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let g=i.node(f).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;s.indexOf(f)>-1?l=f:i.before(f)==p&&s.splice(1,0,-f)}let a=s.indexOf(l),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let g=f.firstChild;if(c.push(g),p==r.openStart)break;f=g.content}for(let f=u-1;f>=0;f--){let p=c[f],g=yA(p.type);if(g&&!p.sameMarkup(i.node(Math.abs(l)-1)))u=f;else if(g||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),g=c[p];if(g)for(let y=0;y<s.length;y++){let x=s[(y+a)%s.length],O=!0;x<0&&(O=!1,x=-x);let _=i.node(x-1),D=i.index(x-1);if(_.canReplaceWith(D,D,g.type,g.marks))return t.replace(i.before(x),O?o.after(x):n,new ke(Lb(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=s[f];p<0||(e=i.before(p),n=o.after(p))}}function Lb(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Lb(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(le.empty,!0))}return t}function bA(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=pA(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ke(le.from(r),0,0))}function wA(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=Ib(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function Ib(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class vs extends gn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Rt.fromReplace(e,this.pos,this.pos+1,new ke(le.from(i),0,n.isLeaf?0:1))}getMap(){return Xn.empty}invert(e){return new vs(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new vs(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new vs(n.pos,n.attr,n.value)}}gn.jsonID("attr",vs);class Hl extends gn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Rt.ok(r)}getMap(){return Xn.empty}invert(e){return new Hl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Hl(n.attr,n.value)}}gn.jsonID("docAttr",Hl);let Ss=class extends Error{};Ss=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ss.prototype=Object.create(Error.prototype);Ss.prototype.constructor=Ss;Ss.prototype.name="TransformError";class CA{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Rl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ss(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ke.empty){let i=ku(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ke(le.from(r),0,0))}delete(e,n){return this.replace(e,n,ke.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return vA(this,e,n,r),this}replaceRangeWith(e,n,r){return bA(this,e,n,r),this}deleteRange(e,n){return wA(this,e,n),this}lift(e,n){return iA(this,e,n),this}join(e,n=1){return hA(this,e,n),this}wrap(e,n){return lA(this,e,n),this}setBlockType(e,n=e,r,i=null){return aA(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return uA(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new vs(e,n,r)),this}setDocAttribute(e,n){return this.step(new Hl(e,n)),this}addNodeMark(e,n){return this.step(new Pi(e,n)),this}removeNodeMark(e,n){if(!(n instanceof xt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new xs(e,n)),this}split(e,n=1,r){return dA(this,e,n,r),this}addMark(e,n,r){return tA(this,e,n,r),this}removeMark(e,n,r){return nA(this,e,n,r),this}clearIncompatible(e,n,r){return jh(this,e,n,r),this}}const Td=Object.create(null);class nt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new xA(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ke.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(o);e.replaceRange(u.map(a.pos),u.map(c.pos),l?ke.empty:n),l==0&&Tg(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),c=a.map(s.pos),u=a.map(l.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Tg(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Je(e):Qo(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Qo(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Qo(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Qn(e.node(0))}static atStart(e){return Qo(e,e,0,0,1)||new Qn(e)}static atEnd(e){return Qo(e,e,e.content.size,e.childCount,-1)||new Qn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Td[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Td)throw new RangeError("Duplicate use of selection JSON ID "+e);return Td[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Je.between(this.$anchor,this.$head).getBookmark()}}nt.prototype.visible=!0;class xA{constructor(e,n){this.$from=e,this.$to=n}}let Sg=!1;function kg(t){!Sg&&!t.parent.inlineContent&&(Sg=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Je extends nt{constructor(e,n=e){kg(e),kg(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return nt.near(r);let i=e.resolve(n.map(this.anchor));return new Je(i.parent.inlineContent?i:r,r)}replace(e,n=ke.empty){if(super.replace(e,n),n==ke.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Tu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Je(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=nt.findFrom(n,r,!0)||nt.findFrom(n,-r,!0);if(o)n=o.$head;else return nt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(nt.findFrom(e,-r,!0)||nt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Je(e,n)}}nt.jsonID("text",Je);class Tu{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Tu(e.map(this.anchor),e.map(this.head))}resolve(e){return Je.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends nt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?nt.near(o):new Re(o)}content(){return new ke(le.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zh(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(n.anchor))}static create(e,n){return new Re(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;nt.jsonID("node",Re);class zh{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Tu(r,r):new zh(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Re.isSelectable(r)?new Re(n):nt.near(n)}}class Qn extends nt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ke.empty){if(n==ke.empty){e.delete(0,e.doc.content.size);let r=nt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Qn(e)}map(e){return new Qn(e)}eq(e){return e instanceof Qn}getBookmark(){return SA}}nt.jsonID("all",Qn);const SA={map(){return this},resolve(t){return new Qn(t)}};function Qo(t,e,n,r,i,o=!1){if(e.inlineContent)return Je.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&Re.isSelectable(l))return Re.create(t,n-(i<0?l.nodeSize:0))}else{let a=Qo(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function Tg(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Wt||i instanceof qt))return;let o=t.mapping.maps[r],s;o.forEach((l,a,c,u)=>{s==null&&(s=u)}),t.setSelection(nt.near(t.doc.resolve(s),n))}const Og=1,Eg=2,Ag=4;class kA extends CA{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Og)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Og)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Eg,this}ensureMarks(e){return xt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Eg)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||xt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(nt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ag,this}get scrolledIntoView(){return(this.updated&Ag)>0}}function Mg(t,e){return!e||!t?t:t.bind(e)}class Qs{constructor(e,n,r){this.name=e,this.init=Mg(n.init,r),this.apply=Mg(n.apply,r)}}const TA=[new Qs("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Qs("selection",{init(t,e){return t.selection||nt.atStart(e.doc)},apply(t){return t.selection}}),new Qs("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Qs("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Od{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=TA.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Qs(r.key,r.spec.state,r))})}}class ss{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,c=i?i[s].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ss(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new kA(this)}static create(e){let n=new Od(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ss(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Od(this.schema,e.plugins),r=n.fields,i=new ss(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Od(e.schema,e.plugins),o=new ss(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Ii.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=nt.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function Bb(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Bb(i,e,{})),n[r]=i}return n}class Dn{constructor(e){this.spec=e,this.props={},e.props&&Bb(e.props,this,this.props),this.key=e.key?e.key.key:Vb("plugin")}getState(e){return e[this.key]}}const Ed=Object.create(null);function Vb(t){return t in Ed?t+"$"+ ++Ed[t]:(Ed[t]=0,t+"$")}class Er{constructor(e="key"){this.key=Vb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const nn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ks=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Uf=null;const Xr=function(t,e,n){let r=Uf||(Uf=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},OA=function(){Uf=null},Do=function(t,e,n,r){return n&&(_g(t,e,n,r,-1)||_g(t,e,n,r,1))},EA=/^(img|br|input|textarea|hr)$/i;function _g(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:lr(t))){let o=t.parentNode;if(!o||o.nodeType!=1||ra(t)||EA.test(t.nodeName)||t.contentEditable=="false")return!1;e=nn(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?lr(t):0}else return!1}}function lr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function AA(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=lr(t)}else if(t.parentNode&&!ra(t))e=nn(t),t=t.parentNode;else return null}}function MA(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ra(t))e=nn(t)+1,t=t.parentNode;else return null}}function _A(t,e,n){for(let r=e==0,i=e==lr(t);r||i;){if(t==n)return!0;let o=nn(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==lr(t)}}function ra(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ou=function(t){return t.focusNode&&Do(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function po(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function NA(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function DA(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(lr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(lr(r.startContainer),r.startOffset)}}}const jr=typeof navigator<"u"?navigator:null,Ng=typeof document<"u"?document:null,Xi=jr&&jr.userAgent||"",zf=/Edge\/(\d+)/.exec(Xi),Rb=/MSIE \d/.exec(Xi),Kf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xi),Rn=!!(Rb||Kf||zf),Bi=Rb?document.documentMode:Kf?+Kf[1]:zf?+zf[1]:0,Or=!Rn&&/gecko\/(\d+)/i.test(Xi);Or&&+(/Firefox\/(\d+)/.exec(Xi)||[0,0])[1];const Wf=!Rn&&/Chrome\/(\d+)/.exec(Xi),pn=!!Wf,Hb=Wf?+Wf[1]:0,An=!Rn&&!!jr&&/Apple Computer/.test(jr.vendor),Ts=An&&(/Mobile\/\w+/.test(Xi)||!!jr&&jr.maxTouchPoints>2),or=Ts||(jr?/Mac/.test(jr.platform):!1),PA=jr?/Win/.test(jr.platform):!1,ri=/Android \d/.test(Xi),ia=!!Ng&&"webkitFontSmoothing"in Ng.documentElement.style,$A=ia?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function LA(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Gr(t,e){return typeof t=="number"?t:t[e]}function IA(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Dg(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=ks(s);continue}let l=s,a=l==o.body,c=a?LA(o):IA(l),u=0,d=0;if(e.top<c.top+Gr(r,"top")?d=-(c.top-e.top+Gr(i,"top")):e.bottom>c.bottom-Gr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Gr(i,"top")-c.top:e.bottom-c.bottom+Gr(i,"bottom")),e.left<c.left+Gr(r,"left")?u=-(c.left-e.left+Gr(i,"left")):e.right>c.right-Gr(r,"right")&&(u=e.right-c.right+Gr(i,"right")),u||d)if(a)o.defaultView.scrollBy(u,d);else{let p=l.scrollLeft,g=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let y=l.scrollLeft-p,x=l.scrollTop-g;e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x}}let f=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:ks(s)}}function BA(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Fb(t.dom)}}function Fb(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ks(r));return e}function VA({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;jb(n,r==0?0:r-e)}function jb(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Jo=null;function RA(t){if(t.setActive)return t.setActive();if(Jo)return t.focus(Jo);let e=Fb(t);t.focus(Jo==null?{get preventScroll(){return Jo={preventScroll:!0},!0}}:void 0),Jo||(Jo=!1,jb(e,0))}function Ub(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Xr(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let g=f[p];if(g.top<=s&&g.bottom>=l){s=Math.max(g.bottom,s),l=Math.min(g.top,l);let y=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(y<r){n=u,r=y,i=y&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&y&&(o=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(o=d+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?HA(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Ub(n,i)}function HA(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=wi(r,1);if(o.top!=o.bottom&&Kh(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Kh(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function FA(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function jA(t,e,n){let{node:r,offset:i}=Ub(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function UA(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function zb(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Kh(e,c))return zb(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function zA(t,e){let n=t.dom.ownerDocument,r,i=0,o=DA(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Kh(e,c)||(s=zb(t.dom,e,c),!s))return null}if(An)for(let c=s;r&&c;c=ks(c))c.draggable&&(r=void 0);if(s=FA(s,e),r){if(Or&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;ia&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=UA(t,r,i,e))}l==null&&(l=jA(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Pg(t){return t.top<t.bottom||t.left<t.right}function wi(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Pg(r))return r}return Array.prototype.find.call(n,Pg)||t.getBoundingClientRect()}const KA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Kb(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=ia||Or;if(r.nodeType==3)if(s&&(KA.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=wi(Xr(r,i,i),n);if(Or&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=wi(Xr(r,i-1,i-1),-1);if(c.top==a.top){let u=wi(Xr(r,i,i+1),-1);if(u.top!=a.top)return js(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,js(wi(Xr(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==lr(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Ad(a.getBoundingClientRect(),!1)}if(o==null&&i<lr(r)){let a=r.childNodes[i];if(a.nodeType==1)return Ad(a.getBoundingClientRect(),!0)}return Ad(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==lr(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Xr(a,lr(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return js(wi(c,1),!1)}if(o==null&&i<lr(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Xr(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return js(wi(c,-1),!0)}return js(wi(r.nodeType==3?Xr(r):r,-n),n>=0)}function js(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Ad(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Wb(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function WA(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Wb(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=Kb(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Xr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const qA=/[\u0590-\u08ac]/;function JA(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!qA.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:Wb(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:y}=t.domSelectionRange(),x=g&&!p.contains(g.nodeType==1?g:g.parentNode)||a==g&&c==y;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return f!=null&&(l.caretBidiLevel=f),x}):r.pos==r.start()||r.pos==r.end()}let $g=null,Lg=null,Ig=!1;function GA(t,e,n){return $g==e&&Lg==n?Ig:($g=e,Lg=n,Ig=n=="up"||n=="down"?WA(t,e,n):JA(t,e,n))}const ur=0,Bg=1,yo=2,Ur=3;class oa{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ur,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>nn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof Jb){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof qb&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?nn(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?nn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(i==-1&&e<=c){let u=s+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=s;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=nn(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=nn(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let p=0,g=0;p<this.children.length;p++){let y=this.children[p],x=g+y.size;if(o>g&&s<x)return y.setSelection(e-g-y.border,n-g-y.border,r,i);g=x}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Or||An)&&e==n){let{node:p,offset:g}=l;if(p.nodeType==3){if(d=!!(g&&p.nodeValue[g-1]==`
`),d&&g==p.nodeValue.length)for(let y=p,x;y;y=y.parentNode){if(x=y.nextSibling){x.nodeName=="BR"&&(l=a={node:x.parentNode,offset:nn(x)+1});break}let O=y.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let y=p.childNodes[g-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Or&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&An)&&Do(l.node,l.offset,u.anchorNode,u.anchorOffset)&&Do(a.node,a.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!d){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let g=l;l=a,a=g}let p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?yo:Bg,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ur:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?yo:Ur}r=s}this.dirty=yo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?yo:Bg;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class qb extends oa{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ur&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class YA extends oa{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Po extends oa{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=Bo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Po(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Ur||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ur&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ur){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ur}}slice(e,n,r){let i=Po.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Jf(o,n,s,r)),e>0&&(o=Jf(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Vi extends oa{constructor(e,n,r,i,o,s,l,a,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,c=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Bo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Xb(u,r,n),c?a=new XA(e,n,r,i,u,d||null,f,c,o,s+1):n.isText?new Eu(e,n,r,i,u,f,o):new Vi(e,n,r,i,u,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>le.empty)}return e}matchesNode(e,n,r){return this.dirty==ur&&e.eq(this.node)&&Hc(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new QA(this,s&&s.node,e);nM(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?xt.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,d,f)=>{a.syncToMarks(c.marks,r,e);let p;a.findNodeMatch(c,u,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(c,u,d,p,e)||a.updateNextNode(c,u,d,e,f,i)||a.addNode(c,u,d,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==yo)&&(s&&this.protectLocalComposition(e,s),Gb(this.contentDOM,this.children,e),Ts&&rM(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Je)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=iM(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new YA(this,o,n,i);e.input.compositionNodes.push(s),this.children=Jf(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Ur||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ur}updateOuterDeco(e){if(Hc(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Yb(this.dom,this.nodeDOM,qf(this.outerDeco,this.node,n),qf(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Vg(t,e,n,r,i){Xb(r,e,t);let o=new Vi(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Eu extends Vi{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ur||this.dirty!=ur&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ur||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ur,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Eu(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ur)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Jb extends oa{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ur&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class XA extends Vi{constructor(e,n,r,i,o,s,l,a,c,u){super(e,n,r,i,o,s,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==Ur)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Gb(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=Rg(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof Po){let a=r?r.previousSibling:t.lastChild;Gb(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=Rg(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const vl=function(t){t&&(this.nodeName=t)};vl.prototype=Object.create(null);const vo=[new vl];function qf(t,e,n){if(t.length==0)return vo;let r=n?vo[0]:new vl,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new vl(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new vl(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Yb(t,e,n,r){if(n==vo&&r==vo)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=vo[0]),i=a}ZA(i,l||vo[0],s)}return i}function ZA(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Xb(t,e,n){return Yb(t,t,vo,qf(e,n,t.nodeType!=1))}function Hc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Rg(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class QA{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=eM(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=ur,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=Po.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Ur&&s.dom==s.contentDOM&&(s.dirty=yo),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Vi){let c=this.preMatch.matched.get(a);if(c!=null&&c!=o)return!1;let u=a.dom,d,f=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Ur&&Hc(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=yo,d.updateChildren(i,s+1),d.dirty=ur),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Hc(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Vi.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=Vi.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new qb(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Po;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Eu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((An||pn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Jb(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function eM(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof Po)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function tM(t,e){return t.type.side-e.type.side}function nM(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let x=i[s++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(tM);for(let x=0;x<d.length;x++)n(d[x],c,!!a)}else n(u,c,!!a);let f,p;if(a)p=-1,f=a,a=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let x=0;x<l.length;x++)l[x].to<=o&&l.splice(x--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let g=o+f.nodeSize;if(f.isText){let x=g;s<i.length&&i[s].from<x&&(x=i[s].from);for(let O=0;O<l.length;O++)l[O].to<x&&(x=l[O].to);x<g&&(a=f.cut(x-o),f=f.cut(0,x-o),g=x,p=-1)}else for(;s<i.length&&i[s].to<g;)s++;let y=f.isInline&&!f.isLeaf?l.filter(x=>!x.inline):l.slice();r(f,y,e.forChild(o,f),p),o=g}}function rM(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function iM(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;a+=c.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Jf(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,u=l+=a.size;c>=n||u<=e?o.push(a):(c<e&&o.push(a.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(a.slice(n-c,a.size,r)))}return o}function Wh(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(Ou(n)){for(a=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&Re.isSelectable(d)&&i.parent&&!(d.isInline&&_A(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new Re(s==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let p=0;p<n.rangeCount;p++){let g=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[a,s]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;c=qh(t,u,l,d)}return c}function Zb(t){return t.editable?t.hasFocus():e0(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ci(t,e=!1){let n=t.state.selection;if(Qb(t,n),!!Zb(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&pn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Do(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)sM(t);else{let{anchor:r,head:i}=n,o,s;Hg&&!(n instanceof Je)&&(n.$from.parent.inlineContent||(o=Fg(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Fg(t,n.to))),t.docView.setSelection(r,i,t,e),Hg&&(o&&jg(o),s&&jg(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&oM(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Hg=An||pn&&Hb<63;function Fg(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(An&&i&&i.contentEditable=="false")return Md(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Md(i);if(o)return Md(o)}}function Md(t){return t.contentEditable="true",An&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function jg(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function oM(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Zb(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function sM(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,nn(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Rn&&Bi<=11&&(r.disabled=!0,r.disabled=!1)}function Qb(t,e){if(e instanceof Re){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Ug(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Ug(t)}function Ug(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function qh(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Je.between(e,n,r)}function zg(t){return t.editable&&!t.hasFocus()?!1:e0(t)}function e0(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function lM(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Do(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Gf(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&nt.findFrom(o,e)}function Oi(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Kg(t,e,n){let r=t.state.selection;if(r instanceof Je)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Oi(t,new Je(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Gf(t.state,e);return i&&i instanceof Re?Oi(t,i):!1}else if(!(or&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?Re.isSelectable(o)?Oi(t,new Re(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):ia?Oi(t,new Je(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Re&&r.node.isInline)return Oi(t,new Je(e>0?r.$to:r.$from));{let i=Gf(t.state,e);return i?Oi(t,i):!1}}}function Fc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function bl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Go(t,e){return e<0?aM(t):cM(t)}function aM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Or&&n.nodeType==1&&r<Fc(n)&&bl(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(bl(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(t0(n))break;{let l=n.previousSibling;for(;l&&bl(l,-1);)i=n.parentNode,o=nn(l),l=l.previousSibling;if(l)n=l,r=Fc(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Yf(t,n,r):i&&Yf(t,i,o)}function cM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Fc(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(bl(l,1))o=n,s=++r;else break}else{if(t0(n))break;{let l=n.nextSibling;for(;l&&bl(l,1);)o=l.parentNode,s=nn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Fc(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Yf(t,o,s)}function t0(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function uM(t,e){for(;t&&e==t.childNodes.length&&!ra(t);)e=nn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function dM(t,e){for(;t&&!e&&!ra(t);)e=nn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Yf(t,e,n){if(e.nodeType!=3){let o,s;(s=uM(e,n))?(e=s,n=0):(o=dM(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ou(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ci(t)},50)}function Wg(t,e){let n=t.state.doc.resolve(e);if(!(pn||PA)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function qg(t,e,n){let r=t.state.selection;if(r instanceof Je&&!r.empty||n.indexOf("s")>-1||or&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Gf(t.state,e);if(s&&s instanceof Re)return Oi(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof Qn?nt.near(s,e):nt.findFrom(s,e);return l?Oi(t,l):!1}return!1}function Jg(t,e){if(!(t.state.selection instanceof Je))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Gg(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function fM(t){if(!An||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Gg(t,r,"true"),setTimeout(()=>Gg(t,r,"false"),20)}return!1}function hM(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function pM(t,e){let n=e.keyCode,r=hM(e);if(n==8||or&&n==72&&r=="c")return Jg(t,-1)||Go(t,-1);if(n==46&&!e.shiftKey||or&&n==68&&r=="c")return Jg(t,1)||Go(t,1);if(n==13||n==27)return!0;if(n==37||or&&n==66&&r=="c"){let i=n==37?Wg(t,t.state.selection.from)=="ltr"?-1:1:-1;return Kg(t,i,r)||Go(t,i)}else if(n==39||or&&n==70&&r=="c"){let i=n==39?Wg(t,t.state.selection.from)=="ltr"?1:-1:1;return Kg(t,i,r)||Go(t,i)}else{if(n==38||or&&n==80&&r=="c")return qg(t,-1,r)||Go(t,-1);if(n==40||or&&n==78&&r=="c")return fM(t)||qg(t,1,r)||Go(t,1);if(r==(or?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Jh(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||Bo.fromSchema(t.state.schema),l=l0(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=s0[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let g=l.createElement(u[p]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function n0(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new ke(le.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ke.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:p}=t.state,g=Bo.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let x=s.appendChild(document.createElement("p"));y&&x.appendChild(g.serializeNode(p.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=vM(n),ia&&bM(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||yl.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!mM.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)l=wM(Yg(l,+u[1],+u[2]),u[4]);else if(l=ke.maxOpen(gM(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let p=l.content.firstChild;d<l.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=l.content.lastChild;f<l.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);l=Yg(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const mM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function gM(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&o.length&&i0(a,o,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=o0(s[s.length-1],o.length));let u=r0(l,a);s.push(u),i=i.matchType(u.type),o=a}}),s)return le.from(s)}return t}function r0(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,le.from(t));return t}function i0(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=i0(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(le.from(r0(n,t,i+1))))}}function o0(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,o0(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(le.empty,!0);return t.copy(n.append(r))}function Xf(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=Xf(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(le.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Yg(t,e,n){return e<t.openStart&&(t=new ke(Xf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ke(Xf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const s0={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Xg=null;function l0(){return Xg||(Xg=document.implementation.createHTMLDocument("title"))}let _d=null;function yM(t){let e=window.trustedTypes;return e?(_d||(_d=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_d.createHTML(t)):t}function vM(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=l0().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&s0[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=yM(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function bM(t){let e=t.querySelectorAll(pn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function wM(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=le.from(a.create(r[l+1],i)),o++,s++}return new ke(i,o,s)}const Mn={},_n={},CM={touchstart:!0,touchmove:!0};class xM{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function SM(t){for(let e in Mn){let n=Mn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{TM(t,r)&&!Gh(t,r)&&(t.editable||!(r.type in _n))&&n(t,r)},CM[e]?{passive:!0}:void 0)}An&&t.dom.addEventListener("input",()=>null),Zf(t)}function $i(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function kM(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Zf(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Gh(t,r))})}function Gh(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function TM(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function OM(t,e){!Gh(t,e)&&Mn[e.type]&&(t.editable||!(e.type in _n))&&Mn[e.type](t,e)}_n.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!c0(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ri&&pn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ts&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,po(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||pM(t,n)?n.preventDefault():$i(t,"key")};_n.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};_n.keypress=(t,e)=>{let n=e;if(c0(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||or&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Je)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Au(t){return{left:t.clientX,top:t.clientY}}function EM(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Yh(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function bs(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function AM(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Re.isSelectable(r)?(bs(t,new Re(n)),!0):!1}function MM(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Re&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(Re.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(bs(t,Re.create(t.state.doc,i)),!0):!1}function _M(t,e,n,r,i){return Yh(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?MM(t,n):AM(t,n))}function NM(t,e,n,r){return Yh(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function DM(t,e,n,r){return Yh(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||PM(t,n,r)}function PM(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(bs(t,Je.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)bs(t,Je.create(r,l+1,l+1+s.content.size));else if(Re.isSelectable(s))bs(t,Re.create(r,l));else continue;return!0}}function Xh(t){return jc(t)}const a0=or?"metaKey":"ctrlKey";Mn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Xh(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&EM(n,t.input.lastClick)&&!n[a0]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Au(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new $M(t,s,n,!!r)):(o=="doubleClick"?NM:DM)(t,s.pos,s.inside,n)?n.preventDefault():$i(t,"pointer"))};class $M{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[a0],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Re&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Or&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),$i(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ci(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Au(e))),this.updateAllowDefault(e),this.allowDefault||!n?$i(this.view,"pointer"):_M(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||An&&this.mightDrag&&!this.mightDrag.node.isAtom||pn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(bs(this.view,nt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):$i(this.view,"pointer")}move(e){this.updateAllowDefault(e),$i(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Mn.touchstart=t=>{t.input.lastTouch=Date.now(),Xh(t),$i(t,"pointer")};Mn.touchmove=t=>{t.input.lastTouch=Date.now(),$i(t,"pointer")};Mn.contextmenu=t=>Xh(t);function c0(t,e){return t.composing?!0:An&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const LM=ri?5e3:-1;_n.compositionstart=_n.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Je&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),jc(t,!0),t.markCursor=null;else if(jc(t,!e.selection.empty),Or&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}u0(t,LM)};_n.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,u0(t,20))};function u0(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>jc(t),e))}function d0(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=BM());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function IM(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=AA(e.focusNode,e.focusOffset),r=MA(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function BM(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function jc(t,e=!1){if(!(ri&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),d0(t),e||t.docView&&t.docView.dirty){let n=Wh(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function VM(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Fl=Rn&&Bi<15||Ts&&$A<604;Mn.copy=_n.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Fl?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Jh(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):VM(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function RM(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function HM(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?jl(t,r.value,null,i,e):jl(t,r.textContent,r.innerHTML,i,e)},50)}function jl(t,e,n,r,i){let o=n0(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||ke.empty)))return!0;if(!o)return!1;let s=RM(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function f0(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}_n.paste=(t,e)=>{let n=e;if(t.composing&&!ri)return;let r=Fl?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&jl(t,f0(r),r.getData("text/html"),i,n)?n.preventDefault():HM(t,n)};class h0{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const p0=or?"altKey":"ctrlKey";Mn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Au(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Re?i.to-1:i.to))){if(r&&r.mightDrag)s=Re.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=Re.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:u}=Jh(t,l);(!n.dataTransfer.files.length||!pn||Hb>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Fl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Fl||n.dataTransfer.setData("text/plain",c),t.dragging=new h0(u,!n[p0],s)};Mn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};_n.dragover=_n.dragenter=(t,e)=>e.preventDefault();_n.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Au(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",g=>{s=g(s,t)}):s=n0(t,f0(n.dataTransfer),Fl?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[p0]);if(t.someProp("handleDrop",g=>g(t,n,s||ke.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?Db(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let c=t.state.tr;if(l){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let p=c.doc.resolve(u);if(d&&Re.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Re(p));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((y,x,O,_)=>g=_),c.setSelection(qh(t,p,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Mn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ci(t)},20))};Mn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Mn.beforeinput=(t,e)=>{if(pn&&ri&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,po(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in _n)Mn[t]=_n[t];function Ul(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Uc{constructor(e,n){this.toDOM=e,this.spec=n||ko,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new ar(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Uc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ul(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ri{constructor(e,n){this.attrs=e,this.spec=n||ko}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new ar(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ri&&Ul(this.attrs,e.attrs)&&Ul(this.spec,e.spec)}static is(e){return e.type instanceof Ri}destroy(){}}class Zh{constructor(e,n){this.attrs=e,this.spec=n||ko}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new ar(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Zh&&Ul(this.attrs,e.attrs)&&Ul(this.spec,e.spec)}destroy(){}}class ar{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ar(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ar(e,e,new Uc(n,r))}static inline(e,n,r,i){return new ar(e,n,new Ri(r,i))}static node(e,n,r,i){return new ar(e,n,new Zh(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ri}get widget(){return this.type instanceof Uc}}const es=[],ko={};class Ut{constructor(e,n){this.local=e.length?e:es,this.children=n.length?n:es}static create(e,n){return n.length?zc(n,e,0,ko):cn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==cn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ko)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?FM(this.children,s||[],e,n,r,i,o):s?new Ut(s.sort(To),es):cn}add(e,n){return n.length?this==cn?Ut.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let c=a+r,u;if(u=g0(n,l,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,u,c+1):i.splice(o,0,a,a+l.nodeSize,zc(u,l,c+1,ko)),o+=3}});let s=m0(o?y0(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Ut(s.length?this.local.concat(s).sort(To):this.local,i||this.children)}remove(e){return e.length==0||this==cn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,l+1);c!=cn?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ut(i,r):cn}forChild(e,n){if(this==cn)return this;if(n.isLeaf)return Ut.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Ri){let c=Math.max(o,a.from)-o,u=Math.min(s,a.to)-o;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Ut(i.sort(To),es);return r?new _i([l,r]):l}return r||cn}eq(e){if(this==e)return!0;if(!(e instanceof Ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Qh(this.localsInner(e))}localsInner(e){if(this==cn)return es;if(e.inlineContent||!this.local.some(Ri.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ri||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ut.empty=new Ut([],[]);Ut.removeOverlap=Qh;const cn=Ut.empty;class _i{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ko));return _i.from(r)}forChild(e,n){if(n.isLeaf)return Ut.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=cn&&(o instanceof _i?r=r.concat(o.members):r.push(o))}return _i.from(r)}eq(e){if(!(e instanceof _i)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Qh(r?n:n.sort(To)):es}static from(e){switch(e.length){case 0:return cn;case 1:return e[0];default:return new _i(e.every(n=>n instanceof Ut)?e:e.reduce((n,r)=>n.concat(r instanceof Ut?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function FM(t,e,n,r,i,o,s){let l=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,g,y)=>{let x=y-g-(p-f);for(let O=0;O<l.length;O+=3){let _=l[O+1];if(_<0||f>_+u-d)continue;let D=l[O]+u-d;p>=D?l[O+1]=f<=D?-2:-1:f>=u&&x&&(l[O]+=x,l[O+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[c+1]+o,-1),p=f-i,{index:g,offset:y}=r.content.findIndex(d),x=r.maybeChild(g);if(x&&y==d&&y+x.nodeSize==p){let O=l[c+2].mapInner(n,x,u+1,t[c]+o+1,s);O!=cn?(l[c]=d,l[c+1]=p,l[c+2]=O):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=jM(l,t,e,n,i,o,s),u=zc(c,r,0,s);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<l.length&&l[f]<p;)f+=3;l.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Ut(e.sort(To),l)}function m0(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ar(i.from+e,i.to+e,i.type))}return n}function jM(t,e,n,r,i,o,s){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function g0(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function y0(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function zc(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let c=g0(t,l,a+n);if(c){o=!0;let u=zc(c,l,n+a+1,r);u!=cn&&i.push(a,a+l.nodeSize,u)}});let s=m0(o?y0(t):t,-n).sort(To);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new Ut(s,i):cn}function To(t,e){return t.from-e.from||t.to-e.to}function Qh(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Zg(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Zg(e,i,r.copy(o.from,r.to)));break}}}return e}function Zg(t,e,n){for(;e<t.length&&To(n,t[e])>0;)e++;t.splice(e,0,n)}function Nd(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=cn&&e.push(r)}),t.cursorWrapper&&e.push(Ut.create(t.state.doc,[t.cursorWrapper.deco])),_i.from(e)}const UM={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},zM=Rn&&Bi<=11;class KM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class WM{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new KM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Rn&&Bi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),zM&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,UM)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(zg(this.view)){if(this.suppressingSelectionUpdates)return ci(this.view);if(Rn&&Bi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Do(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=ks(o))n.add(o);for(let o=e.anchorNode;o;o=ks(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&zg(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(Or&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||GM(e,d)!=p)&&f.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ou(r)&&(c=Wh(e))&&c.eq(nt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ci(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),qM(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ci(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Rn&&Bi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?nn(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?nn(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Qg=new WeakMap,ey=!1;function qM(t){if(!Qg.has(t)&&(Qg.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Or,ey)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ey=!0}}function ty(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Do(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function JM(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ty(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ty(t,n):null}function GM(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function YM(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Ou(a)||c.push({node:a.focusNode,offset:a.focusOffset})),pn&&t.input.lastKeyCode===8)for(let x=o;x>i;x--){let O=r.childNodes[x-1],_=O.pmViewDesc;if(O.nodeName=="BR"&&!_){o=x;break}if(!_||_.size)break}let d=t.state.doc,f=t.someProp("domParser")||yl.fromSchema(t.state.schema),p=d.resolve(s),g=null,y=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:XM,context:p});if(c&&c[0].pos!=null){let x=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=x),g={anchor:x+s,head:O+s}}return{doc:y,sel:g,from:s,to:l}}function XM(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(An&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||An&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ZM=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function QM(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,C=Wh(t,T);if(C&&!t.state.selection.eq(C)){if(pn&&ri&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",w=>w(t,po(13,"Enter"))))return;let V=t.state.tr.setSelection(C);T=="pointer"?V.setMeta("pointer",!0):T=="key"&&V.scrollIntoView(),o&&V.setMeta("composition",o),t.dispatch(V)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=YM(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let g=n_(d.content,c.doc.content,c.from,f,p);if(g&&t.input.domChangeCount++,(Ts&&t.input.lastIOSEnter>Date.now()-225||ri)&&i.some(T=>T.nodeType==1&&!ZM.test(T.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",T=>T(t,po(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof Je&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let T=ny(t,t.state.doc,c.sel);if(T&&!T.eq(t.state.selection)){let C=t.state.tr.setSelection(T);o&&C.setMeta("composition",o),t.dispatch(C)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof Je&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Rn&&Bi<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)=="  "&&(g.start--,g.endA--,g.endB--);let y=c.doc.resolveNoCache(g.start-c.from),x=c.doc.resolveNoCache(g.endB-c.from),O=u.resolve(g.start),_=y.sameParent(x)&&y.parent.inlineContent&&O.end()>=g.endA,D;if((Ts&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!_&&y.pos<c.doc.content.size&&!y.sameParent(x)&&(D=nt.findFrom(c.doc.resolve(y.pos+1),1,!0))&&D.head==x.pos)&&t.someProp("handleKeyDown",T=>T(t,po(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&t_(u,g.start,g.endA,y,x)&&t.someProp("handleKeyDown",T=>T(t,po(8,"Backspace")))){ri&&pn&&t.domObserver.suppressSelectionUpdates();return}pn&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),ri&&!_&&y.start()!=x.start()&&x.parentOffset==0&&y.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,x=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,po(13,"Enter"))})},20));let k=g.start,I=g.endA,L,R,U;if(_){if(y.pos==x.pos)Rn&&Bi<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ci(t),20)),L=t.state.tr.delete(k,I),R=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(U=e_(y.parent.content.cut(y.parentOffset,x.parentOffset),O.parent.content.cut(O.parentOffset,g.endA-O.start()))))L=t.state.tr,U.type=="add"?L.addMark(k,I,U.mark):L.removeMark(k,I,U.mark);else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){let T=y.parent.textBetween(y.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",C=>C(t,k,I,T)))return;L=t.state.tr.insertText(T,k,I)}}if(L||(L=t.state.tr.replace(k,I,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let T=ny(t,L.doc,c.sel);T&&!(pn&&t.composing&&T.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(T.head==k||T.head==L.mapping.map(I)-1)||Rn&&T.empty&&T.head==k)&&L.setSelection(T)}R&&L.ensureMarks(R),o&&L.setMeta("composition",o),t.dispatch(L.scrollIntoView())}function ny(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:qh(t,e.resolve(n.anchor),e.resolve(n.head))}function e_(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(le.from(c).eq(t))return{mark:l,type:s}}function t_(t,e,n,r,i){if(n-e<=i.pos-r.pos||Dd(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Dd(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Dd(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Dd(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function n_(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&ry(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&ry(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function ry(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class r_{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xM,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(ay),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=sy(this),oy(this),this.nodeViews=ly(this),this.docView=Vg(this.state.doc,iy(this),Nd(this),this.dom,this),this.domObserver=new WM(this,(r,i,o,s)=>QM(this,r,i,o,s)),this.domObserver.start(),SM(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Zf(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ay),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(d0(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=ly(this);o_(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Zf(this),this.editable=sy(this),oy(this);let a=Nd(this),c=iy(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(i.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&BA(this);if(s){this.domObserver.stop();let p=d&&(Rn||pn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&i_(i.selection,e.selection);if(d){let g=pn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=IM(this)),(o||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Vg(e.doc,c,a,this.dom,this)),g&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&lM(this))?ci(this,p):(Qb(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&VA(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Re){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Dg(this,n.getBoundingClientRect(),e)}else Dg(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new h0(e.slice,e.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Rn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&RA(this.dom),ci(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return zA(this,e)}coordsAtPos(e,n=1){return Kb(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return GA(this,n||this.state,e)}pasteHTML(e,n){return jl(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return jl(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Jh(this,e)}destroy(){this.docView&&(kM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Nd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,OA())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return OM(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?An&&this.root.nodeType===11&&NA(this.dom.ownerDocument)==this.dom&&JM(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function iy(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ar.node(0,t.state.doc.content.size,e)]}function oy(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ar.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function sy(t){return!t.someProp("editable",e=>e(t.state)===!1)}function i_(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function ly(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function o_(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function ay(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Wi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Kc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s_=typeof navigator<"u"&&/Mac/.test(navigator.platform),l_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rn=0;rn<10;rn++)Wi[48+rn]=Wi[96+rn]=String(rn);for(var rn=1;rn<=24;rn++)Wi[rn+111]="F"+rn;for(var rn=65;rn<=90;rn++)Wi[rn]=String.fromCharCode(rn+32),Kc[rn]=String.fromCharCode(rn);for(var Pd in Wi)Kc.hasOwnProperty(Pd)||(Kc[Pd]=Wi[Pd]);function a_(t){var e=s_&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||l_&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Kc:Wi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const c_=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function u_(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))c_?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function d_(t){let e=Object.create(null);for(let n in t)e[u_(n)]=t[n];return e}function $d(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function f_(t){return new Dn({props:{handleKeyDown:v0(t)}})}function v0(t){let e=d_(t);return function(n,r){let i=a_(r),o,s=e[$d(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[$d(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Wi[r.keyCode])&&o!=i){let l=e[$d(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const ep=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function b0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const w0=(t,e,n)=>{let r=b0(t,n);if(!r)return!1;let i=tp(r);if(!i){let s=r.blockRange(),l=s&&Ls(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(M0(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Os(o,"end")||Re.isSelectable(o)))for(let s=r.depth;;s--){let l=ku(t.doc,r.before(s),r.after(s),ke.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(Os(o,"end")?nt.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Re.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},h_=(t,e,n)=>{let r=b0(t,n);if(!r)return!1;let i=tp(r);return i?C0(t,i,e):!1},p_=(t,e,n)=>{let r=S0(t,n);if(!r)return!1;let i=np(r);return i?C0(t,i,e):!1};function C0(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=ku(t.doc,o,a,ke.empty);if(!c||c.from!=o||c instanceof Wt&&c.slice.size>=a-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(Je.create(u.doc,o)),n(u.scrollIntoView())}return!0}function Os(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const x0=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=tp(r)}let s=o&&o.nodeBefore;return!s||!Re.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function tp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function S0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const k0=(t,e,n)=>{let r=S0(t,n);if(!r)return!1;let i=np(r);if(!i)return!1;let o=i.nodeAfter;if(M0(t,i,e,1))return!0;if(r.parent.content.size==0&&(Os(o,"start")||Re.isSelectable(o))){let s=ku(t.doc,r.before(),r.after(),ke.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(Os(o,"start")?nt.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Re.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},T0=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=np(r)}let s=o&&o.nodeAfter;return!s||!Re.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,o.pos)).scrollIntoView()),!0)};function np(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const m_=(t,e)=>{let n=t.selection,r=n instanceof Re,i;if(r){if(n.node.isTextblock||!Yi(t.doc,n.from))return!1;i=n.from}else if(i=Su(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Re.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},g_=(t,e)=>{let n=t.selection,r;if(n instanceof Re){if(n.node.isTextblock||!Yi(t.doc,n.to))return!1;r=n.to}else if(r=Su(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},y_=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Ls(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},O0=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function rp(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const v_=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=rp(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(nt.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},E0=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Qn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=rp(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(Je.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},A0=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(ai(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ls(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function b_(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Re&&e.selection.node.isBlock)return!r.parentOffset||!ai(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){a=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),l=rp(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),o.unshift(a&&l?{type:l}:null),s=p;break}else{if(p==1)return!1;o.unshift(null)}let u=e.tr;(e.selection instanceof Je||e.selection instanceof Qn)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=ai(u.doc,d,o.length,o);if(f||(o[0]=l?{type:l}:null,f=ai(u.doc,d,o.length,o)),u.split(d,o.length,o),!a&&c&&r.node(s).type!=l){let p=u.mapping.map(r.before(s)),g=u.doc.resolve(p);l&&r.node(s-1).canReplaceWith(g.index(),g.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(s)),l)}return n&&n(u.scrollIntoView()),!0}}const w_=b_(),C_=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Re.create(t.doc,i))),!0)};function x_(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Yi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function M0(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&x_(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let p=e.pos+o.nodeSize,g=le.empty;for(let O=s.length-1;O>=0;O--)g=le.from(s[O].create(null,g));g=le.from(i.copy(g));let y=t.tr.step(new qt(e.pos-1,p,e.pos,p,new ke(g,1,0),s.length,!0)),x=y.doc.resolve(p+2*s.length);x.nodeAfter&&x.nodeAfter.type==i.type&&Yi(y.doc,x.pos)&&y.join(x.pos),n(y.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&a?null:nt.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&Ls(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&Os(o,"start",!0)&&Os(i,"end")){let p=i,g=[];for(;g.push(p),!p.isTextblock;)p=p.lastChild;let y=o,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(p.canReplace(p.childCount,p.childCount,y.content)){if(n){let O=le.empty;for(let D=g.length-1;D>=0;D--)O=le.from(g[D].copy(O));let _=t.tr.step(new qt(e.pos-g.length,e.pos+o.nodeSize,e.pos+x,e.pos+o.nodeSize-x,new ke(O,g.length,0),0,!0));n(_.scrollIntoView())}return!0}}return!1}function _0(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(Je.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const S_=_0(-1),k_=_0(1);function T_(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&Uh(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function cy(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}function ip(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}ip(ep,w0,x0);ip(ep,k0,T0);ip(O0,E0,A0,w_);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function O_(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return E_(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function E_(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Vc(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Vc(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=Uh(o,n,r,e);return l?(t&&A_(t,e,l,i,n),!0):!1}function A_(t,e,n,r,i){let o=le.empty;for(let u=n.length-1;u>=0;u--)o=le.from(n[u].type.create(n[u].attrs,o));t.step(new qt(e.start-(r?2:0),e.end,e.start,e.end,new ke(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&ai(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function M_(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?__(e,n,t,o):N_(e,n,o):!0:!1}}function __(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new qt(o-1,s,o,s,new ke(le.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Vc(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=Ls(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return Yi(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function N_(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,g=n.endIndex-1,y=n.startIndex;g>y;g--)p-=i.child(g).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?le.empty:le.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new qt(d-(l?1:0),f+(a?1:0),d+1,f-1,new ke((l?le.empty:le.from(i.copy(le.empty))).append(a?le.empty:le.from(i.copy(le.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function D_(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=le.from(c?t.create():null),d=new ke(le.from(t.create(null,le.from(l.type.create(null,u)))),c?3:1,0),f=o.start,p=o.end;n(e.tr.step(new qt(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}function Mu(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class _u{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,c=e||o.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...y)=>{const x=this.buildProps(c,n),O=p(...y)(x);return l.push(O),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Mu({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class P_{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function _e(t,e,n){return t.config[e]===void 0&&t.parent?_e(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?_e(t.parent,e,n):null}):t.config[e]}function Nu(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function N0(t){const e=[],{nodeExtensions:n,markExtensions:r}=Nu(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=_e(s,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...o,...p}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=_e(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:u,attribute:f})})}),e}function Yt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Nn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),l.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Qf(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Nn(n,r),{})}function D0(t){return typeof t=="function"}function ot(t,e=void 0,...n){return D0(t)?e?t.bind(e)(...n):t(...n):t}function $_(t={}){return Object.keys(t).length===0&&t.constructor===Object}function L_(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function uy(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):L_(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function dy(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&$_(n)?!1:n!=null))}function I_(t,e){var n;const r=N0(t),{nodeExtensions:i,markExtensions:o}=Nu(t),s=(n=i.find(c=>_e(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(O=>O.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((O,_)=>{const D=_e(_,"extendNodeSchema",d);return{...O,...D?D(c):{}}},{}),p=dy({...f,content:ot(_e(c,"content",d)),marks:ot(_e(c,"marks",d)),group:ot(_e(c,"group",d)),inline:ot(_e(c,"inline",d)),atom:ot(_e(c,"atom",d)),selectable:ot(_e(c,"selectable",d)),draggable:ot(_e(c,"draggable",d)),code:ot(_e(c,"code",d)),whitespace:ot(_e(c,"whitespace",d)),linebreakReplacement:ot(_e(c,"linebreakReplacement",d)),defining:ot(_e(c,"defining",d)),isolating:ot(_e(c,"isolating",d)),attrs:Object.fromEntries(u.map(O=>{var _;return[O.name,{default:(_=O==null?void 0:O.attribute)===null||_===void 0?void 0:_.default}]}))}),g=ot(_e(c,"parseHTML",d));g&&(p.parseDOM=g.map(O=>uy(O,u)));const y=_e(c,"renderHTML",d);y&&(p.toDOM=O=>y({node:O,HTMLAttributes:Qf(O,u)}));const x=_e(c,"renderText",d);return x&&(p.toText=x),[c.name,p]})),a=Object.fromEntries(o.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((x,O)=>{const _=_e(O,"extendMarkSchema",d);return{...x,..._?_(c):{}}},{}),p=dy({...f,inclusive:ot(_e(c,"inclusive",d)),excludes:ot(_e(c,"excludes",d)),group:ot(_e(c,"group",d)),spanning:ot(_e(c,"spanning",d)),code:ot(_e(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var O;return[x.name,{default:(O=x==null?void 0:x.attribute)===null||O===void 0?void 0:O.default}]}))}),g=ot(_e(c,"parseHTML",d));g&&(p.parseDOM=g.map(x=>uy(x,u)));const y=_e(c,"renderHTML",d);return y&&(p.toDOM=x=>y({mark:x,HTMLAttributes:Qf(x,u)})),[c.name,p]}));return new Cb({topNode:s,nodes:l,marks:a})}function Ld(t,e){return e.nodes[t]||e.marks[t]||null}function fy(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function op(t,e){const n=Bo.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const B_=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function sp(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Du{constructor(e){this.find=e.find,this.handler=e.handler}}const V_=(t,e)=>{if(sp(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Na(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=B_(c)+o;return s.forEach(f=>{if(u)return;const p=V_(d,f.find);if(!p)return;const g=a.state.tr,y=Mu({state:a.state,transaction:g}),x={from:r-(p[0].length-o.length),to:i},{commands:O,chain:_,can:D}=new _u({editor:n,state:y});f.handler({state:y,range:x,match:p,commands:O,chain:_,can:D})===null||!g.steps.length||(g.setMeta(l,{transform:g,from:r,to:i,text:o}),a.dispatch(g),u=!0)}),u}function R_(t){const{editor:e,rules:n}=t,r=new Dn({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=op(le.from(u),s.schema);const{from:d}=a,f=d+u.length;Na({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return Na({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Na({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Na({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function H_(t){return Object.prototype.toString.call(t).slice(8,-1)}function Da(t){return H_(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Pu(t,e){const n={...t};return Da(t)&&Da(e)&&Object.keys(e).forEach(r=>{Da(e[r])&&Da(t[r])?n[r]=Pu(t[r],e[r]):n[r]=e[r]}),n}class qi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ot(_e(this,"addOptions",{name:this.name}))),this.storage=ot(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Pu(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new qi(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ot(_e(n,"addOptions",{name:n.name})),n.storage=ot(_e(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function F_(t){return typeof t=="number"}class j_{constructor(e){this.find=e.find,this.handler=e.handler}}const U_=(t,e,n)=>{if(sp(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function z_(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:u}=new _u({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(p,g)=>{if(!p.isTextblock||p.type.spec.code)return;const y=Math.max(r,g),x=Math.min(i,g+p.content.size),O=p.textBetween(y-g,x-g,void 0,"￼");U_(O,o.find,s).forEach(D=>{if(D.index===void 0)return;const k=y+D.index+1,I=k+D[0].length,L={from:n.tr.mapping.map(k),to:n.tr.mapping.map(I)},R=o.handler({state:n,range:L,match:D,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});d.push(R)})}),d.every(p=>p!==null)}let Pa=null;const K_=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function W_(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:d,to:f,rule:p,pasteEvt:g})=>{const y=u.tr,x=Mu({state:u,transaction:y});if(!(!z_({editor:e,state:x,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:g,dropEvent:l})||!y.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new Dn({view(d){const f=g=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(g.target)?d.dom.parentElement:null,r&&(Pa=e)},p=()=>{Pa&&(Pa=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,l=f,!o){const p=Pa;p&&setTimeout(()=>{const g=p.state.selection;g&&p.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,f)=>{var p;const g=(p=f.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return s=f,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,p)=>{const g=d[0],y=g.getMeta("uiEvent")==="paste"&&!i,x=g.getMeta("uiEvent")==="drop"&&!o,O=g.getMeta("applyPasteRules"),_=!!O;if(!y&&!x&&!_)return;if(_){let{text:I}=O;typeof I=="string"?I=I:I=op(le.from(I),p.schema);const{from:L}=O,R=L+I.length,U=K_(I);return a({rule:u,state:p,from:L,to:{b:R},pasteEvt:U})}const D=f.doc.content.findDiffStart(p.doc.content),k=f.doc.content.findDiffEnd(p.doc.content);if(!(!F_(D)||!k||D===k.b))return a({rule:u,state:p,from:D,to:k,pasteEvt:s})}}))}function q_(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class ls{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=ls.resolve(e),this.schema=I_(this.extensions,n),this.setupExtensions()}static resolve(e){const n=ls.sort(ls.flatten(e)),r=q_(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=_e(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=_e(r,"priority")||100,s=_e(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ld(n.name,this.schema)},i=_e(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=ls.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Ld(s.name,this.schema)},a=[],c=_e(s,"addKeyboardShortcuts",l);let u={};if(s.type==="mark"&&_e(s,"exitable",l)&&(u.ArrowRight=()=>qi.handleExit({editor:e,mark:s})),c){const y=Object.fromEntries(Object.entries(c()).map(([x,O])=>[x,()=>O({editor:e})]));u={...u,...y}}const d=f_(u);a.push(d);const f=_e(s,"addInputRules",l);fy(s,e.options.enableInputRules)&&f&&r.push(...f());const p=_e(s,"addPasteRules",l);fy(s,e.options.enablePasteRules)&&p&&i.push(...p());const g=_e(s,"addProseMirrorPlugins",l);if(g){const y=g();a.push(...y)}return a}).flat();return[R_({editor:e,rules:r}),...W_({editor:e,rules:i}),...o]}get attributes(){return N0(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Nu(this.extensions);return Object.fromEntries(n.filter(r=>!!_e(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Yt(r.name,this.schema)},s=_e(r,"addNodeView",o);if(!s)return[];const l=(a,c,u,d,f)=>{const p=Qf(a,i);return s()({node:a,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:p})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ld(e.name,this.schema)};e.type==="mark"&&(!((n=ot(_e(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=_e(e,"onBeforeCreate",r),o=_e(e,"onCreate",r),s=_e(e,"onUpdate",r),l=_e(e,"onSelectionUpdate",r),a=_e(e,"onTransaction",r),c=_e(e,"onFocus",r),u=_e(e,"onBlur",r),d=_e(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class mn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ot(_e(this,"addOptions",{name:this.name}))),this.storage=ot(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new mn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Pu(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new mn({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ot(_e(n,"addOptions",{name:n.name})),n.storage=ot(_e(n,"addStorage",{name:n.name,options:n.options})),n}}function P0(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,d)=>{var f;a.isBlock&&c>r&&(l+=o);const p=s==null?void 0:s[a.type.name];if(p)return u&&(l+=p({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,i-c))}),l}function $0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const J_=mn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Dn({key:new Er("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),l=Math.max(...o.map(u=>u.$to.pos)),a=$0(n);return P0(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),G_=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Y_=(t=!1)=>({commands:e})=>e.setContent("",t),X_=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),f=c.resolve(u.map(a+l.nodeSize)),p=d.blockRange(f);if(!p)return;const g=Ls(p);if(l.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,y)}(g||g===0)&&e.lift(p,g)})}),!0},Z_=t=>e=>t(e),Q_=()=>({state:t,dispatch:e})=>E0(t,e),eN=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new Je(r.doc.resolve(s-1))),!0},tN=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},nN=t=>({tr:e,state:n,dispatch:r})=>{const i=Yt(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),c=o.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},rN=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},iN=()=>({state:t,dispatch:e})=>ep(t,e),oN=()=>({commands:t})=>t.keyboardShortcut("Enter"),sN=()=>({state:t,dispatch:e})=>v_(t,e);function Wc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:sp(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function L0(t,e,n={}){return t.find(r=>r.type===e&&Wc(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function hy(t,e,n={}){return!!L0(t,e,n)}function lp(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!L0([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,c=l+i.node.nodeSize;for(;s>0&&hy([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&hy([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Zi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const lN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Zi(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const d=lp(a,o,e);if(d&&d.from<=c&&d.to>=u){const f=Je.create(s,d.from,d.to);n.setSelection(f)}}return!0},aN=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function ap(t){return t instanceof Je}function ii(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function I0(t,e=null){if(!e)return null;const n=nt.atStart(t),r=nt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?Je.create(t,ii(0,i,o),ii(t.content.size,i,o)):Je.create(t,ii(e,i,o),ii(e,i,o))}function cN(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function cp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const uN=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(cp()||cN())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!ap(n.state.selection))return s(),!0;const l=I0(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},dN=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),fN=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),B0=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&B0(r)}return t};function $a(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return B0(n)}function qc(t,e,n){if(t instanceof Ii||t instanceof le)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return le.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),qc("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new Cb({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?yl.fromSchema(a).parseSlice($a(t),n.parseOptions):yl.fromSchema(a).parse($a(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=yl.fromSchema(e);return n.slice?o.parseSlice($a(t),n.parseOptions).content:o.parse($a(t),n.parseOptions)}return qc("",e,n)}function hN(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Wt||i instanceof qt))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,c,u)=>{s===0&&(s=u)}),t.setSelection(nt.near(t.doc.resolve(s),n))}const pN=t=>!("type"in t),mN=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=qc(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(g){return o.emit("contentError",{editor:o,error:g,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((pN(l)?l:[l]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),a===c&&d){const{parent:g}=r.doc.resolve(a);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(a-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(g=>g.text||"").join("");else if(e instanceof le){let g="";e.forEach(y=>{y.text&&(g+=y.text)}),p=g}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,a,c)}else p=l,r.replaceWith(a,c,p);n.updateSelection&&hN(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:p})}return!0},gN=()=>({state:t,dispatch:e})=>m_(t,e),yN=()=>({state:t,dispatch:e})=>g_(t,e),vN=()=>({state:t,dispatch:e})=>w0(t,e),bN=()=>({state:t,dispatch:e})=>k0(t,e),wN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Su(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},CN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Su(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},xN=()=>({state:t,dispatch:e})=>h_(t,e),SN=()=>({state:t,dispatch:e})=>p_(t,e);function V0(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function kN(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))cp()||V0()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const TN=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=kN(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function zl(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Yt(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),g=Math.min(i,f+d.nodeSize);l.push({node:d,from:p,to:g})});const a=i-r,c=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>Wc(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=a}const ON=(t,e={})=>({state:n,dispatch:r})=>{const i=Yt(t,n.schema);return zl(n,i,e)?y_(n,r):!1},EN=()=>({state:t,dispatch:e})=>A0(t,e),AN=t=>({state:e,dispatch:n})=>{const r=Yt(t,e.schema);return M_(r)(e,n)},MN=()=>({state:t,dispatch:e})=>O0(t,e);function $u(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function py(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const _N=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=$u(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Yt(t,r.schema)),l==="mark"&&(s=Zi(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,py(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(py(d.attrs,e)))})})}),!0):!1},NN=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),DN=()=>({tr:t,dispatch:e})=>{if(e){const n=new Qn(t.doc);t.setSelection(n)}return!0},PN=()=>({state:t,dispatch:e})=>x0(t,e),$N=()=>({state:t,dispatch:e})=>T0(t,e),LN=()=>({state:t,dispatch:e})=>C_(t,e),IN=()=>({state:t,dispatch:e})=>k_(t,e),BN=()=>({state:t,dispatch:e})=>S_(t,e);function eh(t,e,n={},r={}){return qc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const VN=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=eh(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function R0(t,e){const n=Zi(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function RN(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function HN(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function up(t){return e=>HN(e.$from,t)}function FN(t,e){const n={from:0,to:t.content.size};return P0(t,n,e)}function jN(t,e){const n=Yt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function UN(t,e){const n=$u(typeof e=="string"?e:e.name,t.schema);return n==="node"?jN(t,e):n==="mark"?R0(t,e):{}}function H0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=lp(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function lc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function th(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Zi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>Wc(d.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const p=d.pos,g=f.pos;t.doc.nodesBetween(p,g,(y,x)=>{if(!y.isText&&!y.marks.length)return;const O=Math.max(p,x),_=Math.min(g,x+y.nodeSize),D=_-O;s+=D,l.push(...y.marks.map(k=>({mark:k,from:O,to:_})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>Wc(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+c:a)>=s}function zN(t,e,n={}){if(!e)return zl(t,null,n)||th(t,null,n);const r=$u(e,t.schema);return r==="node"?zl(t,e,n):r==="mark"?th(t,e,n):!1}function my(t,e){const{nodeExtensions:n}=Nu(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=ot(_e(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function dp(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(dp(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function F0(t){return t instanceof Re}function KN(t,e,n){const i=t.state.doc.content.size,o=ii(e,0,i),s=ii(n,0,i),l=t.coordsAtPos(o),a=t.coordsAtPos(s,-1),c=Math.min(l.top,a.top),u=Math.max(l.bottom,a.bottom),d=Math.min(l.left,a.left),f=Math.max(l.right,a.right),p=f-d,g=u-c,O={top:c,bottom:u,left:d,right:f,width:p,height:g,x:d,y:c};return{...O,toJSON:()=>O}}function WN(t,e,n){var r;const{selection:i}=e;let o=null;if(ap(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=p&&g}return!c}),c})}const qN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Zi(t,r.schema);if(i)if(s){const c=R0(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,p)=>{const g=Math.max(p,u),y=Math.min(p+f.nodeSize,d);f.marks.find(O=>O.type===a)?f.marks.forEach(O=>{a===O.type&&n.addMark(g,y,a.create({...O.attrs,...e}))}):n.addMark(g,y,a.create(e))})});return WN(r,n,a)},JN=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),GN=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Yt(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>cy(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>cy(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},YN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=ii(t,0,r.content.size),o=Re.create(r,i);e.setSelection(o)}return!0},XN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=Je.atStart(r).from,l=Je.atEnd(r).to,a=ii(i,s,l),c=ii(o,s,l),u=Je.create(r,a,c);e.setSelection(u)}return!0},ZN=t=>({state:e,dispatch:n})=>{const r=Yt(t,e.schema);return D_(r)(e,n)};function gy(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const QN=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,c=i.extensionManager.attributes,u=lc(c,l.node().type.name,l.node().attrs);if(o instanceof Re&&o.node.isBlock)return!l.parentOffset||!ai(s,l.pos)?!1:(r&&(t&&gy(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:RN(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=d&&f?[{type:f,attrs:u}]:void 0,g=ai(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!g&&ai(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(g=!0,p=f?[{type:f,attrs:u}]:void 0),r){if(g&&(o instanceof Je&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,p),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const y=e.mapping.map(l.before()),x=e.doc.resolve(y);l.node(-1).canReplaceWith(x.index(),x.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&gy(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return g},eD=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=Yt(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let O=le.empty;const _=a.index(-1)?1:a.index(-2)?2:3;for(let U=a.depth-_;U>=a.depth-3;U-=1)O=le.from(a.node(U).copy(O));const D=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,k={...lc(f,a.node().type.name,a.node().attrs),...e},I=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(k))||void 0;O=O.append(le.from(l.createAndFill(null,I)||void 0));const L=a.before(a.depth-(_-1));n.replace(L,a.after(-D),new ke(O,4-_,0));let R=-1;n.doc.nodesBetween(L,n.doc.content.size,(U,T)=>{if(R>-1)return!1;U.isTextblock&&U.content.size===0&&(R=T+1)}),R>-1&&n.setSelection(Je.near(n.doc.resolve(R))),n.scrollIntoView()}return!0}const p=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,g={...lc(f,d.type.name,d.attrs),...e},y={...lc(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const x=p?[{type:l,attrs:g},{type:p,attrs:y}]:[{type:l,attrs:g}];if(!ai(n.doc,a.pos,2))return!1;if(i){const{selection:O,storedMarks:_}=r,{splittableMarks:D}=o.extensionManager,k=_||O.$to.parentOffset&&O.$from.marks();if(n.split(a.pos,2,x).scrollIntoView(),!k||!i)return!0;const I=k.filter(L=>D.includes(L.type.name));n.ensureMarks(I)}return!0},Id=(t,e)=>{const n=up(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Yi(t.doc,n.pos)&&t.join(n.pos),!0},Bd=(t,e)=>{const n=up(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Yi(t.doc,r)&&t.join(r),!0},tD=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,p=Yt(t,s.schema),g=Yt(e,s.schema),{selection:y,storedMarks:x}=s,{$from:O,$to:_}=y,D=O.blockRange(_),k=x||y.$to.parentOffset&&y.$from.marks();if(!D)return!1;const I=up(L=>my(L.type.name,d))(y);if(D.depth>=1&&I&&D.depth-I.depth<=1){if(I.node.type===p)return c.liftListItem(g);if(my(I.node.type.name,d)&&p.validContent(I.node.content)&&l)return a().command(()=>(o.setNodeMarkup(I.pos,p),!0)).command(()=>Id(o,p)).command(()=>Bd(o,p)).run()}return!n||!k||!l?a().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Id(o,p)).command(()=>Bd(o,p)).run():a().command(()=>{const L=u().wrapInList(p,r),R=k.filter(U=>f.includes(U.type.name));return o.ensureMarks(R),L?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Id(o,p)).command(()=>Bd(o,p)).run()},nD=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Zi(t,r.schema);return th(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},rD=(t,e,n={})=>({state:r,commands:i})=>{const o=Yt(t,r.schema),s=Yt(e,r.schema),l=zl(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},iD=(t,e={})=>({state:n,commands:r})=>{const i=Yt(t,n.schema);return zl(n,i,e)?r.lift(i):r.wrapIn(i,e)},oD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},sD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},lD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Zi(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!i)return!0;if(u&&s){let{from:f,to:p}=l;const g=(o=c.marks().find(x=>x.type===a))===null||o===void 0?void 0:o.attrs,y=lp(c,a,g);y&&(f=y.from,p=y.to),n.removeMark(f,p,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},aD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=$u(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Yt(t,r.schema)),l==="mark"&&(s=Zi(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let d,f,p,g;n.selection.empty?r.doc.nodesBetween(c,u,(y,x)=>{o&&o===y.type&&(p=Math.max(x,c),g=Math.min(x+y.nodeSize,u),d=x,f=y)}):r.doc.nodesBetween(c,u,(y,x)=>{x<c&&o&&o===y.type&&(p=Math.max(x,c),g=Math.min(x+y.nodeSize,u),d=x,f=y),x>=c&&x<=u&&(o&&o===y.type&&n.setNodeMarkup(x,void 0,{...y.attrs,...e}),s&&y.marks.length&&y.marks.forEach(O=>{if(s===O.type){const _=Math.max(x,c),D=Math.min(x+y.nodeSize,u);n.addMark(_,D,s.create({...O.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(y=>{s===y.type&&n.addMark(p,g,s.create({...y.attrs,...e}))}))}),!0):!1},cD=(t,e={})=>({state:n,dispatch:r})=>{const i=Yt(t,n.schema);return T_(i,e)(n,r)},uD=(t,e={})=>({state:n,dispatch:r})=>{const i=Yt(t,n.schema);return O_(i,e)(n,r)};var dD=Object.freeze({__proto__:null,blur:G_,clearContent:Y_,clearNodes:X_,command:Z_,createParagraphNear:Q_,cut:eN,deleteCurrentNode:tN,deleteNode:nN,deleteRange:rN,deleteSelection:iN,enter:oN,exitCode:sN,extendMarkRange:lN,first:aN,focus:uN,forEach:dN,insertContent:fN,insertContentAt:mN,joinBackward:vN,joinDown:yN,joinForward:bN,joinItemBackward:wN,joinItemForward:CN,joinTextblockBackward:xN,joinTextblockForward:SN,joinUp:gN,keyboardShortcut:TN,lift:ON,liftEmptyBlock:EN,liftListItem:AN,newlineInCode:MN,resetAttributes:_N,scrollIntoView:NN,selectAll:DN,selectNodeBackward:PN,selectNodeForward:$N,selectParentNode:LN,selectTextblockEnd:IN,selectTextblockStart:BN,setContent:VN,setMark:qN,setMeta:JN,setNode:GN,setNodeSelection:YN,setTextSelection:XN,sinkListItem:ZN,splitBlock:QN,splitListItem:eD,toggleList:tD,toggleMark:nD,toggleNode:rD,toggleWrap:iD,undoInputRule:oD,unsetAllMarks:sD,unsetMark:lD,updateAttributes:aD,wrapIn:cD,wrapInList:uD});const fD=mn.create({name:"commands",addCommands(){return{...dD}}}),hD=mn.create({name:"drop",addProseMirrorPlugins(){return[new Dn({key:new Er("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),pD=mn.create({name:"editable",addProseMirrorPlugins(){return[new Dn({key:new Er("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mD=mn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Dn({key:new Er("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),gD=mn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:f,parent:p}=d,g=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,y=g.parent.type.spec.isolating,x=d.pos-d.parentOffset,O=y&&g.parent.childCount===1?x===d.pos:nt.atStart(c).from===f;return!u||!p.type.isTextblock||p.textContent.length||!O||O&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return cp()||V0()?o:i},addProseMirrorPlugins(){return[new Dn({key:new Er("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=nt.atStart(e.doc).from,c=nt.atEnd(e.doc).to;if(o||!(s===a&&l===c)||!dp(n.doc))return;const f=n.tr,p=Mu({state:n,transaction:f}),{commands:g}=new _u({editor:this.editor,state:p});if(g.clearNodes(),!!f.steps.length)return f}})]}}),yD=mn.create({name:"paste",addProseMirrorPlugins(){return[new Dn({key:new Er("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),vD=mn.create({name:"tabindex",addProseMirrorPlugins(){return[new Dn({key:new Er("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class mo{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new mo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new mo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new mo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new mo(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new mo(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const bD=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function wD(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let CD=class extends P_{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=wD(bD,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=D0(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[pD,J_.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),fD,mD,gD,vD,hD,yD].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new ls(i,this)}createCommandManager(){this.commandManager=new _u({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=eh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=eh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=I0(n,this.options.autofocus);this.view=new r_(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ss.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return UN(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return zN(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return op(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return FN(this.state.doc,{blockSeparator:n,textSerializers:{...$0(this.schema),...r}})}get isEmpty(){return dp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new mo(n,this)}get $doc(){return this.$pos(0)}};function Es(t){return new Du({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ot(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),u=c+s.length;if(H0(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+a,c);const f=n.from+a+s.length;o.addMark(n.from+a,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function xD(t){return new Du({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ot(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function nh(t){return new Du({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=ot(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Kl(t){return new Du({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=ot(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&Uh(a,t.type,o);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,g=f||d.$to.parentOffset&&d.$from.marks();if(g){const y=g.filter(x=>p.includes(x.type.name));s.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Yi(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}class jn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ot(_e(this,"addOptions",{name:this.name}))),this.storage=ot(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new jn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Pu(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new jn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ot(_e(n,"addOptions",{name:n.name})),n.storage=ot(_e(n,"addStorage",{name:n.name,options:n.options})),n}}function As(t){return new j_({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=ot(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(H0(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(x=>x===t.type&&x!==g.mark.type)).filter(g=>g.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+l.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}var Hn="top",hr="bottom",pr="right",Fn="left",fp="auto",sa=[Hn,hr,pr,Fn],Ms="start",Wl="end",SD="clippingParents",j0="viewport",Us="popper",kD="reference",yy=sa.reduce(function(t,e){return t.concat([e+"-"+Ms,e+"-"+Wl])},[]),U0=[].concat(sa,[fp]).reduce(function(t,e){return t.concat([e,e+"-"+Ms,e+"-"+Wl])},[]),TD="beforeRead",OD="read",ED="afterRead",AD="beforeMain",MD="main",_D="afterMain",ND="beforeWrite",DD="write",PD="afterWrite",$D=[TD,OD,ED,AD,MD,_D,ND,DD,PD];function zr(t){return t?(t.nodeName||"").toLowerCase():null}function tr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function $o(t){var e=tr(t).Element;return t instanceof e||t instanceof Element}function dr(t){var e=tr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function hp(t){if(typeof ShadowRoot>"u")return!1;var e=tr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function LD(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!dr(o)||!zr(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var l=i[s];l===!1?o.removeAttribute(s):o.setAttribute(s,l===!0?"":l)}))})}function ID(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=s.reduce(function(a,c){return a[c]="",a},{});!dr(i)||!zr(i)||(Object.assign(i.style,l),Object.keys(o).forEach(function(a){i.removeAttribute(a)}))})}}const z0={name:"applyStyles",enabled:!0,phase:"write",fn:LD,effect:ID,requires:["computeStyles"]};function Rr(t){return t.split("-")[0]}var Oo=Math.max,Jc=Math.min,_s=Math.round;function rh(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function K0(){return!/^((?!chrome|android).)*safari/i.test(rh())}function Ns(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&dr(t)&&(i=t.offsetWidth>0&&_s(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&_s(r.height)/t.offsetHeight||1);var s=$o(t)?tr(t):window,l=s.visualViewport,a=!K0()&&n,c=(r.left+(a&&l?l.offsetLeft:0))/i,u=(r.top+(a&&l?l.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function pp(t){var e=Ns(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function W0(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&hp(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fi(t){return tr(t).getComputedStyle(t)}function BD(t){return["table","td","th"].indexOf(zr(t))>=0}function Qi(t){return(($o(t)?t.ownerDocument:t.document)||window.document).documentElement}function Lu(t){return zr(t)==="html"?t:t.assignedSlot||t.parentNode||(hp(t)?t.host:null)||Qi(t)}function vy(t){return!dr(t)||fi(t).position==="fixed"?null:t.offsetParent}function VD(t){var e=/firefox/i.test(rh()),n=/Trident/i.test(rh());if(n&&dr(t)){var r=fi(t);if(r.position==="fixed")return null}var i=Lu(t);for(hp(i)&&(i=i.host);dr(i)&&["html","body"].indexOf(zr(i))<0;){var o=fi(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function la(t){for(var e=tr(t),n=vy(t);n&&BD(n)&&fi(n).position==="static";)n=vy(n);return n&&(zr(n)==="html"||zr(n)==="body"&&fi(n).position==="static")?e:n||VD(t)||e}function mp(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function wl(t,e,n){return Oo(t,Jc(e,n))}function RD(t,e,n){var r=wl(t,e,n);return r>n?n:r}function q0(){return{top:0,right:0,bottom:0,left:0}}function J0(t){return Object.assign({},q0(),t)}function G0(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var HD=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,J0(typeof e!="number"?e:G0(e,sa))};function FD(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,l=Rr(n.placement),a=mp(l),c=[Fn,pr].indexOf(l)>=0,u=c?"height":"width";if(!(!o||!s)){var d=HD(i.padding,n),f=pp(o),p=a==="y"?Hn:Fn,g=a==="y"?hr:pr,y=n.rects.reference[u]+n.rects.reference[a]-s[a]-n.rects.popper[u],x=s[a]-n.rects.reference[a],O=la(o),_=O?a==="y"?O.clientHeight||0:O.clientWidth||0:0,D=y/2-x/2,k=d[p],I=_-f[u]-d[g],L=_/2-f[u]/2+D,R=wl(k,L,I),U=a;n.modifiersData[r]=(e={},e[U]=R,e.centerOffset=R-L,e)}}function jD(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||W0(e.elements.popper,i)&&(e.elements.arrow=i))}const UD={name:"arrow",enabled:!0,phase:"main",fn:FD,effect:jD,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ds(t){return t.split("-")[1]}var zD={top:"auto",right:"auto",bottom:"auto",left:"auto"};function KD(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:_s(n*i)/i||0,y:_s(r*i)/i||0}}function by(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,l=t.position,a=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=s.x,p=f===void 0?0:f,g=s.y,y=g===void 0?0:g,x=typeof u=="function"?u({x:p,y}):{x:p,y};p=x.x,y=x.y;var O=s.hasOwnProperty("x"),_=s.hasOwnProperty("y"),D=Fn,k=Hn,I=window;if(c){var L=la(n),R="clientHeight",U="clientWidth";if(L===tr(n)&&(L=Qi(n),fi(L).position!=="static"&&l==="absolute"&&(R="scrollHeight",U="scrollWidth")),L=L,i===Hn||(i===Fn||i===pr)&&o===Wl){k=hr;var T=d&&L===I&&I.visualViewport?I.visualViewport.height:L[R];y-=T-r.height,y*=a?1:-1}if(i===Fn||(i===Hn||i===hr)&&o===Wl){D=pr;var C=d&&L===I&&I.visualViewport?I.visualViewport.width:L[U];p-=C-r.width,p*=a?1:-1}}var V=Object.assign({position:l},c&&zD),w=u===!0?KD({x:p,y},tr(n)):{x:p,y};if(p=w.x,y=w.y,a){var Y;return Object.assign({},V,(Y={},Y[k]=_?"0":"",Y[D]=O?"0":"",Y.transform=(I.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",Y))}return Object.assign({},V,(e={},e[k]=_?y+"px":"",e[D]=O?p+"px":"",e.transform="",e))}function WD(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,l=n.roundOffsets,a=l===void 0?!0:l,c={placement:Rr(e.placement),variation:Ds(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,by(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,by(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const qD={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:WD,data:{}};var La={passive:!0};function JD(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,l=s===void 0?!0:s,a=tr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,La)}),l&&a.addEventListener("resize",n.update,La),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,La)}),l&&a.removeEventListener("resize",n.update,La)}}const GD={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:JD,data:{}};var YD={left:"right",right:"left",bottom:"top",top:"bottom"};function ac(t){return t.replace(/left|right|bottom|top/g,function(e){return YD[e]})}var XD={start:"end",end:"start"};function wy(t){return t.replace(/start|end/g,function(e){return XD[e]})}function gp(t){var e=tr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function yp(t){return Ns(Qi(t)).left+gp(t).scrollLeft}function ZD(t,e){var n=tr(t),r=Qi(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,l=0,a=0;if(i){o=i.width,s=i.height;var c=K0();(c||!c&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:o,height:s,x:l+yp(t),y:a}}function QD(t){var e,n=Qi(t),r=gp(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Oo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Oo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+yp(t),a=-r.scrollTop;return fi(i||n).direction==="rtl"&&(l+=Oo(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:l,y:a}}function vp(t){var e=fi(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Y0(t){return["html","body","#document"].indexOf(zr(t))>=0?t.ownerDocument.body:dr(t)&&vp(t)?t:Y0(Lu(t))}function Cl(t,e){var n;e===void 0&&(e=[]);var r=Y0(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=tr(r),s=i?[o].concat(o.visualViewport||[],vp(r)?r:[]):r,l=e.concat(s);return i?l:l.concat(Cl(Lu(s)))}function ih(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function eP(t,e){var n=Ns(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Cy(t,e,n){return e===j0?ih(ZD(t,n)):$o(e)?eP(e,n):ih(QD(Qi(t)))}function tP(t){var e=Cl(Lu(t)),n=["absolute","fixed"].indexOf(fi(t).position)>=0,r=n&&dr(t)?la(t):t;return $o(r)?e.filter(function(i){return $o(i)&&W0(i,r)&&zr(i)!=="body"}):[]}function nP(t,e,n,r){var i=e==="clippingParents"?tP(t):[].concat(e),o=[].concat(i,[n]),s=o[0],l=o.reduce(function(a,c){var u=Cy(t,c,r);return a.top=Oo(u.top,a.top),a.right=Jc(u.right,a.right),a.bottom=Jc(u.bottom,a.bottom),a.left=Oo(u.left,a.left),a},Cy(t,s,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function X0(t){var e=t.reference,n=t.element,r=t.placement,i=r?Rr(r):null,o=r?Ds(r):null,s=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,a;switch(i){case Hn:a={x:s,y:e.y-n.height};break;case hr:a={x:s,y:e.y+e.height};break;case pr:a={x:e.x+e.width,y:l};break;case Fn:a={x:e.x-n.width,y:l};break;default:a={x:e.x,y:e.y}}var c=i?mp(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Ms:a[c]=a[c]-(e[u]/2-n[u]/2);break;case Wl:a[c]=a[c]+(e[u]/2-n[u]/2);break}}return a}function ql(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,l=n.boundary,a=l===void 0?SD:l,c=n.rootBoundary,u=c===void 0?j0:c,d=n.elementContext,f=d===void 0?Us:d,p=n.altBoundary,g=p===void 0?!1:p,y=n.padding,x=y===void 0?0:y,O=J0(typeof x!="number"?x:G0(x,sa)),_=f===Us?kD:Us,D=t.rects.popper,k=t.elements[g?_:f],I=nP($o(k)?k:k.contextElement||Qi(t.elements.popper),a,u,s),L=Ns(t.elements.reference),R=X0({reference:L,element:D,placement:i}),U=ih(Object.assign({},D,R)),T=f===Us?U:L,C={top:I.top-T.top+O.top,bottom:T.bottom-I.bottom+O.bottom,left:I.left-T.left+O.left,right:T.right-I.right+O.right},V=t.modifiersData.offset;if(f===Us&&V){var w=V[i];Object.keys(C).forEach(function(Y){var J=[pr,hr].indexOf(Y)>=0?1:-1,he=[Hn,hr].indexOf(Y)>=0?"y":"x";C[Y]+=w[he]*J})}return C}function rP(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,l=n.flipVariations,a=n.allowedAutoPlacements,c=a===void 0?U0:a,u=Ds(r),d=u?l?yy:yy.filter(function(g){return Ds(g)===u}):sa,f=d.filter(function(g){return c.indexOf(g)>=0});f.length===0&&(f=d);var p=f.reduce(function(g,y){return g[y]=ql(t,{placement:y,boundary:i,rootBoundary:o,padding:s})[Rr(y)],g},{});return Object.keys(p).sort(function(g,y){return p[g]-p[y]})}function iP(t){if(Rr(t)===fp)return[];var e=ac(t);return[wy(t),e,wy(e)]}function oP(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,l=s===void 0?!0:s,a=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,y=n.allowedAutoPlacements,x=e.options.placement,O=Rr(x),_=O===x,D=a||(_||!g?[ac(x)]:iP(x)),k=[x].concat(D).reduce(function(Te,je){return Te.concat(Rr(je)===fp?rP(e,{placement:je,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:y}):je)},[]),I=e.rects.reference,L=e.rects.popper,R=new Map,U=!0,T=k[0],C=0;C<k.length;C++){var V=k[C],w=Rr(V),Y=Ds(V)===Ms,J=[Hn,hr].indexOf(w)>=0,he=J?"width":"height",ce=ql(e,{placement:V,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),Q=J?Y?pr:Fn:Y?hr:Hn;I[he]>L[he]&&(Q=ac(Q));var Ce=ac(Q),We=[];if(o&&We.push(ce[w]<=0),l&&We.push(ce[Q]<=0,ce[Ce]<=0),We.every(function(Te){return Te})){T=V,U=!1;break}R.set(V,We)}if(U)for(var $e=g?3:1,et=function(je){var dt=k.find(function(z){var W=R.get(z);if(W)return W.slice(0,je).every(function(Z){return Z})});if(dt)return T=dt,"break"},rt=$e;rt>0;rt--){var vt=et(rt);if(vt==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const sP={name:"flip",enabled:!0,phase:"main",fn:oP,requiresIfExists:["offset"],data:{_skip:!1}};function xy(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Sy(t){return[Hn,pr,hr,Fn].some(function(e){return t[e]>=0})}function lP(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=ql(e,{elementContext:"reference"}),l=ql(e,{altBoundary:!0}),a=xy(s,r),c=xy(l,i,o),u=Sy(a),d=Sy(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const aP={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:lP};function cP(t,e,n){var r=Rr(t),i=[Fn,Hn].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],l=o[1];return s=s||0,l=(l||0)*i,[Fn,pr].indexOf(r)>=0?{x:l,y:s}:{x:s,y:l}}function uP(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=U0.reduce(function(u,d){return u[d]=cP(d,e.rects,o),u},{}),l=s[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=s}const dP={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uP};function fP(t){var e=t.state,n=t.name;e.modifiersData[n]=X0({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const hP={name:"popperOffsets",enabled:!0,phase:"read",fn:fP,data:{}};function pP(t){return t==="x"?"y":"x"}function mP(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,l=s===void 0?!1:s,a=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,p=f===void 0?!0:f,g=n.tetherOffset,y=g===void 0?0:g,x=ql(e,{boundary:a,rootBoundary:c,padding:d,altBoundary:u}),O=Rr(e.placement),_=Ds(e.placement),D=!_,k=mp(O),I=pP(k),L=e.modifiersData.popperOffsets,R=e.rects.reference,U=e.rects.popper,T=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,C=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),V=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,w={x:0,y:0};if(L){if(o){var Y,J=k==="y"?Hn:Fn,he=k==="y"?hr:pr,ce=k==="y"?"height":"width",Q=L[k],Ce=Q+x[J],We=Q-x[he],$e=p?-U[ce]/2:0,et=_===Ms?R[ce]:U[ce],rt=_===Ms?-U[ce]:-R[ce],vt=e.elements.arrow,Te=p&&vt?pp(vt):{width:0,height:0},je=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:q0(),dt=je[J],z=je[he],W=wl(0,R[ce],Te[ce]),Z=D?R[ce]/2-$e-W-dt-C.mainAxis:et-W-dt-C.mainAxis,X=D?-R[ce]/2+$e+W+z+C.mainAxis:rt+W+z+C.mainAxis,fe=e.elements.arrow&&la(e.elements.arrow),N=fe?k==="y"?fe.clientTop||0:fe.clientLeft||0:0,$=(Y=V==null?void 0:V[k])!=null?Y:0,H=Q+Z-$-N,j=Q+X-$,G=wl(p?Jc(Ce,H):Ce,Q,p?Oo(We,j):We);L[k]=G,w[k]=G-Q}if(l){var ee,ae=k==="x"?Hn:Fn,ne=k==="x"?hr:pr,re=L[I],te=I==="y"?"height":"width",ge=re+x[ae],ue=re-x[ne],me=[Hn,Fn].indexOf(O)!==-1,ye=(ee=V==null?void 0:V[I])!=null?ee:0,se=me?ge:re-R[te]-U[te]-ye+C.altAxis,Se=me?re+R[te]+U[te]-ye-C.altAxis:ue,Me=p&&me?RD(se,re,Se):wl(p?se:ge,re,p?Se:ue);L[I]=Me,w[I]=Me-re}e.modifiersData[r]=w}}const gP={name:"preventOverflow",enabled:!0,phase:"main",fn:mP,requiresIfExists:["offset"]};function yP(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function vP(t){return t===tr(t)||!dr(t)?gp(t):yP(t)}function bP(t){var e=t.getBoundingClientRect(),n=_s(e.width)/t.offsetWidth||1,r=_s(e.height)/t.offsetHeight||1;return n!==1||r!==1}function wP(t,e,n){n===void 0&&(n=!1);var r=dr(e),i=dr(e)&&bP(e),o=Qi(e),s=Ns(t,i,n),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((zr(e)!=="body"||vp(o))&&(l=vP(e)),dr(e)?(a=Ns(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=yp(o))),{x:s.left+l.scrollLeft-a.x,y:s.top+l.scrollTop-a.y,width:s.width,height:s.height}}function CP(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(l){if(!n.has(l)){var a=e.get(l);a&&i(a)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function xP(t){var e=CP(t);return $D.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function SP(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function kP(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var ky={placement:"bottom",modifiers:[],strategy:"absolute"};function Ty(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function TP(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?ky:i;return function(l,a,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},ky,o),modifiersData:{},elements:{reference:l,popper:a},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(O){var _=typeof O=="function"?O(u.options):O;y(),u.options=Object.assign({},o,u.options,_),u.scrollParents={reference:$o(l)?Cl(l):l.contextElement?Cl(l.contextElement):[],popper:Cl(a)};var D=xP(kP([].concat(r,u.options.modifiers)));return u.orderedModifiers=D.filter(function(k){return k.enabled}),g(),p.update()},forceUpdate:function(){if(!f){var O=u.elements,_=O.reference,D=O.popper;if(Ty(_,D)){u.rects={reference:wP(_,la(D),u.options.strategy==="fixed"),popper:pp(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(C){return u.modifiersData[C.name]=Object.assign({},C.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var I=u.orderedModifiers[k],L=I.fn,R=I.options,U=R===void 0?{}:R,T=I.name;typeof L=="function"&&(u=L({state:u,options:U,name:T,instance:p})||u)}}}},update:SP(function(){return new Promise(function(x){p.forceUpdate(),x(u)})}),destroy:function(){y(),f=!0}};if(!Ty(l,a))return p;p.setOptions(c).then(function(x){!f&&c.onFirstUpdate&&c.onFirstUpdate(x)});function g(){u.orderedModifiers.forEach(function(x){var O=x.name,_=x.options,D=_===void 0?{}:_,k=x.effect;if(typeof k=="function"){var I=k({state:u,name:O,instance:p,options:D}),L=function(){};d.push(I||L)}})}function y(){d.forEach(function(x){return x()}),d=[]}return p}}var OP=[GD,hP,qD,z0,dP,sP,gP,UD,aP],EP=TP({defaultModifiers:OP}),AP="tippy-box",Z0="tippy-content",MP="tippy-backdrop",Q0="tippy-arrow",ew="tippy-svg-arrow",uo={passive:!0,capture:!0},tw=function(){return document.body};function Vd(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function bp(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function nw(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Oy(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function _P(t){return t.split(/\s+/).filter(Boolean)}function ts(t){return[].concat(t)}function Ey(t,e){t.indexOf(e)===-1&&t.push(e)}function NP(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function DP(t){return t.split("-")[0]}function Gc(t){return[].slice.call(t)}function Ay(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function xl(){return document.createElement("div")}function Iu(t){return["Element","Fragment"].some(function(e){return bp(t,e)})}function PP(t){return bp(t,"NodeList")}function $P(t){return bp(t,"MouseEvent")}function LP(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function IP(t){return Iu(t)?[t]:PP(t)?Gc(t):Array.isArray(t)?t:Gc(document.querySelectorAll(t))}function Rd(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function My(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function BP(t){var e,n=ts(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function VP(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,l=i.props,a=l.interactiveBorder,c=DP(s.placement),u=s.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,p=c==="right"?u.left.x:0,g=c==="left"?u.right.x:0,y=o.top-r+d>a,x=r-o.bottom-f>a,O=o.left-n+p>a,_=n-o.right-g>a;return y||x||O||_})}function Hd(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function _y(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Lr={isTouch:!1},Ny=0;function RP(){Lr.isTouch||(Lr.isTouch=!0,window.performance&&document.addEventListener("mousemove",rw))}function rw(){var t=performance.now();t-Ny<20&&(Lr.isTouch=!1,document.removeEventListener("mousemove",rw)),Ny=t}function HP(){var t=document.activeElement;if(LP(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function FP(){document.addEventListener("touchstart",RP,uo),window.addEventListener("blur",HP)}var jP=typeof window<"u"&&typeof document<"u",UP=jP?!!window.msCrypto:!1,zP={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},KP={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},xr=Object.assign({appendTo:tw,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},zP,KP),WP=Object.keys(xr),qP=function(e){var n=Object.keys(e);n.forEach(function(r){xr[r]=e[r]})};function iw(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var l;r[o]=t[o]!==void 0?t[o]:(l=xr[o])!=null?l:s}return r},{});return Object.assign({},t,n)}function JP(t,e){var n=e?Object.keys(iw(Object.assign({},xr,{plugins:e}))):WP,r=n.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function Dy(t,e){var n=Object.assign({},e,{content:nw(e.content,[t])},e.ignoreAttributes?{}:JP(t,e.plugins));return n.aria=Object.assign({},xr.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var GP=function(){return"innerHTML"};function oh(t,e){t[GP()]=e}function Py(t){var e=xl();return t===!0?e.className=Q0:(e.className=ew,Iu(t)?e.appendChild(t):oh(e,t)),e}function $y(t,e){Iu(e.content)?(oh(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?oh(t,e.content):t.textContent=e.content)}function sh(t){var e=t.firstElementChild,n=Gc(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Z0)}),arrow:n.find(function(r){return r.classList.contains(Q0)||r.classList.contains(ew)}),backdrop:n.find(function(r){return r.classList.contains(MP)})}}function ow(t){var e=xl(),n=xl();n.className=AP,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=xl();r.className=Z0,r.setAttribute("data-state","hidden"),$y(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,s){var l=sh(e),a=l.box,c=l.content,u=l.arrow;s.theme?a.setAttribute("data-theme",s.theme):a.removeAttribute("data-theme"),typeof s.animation=="string"?a.setAttribute("data-animation",s.animation):a.removeAttribute("data-animation"),s.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?a.setAttribute("role",s.role):a.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&$y(c,t.props),s.arrow?u?o.arrow!==s.arrow&&(a.removeChild(u),a.appendChild(Py(s.arrow))):a.appendChild(Py(s.arrow)):u&&a.removeChild(u)}return{popper:e,onUpdate:i}}ow.$$tippy=!0;var YP=1,Ia=[],Fd=[];function XP(t,e){var n=Dy(t,Object.assign({},xr,iw(Ay(e)))),r,i,o,s=!1,l=!1,a=!1,c=!1,u,d,f,p=[],g=Oy(H,n.interactiveDebounce),y,x=YP++,O=null,_=NP(n.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},k={id:x,reference:t,popper:xl(),popperInstance:O,props:n,state:D,plugins:_,clearDelayTimeouts:se,setProps:Se,setContent:Me,show:we,hide:E,hideWithInteractivity:v,enable:me,disable:ye,unmount:A,destroy:B};if(!n.render)return k;var I=n.render(k),L=I.popper,R=I.onUpdate;L.setAttribute("data-tippy-root",""),L.id="tippy-"+k.id,k.popper=L,t._tippy=k,L._tippy=k;var U=_.map(function(M){return M.fn(k)}),T=t.hasAttribute("aria-expanded");return fe(),$e(),Q(),Ce("onCreate",[k]),n.showOnCreate&&ge(),L.addEventListener("mouseenter",function(){k.props.interactive&&k.state.isVisible&&k.clearDelayTimeouts()}),L.addEventListener("mouseleave",function(){k.props.interactive&&k.props.trigger.indexOf("mouseenter")>=0&&J().addEventListener("mousemove",g)}),k;function C(){var M=k.props.touch;return Array.isArray(M)?M:[M,0]}function V(){return C()[0]==="hold"}function w(){var M;return!!((M=k.props.render)!=null&&M.$$tippy)}function Y(){return y||t}function J(){var M=Y().parentNode;return M?BP(M):document}function he(){return sh(L)}function ce(M){return k.state.isMounted&&!k.state.isVisible||Lr.isTouch||u&&u.type==="focus"?0:Vd(k.props.delay,M?0:1,xr.delay)}function Q(M){M===void 0&&(M=!1),L.style.pointerEvents=k.props.interactive&&!M?"":"none",L.style.zIndex=""+k.props.zIndex}function Ce(M,F,K){if(K===void 0&&(K=!0),U.forEach(function(ie){ie[M]&&ie[M].apply(ie,F)}),K){var de;(de=k.props)[M].apply(de,F)}}function We(){var M=k.props.aria;if(M.content){var F="aria-"+M.content,K=L.id,de=ts(k.props.triggerTarget||t);de.forEach(function(ie){var Oe=ie.getAttribute(F);if(k.state.isVisible)ie.setAttribute(F,Oe?Oe+" "+K:K);else{var Le=Oe&&Oe.replace(K,"").trim();Le?ie.setAttribute(F,Le):ie.removeAttribute(F)}})}}function $e(){if(!(T||!k.props.aria.expanded)){var M=ts(k.props.triggerTarget||t);M.forEach(function(F){k.props.interactive?F.setAttribute("aria-expanded",k.state.isVisible&&F===Y()?"true":"false"):F.removeAttribute("aria-expanded")})}}function et(){J().removeEventListener("mousemove",g),Ia=Ia.filter(function(M){return M!==g})}function rt(M){if(!(Lr.isTouch&&(a||M.type==="mousedown"))){var F=M.composedPath&&M.composedPath()[0]||M.target;if(!(k.props.interactive&&_y(L,F))){if(ts(k.props.triggerTarget||t).some(function(K){return _y(K,F)})){if(Lr.isTouch||k.state.isVisible&&k.props.trigger.indexOf("click")>=0)return}else Ce("onClickOutside",[k,M]);k.props.hideOnClick===!0&&(k.clearDelayTimeouts(),k.hide(),l=!0,setTimeout(function(){l=!1}),k.state.isMounted||dt())}}}function vt(){a=!0}function Te(){a=!1}function je(){var M=J();M.addEventListener("mousedown",rt,!0),M.addEventListener("touchend",rt,uo),M.addEventListener("touchstart",Te,uo),M.addEventListener("touchmove",vt,uo)}function dt(){var M=J();M.removeEventListener("mousedown",rt,!0),M.removeEventListener("touchend",rt,uo),M.removeEventListener("touchstart",Te,uo),M.removeEventListener("touchmove",vt,uo)}function z(M,F){Z(M,function(){!k.state.isVisible&&L.parentNode&&L.parentNode.contains(L)&&F()})}function W(M,F){Z(M,F)}function Z(M,F){var K=he().box;function de(ie){ie.target===K&&(Hd(K,"remove",de),F())}if(M===0)return F();Hd(K,"remove",d),Hd(K,"add",de),d=de}function X(M,F,K){K===void 0&&(K=!1);var de=ts(k.props.triggerTarget||t);de.forEach(function(ie){ie.addEventListener(M,F,K),p.push({node:ie,eventType:M,handler:F,options:K})})}function fe(){V()&&(X("touchstart",$,{passive:!0}),X("touchend",j,{passive:!0})),_P(k.props.trigger).forEach(function(M){if(M!=="manual")switch(X(M,$),M){case"mouseenter":X("mouseleave",j);break;case"focus":X(UP?"focusout":"blur",G);break;case"focusin":X("focusout",G);break}})}function N(){p.forEach(function(M){var F=M.node,K=M.eventType,de=M.handler,ie=M.options;F.removeEventListener(K,de,ie)}),p=[]}function $(M){var F,K=!1;if(!(!k.state.isEnabled||ee(M)||l)){var de=((F=u)==null?void 0:F.type)==="focus";u=M,y=M.currentTarget,$e(),!k.state.isVisible&&$P(M)&&Ia.forEach(function(ie){return ie(M)}),M.type==="click"&&(k.props.trigger.indexOf("mouseenter")<0||s)&&k.props.hideOnClick!==!1&&k.state.isVisible?K=!0:ge(M),M.type==="click"&&(s=!K),K&&!de&&ue(M)}}function H(M){var F=M.target,K=Y().contains(F)||L.contains(F);if(!(M.type==="mousemove"&&K)){var de=te().concat(L).map(function(ie){var Oe,Le=ie._tippy,qe=(Oe=Le.popperInstance)==null?void 0:Oe.state;return qe?{popperRect:ie.getBoundingClientRect(),popperState:qe,props:n}:null}).filter(Boolean);VP(de,M)&&(et(),ue(M))}}function j(M){var F=ee(M)||k.props.trigger.indexOf("click")>=0&&s;if(!F){if(k.props.interactive){k.hideWithInteractivity(M);return}ue(M)}}function G(M){k.props.trigger.indexOf("focusin")<0&&M.target!==Y()||k.props.interactive&&M.relatedTarget&&L.contains(M.relatedTarget)||ue(M)}function ee(M){return Lr.isTouch?V()!==M.type.indexOf("touch")>=0:!1}function ae(){ne();var M=k.props,F=M.popperOptions,K=M.placement,de=M.offset,ie=M.getReferenceClientRect,Oe=M.moveTransition,Le=w()?sh(L).arrow:null,qe=ie?{getBoundingClientRect:ie,contextElement:ie.contextElement||Y()}:t,xe={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ct){var at=ct.state;if(w()){var Fe=he(),Nt=Fe.box;["placement","reference-hidden","escaped"].forEach(function(Ee){Ee==="placement"?Nt.setAttribute("data-placement",at.placement):at.attributes.popper["data-popper-"+Ee]?Nt.setAttribute("data-"+Ee,""):Nt.removeAttribute("data-"+Ee)}),at.attributes.popper={}}}},tt=[{name:"offset",options:{offset:de}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Oe}},xe];w()&&Le&&tt.push({name:"arrow",options:{element:Le,padding:3}}),tt.push.apply(tt,(F==null?void 0:F.modifiers)||[]),k.popperInstance=EP(qe,L,Object.assign({},F,{placement:K,onFirstUpdate:f,modifiers:tt}))}function ne(){k.popperInstance&&(k.popperInstance.destroy(),k.popperInstance=null)}function re(){var M=k.props.appendTo,F,K=Y();k.props.interactive&&M===tw||M==="parent"?F=K.parentNode:F=nw(M,[K]),F.contains(L)||F.appendChild(L),k.state.isMounted=!0,ae()}function te(){return Gc(L.querySelectorAll("[data-tippy-root]"))}function ge(M){k.clearDelayTimeouts(),M&&Ce("onTrigger",[k,M]),je();var F=ce(!0),K=C(),de=K[0],ie=K[1];Lr.isTouch&&de==="hold"&&ie&&(F=ie),F?r=setTimeout(function(){k.show()},F):k.show()}function ue(M){if(k.clearDelayTimeouts(),Ce("onUntrigger",[k,M]),!k.state.isVisible){dt();return}if(!(k.props.trigger.indexOf("mouseenter")>=0&&k.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(M.type)>=0&&s)){var F=ce(!1);F?i=setTimeout(function(){k.state.isVisible&&k.hide()},F):o=requestAnimationFrame(function(){k.hide()})}}function me(){k.state.isEnabled=!0}function ye(){k.hide(),k.state.isEnabled=!1}function se(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Se(M){if(!k.state.isDestroyed){Ce("onBeforeUpdate",[k,M]),N();var F=k.props,K=Dy(t,Object.assign({},F,Ay(M),{ignoreAttributes:!0}));k.props=K,fe(),F.interactiveDebounce!==K.interactiveDebounce&&(et(),g=Oy(H,K.interactiveDebounce)),F.triggerTarget&&!K.triggerTarget?ts(F.triggerTarget).forEach(function(de){de.removeAttribute("aria-expanded")}):K.triggerTarget&&t.removeAttribute("aria-expanded"),$e(),Q(),R&&R(F,K),k.popperInstance&&(ae(),te().forEach(function(de){requestAnimationFrame(de._tippy.popperInstance.forceUpdate)})),Ce("onAfterUpdate",[k,M])}}function Me(M){k.setProps({content:M})}function we(){var M=k.state.isVisible,F=k.state.isDestroyed,K=!k.state.isEnabled,de=Lr.isTouch&&!k.props.touch,ie=Vd(k.props.duration,0,xr.duration);if(!(M||F||K||de)&&!Y().hasAttribute("disabled")&&(Ce("onShow",[k],!1),k.props.onShow(k)!==!1)){if(k.state.isVisible=!0,w()&&(L.style.visibility="visible"),Q(),je(),k.state.isMounted||(L.style.transition="none"),w()){var Oe=he(),Le=Oe.box,qe=Oe.content;Rd([Le,qe],0)}f=function(){var tt;if(!(!k.state.isVisible||c)){if(c=!0,L.offsetHeight,L.style.transition=k.props.moveTransition,w()&&k.props.animation){var it=he(),ct=it.box,at=it.content;Rd([ct,at],ie),My([ct,at],"visible")}We(),$e(),Ey(Fd,k),(tt=k.popperInstance)==null||tt.forceUpdate(),Ce("onMount",[k]),k.props.animation&&w()&&W(ie,function(){k.state.isShown=!0,Ce("onShown",[k])})}},re()}}function E(){var M=!k.state.isVisible,F=k.state.isDestroyed,K=!k.state.isEnabled,de=Vd(k.props.duration,1,xr.duration);if(!(M||F||K)&&(Ce("onHide",[k],!1),k.props.onHide(k)!==!1)){if(k.state.isVisible=!1,k.state.isShown=!1,c=!1,s=!1,w()&&(L.style.visibility="hidden"),et(),dt(),Q(!0),w()){var ie=he(),Oe=ie.box,Le=ie.content;k.props.animation&&(Rd([Oe,Le],de),My([Oe,Le],"hidden"))}We(),$e(),k.props.animation?w()&&z(de,k.unmount):k.unmount()}}function v(M){J().addEventListener("mousemove",g),Ey(Ia,g),g(M)}function A(){k.state.isVisible&&k.hide(),k.state.isMounted&&(ne(),te().forEach(function(M){M._tippy.unmount()}),L.parentNode&&L.parentNode.removeChild(L),Fd=Fd.filter(function(M){return M!==k}),k.state.isMounted=!1,Ce("onHidden",[k]))}function B(){k.state.isDestroyed||(k.clearDelayTimeouts(),k.unmount(),N(),delete t._tippy,k.state.isDestroyed=!0,Ce("onDestroy",[k]))}}function aa(t,e){e===void 0&&(e={});var n=xr.plugins.concat(e.plugins||[]);FP();var r=Object.assign({},e,{plugins:n}),i=IP(t),o=i.reduce(function(s,l){var a=l&&XP(l,r);return a&&s.push(a),s},[]);return Iu(t)?o[0]:o}aa.defaultProps=xr;aa.setDefaultProps=qP;aa.currentInput=Lr;Object.assign({},z0,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});aa.setDefaultProps({render:ow});class ZP{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:l,state:a,from:c,to:u})=>{const{doc:d,selection:f}=a,{empty:p}=f,g=!d.textBetween(c,u).length&&ap(a.selection),y=this.element.contains(document.activeElement);return!(!(l.hasFocus()||y)||p||g||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var a;if(this.preventHide){this.preventHide=!1;return}l!=null&&l.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(l.relatedTarget))||(l==null?void 0:l.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.handleDebouncedUpdate=(l,a)=>{const c=!(a!=null&&a.selection.eq(l.state.selection)),u=!(a!=null&&a.doc.eq(l.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(l,c,u,a)},this.updateDelay))},this.updateHandler=(l,a,c,u)=>{var d,f,p;const{state:g,composing:y}=l,{selection:x}=g;if(y||!a&&!c)return;this.createTooltip();const{ranges:_}=x,D=Math.min(..._.map(L=>L.$from.pos)),k=Math.max(..._.map(L=>L.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,element:this.element,view:l,state:g,oldState:u,from:D,to:k}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((p=this.tippyOptions)===null||p===void 0?void 0:p.getReferenceClientRect)||(()=>{if(F0(g.selection)){let L=l.nodeDOM(D);if(L){const R=L.dataset.nodeViewWrapper?L:L.querySelector("[data-node-view-wrapper]");if(R&&(L=R.firstChild),L)return L.getBoundingClientRect()}}return KN(l,D,k)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=aa(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const o=!(n!=null&&n.selection.eq(e.state.selection)),s=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,o,s,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const sw=t=>new Dn({key:typeof t.pluginKey=="string"?new Er(t.pluginKey):t.pluginKey,view:e=>new ZP({view:e,...t})});mn.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[sw({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});const QP=vh({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=su(null);return du(()=>{const{updateDelay:r,editor:i,pluginKey:o,shouldShow:s,tippyOptions:l}=t;i.registerPlugin(sw({updateDelay:r,editor:i,element:n.value,pluginKey:o,shouldShow:s,tippyOptions:l}))}),fu(()=>{const{pluginKey:r,editor:i}=t;i.unregisterPlugin(r)}),()=>{var r;return gu("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function Ly(t){return iS((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class lw extends CD{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=Ly(this.view.state),this.reactiveExtensionStorage=Ly(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),f1(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const aw=vh({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=su(),n=Yl();return ZS(()=>{const r=t.editor;r&&r.options.element&&e.value&&au(()=>{if(!e.value||!r.options.element.firstChild)return;const i=xn(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:i}),r.createNodeViews()})}),fu(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return gu("div",{ref:t=>{this.rootEl=t}})}}),e5=/^\s*>\s$/,t5=jn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Kl({find:e5,type:this.type})]}}),n5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,r5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,i5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,o5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,s5=qi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Es({find:n5,type:this.type}),Es({find:i5,type:this.type})]},addPasteRules(){return[As({find:r5,type:this.type}),As({find:o5,type:this.type})]}}),l5="listItem",Iy="textStyle",By=/^\s*([-+*])\s$/,a5=jn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(l5,this.editor.getAttributes(Iy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Kl({find:By,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Kl({find:By,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Iy),editor:this.editor})),[t]}}),c5=/(^|[^`])`([^`]+)`(?!`)/,u5=/(^|[^`])`([^`]+)`(?!`)/g,d5=qi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Es({find:c5,type:this.type})]},addPasteRules(){return[As({find:u5,type:this.type})]}}),f5=/^```([a-z]+)?[\s\n]$/,h5=/^~~~([a-z]+)?[\s\n]$/,p5=jn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Nn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(nt.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[nh({find:f5,type:this.type,getAttributes:t=>({language:t[1]})}),nh({find:h5,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Dn({key:new Er("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(Je.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),m5=jn.create({name:"doc",topNode:!0,content:"block+"});function g5(t={}){return new Dn({view(e){return new y5(e,t)}})}class y5{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let l=i.getBoundingClientRect();o=l.left-i.scrollLeft,s=l.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Db(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const v5=mn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[g5(this.options)]}});class $t extends nt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return $t.valid(r)?new $t(r):nt.near(r)}content(){return ke.empty}eq(e){return e instanceof $t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new $t(e.resolve(n.pos))}getBookmark(){return new wp(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!b5(e)||!w5(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&$t.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if($t.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Re.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if($t.valid(l))return l}return null}}}$t.prototype.visible=!1;$t.findFrom=$t.findGapCursorFrom;nt.jsonID("gapcursor",$t);class wp{constructor(e){this.pos=e}map(e){return new wp(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return $t.valid(n)?new $t(n):nt.near(n)}}function b5(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function w5(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function C5(){return new Dn({props:{decorations:T5,createSelectionBetween(t,e,n){return e.pos==n.pos&&$t.valid(n)?new $t(n):null},handleClick:S5,handleKeyDown:x5,handleDOMEvents:{beforeinput:k5}}})}const x5=v0({ArrowLeft:Ba("horiz",-1),ArrowRight:Ba("horiz",1),ArrowUp:Ba("vert",-1),ArrowDown:Ba("vert",1)});function Ba(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof Je){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=$t.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new $t(c))),!0):!1}}function S5(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!$t.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new $t(r))),!0)}function k5(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof $t))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=le.empty;for(let s=r.length-1;s>=0;s--)i=le.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new ke(i,0,0));return o.setSelection(Je.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function T5(t){if(!(t.selection instanceof $t))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ut.create(t.doc,[ar.widget(t.selection.head,e,{key:"gapcursor"})])}const O5=mn.create({name:"gapCursor",addProseMirrorPlugins(){return[C5()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ot(_e(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),E5=jn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Nn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&s){const d=a.filter(f=>l.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),A5=jn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Nn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>nh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Yc=200,Jt=function(){};Jt.prototype.append=function(e){return e.length?(e=Jt.from(e),!this.length&&e||e.length<Yc&&this.leafAppend(e)||this.length<Yc&&e.leafPrepend(this)||this.appendInner(e)):this};Jt.prototype.prepend=function(e){return e.length?Jt.from(e).append(this):this};Jt.prototype.appendInner=function(e){return new M5(this,e)};Jt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Jt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Jt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Jt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Jt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Jt.from=function(e){return e instanceof Jt?e:e&&e.length?new cw(e):Jt.empty};var cw=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Yc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Yc)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Jt);Jt.empty=new cw([]);var M5=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Jt);const _5=500;class wr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new Dr(d.map));let p=d.step.map(i.slice(o)),g;p&&s.maybeStep(p).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new Dr(g,void 0,void 0,c.length+u.length))),o--,g&&i.appendMap(g,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new wr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Dr(e.mapping.maps[u],d,n),p;(p=a&&a.merge(f))&&(f=p,u?o.pop():l=l.slice(0,l.length-1)),o.push(f),n&&(s++,n=void 0),i||(a=f)}let c=s-r.depth;return c>D5&&(l=N5(l,c),s-=c),new wr(l.append(o),s)}remapping(e,n){let r=new Rl;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new wr(this.items.append(e.map(n=>new Dr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let p=o.getMirror(--a);if(p==null)return;s=Math.min(s,p);let g=o.maps[p];if(f.step){let y=e.steps[p].invert(e.docs[p]),x=f.selection&&f.selection.map(o.slice(a+1,p));x&&l++,r.push(new Dr(g,y,x))}else r.push(new Dr(g))},i);let c=[];for(let f=n;f<s;f++)c.push(new Dr(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new wr(u,l);return d.emptyItemCount()>_5&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new Dr(c.invert(),a,u),f,p=i.length-1;(f=i.length&&i[p].merge(d))?i[p]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new wr(Jt.from(i.reverse()),o)}}wr.empty=new wr(Jt.empty,0);function N5(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Dr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Dr(n.getMap().invert(),n,this.selection)}}}class Ei{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const D5=20;function P5(t,e,n,r){let i=n.getMeta(Eo),o;if(i)return i.historyState;n.getMeta(I5)&&(t=new Ei(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Eo))return s.getMeta(Eo).redo?new Ei(t.done.addTransform(n,void 0,r,cc(e)),t.undone,Vy(n.mapping.maps),t.prevTime,t.prevComposition):new Ei(t.done,t.undone.addTransform(n,void 0,r,cc(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!$5(n,t.prevRanges)),c=s?jd(t.prevRanges,n.mapping):Vy(n.mapping.maps);return new Ei(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,cc(e)),wr.empty,c,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Ei(t.done.rebased(n,o),t.undone.rebased(n,o),jd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ei(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),jd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function $5(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Vy(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function jd(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function L5(t,e,n){let r=cc(e),i=Eo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new Ei(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(Eo,{redo:n,historyState:a})}let Ud=!1,Ry=null;function cc(t){let e=t.plugins;if(Ry!=e){Ud=!1,Ry=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ud=!0;break}}return Ud}const Eo=new Er("history"),I5=new Er("closeHistory");function B5(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Dn({key:Eo,state:{init(){return new Ei(wr.empty,wr.empty,null,0,-1)},apply(e,n,r){return P5(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?dw:r=="historyRedo"?fw:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function uw(t,e){return(n,r)=>{let i=Eo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=L5(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const dw=uw(!1,!0),fw=uw(!0,!0),V5=mn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>dw(t,e),redo:()=>({state:t,dispatch:e})=>fw(t,e)}},addProseMirrorPlugins(){return[B5(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),R5=jn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Nn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):F0(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(Je.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Re.create(s.doc,c.pos)):s.setSelection(Je.create(s.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(u,d),s.setSelection(Je.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[xD({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),H5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,F5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,j5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,U5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,z5=qi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Es({find:H5,type:this.type}),Es({find:j5,type:this.type})]},addPasteRules(){return[As({find:F5,type:this.type}),As({find:U5,type:this.type})]}}),K5=jn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Nn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),W5="listItem",Hy="textStyle",Fy=/^(\d+)\.\s$/,q5=jn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Nn(this.options.HTMLAttributes,n),0]:["ol",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(W5,this.editor.getAttributes(Hy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Kl({find:Fy,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Kl({find:Fy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Hy)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),J5=jn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),G5=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Y5=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,X5=qi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Nn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Es({find:G5,type:this.type})]},addPasteRules(){return[As({find:Y5,type:this.type})]}}),Z5=jn.create({name:"text",group:"inline"}),hw=mn.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,l,a,c,u,d,f,p,g,y,x,O;const _=[];return this.options.bold!==!1&&_.push(s5.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&_.push(t5.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&_.push(a5.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&_.push(d5.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(p5.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&_.push(m5.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&_.push(v5.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&_.push(O5.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&_.push(E5.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&_.push(A5.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&_.push(V5.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&_.push(R5.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&_.push(z5.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&_.push(K5.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&_.push(q5.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&_.push(J5.configure((y=this.options)===null||y===void 0?void 0:y.paragraph)),this.options.strike!==!1&&_.push(X5.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&_.push(Z5.configure((O=this.options)===null||O===void 0?void 0:O.text)),_}}),Q5={components:{EditorContent:aw,BubbleMenu:QP},props:{content:{type:String,required:!0}},emits:["update:content"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:content",this.editor.getHTML())},setParagraph(){this.editor.chain().focus().setParagraph().run()},setHeading(t){this.editor.chain().focus().setHeading({level:t}).run()},toggleBold(){this.editor.chain().focus().toggleBold().run()},toggleItalic(){this.editor.chain().focus().toggleItalic().run()},toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()},toggleBulletList(){this.editor.chain().focus().toggleBulletList().run()}},mounted(){this.editor=new lw({content:this.content,extensions:[hw.configure({heading:{levels:[1,2,3]}})]}),this.editor.on("blur",this.emitContent)},beforeUnmount(){this.editor&&this.editor.destroy()}};function e$(t,e,n,r,i,o){const s=Ye("editor-content"),l=Ye("bubble-menu");return q(),oe(Ze,null,[lt(s,{class:"editor",editor:i.editor},null,8,["editor"]),i.editor?(q(),Tt(l,{key:0,editor:i.editor,class:"bubble-menu"},{default:Hi(()=>[S("button",{onMousedown:e[0]||(e[0]=yi((...a)=>o.setParagraph&&o.setParagraph(...a),["prevent"])),class:jt({active:i.editor.isActive("paragraph")})},e[8]||(e[8]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-paragraph"),S("path",{d:"M13,4A4,4 0 0,1 17,8A4,4 0 0,1 13,12H11V18H9V4H13M13,10A2,2 0 0,0 15,8A2,2 0 0,0 13,6H11V10H13Z"})],-1)]),34),S("button",{onMousedown:e[1]||(e[1]=yi(a=>o.setHeading(1),["prevent"])),class:jt({active:i.editor.isActive("heading",{level:1})})},e[9]||(e[9]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-header-1"),S("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M14,18V16H16V6.31L13.5,7.75V5.44L16,4H18V16H20V18H14Z"})],-1)]),34),S("button",{onMousedown:e[2]||(e[2]=yi(a=>o.setHeading(2),["prevent"])),class:jt({active:i.editor.isActive("heading",{level:2})})},e[10]||(e[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-header-2"),S("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M21,18H15A2,2 0 0,1 13,16C13,15.47 13.2,15 13.54,14.64L18.41,9.41C18.78,9.05 19,8.55 19,8A2,2 0 0,0 17,6A2,2 0 0,0 15,8H13A4,4 0 0,1 17,4A4,4 0 0,1 21,8C21,9.1 20.55,10.1 19.83,10.83L15,16H21V18Z"})],-1)]),34),S("button",{onMousedown:e[3]||(e[3]=yi(a=>o.setHeading(3),["prevent"])),class:jt({active:i.editor.isActive("heading",{level:3})})},e[11]||(e[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-header-3"),S("path",{d:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V15H15V16H19V12H15V10H19V6H15V7H13V6A2,2 0 0,1 15,4Z"})],-1)]),34),S("button",{onMousedown:e[4]||(e[4]=yi((...a)=>o.toggleBold&&o.toggleBold(...a),["prevent"])),class:jt({active:i.editor.isActive("bold")})},e[12]||(e[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-bold"),S("path",{d:"M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z"})],-1)]),34),S("button",{onMousedown:e[5]||(e[5]=yi((...a)=>o.toggleItalic&&o.toggleItalic(...a),["prevent"])),class:jt({active:i.editor.isActive("italic")})},e[13]||(e[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-italic"),S("path",{d:"M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z"})],-1)]),34),S("button",{onMousedown:e[6]||(e[6]=yi((...a)=>o.toggleOrderedList&&o.toggleOrderedList(...a),["prevent"])),class:jt({active:i.editor.isActive("orderedList")})},e[14]||(e[14]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-list-numbered"),S("path",{d:"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z"})],-1)]),34),S("button",{onMousedown:e[7]||(e[7]=yi((...a)=>o.toggleBulletList&&o.toggleBulletList(...a),["prevent"])),class:jt({active:i.editor.isActive("bulletList")})},e[15]||(e[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"format-list-bulleted"),S("path",{d:"M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"})],-1)]),34)]),_:1},8,["editor"])):Ne("",!0)],64)}const t$=ht(Q5,[["render",e$],["__scopeId","data-v-97489fbc"]]),n$={components:{FileName:ob,TipTap:t$},methods:{async handleChange(){await this.$root.UpdateRecord("Files",this.myfile.uuid,this.myfile)},updateContent(t){this.myfile.content=t,console.log(t),this.handleChange()}},name:"FileEditor",data(){return{myfile:null}},async mounted(){this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.$root.tools.writer.selectednode)))}},r$={style:{"text-align":"center"}};function i$(t,e,n,r,i,o){const s=Ye("FileName"),l=Ye("TipTap");return q(),oe(Ze,null,[S("div",r$,[(q(),Tt(s,{myuuid:t.$root.tools.writer.selectednode,key:t.$root.tools.writer.selectednode,formmode:!0},null,8,["myuuid"]))]),i.myfile?(q(),Tt(l,{content:i.myfile.content,"onUpdate:content":o.updateContent,key:i.myfile.lastupdated},null,8,["content","onUpdate:content"])):Ne("",!0)],64)}const o$=ht(n$,[["render",i$]]),Cp={mounted(t){const e=()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"};t.style.height="auto",t.style.height=t.scrollHeight+"px",t.addEventListener("input",e),window.addEventListener("resize",e),t._onResize=e},updated(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},unmounted(t){window.removeEventListener("resize",t._onResize)}},pw=""+new URL("../resources/bookcover.png",import.meta.url).href,s$={props:{myimage:{type:String,default:""}},data(){return{base64Image:this.myimage}},methods:{onFileChange(t){const e=t.target.files[0];if(e){const n=new FileReader;n.onload=r=>{const i=new Image;i.src=r.target.result,i.onload=()=>{const o=document.createElement("canvas"),s=200,l=s/i.width;o.width=s,o.height=i.height*l,o.getContext("2d").drawImage(i,0,0,o.width,o.height),this.base64Image=o.toDataURL("image/jpeg"),this.$emit("image-changed",this.base64Image)}},n.readAsDataURL(e)}},triggerFileUpload(){this.$refs.fileInput.click()}}},l$=["src"];function a$(t,e,n,r,i,o){return q(),oe("div",null,[S("input",{type:"file",onChange:e[0]||(e[0]=(...s)=>o.onFileChange&&o.onFileChange(...s)),ref:"fileInput",style:{display:"none"}},null,544),i.base64Image?(q(),oe("img",{key:0,src:i.base64Image,alt:"Image Preview",class:"image-preview",onClick:e[1]||(e[1]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))},null,8,l$)):Ne("",!0),i.base64Image?Ne("",!0):(q(),oe("img",{key:1,src:pw,alt:"Image Preview",class:"image-preview",onClick:e[2]||(e[2]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))}))])}const c$=ht(s$,[["render",a$],["__scopeId","data-v-5cb89432"]]),u$={directives:{autosize:Cp},components:{ImageUpload:c$},methods:{handleChange(){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.this.$root.tools.writer.selected)},imageChanged(t){this.this.$root.tools.writer.selected.cover=t,this.handleChange()}},name:"BookEditor",data(){return{}},async mounted(){}},d$={key:0,class:"infocontainer"},f$={class:"bookcover"};function h$(t,e,n,r,i,o){const s=Ye("ImageUpload"),l=wh("autosize");return this.$root.tools.writer.selected?(q(),oe("div",d$,[S("div",f$,[lt(s,{myimage:this.$root.tools.writer.selected.cover,onImageChanged:o.imageChanged},null,8,["myimage","onImageChanged"])]),e[5]||(e[5]=S("label",null,"Book Title",-1)),Et(S("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>this.$root.tools.writer.selected.title=a),onBlur:e[1]||(e[1]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[_t,this.$root.tools.writer.selected.title]]),e[6]||(e[6]=S("label",null,"Author",-1)),Et(S("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>this.$root.tools.writer.selected.author=a),onBlur:e[3]||(e[3]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[_t,this.$root.tools.writer.selected.author]]),e[7]||(e[7]=S("label",null,"Description",-1)),Et(S("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>this.$root.tools.writer.selected.description=a)},null,512),[[l],[_t,this.$root.tools.writer.selected.description]])])):Ne("",!0)}const p$=ht(u$,[["render",h$],["__scopeId","data-v-9c724c64"]]),m$={name:"WriterHome",components:{DocStructure:ME,FileEditor:o$,BookEditor:p$},data(){return{lhshidden:!1,rhshidden:!1}},computed:{displaylist(){return this.$root.syncdb.Writer.sort((t,e)=>new Date(e.lastupdated)-new Date(t.lastupdated))}},methods:{addNewBook(){let t=JSON.parse(JSON.stringify(this.$root.writerTemplate));t.uuid=this.$root.uuid(),this.$root.AddRecord("Writer",t)}}},g$={key:0},y$={class:"writer-home"},v$={class:"gridcard-grid"},b$=["onClick"],w$={class:"book-3d"},C$={class:"book-3d__inner"},x$=["src","alt"],S$=["alt"],k$={key:1};function T$(t,e,n,r,i,o){const s=Ye("FileEditor"),l=Ye("BookEditor"),a=Ye("DocStructure");return q(),oe(Ze,null,[t.$root.tools.writer.selected?Ne("",!0):(q(),oe("div",g$,[S("div",y$,[S("button",{onClick:e[0]||(e[0]=(...c)=>o.addNewBook&&o.addNewBook(...c))},"Add a New Book"),S("div",v$,[(q(!0),oe(Ze,null,sn(o.displaylist,(c,u)=>(q(),oe("div",{class:"gridcard",key:u,onClick:d=>t.$root.tools.writer.selected=c},[S("div",w$,[S("div",C$,[c.cover?(q(),oe("img",{key:0,src:c.cover,class:"book-3d__cover",alt:c.title},null,8,x$)):(q(),oe("img",{key:1,class:"book-3d__cover",src:pw,alt:c.title},null,8,S$))])]),S("h2",null,On(c.title),1),S("p",null,"by "+On(c.author),1),S("p",null,On(c.description),1),S("p",null,On(c.lastupdated),1)],8,b$))),128))])])])),t.$root.tools.writer.selected?(q(),oe("div",k$,[S("div",{class:jt(["main",{lhsmain:i.lhshidden,rhsmain:i.rhshidden}])},[t.$root.tools.writer.selectednode?(q(),Tt(s,{key:t.$root.tools.writer.selectednode})):Ne("",!0),t.$root.tools.writer.selectednode?Ne("",!0):(q(),Tt(l,{key:1}))],2),S("div",{class:jt(["lhs",{lhshidden:i.lhshidden}])},[S("button",{onClick:e[1]||(e[1]=c=>i.lhshidden=!i.lhshidden),class:"btn lhsbtn"},e[3]||(e[3]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)])),lt(a)],2),S("div",{class:jt(["rhs",{rhshidden:i.rhshidden}])},[S("button",{onClick:e[2]||(e[2]=c=>i.rhshidden=!i.rhshidden),class:"btn rhsbtn"},e[4]||(e[4]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)]))],2)])):Ne("",!0)],64)}const O$=ht(m$,[["render",T$],["__scopeId","data-v-33d02cd5"]]),E$={components:{EditorContent:aw},props:{modelValue:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","blur"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:modelValue",this.editor.getHTML())},emitBlur(){this.$emit("blur")}},mounted(){this.editor=new lw({content:this.modelValue,extensions:[hw],editable:!this.disabled}),this.editor.on("update",this.emitContent),this.editor.on("blur",this.emitBlur)},watch:{disabled(t){this.editor&&this.editor.setOptions({editable:!t})}},beforeUnmount(){this.editor&&this.editor.destroy()}};function A$(t,e,n,r,i,o){const s=Ye("editor-content");return q(),Tt(s,{class:"editor",editor:i.editor},null,8,["editor"])}const mw=ht(E$,[["render",A$]]),M$={name:"MindmapEditor",components:{MiniEditor:mw},data(){return{mymindmap:null}},async mounted(){this.mymindmap=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Mindmap.get(this.$root.tools.mindmap.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Mindmap",this.mymindmap.uuid,this.mymindmap)},addTime(t){let e={};e.title="Title Here",e.text="",e.date="Date Label",t==null?this.mymindmap.content.items.push(e):this.mymindmap.content.items.splice(t,0,e)}}},_$={key:0,class:"subbar"},N$={key:1,class:"mindmap"},D$={class:"content"},P$=["onUpdate:modelValue"],$$={class:"time"},L$=["onUpdate:modelValue"],I$={style:{"text-align":"center"}};function B$(t,e,n,r,i,o){const s=Ye("MiniEditor");return q(),oe(Ze,null,[i.mymindmap?(q(),oe("div",_$,[Et(S("input",{onBlur:e[0]||(e[0]=l=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mymindmap.title=l)},null,544),[[_t,this.mymindmap.title]]),S("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.mindmap.selected=null)},e[7]||(e[7]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Ne("",!0),i.mymindmap?(q(),oe("div",N$,[S("ul",null,[(q(!0),oe(Ze,null,sn(i.mymindmap.content.items,(l,a)=>(q(),oe("li",null,[S("div",D$,[S("h3",null,[Et(S("input",{type:"text","onUpdate:modelValue":c=>l.title=c,placeholder:"Title Here",onBlur:e[3]||(e[3]=c=>o.update())},null,40,P$),[[_t,l.title]])]),S("p",null,[(q(),Tt(s,{modelValue:l.text,"onUpdate:modelValue":c=>l.text=c,onBlur:e[4]||(e[4]=c=>o.update()),key:i.mymindmap.lastupdated},null,8,["modelValue","onUpdate:modelValue"]))])]),S("div",$$,[S("h4",null,[Et(S("input",{type:"text","onUpdate:modelValue":c=>l.date=c,placeholder:"label",onBlur:e[5]||(e[5]=c=>o.update())},null,40,L$),[[_t,l.date]])])])]))),256)),e[9]||(e[9]=S("div",{style:{clear:"both"}},null,-1)),S("div",I$,[S("button",{onClick:e[6]||(e[6]=l=>o.addTime()),class:"tlbutton"},e[8]||(e[8]=[S("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):Ne("",!0)],64)}const V$=ht(M$,[["render",B$]]),R$={name:"MindmapHome",components:{MindmapEditor:V$}},H$={key:0,class:"mindmaps"},F$=["onClick"],j$={key:1};function U$(t,e,n,r,i,o){const s=Ye("MindmapEditor");return q(),oe(Ze,null,[t.$root.tools.mindmap.selected?Ne("",!0):(q(),oe("div",H$,[(q(!0),oe(Ze,null,sn(this.$root.syncdb.Mindmap,(l,a)=>(q(),oe("button",{onClick:c=>t.$root.tools.mindmap.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)),S("div",null,On(l.title),1)],8,F$))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeMindmap()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.mindmap.selected?(q(),oe("div",j$,[lt(s)])):Ne("",!0)],64)}const z$=ht(R$,[["render",U$],["__scopeId","data-v-37bd22cd"]]),K$={name:"TimelineEditor",components:{VueDraggable:Cu},directives:{autosize:Cp},data(){return{mytimeline:null,dragging:!1}},async mounted(){this.mytimeline=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Timeline.get(this.$root.tools.timeline.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Timeline",this.mytimeline.uuid,this.mytimeline)},addTime(t){let e={};e.title="",e.text="",e.date="",this.mytimeline.content.items.push(e),this.update()},deleteEvent(t){this.$swal({title:"Delete?",text:"this is permmanend",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&(this.mytimeline.content.items.splice(t,1),this.update(),this.$swal("Success","All done","success"))})}}},W$={key:0,class:"subbar"},q$={key:1,class:"timeline"},J$={class:"content"},G$=["onClick"],Y$={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},X$=["onUpdate:modelValue"],Z$=["onUpdate:modelValue"],Q$={class:"time handle"},e4=["onUpdate:modelValue"],t4={style:{"text-align":"center"}};function n4(t,e,n,r,i,o){const s=Ye("VueDraggable"),l=wh("autosize");return q(),oe(Ze,null,[i.mytimeline?(q(),oe("div",W$,[Et(S("input",{onBlur:e[0]||(e[0]=a=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>this.mytimeline.title=a)},null,544),[[_t,this.mytimeline.title]]),S("button",{class:"btn",onClick:e[2]||(e[2]=a=>t.$root.tools.timeline.selected=null)},e[11]||(e[11]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Ne("",!0),i.mytimeline?(q(),oe("div",q$,[S("ul",null,[lt(s,{modelValue:i.mytimeline.content.items,"onUpdate:modelValue":e[6]||(e[6]=a=>i.mytimeline.content.items=a),animation:150,handle:".handle",onChange:e[7]||(e[7]=a=>o.update()),onStart:e[8]||(e[8]=a=>i.dragging=!0),onEnd:e[9]||(e[9]=a=>i.dragging=!1)},{default:Hi(()=>[(q(!0),oe(Ze,null,sn(i.mytimeline.content.items,(a,c)=>(q(),oe("li",null,[S("div",J$,[S("button",{class:"deleteIconButton",onClick:u=>o.deleteEvent(c),tabindex:"0"},[(q(),oe("svg",Y$,e[12]||(e[12]=[S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},null,-1)])))],8,G$),S("h3",null,[Et(S("input",{type:"text","onUpdate:modelValue":u=>a.title=u,placeholder:"Title Here",onBlur:e[3]||(e[3]=u=>o.update())},null,40,X$),[[_t,a.title]])]),S("p",null,[Et(S("textarea",{"onUpdate:modelValue":u=>a.text=u,onBlur:e[4]||(e[4]=u=>o.update()),style:{"min-height":"150px"}},null,40,Z$),[[l],[_t,a.text]])])]),S("div",Q$,[S("h4",null,[Et(S("input",{type:"text","onUpdate:modelValue":u=>a.date=u,placeholder:"label",onBlur:e[5]||(e[5]=u=>o.update())},null,40,e4),[[_t,a.date]])])])]))),256))]),_:1},8,["modelValue"]),e[14]||(e[14]=S("div",{style:{clear:"both"}},null,-1)),S("div",t4,[S("button",{onClick:e[10]||(e[10]=a=>o.addTime()),class:"tlbutton"},e[13]||(e[13]=[S("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):Ne("",!0)],64)}const r4=ht(K$,[["render",n4],["__scopeId","data-v-fe50c416"]]),i4={name:"TimelineHome",components:{TimelineEditor:r4}},o4={key:0,class:"timelines"},s4=["onClick"],l4={key:1};function a4(t,e,n,r,i,o){const s=Ye("TimelineEditor");return q(),oe(Ze,null,[t.$root.tools.timeline.selected?Ne("",!0):(q(),oe("div",o4,[(q(!0),oe(Ze,null,sn(this.$root.syncdb.Timeline,(l,a)=>(q(),oe("button",{onClick:c=>t.$root.tools.timeline.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"timeline-outline"),S("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1)),S("div",null,On(l.title),1)],8,s4))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeTimeline()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.timeline.selected?(q(),oe("div",l4,[lt(s)])):Ne("",!0)],64)}const c4=ht(i4,[["render",a4],["__scopeId","data-v-f4cec571"]]),u4={name:"SnowflakeEditor",components:{MiniEditor:mw},data(){return{mysnowflake:null}},async mounted(){this.mysnowflake=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Snowflake.get(this.$root.tools.snowflake.selected.uuid))),this.startFlake()},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Snowflake",this.mysnowflake.uuid,this.mysnowflake)},exportToManuscript(){this.$swal({title:"Export?",text:"message",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(t=>{if(t.isConfirmed){let e={};e.uuid=this.$root.uuid(),e.title=this.$root.tools.snowflake.selected.title,e.descripton=this.$root.tools.snowflake.selected.description,e.files=[],this.$root.tools.snowflake.selected.content.forEach(n=>{console.log("SNOW >>>",n);let r=this.$root.uuid(),i={};i.writerid=e.uuid,i.title=n.title,i.content=n.content,i.notes=[],i.uuid=r,i.wordcount=this.$root.wordCounter(n.content),this.$root.AddRecord("Files",i);let o={};o.uuid=r,o.open=!1,o.type="file",o.children=[],e.files.push(o)}),this.$root.AddRecord("Writer",e),this.$swal("Success","this.$root.setlang.confirmmodal.exportsuccessfeedback","success")}})},openflake(t){if(!t.children.length){let e={};e.level=t.level+1,e.content="",e.open=!1,e.children=[],e.title="",t.children.push({...e}),t.children.push({...e}),t.children.push({...e})}t.open=!t.open,this.update()},deleteFlake(t){this.$swal({title:"Delete",text:"this.$root.setlang.confirmmodal.noundo",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(e=>{e.isConfirmed&&(this.$root.tools.snowflake.selected.content.splice(t,1),this.startFlake(),this.update(),this.$swal(this.$root.setlang.confirmmodal.success,this.$root.setlang.confirmmodal.successfeedback,"success"))})},replace(t,e){this.$swal({title:"Replace Card?",text:"this.$root.setlang.confirmmodal.snowconfirmtext",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(n=>{if(n.isConfirmed){let r={...t.children[0]},i={...t.children[1]},o={...t.children[2]};this.$root.tools.snowflake.selected.content.splice(e+1,0,o),this.$root.tools.snowflake.selected.content.splice(e+1,0,i),this.$root.tools.snowflake.selected.content.splice(e+1,0,r),this.$root.tools.snowflake.selected.content.splice(e,1),this.update(),this.$swal("success","this.$root.setlang.confirmmodal.snowconfirmmsg","success")}})},startFlake(){if(!this.$root.tools.snowflake.selected.content.length){console.log("GODDAMIN snowflake");let t={};t.title="",t.level=0,t.content="",t.open=!1,t.children=[],this.$root.tools.snowflake.selected.content.push(t)}}}},d4={key:0,class:"subbar"},f4={key:1,class:"scroller"},h4={class:"card"},p4=["onClick"],m4={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},g4=["onUpdate:modelValue"],y4=["onClick"],v4={key:0,class:"column"},b4={class:"card"},w4=["onUpdate:modelValue"],C4={class:"card"},x4=["onUpdate:modelValue"],S4={class:"card"},k4=["onUpdate:modelValue"],T4=["onClick"],O4={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"};function E4(t,e,n,r,i,o){const s=Ye("MiniEditor");return q(),oe(Ze,null,[i.mysnowflake?(q(),oe("div",d4,[Et(S("input",{onBlur:e[0]||(e[0]=l=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mysnowflake.title=l)},null,544),[[_t,this.mysnowflake.title]]),S("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.snowflake.selected=null)},e[11]||(e[11]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Ne("",!0),i.mysnowflake?(q(),oe("div",f4,[(q(!0),oe(Ze,null,sn(this.$root.tools.snowflake.selected.content,(l,a)=>(q(),oe("div",{key:a,class:"row"},[S("div",{class:"column",style:sr(l.open?"":"display:block")},[S("div",h4,[S("button",{class:"open-flake-button",onClick:c=>o.openflake(l)},[(q(),oe("svg",m4,e[12]||(e[12]=[S("path",{d:"M8,2H16A2,2 0 0,1 18,4V20A2,2 0 0,1 16,22H8A2,2 0 0,1 6,20V4A2,2 0 0,1 8,2M8,10V14H16V10H8M8,16V20H16V16H8M8,4V8H16V4H8Z"},null,-1)])))],8,p4),Et(S("input",{class:"title","onUpdate:modelValue":c=>l.title=c,placeholder:"title",onChange:e[3]||(e[3]=c=>o.update())},null,40,g4),[[_t,l.title]]),lt(s,{snowFlake:l,modelValue:l.content,"onUpdate:modelValue":c=>l.content=c,onUpdated:e[4]||(e[4]=c=>o.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"]),S("button",{class:"delete-flake-button",onClick:c=>o.deleteFlake(a)},e[13]||(e[13]=[S("svg",{viewBox:"0 0 24 24"},[S("path",{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"})],-1)]),8,y4)])],4),lt(Ok,{name:"h-slide-fade"},{default:Hi(()=>[l.open?(q(),oe("div",v4,[S("div",b4,[Et(S("input",{class:"title","onUpdate:modelValue":c=>l.children[0].title=c,placeholder:"title",onChange:e[5]||(e[5]=c=>o.update())},null,40,w4),[[_t,l.children[0].title]]),lt(s,{snowFlake:l.children[0],modelValue:l.children[0].content,"onUpdate:modelValue":c=>l.children[0].content=c,onUpdated:e[6]||(e[6]=c=>o.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"])]),S("div",C4,[Et(S("input",{class:"title","onUpdate:modelValue":c=>l.children[1].title=c,placeholder:"title",onChange:e[7]||(e[7]=c=>o.update())},null,40,x4),[[_t,l.children[1].title]]),lt(s,{snowFlake:l.children[1],modelValue:l.children[1].content,"onUpdate:modelValue":c=>l.children[1].content=c,onUpdated:e[8]||(e[8]=c=>o.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"])]),S("div",S4,[Et(S("input",{class:"title","onUpdate:modelValue":c=>l.children[2].title=c,placeholder:"title",onChange:e[9]||(e[9]=c=>o.update())},null,40,k4),[[_t,l.children[2].title]]),lt(s,{snowFlake:l.children[2],modelValue:l.children[2].content,"onUpdate:modelValue":c=>l.children[2].content=c,onUpdated:e[10]||(e[10]=c=>o.update())},null,8,["snowFlake","modelValue","onUpdate:modelValue"])]),S("button",{class:"replaceButton",onClick:c=>o.replace(l,a)},[(q(),oe("svg",O4,e[14]||(e[14]=[S("path",{d:"M14.58,16.59L19.17,12L14.58,7.41L16,6L22,12L16,18L14.58,16.59M8.58,16.59L13.17,12L8.58,7.41L10,6L16,12L10,18L8.58,16.59M2.58,16.59L7.17,12L2.58,7.41L4,6L10,12L4,18L2.58,16.59Z"},null,-1)])))],8,T4)])):Ne("",!0)]),_:2},1024)]))),128))])):Ne("",!0)],64)}const A4=ht(u4,[["render",E4],["__scopeId","data-v-024b3ded"]]),M4={name:"SnowflakeHome",components:{SnowflakeEditor:A4}},_4={key:0,class:"snowflakes"},N4=["onClick"],D4={key:1};function P4(t,e,n,r,i,o){const s=Ye("SnowflakeEditor");return q(),oe(Ze,null,[t.$root.tools.snowflake.selected?Ne("",!0):(q(),oe("div",_4,[(q(!0),oe(Ze,null,sn(this.$root.syncdb.Snowflake,(l,a)=>(q(),oe("button",{onClick:c=>t.$root.tools.snowflake.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"snowflake"),S("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1)),S("div",null,On(l.title),1)],8,N4))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeSnowflake()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.snowflake.selected?(q(),oe("div",D4,[lt(s)])):Ne("",!0)],64)}const $4=ht(M4,[["render",P4],["__scopeId","data-v-9b82ae2e"]]),L4={name:"CardViewer",components:{},props:{cardRef:{type:String}},data(){return{currentcard:null}},async mounted(){this.currentcard=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Cards.get(this.cardRef)))},methods:{editcard(t){this.$root.tools.cards.selected=this.currentcard,this.$root.modal=!0}}},I4={key:0,class:"card card-placeholder"},B4={class:"card-title"},V4={class:"card-description"};function R4(t,e,n,r,i,o){return q(),oe("div",{class:"",onClick:e[0]||(e[0]=s=>o.editcard(i.currentcard.uuid))},[i.currentcard?Ne("",!0):(q(),oe("div",I4,' No card ref provided so we need to have the "create" or "link" option ')),i.currentcard?(q(),oe("div",{key:1,class:jt(["card card-button",i.currentcard.color])},[S("h1",B4,On(i.currentcard.title),1),S("div",V4,On(i.currentcard.description),1)],2)):Ne("",!0)])}const gw=ht(L4,[["render",R4],["__scopeId","data-v-3944f054"]]),H4={name:"GridPlannerCell",emits:["update:modelValue","MakeChange"],components:{VueDraggable:Cu,CardViewer:gw},props:{modelValue:{type:Array,required:!0}},computed:{dragOptions(){return{animation:200,group:"Cards",disabled:!1,ghostClass:"ghost"}}},data(){return{drag:!1,colWidth:320}},methods:{linkCard(t,e){var n=this.modelValue.find(r=>r.uuid===e);n.uuid=t,this.updateDatabase()},deleteNote(t){this.$swal({title:"DELETE",text:"this.$root.setlang.confirmmodal.noundo",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(e=>{e.isConfirmed&&(this.modelValue.splice(t,1),this.$emit("update:modelValue",this.modelValue),this.updateDatabase(),this.$swal("SUccess","this.$root.setlang.confirmmodal.successfeedback","success"))})},addCard(){let t={};t.uuid=this.$root.uuid(),this.modelValue.push(t),this.$emit("update:modelValue",this.modelValue),this.updateDatabase()},updateDatabase(){this.$emit("MakeChange")}}},F4={class:"clearInterfaceIconButton cardHandle"},j4={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},U4=["onClick"],z4={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},K4={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"};function W4(t,e,n,r,i,o){const s=Ye("CardViewer"),l=Ye("VueDraggable");return q(),oe(Ze,null,[lt(l,{modelValue:n.modelValue,"onUpdate:modelValue":e[0]||(e[0]=a=>t.$emit("update:modelValue",a)),animation:150,group:"gridplan"},{default:Hi(()=>[(q(!0),oe(Ze,null,sn(n.modelValue,(a,c)=>(q(),oe("div",{class:"list-group-card-item",key:c},[lt(s,{cardRef:a.uuid},null,8,["cardRef"]),S("div",F4,[(q(),oe("svg",j4,e[2]||(e[2]=[S("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"},null,-1)])))]),S("button",{class:"deleteIconButton",onClick:u=>o.deleteNote(c),tabindex:"0"},[(q(),oe("svg",z4,e[3]||(e[3]=[S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},null,-1)])))],8,U4)]))),128))]),_:1},8,["modelValue"]),S("button",{class:"add-card",onClick:e[1]||(e[1]=(...a)=>o.addCard&&o.addCard(...a))},[(q(),oe("svg",K4,e[4]||(e[4]=[S("path",{d:"M13.09 20H4C2.9 20 2 19.11 2 18V6C2 4.89 2.9 4 4 4H20C21.11 4 22 4.89 22 6V13.81C21.12 13.3 20.09 13 19 13C15.69 13 13 15.69 13 19C13 19.34 13.04 19.67 13.09 20M18 15V18H15V20H18V23H20V20H23V18H20V15H18Z"},null,-1)])))])],64)}const q4=ht(H4,[["render",W4],["__scopeId","data-v-26e37a4f"]]),J4={name:"GridPlanner",components:{VueDraggable:Cu,GridPlannerCell:q4},directives:{autosize:Cp},computed:{tablewidth(){return this.colwidth*(this.mygridplanner.content.headers.length+1)}},data(){return{mygridplanner:null,colwidth:300}},async mounted(){this.mygridplanner=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Gridplanner.get(this.$root.tools.gridplanner.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Gridplanner",this.mygridplanner.uuid,this.mygridplanner)},addCol(){let t={};t.uuid=this.$root.uuid(),t.title="",this.mygridplanner.content.headers.push(t),this.mygridplanner.content.rows.forEach(e=>{e.cells[t.uuid]=[]}),this.update()},addRow(){let t={};t.title="",t.cells={},this.mygridplanner.content.headers.forEach(e=>{t.cells[e.uuid]=[]}),this.mygridplanner.content.rows.push(t),this.update()},deleteCol(t){this.$swal({title:"Delete?",text:"this is permmanend",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){let n=this.mygridplanner.content.headers[t].uuid;this.mygridplanner.content.rows.forEach(r=>{delete r.cells[n]}),this.mygridplanner.content.headers.splice(t,1),this.update(),this.$swal("Success","All done","success")}})},deleteRow(t){this.$swal({title:"Delete?",text:"pernamnen",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(e=>{e.isConfirmed&&(this.mygridplanner.content.rows.splice(t,1),this.update(),this.$swal("Success","that worked","success"))})}}},G4={key:0,class:"subbar"},Y4={class:"icon",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},X4={class:"icon",style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},Z4={key:1,class:"scroller"},Q4={class:"grid-row"},eL=["onUpdate:modelValue"],tL=["onUpdate:modelValue"];function nL(t,e,n,r,i,o){const s=Ye("VueDraggable"),l=Ye("GridPlannerCell"),a=wh("autosize");return q(),oe(Ze,null,[i.mygridplanner?(q(),oe("div",G4,[Et(S("input",{onBlur:e[0]||(e[0]=c=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>this.mygridplanner.title=c)},null,544),[[_t,this.mygridplanner.title]]),S("button",{onClick:e[2]||(e[2]=(...c)=>o.addRow&&o.addRow(...c)),class:"btn"},[(q(),oe("svg",Y4,e[12]||(e[12]=[S("path",{d:"M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z"},null,-1)])))]),S("button",{onClick:e[3]||(e[3]=(...c)=>o.addCol&&o.addCol(...c)),class:"btn"},[(q(),oe("svg",X4,e[13]||(e[13]=[S("path",{d:"M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z"},null,-1)])))]),S("button",{class:"btn",onClick:e[4]||(e[4]=c=>t.$root.tools.gridplanner.selected=null)},e[14]||(e[14]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"close"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Ne("",!0),i.mygridplanner?(q(),oe("div",Z4,[S("div",{class:"grid-container",style:sr(`width:${o.tablewidth}px`)},[S("div",Q4,[S("div",{class:"grid-header col1",style:sr(`${i.colwidth}px`)},null,4),lt(s,{modelValue:i.mygridplanner.content.headers,"onUpdate:modelValue":e[6]||(e[6]=c=>i.mygridplanner.content.headers=c),animation:150,handle:".handle",onChange:e[7]||(e[7]=c=>o.update())},{default:Hi(()=>[(q(!0),oe(Ze,null,sn(i.mygridplanner.content.headers,(c,u)=>(q(),oe("div",{key:"header-"+u,class:"grid-header",style:sr(`${i.colwidth}px`)},[e[15]||(e[15]=S("div",{class:"handle"},[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})])],-1)),Et(S("textarea",{onBlur:e[5]||(e[5]=d=>o.update()),class:"handleinput",type:"text","onUpdate:modelValue":d=>c.title=d,placeholder:"Header"},null,40,eL),[[a],[_t,c.title]])],4))),128))]),_:1},8,["modelValue"])]),S("div",null,[lt(s,{modelValue:i.mygridplanner.content.rows,"onUpdate:modelValue":e[10]||(e[10]=c=>i.mygridplanner.content.rows=c),animation:150,handle:".handle",onChange:e[11]||(e[11]=c=>o.update())},{default:Hi(()=>[(q(!0),oe(Ze,null,sn(i.mygridplanner.content.rows,(c,u)=>(q(),oe("div",{key:"row-"+u,class:"grid-row"},[S("div",{class:"grid-header col1",style:sr(`${i.colwidth}px`)},[e[16]||(e[16]=S("div",{class:"handle"},[S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"menu"),S("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})])],-1)),Et(S("textarea",{onBlur:e[8]||(e[8]=d=>o.update()),class:"handleinput",type:"text","onUpdate:modelValue":d=>c.title=d,placeholder:"Title"},null,40,tL),[[a],[_t,c.title]])],4),(q(!0),oe(Ze,null,sn(i.mygridplanner.content.headers,(d,f)=>(q(),oe("div",{key:"cell-"+u+"-"+f,class:"grid-cell",style:sr(`${i.colwidth}px`)},[lt(l,{modelValue:c.cells[d.uuid],"onUpdate:modelValue":p=>c.cells[d.uuid]=p,onMakeChange:e[9]||(e[9]=p=>o.update())},null,8,["modelValue","onUpdate:modelValue"])],4))),128))]))),128))]),_:1},8,["modelValue"])])],4)])):Ne("",!0)],64)}const rL=ht(J4,[["render",nL],["__scopeId","data-v-75125476"]]),iL={name:"GridplannerHome",components:{GridplannerEditor:rL}},oL={key:0,class:"gridplanners"},sL=["onClick"],lL={key:1};function aL(t,e,n,r,i,o){const s=Ye("GridplannerEditor");return q(),oe(Ze,null,[t.$root.tools.gridplanner.selected?Ne("",!0):(q(),oe("div",oL,[(q(!0),oe(Ze,null,sn(this.$root.syncdb.Gridplanner,(l,a)=>(q(),oe("button",{onClick:c=>t.$root.tools.gridplanner.selected=l},[e[1]||(e[1]=S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("title",null,"view-grid"),S("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)),S("div",null,On(l.title),1)],8,sL))),256)),S("button",{onClick:e[0]||(e[0]=l=>t.$root.makeGridplanner()),class:"add"},e[2]||(e[2]=[S("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[S("title",null,"plus-circle-outline"),S("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),S("div",null,"Add",-1)]))])),t.$root.tools.gridplanner.selected?(q(),oe("div",lL,[lt(s)])):Ne("",!0)],64)}const cL=ht(iL,[["render",aL],["__scopeId","data-v-556d732a"]]),uL={name:"CardsdatabaseHome",components:{CardViewer:gw},computed:{filteredCardList(){return this.$root.syncdb.Cards}},methods:{}},dL={class:"masonry-grid"};function fL(t,e,n,r,i,o){const s=Ye("CardViewer");return q(),oe(Ze,null,[S("div",null,[S("button",{class:"btn",onClick:e[0]||(e[0]=l=>t.$root.makeNewCard())},e[1]||(e[1]=[S("svg",{class:"icon",viewBox:"0 0 24 24"},[S("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),S("span",null,"NEW",-1)]))]),S("div",dL,[(q(!0),oe(Ze,null,sn(o.filteredCardList,(l,a)=>(q(),Tt(s,{key:l.uuid,cardRef:l.uuid,class:"masonry-item"},null,8,["cardRef"]))),128))])],64)}const hL=ht(uL,[["render",fL],["__scopeId","data-v-e808cf68"]]),pL={name:"App Home",components:{ProjectHome:bO,WriterHome:O$,MindmapHome:z$,TimelineHome:c4,SnowflakeHome:$4,GridplannerHome:cL,CardsdatabaseHome:hL},data(){return{}}};function mL(t,e,n,r,i,o){const s=Ye("ProjectHome"),l=Ye("WriterHome"),a=Ye("MindmapHome"),c=Ye("TimelineHome"),u=Ye("SnowflakeHome"),d=Ye("GridplannerHome"),f=Ye("CardsdatabaseHome");return q(),oe(Ze,null,[t.$root.currentTool?Ne("",!0):(q(),Tt(s,{key:0})),t.$root.currentTool==="writer"?(q(),Tt(l,{key:1})):Ne("",!0),t.$root.currentTool==="mindmap"?(q(),Tt(a,{key:2})):Ne("",!0),t.$root.currentTool==="timeline"?(q(),Tt(c,{key:3})):Ne("",!0),t.$root.currentTool==="snowflake"?(q(),Tt(u,{key:4})):Ne("",!0),t.$root.currentTool==="gridplanner"?(q(),Tt(d,{key:5})):Ne("",!0),t.$root.currentTool==="cardsdatabase"?(q(),Tt(f,{key:6})):Ne("",!0)],64)}const gL=ht(pL,[["render",mL]]),yL={mixins:[hT,pT,mT,gT],components:{TopToolbar:TT,ModalManager:$T,InstallPopup:jT,FooterBar:VT,ApplicationSections:gL,Welcome:JT},data(){return{modal:null,currentTool:null,urlSelected:null,FileManager:{fileHandle:null,jsonData:null},tools:{current:null,writer:{selected:null,selectednode:null,mybook:null},cards:{searchterms:null,selected:null},gridplanner:{selected:null},timeline:{selected:null},snowflake:{selected:null},mindmap:{selected:null},planningboard:{selected:null}}}},created(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Would you like to update?")&&window.location.reload()})}})},methods:{}},vL={id:"app"};function bL(t,e,n,r,i,o){const s=Ye("TopToolbar"),l=Ye("Welcome"),a=Ye("ApplicationSections"),c=Ye("FooterBar"),u=Ye("ModalManager"),d=Ye("InstallPopup");return q(),oe(Ze,null,[S("div",vL,[t.$root.mainwindow&&t.$root.dbRef?(q(),Tt(s,{key:0})):Ne("",!0),S("div",{class:jt(["container",{mainwindow:t.$root.mainwindow}])},[t.$root.dbRef?(q(),Tt(a,{key:1})):(q(),Tt(l,{key:0}))],2),t.$root.mainwindow?(q(),Tt(c,{key:1})):Ne("",!0)]),t.$root.modal?(q(),Tt(u,{key:0})):Ne("",!0),lt(d)],64)}const wL=ht(yL,[["render",bL]]);var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CL(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yw={exports:{}};/*!
* sweetalert2 v11.4.4
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(vi,function(){const n="SweetAlert2:",r=h=>{const m=[];for(let b=0;b<h.length;b++)m.indexOf(h[b])===-1&&m.push(h[b]);return m},i=h=>h.charAt(0).toUpperCase()+h.slice(1),o=h=>Array.prototype.slice.call(h),s=h=>{console.warn("".concat(n," ").concat(typeof h=="object"?h.join(" "):h))},l=h=>{console.error("".concat(n," ").concat(h))},a=[],c=h=>{a.includes(h)||(a.push(h),s(h))},u=(h,m)=>{c('"'.concat(h,'" is deprecated and will be removed in the next major release. Please use "').concat(m,'" instead.'))},d=h=>typeof h=="function"?h():h,f=h=>h&&typeof h.toPromise=="function",p=h=>f(h)?h.toPromise():Promise.resolve(h),g=h=>h&&Promise.resolve(h)===h,y={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},x=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],O={},_=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],D=h=>Object.prototype.hasOwnProperty.call(y,h),k=h=>x.indexOf(h)!==-1,I=h=>O[h],L=h=>{D(h)||s('Unknown parameter "'.concat(h,'"'))},R=h=>{_.includes(h)&&s('The parameter "'.concat(h,'" is incompatible with toasts'))},U=h=>{I(h)&&u(h,I(h))},T=h=>{!h.backdrop&&h.allowOutsideClick&&s('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const m in h)L(m),h.toast&&R(m),U(m)},C="swal2-",V=h=>{const m={};for(const b in h)m[h[b]]=C+h[b];return m},w=V(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Y=V(["success","warning","info","question","error"]),J=()=>document.body.querySelector(".".concat(w.container)),he=h=>{const m=J();return m?m.querySelector(h):null},ce=h=>he(".".concat(h)),Q=()=>ce(w.popup),Ce=()=>ce(w.icon),We=()=>ce(w.title),$e=()=>ce(w["html-container"]),et=()=>ce(w.image),rt=()=>ce(w["progress-steps"]),vt=()=>ce(w["validation-message"]),Te=()=>he(".".concat(w.actions," .").concat(w.confirm)),je=()=>he(".".concat(w.actions," .").concat(w.deny)),dt=()=>ce(w["input-label"]),z=()=>he(".".concat(w.loader)),W=()=>he(".".concat(w.actions," .").concat(w.cancel)),Z=()=>ce(w.actions),X=()=>ce(w.footer),fe=()=>ce(w["timer-progress-bar"]),N=()=>ce(w.close),$=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,H=()=>{const h=o(Q().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((b,P)=>{const pe=parseInt(b.getAttribute("tabindex")),Pe=parseInt(P.getAttribute("tabindex"));return pe>Pe?1:pe<Pe?-1:0}),m=o(Q().querySelectorAll($)).filter(b=>b.getAttribute("tabindex")!=="-1");return r(h.concat(m)).filter(b=>M(b))},j=()=>re(document.body,w.shown)&&!re(document.body,w["toast-shown"])&&!re(document.body,w["no-backdrop"]),G=()=>Q()&&re(Q(),w.toast),ee=()=>Q().hasAttribute("data-loading"),ae={previousBodyPadding:null},ne=(h,m)=>{if(h.textContent="",m){const b=new DOMParser().parseFromString(m,"text/html");o(b.querySelector("head").childNodes).forEach(P=>{h.appendChild(P)}),o(b.querySelector("body").childNodes).forEach(P=>{h.appendChild(P)})}},re=(h,m)=>{if(!m)return!1;const b=m.split(/\s+/);for(let P=0;P<b.length;P++)if(!h.classList.contains(b[P]))return!1;return!0},te=(h,m)=>{o(h.classList).forEach(b=>{!Object.values(w).includes(b)&&!Object.values(Y).includes(b)&&!Object.values(m.showClass).includes(b)&&h.classList.remove(b)})},ge=(h,m,b)=>{if(te(h,m),m.customClass&&m.customClass[b]){if(typeof m.customClass[b]!="string"&&!m.customClass[b].forEach)return s("Invalid type of customClass.".concat(b,'! Expected string or iterable object, got "').concat(typeof m.customClass[b],'"'));se(h,m.customClass[b])}},ue=(h,m)=>{if(!m)return null;switch(m){case"select":case"textarea":case"file":return h.querySelector(".".concat(w.popup," > .").concat(w[m]));case"checkbox":return h.querySelector(".".concat(w.popup," > .").concat(w.checkbox," input"));case"radio":return h.querySelector(".".concat(w.popup," > .").concat(w.radio," input:checked"))||h.querySelector(".".concat(w.popup," > .").concat(w.radio," input:first-child"));case"range":return h.querySelector(".".concat(w.popup," > .").concat(w.range," input"));default:return h.querySelector(".".concat(w.popup," > .").concat(w.input))}},me=h=>{if(h.focus(),h.type!=="file"){const m=h.value;h.value="",h.value=m}},ye=(h,m,b)=>{!h||!m||(typeof m=="string"&&(m=m.split(/\s+/).filter(Boolean)),m.forEach(P=>{Array.isArray(h)?h.forEach(pe=>{b?pe.classList.add(P):pe.classList.remove(P)}):b?h.classList.add(P):h.classList.remove(P)}))},se=(h,m)=>{ye(h,m,!0)},Se=(h,m)=>{ye(h,m,!1)},Me=(h,m)=>{const b=o(h.childNodes);for(let P=0;P<b.length;P++)if(re(b[P],m))return b[P]},we=(h,m,b)=>{b==="".concat(parseInt(b))&&(b=parseInt(b)),b||parseInt(b)===0?h.style[m]=typeof b=="number"?"".concat(b,"px"):b:h.style.removeProperty(m)},E=function(h){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";h.style.display=m},v=h=>{h.style.display="none"},A=(h,m,b,P)=>{const pe=h.querySelector(m);pe&&(pe.style[b]=P)},B=(h,m,b)=>{m?E(h,b):v(h)},M=h=>!!(h&&(h.offsetWidth||h.offsetHeight||h.getClientRects().length)),F=()=>!M(Te())&&!M(je())&&!M(W()),K=h=>h.scrollHeight>h.clientHeight,de=h=>{const m=window.getComputedStyle(h),b=parseFloat(m.getPropertyValue("animation-duration")||"0"),P=parseFloat(m.getPropertyValue("transition-duration")||"0");return b>0||P>0},ie=function(h){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const b=fe();M(b)&&(m&&(b.style.transition="none",b.style.width="100%"),setTimeout(()=>{b.style.transition="width ".concat(h/1e3,"s linear"),b.style.width="0%"},10))},Oe=()=>{const h=fe(),m=parseInt(window.getComputedStyle(h).width);h.style.removeProperty("transition"),h.style.width="100%";const b=parseInt(window.getComputedStyle(h).width),P=m/b*100;h.style.removeProperty("transition"),h.style.width="".concat(P,"%")},Le=()=>typeof window>"u"||typeof document>"u",qe=100,xe={},tt=()=>{xe.previousActiveElement&&xe.previousActiveElement.focus?(xe.previousActiveElement.focus(),xe.previousActiveElement=null):document.body&&document.body.focus()},it=h=>new Promise(m=>{if(!h)return m();const b=window.scrollX,P=window.scrollY;xe.restoreFocusTimeout=setTimeout(()=>{tt(),m()},qe),window.scrollTo(b,P)}),ct=`
 <div aria-labelledby="`.concat(w.title,'" aria-describedby="').concat(w["html-container"],'" class="').concat(w.popup,`" tabindex="-1">
   <button type="button" class="`).concat(w.close,`"></button>
   <ul class="`).concat(w["progress-steps"],`"></ul>
   <div class="`).concat(w.icon,`"></div>
   <img class="`).concat(w.image,`" />
   <h2 class="`).concat(w.title,'" id="').concat(w.title,`"></h2>
   <div class="`).concat(w["html-container"],'" id="').concat(w["html-container"],`"></div>
   <input class="`).concat(w.input,`" />
   <input type="file" class="`).concat(w.file,`" />
   <div class="`).concat(w.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(w.select,`"></select>
   <div class="`).concat(w.radio,`"></div>
   <label for="`).concat(w.checkbox,'" class="').concat(w.checkbox,`">
     <input type="checkbox" />
     <span class="`).concat(w.label,`"></span>
   </label>
   <textarea class="`).concat(w.textarea,`"></textarea>
   <div class="`).concat(w["validation-message"],'" id="').concat(w["validation-message"],`"></div>
   <div class="`).concat(w.actions,`">
     <div class="`).concat(w.loader,`"></div>
     <button type="button" class="`).concat(w.confirm,`"></button>
     <button type="button" class="`).concat(w.deny,`"></button>
     <button type="button" class="`).concat(w.cancel,`"></button>
   </div>
   <div class="`).concat(w.footer,`"></div>
   <div class="`).concat(w["timer-progress-bar-container"],`">
     <div class="`).concat(w["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),at=()=>{const h=J();return h?(h.remove(),Se([document.documentElement,document.body],[w["no-backdrop"],w["toast-shown"],w["has-column"]]),!0):!1},Fe=()=>{xe.currentInstance.resetValidationMessage()},Nt=()=>{const h=Q(),m=Me(h,w.input),b=Me(h,w.file),P=h.querySelector(".".concat(w.range," input")),pe=h.querySelector(".".concat(w.range," output")),Pe=Me(h,w.select),Lt=h.querySelector(".".concat(w.checkbox," input")),Kn=Me(h,w.textarea);m.oninput=Fe,b.onchange=Fe,Pe.onchange=Fe,Lt.onchange=Fe,Kn.oninput=Fe,P.oninput=()=>{Fe(),pe.value=P.value},P.onchange=()=>{Fe(),P.nextSibling.value=P.value}},Ee=h=>typeof h=="string"?document.querySelector(h):h,be=h=>{const m=Q();m.setAttribute("role",h.toast?"alert":"dialog"),m.setAttribute("aria-live",h.toast?"polite":"assertive"),h.toast||m.setAttribute("aria-modal","true")},Ie=h=>{window.getComputedStyle(h).direction==="rtl"&&se(J(),w.rtl)},De=h=>{const m=at();if(Le()){l("SweetAlert2 requires document to initialize");return}const b=document.createElement("div");b.className=w.container,m&&se(b,w["no-transition"]),ne(b,ct);const P=Ee(h.target);P.appendChild(b),be(h),Ie(P),Nt()},He=(h,m)=>{h instanceof HTMLElement?m.appendChild(h):typeof h=="object"?st(h,m):h&&ne(m,h)},st=(h,m)=>{h.jquery?yn(m,h):ne(m,h.toString())},yn=(h,m)=>{if(h.textContent="",0 in m)for(let b=0;b in m;b++)h.appendChild(m[b].cloneNode(!0));else h.appendChild(m.cloneNode(!0))},bt=(()=>{if(Le())return!1;const h=document.createElement("div"),m={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const b in m)if(Object.prototype.hasOwnProperty.call(m,b)&&typeof h.style[b]<"u")return m[b];return!1})(),ln=()=>{const h=document.createElement("div");h.className=w["scrollbar-measure"],document.body.appendChild(h);const m=h.getBoundingClientRect().width-h.clientWidth;return document.body.removeChild(h),m},Pn=(h,m)=>{const b=Z(),P=z();!m.showConfirmButton&&!m.showDenyButton&&!m.showCancelButton?v(b):E(b),ge(b,m,"actions"),mt(b,P,m),ne(P,m.loaderHtml),ge(P,m,"loader")};function mt(h,m,b){const P=Te(),pe=je(),Pe=W();yt(P,"confirm",b),yt(pe,"deny",b),yt(Pe,"cancel",b),$n(P,pe,Pe,b),b.reverseButtons&&(b.toast?(h.insertBefore(Pe,P),h.insertBefore(pe,P)):(h.insertBefore(Pe,m),h.insertBefore(pe,m),h.insertBefore(P,m)))}function $n(h,m,b,P){if(!P.buttonsStyling)return Se([h,m,b],w.styled);se([h,m,b],w.styled),P.confirmButtonColor&&(h.style.backgroundColor=P.confirmButtonColor,se(h,w["default-outline"])),P.denyButtonColor&&(m.style.backgroundColor=P.denyButtonColor,se(m,w["default-outline"])),P.cancelButtonColor&&(b.style.backgroundColor=P.cancelButtonColor,se(b,w["default-outline"]))}function yt(h,m,b){B(h,b["show".concat(i(m),"Button")],"inline-block"),ne(h,b["".concat(m,"ButtonText")]),h.setAttribute("aria-label",b["".concat(m,"ButtonAriaLabel")]),h.className=w[m],ge(h,b,"".concat(m,"Button")),se(h,b["".concat(m,"ButtonClass")])}function vn(h,m){typeof m=="string"?h.style.background=m:m||se([document.documentElement,document.body],w["no-backdrop"])}function Xt(h,m){m in w?se(h,w[m]):(s('The "position" parameter is not valid, defaulting to "center"'),se(h,w.center))}function Un(h,m){if(m&&typeof m=="string"){const b="grow-".concat(m);b in w&&se(h,w[b])}}const zn=(h,m)=>{const b=J();b&&(vn(b,m.backdrop),Xt(b,m.position),Un(b,m.grow),ge(b,m,"container"))};var Qe={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Vo=["input","file","range","select","radio","checkbox","textarea"],mi=(h,m)=>{const b=Q(),P=Qe.innerParams.get(h),pe=!P||m.input!==P.input;Vo.forEach(Pe=>{const Lt=w[Pe],Kn=Me(b,Lt);Zt(Pe,m.inputAttributes),Kn.className=Lt,pe&&v(Kn)}),m.input&&(pe&&Is(m),mr(m))},Is=h=>{if(!Ln[h.input])return l('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(h.input,'"'));const m=xp(h.input),b=Ln[h.input](m,h);E(b),setTimeout(()=>{me(b)})},Ar=h=>{for(let m=0;m<h.attributes.length;m++){const b=h.attributes[m].name;["type","value","style"].includes(b)||h.removeAttribute(b)}},Zt=(h,m)=>{const b=ue(Q(),h);if(b){Ar(b);for(const P in m)b.setAttribute(P,m[P])}},mr=h=>{const m=xp(h.input);h.customClass&&se(m,h.customClass.input)},gr=(h,m)=>{(!h.placeholder||m.inputPlaceholder)&&(h.placeholder=m.inputPlaceholder)},Mr=(h,m,b)=>{if(b.inputLabel){h.id=w.input;const P=document.createElement("label"),pe=w["input-label"];P.setAttribute("for",h.id),P.className=pe,se(P,b.customClass.inputLabel),P.innerText=b.inputLabel,m.insertAdjacentElement("beforebegin",P)}},xp=h=>{const m=w[h]?w[h]:w.input;return Me(Q(),m)},Ln={};Ln.text=Ln.email=Ln.password=Ln.number=Ln.tel=Ln.url=(h,m)=>(typeof m.inputValue=="string"||typeof m.inputValue=="number"?h.value=m.inputValue:g(m.inputValue)||s('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof m.inputValue,'"')),Mr(h,h,m),gr(h,m),h.type=m.input,h),Ln.file=(h,m)=>(Mr(h,h,m),gr(h,m),h),Ln.range=(h,m)=>{const b=h.querySelector("input"),P=h.querySelector("output");return b.value=m.inputValue,b.type=m.input,P.value=m.inputValue,Mr(b,h,m),h},Ln.select=(h,m)=>{if(h.textContent="",m.inputPlaceholder){const b=document.createElement("option");ne(b,m.inputPlaceholder),b.value="",b.disabled=!0,b.selected=!0,h.appendChild(b)}return Mr(h,h,m),h},Ln.radio=h=>(h.textContent="",h),Ln.checkbox=(h,m)=>{const b=ue(Q(),"checkbox");b.value="1",b.id=w.checkbox,b.checked=!!m.inputValue;const P=h.querySelector("span");return ne(P,m.inputPlaceholder),h},Ln.textarea=(h,m)=>{h.value=m.inputValue,gr(h,m),Mr(h,h,m);const b=P=>parseInt(window.getComputedStyle(P).marginLeft)+parseInt(window.getComputedStyle(P).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const P=parseInt(window.getComputedStyle(Q()).width),pe=()=>{const Pe=h.offsetWidth+b(h);Pe>P?Q().style.width="".concat(Pe,"px"):Q().style.width=null};new MutationObserver(pe).observe(h,{attributes:!0,attributeFilter:["style"]})}}),h};const bw=(h,m)=>{const b=$e();ge(b,m,"htmlContainer"),m.html?(He(m.html,b),E(b,"block")):m.text?(b.textContent=m.text,E(b,"block")):v(b),mi(h,m)},ww=(h,m)=>{const b=X();B(b,m.footer),m.footer&&He(m.footer,b),ge(b,m,"footer")},Cw=(h,m)=>{const b=N();ne(b,m.closeButtonHtml),ge(b,m,"closeButton"),B(b,m.showCloseButton),b.setAttribute("aria-label",m.closeButtonAriaLabel)},xw=(h,m)=>{const b=Qe.innerParams.get(h),P=Ce();if(b&&m.icon===b.icon){kp(P,m),Sp(P,m);return}if(!m.icon&&!m.iconHtml)return v(P);if(m.icon&&Object.keys(Y).indexOf(m.icon)===-1)return l('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(m.icon,'"')),v(P);E(P),kp(P,m),Sp(P,m),se(P,m.showClass.icon)},Sp=(h,m)=>{for(const b in Y)m.icon!==b&&Se(h,Y[b]);se(h,Y[m.icon]),Ow(h,m),Sw(),ge(h,m,"icon")},Sw=()=>{const h=Q(),m=window.getComputedStyle(h).getPropertyValue("background-color"),b=h.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let P=0;P<b.length;P++)b[P].style.backgroundColor=m},kw=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Tw=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,kp=(h,m)=>{h.textContent="",m.iconHtml?ne(h,Tp(m.iconHtml)):m.icon==="success"?ne(h,kw):m.icon==="error"?ne(h,Tw):ne(h,Tp({question:"?",warning:"!",info:"i"}[m.icon]))},Ow=(h,m)=>{if(m.iconColor){h.style.color=m.iconColor,h.style.borderColor=m.iconColor;for(const b of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])A(h,b,"backgroundColor",m.iconColor);A(h,".swal2-success-ring","borderColor",m.iconColor)}},Tp=h=>'<div class="'.concat(w["icon-content"],'">').concat(h,"</div>"),Ew=(h,m)=>{const b=et();if(!m.imageUrl)return v(b);E(b,""),b.setAttribute("src",m.imageUrl),b.setAttribute("alt",m.imageAlt),we(b,"width",m.imageWidth),we(b,"height",m.imageHeight),b.className=w.image,ge(b,m,"image")},Aw=h=>{const m=document.createElement("li");return se(m,w["progress-step"]),ne(m,h),m},Mw=h=>{const m=document.createElement("li");return se(m,w["progress-step-line"]),h.progressStepsDistance&&(m.style.width=h.progressStepsDistance),m},_w=(h,m)=>{const b=rt();if(!m.progressSteps||m.progressSteps.length===0)return v(b);E(b),b.textContent="",m.currentProgressStep>=m.progressSteps.length&&s("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),m.progressSteps.forEach((P,pe)=>{const Pe=Aw(P);if(b.appendChild(Pe),pe===m.currentProgressStep&&se(Pe,w["active-progress-step"]),pe!==m.progressSteps.length-1){const Lt=Mw(m);b.appendChild(Lt)}})},Nw=(h,m)=>{const b=We();B(b,m.title||m.titleText,"block"),m.title&&He(m.title,b),m.titleText&&(b.innerText=m.titleText),ge(b,m,"title")},Dw=(h,m)=>{const b=J(),P=Q();m.toast?(we(b,"width",m.width),P.style.width="100%",P.insertBefore(z(),Ce())):we(P,"width",m.width),we(P,"padding",m.padding),m.color&&(P.style.color=m.color),m.background&&(P.style.background=m.background),v(vt()),Pw(P,m)},Pw=(h,m)=>{h.className="".concat(w.popup," ").concat(M(h)?m.showClass.popup:""),m.toast?(se([document.documentElement,document.body],w["toast-shown"]),se(h,w.toast)):se(h,w.modal),ge(h,m,"popup"),typeof m.customClass=="string"&&se(h,m.customClass),m.icon&&se(h,w["icon-".concat(m.icon)])},Op=(h,m)=>{Dw(h,m),zn(h,m),_w(h,m),xw(h,m),Ew(h,m),Nw(h,m),Cw(h,m),bw(h,m),Pn(h,m),ww(h,m),typeof m.didRender=="function"&&m.didRender(Q())},Ro=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),$w=()=>{o(document.body.children).forEach(h=>{h===J()||h.contains(J())||(h.hasAttribute("aria-hidden")&&h.setAttribute("data-previous-aria-hidden",h.getAttribute("aria-hidden")),h.setAttribute("aria-hidden","true"))})},Ep=()=>{o(document.body.children).forEach(h=>{h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})},Ap=["swal-title","swal-html","swal-footer"],Lw=h=>{const m=typeof h.template=="string"?document.querySelector(h.template):h.template;if(!m)return{};const b=m.content;return jw(b),Object.assign(Iw(b),Bw(b),Vw(b),Rw(b),Hw(b),Fw(b,Ap))},Iw=h=>{const m={};return o(h.querySelectorAll("swal-param")).forEach(b=>{eo(b,["name","value"]);const P=b.getAttribute("name"),pe=b.getAttribute("value");typeof y[P]=="boolean"&&pe==="false"&&(m[P]=!1),typeof y[P]=="object"&&(m[P]=JSON.parse(pe))}),m},Bw=h=>{const m={};return o(h.querySelectorAll("swal-button")).forEach(b=>{eo(b,["type","color","aria-label"]);const P=b.getAttribute("type");m["".concat(P,"ButtonText")]=b.innerHTML,m["show".concat(i(P),"Button")]=!0,b.hasAttribute("color")&&(m["".concat(P,"ButtonColor")]=b.getAttribute("color")),b.hasAttribute("aria-label")&&(m["".concat(P,"ButtonAriaLabel")]=b.getAttribute("aria-label"))}),m},Vw=h=>{const m={},b=h.querySelector("swal-image");return b&&(eo(b,["src","width","height","alt"]),b.hasAttribute("src")&&(m.imageUrl=b.getAttribute("src")),b.hasAttribute("width")&&(m.imageWidth=b.getAttribute("width")),b.hasAttribute("height")&&(m.imageHeight=b.getAttribute("height")),b.hasAttribute("alt")&&(m.imageAlt=b.getAttribute("alt"))),m},Rw=h=>{const m={},b=h.querySelector("swal-icon");return b&&(eo(b,["type","color"]),b.hasAttribute("type")&&(m.icon=b.getAttribute("type")),b.hasAttribute("color")&&(m.iconColor=b.getAttribute("color")),m.iconHtml=b.innerHTML),m},Hw=h=>{const m={},b=h.querySelector("swal-input");b&&(eo(b,["type","label","placeholder","value"]),m.input=b.getAttribute("type")||"text",b.hasAttribute("label")&&(m.inputLabel=b.getAttribute("label")),b.hasAttribute("placeholder")&&(m.inputPlaceholder=b.getAttribute("placeholder")),b.hasAttribute("value")&&(m.inputValue=b.getAttribute("value")));const P=h.querySelectorAll("swal-input-option");return P.length&&(m.inputOptions={},o(P).forEach(pe=>{eo(pe,["value"]);const Pe=pe.getAttribute("value"),Lt=pe.innerHTML;m.inputOptions[Pe]=Lt})),m},Fw=(h,m)=>{const b={};for(const P in m){const pe=m[P],Pe=h.querySelector(pe);Pe&&(eo(Pe,[]),b[pe.replace(/^swal-/,"")]=Pe.innerHTML.trim())}return b},jw=h=>{const m=Ap.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);o(h.children).forEach(b=>{const P=b.tagName.toLowerCase();m.indexOf(P)===-1&&s("Unrecognized element <".concat(P,">"))})},eo=(h,m)=>{o(h.attributes).forEach(b=>{m.indexOf(b.name)===-1&&s(['Unrecognized attribute "'.concat(b.name,'" on <').concat(h.tagName.toLowerCase(),">."),"".concat(m.length?"Allowed attributes are: ".concat(m.join(", ")):"To set the value, use HTML within the element.")])})};var Mp={email:(h,m)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(h)?Promise.resolve():Promise.resolve(m||"Invalid email address"),url:(h,m)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(h)?Promise.resolve():Promise.resolve(m||"Invalid URL")};function Uw(h){h.inputValidator||Object.keys(Mp).forEach(m=>{h.input===m&&(h.inputValidator=Mp[m])})}function zw(h){(!h.target||typeof h.target=="string"&&!document.querySelector(h.target)||typeof h.target!="string"&&!h.target.appendChild)&&(s('Target parameter is not valid, defaulting to "body"'),h.target="body")}function Kw(h){Uw(h),h.showLoaderOnConfirm&&!h.preConfirm&&s(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),zw(h),typeof h.title=="string"&&(h.title=h.title.split(`
`).join("<br />")),De(h)}class Ww{constructor(m,b){this.callback=m,this.remaining=b,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(m){const b=this.running;return b&&this.stop(),this.remaining+=m,b&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const qw=()=>{ae.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(ae.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(ae.previousBodyPadding+ln(),"px"))},Jw=()=>{ae.previousBodyPadding!==null&&(document.body.style.paddingRight="".concat(ae.previousBodyPadding,"px"),ae.previousBodyPadding=null)},Gw=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!re(document.body,w.iosfix)){const h=document.body.scrollTop;document.body.style.top="".concat(h*-1,"px"),se(document.body,w.iosfix),Xw(),Yw()}},Yw=()=>{const h=navigator.userAgent,m=!!h.match(/iPad/i)||!!h.match(/iPhone/i),b=!!h.match(/WebKit/i);m&&b&&!h.match(/CriOS/i)&&Q().scrollHeight>window.innerHeight-44&&(J().style.paddingBottom="".concat(44,"px"))},Xw=()=>{const h=J();let m;h.ontouchstart=b=>{m=Zw(b)},h.ontouchmove=b=>{m&&(b.preventDefault(),b.stopPropagation())}},Zw=h=>{const m=h.target,b=J();return Qw(h)||eC(h)?!1:m===b||!K(b)&&m.tagName!=="INPUT"&&m.tagName!=="TEXTAREA"&&!(K($e())&&$e().contains(m))},Qw=h=>h.touches&&h.touches.length&&h.touches[0].touchType==="stylus",eC=h=>h.touches&&h.touches.length>1,tC=()=>{if(re(document.body,w.iosfix)){const h=parseInt(document.body.style.top,10);Se(document.body,w.iosfix),document.body.style.top="",document.body.scrollTop=h*-1}},_p=10,nC=h=>{const m=J(),b=Q();typeof h.willOpen=="function"&&h.willOpen(b);const P=window.getComputedStyle(document.body).overflowY;oC(m,b,h),setTimeout(()=>{rC(m,b)},_p),j()&&(iC(m,h.scrollbarPadding,P),$w()),!G()&&!xe.previousActiveElement&&(xe.previousActiveElement=document.activeElement),typeof h.didOpen=="function"&&setTimeout(()=>h.didOpen(b)),Se(m,w["no-transition"])},Np=h=>{const m=Q();if(h.target!==m)return;const b=J();m.removeEventListener(bt,Np),b.style.overflowY="auto"},rC=(h,m)=>{bt&&de(m)?(h.style.overflowY="hidden",m.addEventListener(bt,Np)):h.style.overflowY="auto"},iC=(h,m,b)=>{Gw(),m&&b!=="hidden"&&qw(),setTimeout(()=>{h.scrollTop=0})},oC=(h,m,b)=>{se(h,b.showClass.backdrop),m.style.setProperty("opacity","0","important"),E(m,"grid"),setTimeout(()=>{se(m,b.showClass.popup),m.style.removeProperty("opacity")},_p),se([document.documentElement,document.body],w.shown),b.heightAuto&&b.backdrop&&!b.toast&&se([document.documentElement,document.body],w["height-auto"])},Ho=h=>{let m=Q();m||new da,m=Q();const b=z();G()?v(Ce()):sC(m,h),E(b),m.setAttribute("data-loading",!0),m.setAttribute("aria-busy",!0),m.focus()},sC=(h,m)=>{const b=Z(),P=z();!m&&M(Te())&&(m=Te()),E(b),m&&(v(m),P.setAttribute("data-button-to-replace",m.className)),P.parentNode.insertBefore(P,m),se([h,b],w.loading)},lC=(h,m)=>{m.input==="select"||m.input==="radio"?fC(h,m):["text","email","number","tel","textarea"].includes(m.input)&&(f(m.inputValue)||g(m.inputValue))&&(Ho(Te()),hC(h,m))},aC=(h,m)=>{const b=h.getInput();if(!b)return null;switch(m.input){case"checkbox":return cC(b);case"radio":return uC(b);case"file":return dC(b);default:return m.inputAutoTrim?b.value.trim():b.value}},cC=h=>h.checked?1:0,uC=h=>h.checked?h.value:null,dC=h=>h.files.length?h.getAttribute("multiple")!==null?h.files:h.files[0]:null,fC=(h,m)=>{const b=Q(),P=pe=>pC[m.input](b,Bu(pe),m);f(m.inputOptions)||g(m.inputOptions)?(Ho(Te()),p(m.inputOptions).then(pe=>{h.hideLoading(),P(pe)})):typeof m.inputOptions=="object"?P(m.inputOptions):l("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof m.inputOptions))},hC=(h,m)=>{const b=h.getInput();v(b),p(m.inputValue).then(P=>{b.value=m.input==="number"?parseFloat(P)||0:"".concat(P),E(b),b.focus(),h.hideLoading()}).catch(P=>{l("Error in inputValue promise: ".concat(P)),b.value="",E(b),b.focus(),h.hideLoading()})},pC={select:(h,m,b)=>{const P=Me(h,w.select),pe=(Pe,Lt,Kn)=>{const bn=document.createElement("option");bn.value=Kn,ne(bn,Lt),bn.selected=Dp(Kn,b.inputValue),Pe.appendChild(bn)};m.forEach(Pe=>{const Lt=Pe[0],Kn=Pe[1];if(Array.isArray(Kn)){const bn=document.createElement("optgroup");bn.label=Lt,bn.disabled=!1,P.appendChild(bn),Kn.forEach(jo=>pe(bn,jo[1],jo[0]))}else pe(P,Kn,Lt)}),P.focus()},radio:(h,m,b)=>{const P=Me(h,w.radio);m.forEach(Pe=>{const Lt=Pe[0],Kn=Pe[1],bn=document.createElement("input"),jo=document.createElement("label");bn.type="radio",bn.name=w.radio,bn.value=Lt,Dp(Lt,b.inputValue)&&(bn.checked=!0);const zu=document.createElement("span");ne(zu,Kn),zu.className=w.label,jo.appendChild(bn),jo.appendChild(zu),P.appendChild(jo)});const pe=P.querySelectorAll("input");pe.length&&pe[0].focus()}},Bu=h=>{const m=[];return typeof Map<"u"&&h instanceof Map?h.forEach((b,P)=>{let pe=b;typeof pe=="object"&&(pe=Bu(pe)),m.push([P,pe])}):Object.keys(h).forEach(b=>{let P=h[b];typeof P=="object"&&(P=Bu(P)),m.push([b,P])}),m},Dp=(h,m)=>m&&m.toString()===h.toString();function Pp(){const h=Qe.innerParams.get(this);if(!h)return;const m=Qe.domCache.get(this);v(m.loader),G()?h.icon&&E(Ce()):mC(m),Se([m.popup,m.actions],w.loading),m.popup.removeAttribute("aria-busy"),m.popup.removeAttribute("data-loading"),m.confirmButton.disabled=!1,m.denyButton.disabled=!1,m.cancelButton.disabled=!1}const mC=h=>{const m=h.popup.getElementsByClassName(h.loader.getAttribute("data-button-to-replace"));m.length?E(m[0],"inline-block"):F()&&v(h.actions)};function gC(h){const m=Qe.innerParams.get(h||this),b=Qe.domCache.get(h||this);return b?ue(b.popup,m.input):null}var Bs={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function $p(h,m,b,P){G()?Lp(h,P):(it(b).then(()=>Lp(h,P)),xe.keydownTarget.removeEventListener("keydown",xe.keydownHandler,{capture:xe.keydownListenerCapture}),xe.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(m.setAttribute("style","display:none !important"),m.removeAttribute("class"),m.innerHTML=""):m.remove(),j()&&(Jw(),tC(),Ep()),yC()}function yC(){Se([document.documentElement,document.body],[w.shown,w["height-auto"],w["no-backdrop"],w["toast-shown"]])}function ca(h){h=CC(h);const m=Bs.swalPromiseResolve.get(this),b=bC(this);this.isAwaitingPromise()?h.isDismissed||(Vs(this),m(h)):b&&m(h)}function vC(){return!!Qe.awaitingPromise.get(this)}const bC=h=>{const m=Q();if(!m)return!1;const b=Qe.innerParams.get(h);if(!b||re(m,b.hideClass.popup))return!1;Se(m,b.showClass.popup),se(m,b.hideClass.popup);const P=J();return Se(P,b.showClass.backdrop),se(P,b.hideClass.backdrop),xC(h,m,b),!0};function wC(h){const m=Bs.swalPromiseReject.get(this);Vs(this),m&&m(h)}const Vs=h=>{h.isAwaitingPromise()&&(Qe.awaitingPromise.delete(h),Qe.innerParams.get(h)||h._destroy())},CC=h=>typeof h>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},h),xC=(h,m,b)=>{const P=J(),pe=bt&&de(m);typeof b.willClose=="function"&&b.willClose(m),pe?SC(h,m,P,b.returnFocus,b.didClose):$p(h,P,b.returnFocus,b.didClose)},SC=(h,m,b,P,pe)=>{xe.swalCloseEventFinishedCallback=$p.bind(null,h,b,P,pe),m.addEventListener(bt,function(Pe){Pe.target===m&&(xe.swalCloseEventFinishedCallback(),delete xe.swalCloseEventFinishedCallback)})},Lp=(h,m)=>{setTimeout(()=>{typeof m=="function"&&m.bind(h.params)(),h._destroy()})};function Ip(h,m,b){const P=Qe.domCache.get(h);m.forEach(pe=>{P[pe].disabled=b})}function Bp(h,m){if(!h)return!1;if(h.type==="radio"){const b=h.parentNode.parentNode.querySelectorAll("input");for(let P=0;P<b.length;P++)b[P].disabled=m}else h.disabled=m}function kC(){Ip(this,["confirmButton","denyButton","cancelButton"],!1)}function TC(){Ip(this,["confirmButton","denyButton","cancelButton"],!0)}function OC(){return Bp(this.getInput(),!1)}function EC(){return Bp(this.getInput(),!0)}function AC(h){const m=Qe.domCache.get(this),b=Qe.innerParams.get(this);ne(m.validationMessage,h),m.validationMessage.className=w["validation-message"],b.customClass&&b.customClass.validationMessage&&se(m.validationMessage,b.customClass.validationMessage),E(m.validationMessage);const P=this.getInput();P&&(P.setAttribute("aria-invalid",!0),P.setAttribute("aria-describedby",w["validation-message"]),me(P),se(P,w.inputerror))}function MC(){const h=Qe.domCache.get(this);h.validationMessage&&v(h.validationMessage);const m=this.getInput();m&&(m.removeAttribute("aria-invalid"),m.removeAttribute("aria-describedby"),Se(m,w.inputerror))}function _C(){return Qe.domCache.get(this).progressSteps}function NC(h){const m=Q(),b=Qe.innerParams.get(this);if(!m||re(m,b.hideClass.popup))return s("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const P=DC(h),pe=Object.assign({},b,P);Op(this,pe),Qe.innerParams.set(this,pe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,h),writable:!1,enumerable:!0}})}const DC=h=>{const m={};return Object.keys(h).forEach(b=>{k(b)?m[b]=h[b]:s('Invalid parameter to update: "'.concat(b,`". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`))}),m};function PC(){const h=Qe.domCache.get(this),m=Qe.innerParams.get(this);if(!m){Vp(this);return}h.popup&&xe.swalCloseEventFinishedCallback&&(xe.swalCloseEventFinishedCallback(),delete xe.swalCloseEventFinishedCallback),xe.deferDisposalTimer&&(clearTimeout(xe.deferDisposalTimer),delete xe.deferDisposalTimer),typeof m.didDestroy=="function"&&m.didDestroy(),$C(this)}const $C=h=>{Vp(h),delete h.params,delete xe.keydownHandler,delete xe.keydownTarget,delete xe.currentInstance},Vp=h=>{h.isAwaitingPromise()?(Vu(Qe,h),Qe.awaitingPromise.set(h,!0)):(Vu(Bs,h),Vu(Qe,h))},Vu=(h,m)=>{for(const b in h)h[b].delete(m)};var Rp=Object.freeze({hideLoading:Pp,disableLoading:Pp,getInput:gC,close:ca,isAwaitingPromise:vC,rejectPromise:wC,handleAwaitingPromise:Vs,closePopup:ca,closeModal:ca,closeToast:ca,enableButtons:kC,disableButtons:TC,enableInput:OC,disableInput:EC,showValidationMessage:AC,resetValidationMessage:MC,getProgressSteps:_C,update:NC,_destroy:PC});const LC=h=>{const m=Qe.innerParams.get(h);h.disableButtons(),m.input?Hp(h,"confirm"):Hu(h,!0)},IC=h=>{const m=Qe.innerParams.get(h);h.disableButtons(),m.returnInputValueOnDeny?Hp(h,"deny"):Ru(h,!1)},BC=(h,m)=>{h.disableButtons(),m(Ro.cancel)},Hp=(h,m)=>{const b=Qe.innerParams.get(h);if(!b.input)return l('The "input" parameter is needed to be set when using returnInputValueOn'.concat(i(m)));const P=aC(h,b);b.inputValidator?VC(h,P,m):h.getInput().checkValidity()?m==="deny"?Ru(h,P):Hu(h,P):(h.enableButtons(),h.showValidationMessage(b.validationMessage))},VC=(h,m,b)=>{const P=Qe.innerParams.get(h);h.disableInput(),Promise.resolve().then(()=>p(P.inputValidator(m,P.validationMessage))).then(pe=>{h.enableButtons(),h.enableInput(),pe?h.showValidationMessage(pe):b==="deny"?Ru(h,m):Hu(h,m)})},Ru=(h,m)=>{const b=Qe.innerParams.get(h||void 0);b.showLoaderOnDeny&&Ho(je()),b.preDeny?(Qe.awaitingPromise.set(h||void 0,!0),Promise.resolve().then(()=>p(b.preDeny(m,b.validationMessage))).then(P=>{P===!1?(h.hideLoading(),Vs(h)):h.closePopup({isDenied:!0,value:typeof P>"u"?m:P})}).catch(P=>jp(h||void 0,P))):h.closePopup({isDenied:!0,value:m})},Fp=(h,m)=>{h.closePopup({isConfirmed:!0,value:m})},jp=(h,m)=>{h.rejectPromise(m)},Hu=(h,m)=>{const b=Qe.innerParams.get(h||void 0);b.showLoaderOnConfirm&&Ho(),b.preConfirm?(h.resetValidationMessage(),Qe.awaitingPromise.set(h||void 0,!0),Promise.resolve().then(()=>p(b.preConfirm(m,b.validationMessage))).then(P=>{M(vt())||P===!1?(h.hideLoading(),Vs(h)):Fp(h,typeof P>"u"?m:P)}).catch(P=>jp(h||void 0,P))):Fp(h,m)},RC=(h,m,b)=>{Qe.innerParams.get(h).toast?HC(h,m,b):(jC(m),UC(m),zC(h,m,b))},HC=(h,m,b)=>{m.popup.onclick=()=>{const P=Qe.innerParams.get(h);P&&(FC(P)||P.timer||P.input)||b(Ro.close)}},FC=h=>h.showConfirmButton||h.showDenyButton||h.showCancelButton||h.showCloseButton;let ua=!1;const jC=h=>{h.popup.onmousedown=()=>{h.container.onmouseup=function(m){h.container.onmouseup=void 0,m.target===h.container&&(ua=!0)}}},UC=h=>{h.container.onmousedown=()=>{h.popup.onmouseup=function(m){h.popup.onmouseup=void 0,(m.target===h.popup||h.popup.contains(m.target))&&(ua=!0)}}},zC=(h,m,b)=>{m.container.onclick=P=>{const pe=Qe.innerParams.get(h);if(ua){ua=!1;return}P.target===m.container&&d(pe.allowOutsideClick)&&b(Ro.backdrop)}},KC=()=>M(Q()),Up=()=>Te()&&Te().click(),WC=()=>je()&&je().click(),qC=()=>W()&&W().click(),JC=(h,m,b,P)=>{m.keydownTarget&&m.keydownHandlerAdded&&(m.keydownTarget.removeEventListener("keydown",m.keydownHandler,{capture:m.keydownListenerCapture}),m.keydownHandlerAdded=!1),b.toast||(m.keydownHandler=pe=>YC(h,pe,P),m.keydownTarget=b.keydownListenerCapture?window:Q(),m.keydownListenerCapture=b.keydownListenerCapture,m.keydownTarget.addEventListener("keydown",m.keydownHandler,{capture:m.keydownListenerCapture}),m.keydownHandlerAdded=!0)},Fu=(h,m,b)=>{const P=H();if(P.length)return m=m+b,m===P.length?m=0:m===-1&&(m=P.length-1),P[m].focus();Q().focus()},zp=["ArrowRight","ArrowDown"],GC=["ArrowLeft","ArrowUp"],YC=(h,m,b)=>{const P=Qe.innerParams.get(h);P&&(m.isComposing||m.keyCode===229||(P.stopKeydownPropagation&&m.stopPropagation(),m.key==="Enter"?XC(h,m,P):m.key==="Tab"?ZC(m,P):[...zp,...GC].includes(m.key)?QC(m.key):m.key==="Escape"&&ex(m,P,b)))},XC=(h,m,b)=>{if(d(b.allowEnterKey)&&m.target&&h.getInput()&&m.target.outerHTML===h.getInput().outerHTML){if(["textarea","file"].includes(b.input))return;Up(),m.preventDefault()}},ZC=(h,m)=>{const b=h.target,P=H();let pe=-1;for(let Pe=0;Pe<P.length;Pe++)if(b===P[Pe]){pe=Pe;break}h.shiftKey?Fu(m,pe,-1):Fu(m,pe,1),h.stopPropagation(),h.preventDefault()},QC=h=>{const m=Te(),b=je(),P=W();if(![m,b,P].includes(document.activeElement))return;const pe=zp.includes(h)?"nextElementSibling":"previousElementSibling";let Pe=document.activeElement;for(let Lt=0;Lt<Z().children.length;Lt++){if(Pe=Pe[pe],!Pe)return;if(M(Pe)&&Pe instanceof HTMLButtonElement)break}Pe instanceof HTMLButtonElement&&Pe.focus()},ex=(h,m,b)=>{d(m.allowEscapeKey)&&(h.preventDefault(),b(Ro.esc))},tx=h=>typeof h=="object"&&h.jquery,Kp=h=>h instanceof Element||tx(h),nx=h=>{const m={};return typeof h[0]=="object"&&!Kp(h[0])?Object.assign(m,h[0]):["title","html","icon"].forEach((b,P)=>{const pe=h[P];typeof pe=="string"||Kp(pe)?m[b]=pe:pe!==void 0&&l("Unexpected type of ".concat(b,'! Expected "string" or "Element", got ').concat(typeof pe))}),m};function rx(){const h=this;for(var m=arguments.length,b=new Array(m),P=0;P<m;P++)b[P]=arguments[P];return new h(...b)}function ix(h){class m extends this{_main(P,pe){return super._main(P,Object.assign({},h,pe))}}return m}const ox=()=>xe.timeout&&xe.timeout.getTimerLeft(),Wp=()=>{if(xe.timeout)return Oe(),xe.timeout.stop()},qp=()=>{if(xe.timeout){const h=xe.timeout.start();return ie(h),h}},sx=()=>{const h=xe.timeout;return h&&(h.running?Wp():qp())},lx=h=>{if(xe.timeout){const m=xe.timeout.increase(h);return ie(m,!0),m}},ax=()=>xe.timeout&&xe.timeout.isRunning();let Jp=!1;const ju={};function cx(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";ju[h]=this,Jp||(document.body.addEventListener("click",ux),Jp=!0)}const ux=h=>{for(let m=h.target;m&&m!==document;m=m.parentNode)for(const b in ju){const P=m.getAttribute(b);if(P){ju[b].fire({template:P});return}}};var dx=Object.freeze({isValidParameter:D,isUpdatableParameter:k,isDeprecatedParameter:I,argsToParams:nx,isVisible:KC,clickConfirm:Up,clickDeny:WC,clickCancel:qC,getContainer:J,getPopup:Q,getTitle:We,getHtmlContainer:$e,getImage:et,getIcon:Ce,getInputLabel:dt,getCloseButton:N,getActions:Z,getConfirmButton:Te,getDenyButton:je,getCancelButton:W,getLoader:z,getFooter:X,getTimerProgressBar:fe,getFocusableElements:H,getValidationMessage:vt,isLoading:ee,fire:rx,mixin:ix,showLoading:Ho,enableLoading:Ho,getTimerLeft:ox,stopTimer:Wp,resumeTimer:qp,toggleTimer:sx,increaseTimer:lx,isTimerRunning:ax,bindClickHandler:cx});let Uu;class Fo{constructor(){if(typeof window>"u")return;Uu=this;for(var m=arguments.length,b=new Array(m),P=0;P<m;P++)b[P]=arguments[P];const pe=Object.freeze(this.constructor.argsToParams(b));Object.defineProperties(this,{params:{value:pe,writable:!1,enumerable:!0,configurable:!0}});const Pe=this._main(this.params);Qe.promise.set(this,Pe)}_main(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};T(Object.assign({},b,m)),xe.currentInstance&&(xe.currentInstance._destroy(),j()&&Ep()),xe.currentInstance=this;const P=hx(m,b);Kw(P),Object.freeze(P),xe.timeout&&(xe.timeout.stop(),delete xe.timeout),clearTimeout(xe.restoreFocusTimeout);const pe=px(this);return Op(this,P),Qe.innerParams.set(this,P),fx(this,pe,P)}then(m){return Qe.promise.get(this).then(m)}finally(m){return Qe.promise.get(this).finally(m)}}const fx=(h,m,b)=>new Promise((P,pe)=>{const Pe=Lt=>{h.closePopup({isDismissed:!0,dismiss:Lt})};Bs.swalPromiseResolve.set(h,P),Bs.swalPromiseReject.set(h,pe),m.confirmButton.onclick=()=>LC(h),m.denyButton.onclick=()=>IC(h),m.cancelButton.onclick=()=>BC(h,Pe),m.closeButton.onclick=()=>Pe(Ro.close),RC(h,m,Pe),JC(h,xe,b,Pe),lC(h,b),nC(b),mx(xe,b,Pe),gx(m,b),setTimeout(()=>{m.container.scrollTop=0})}),hx=(h,m)=>{const b=Lw(h),P=Object.assign({},y,m,b,h);return P.showClass=Object.assign({},y.showClass,P.showClass),P.hideClass=Object.assign({},y.hideClass,P.hideClass),P},px=h=>{const m={popup:Q(),container:J(),actions:Z(),confirmButton:Te(),denyButton:je(),cancelButton:W(),loader:z(),closeButton:N(),validationMessage:vt(),progressSteps:rt()};return Qe.domCache.set(h,m),m},mx=(h,m,b)=>{const P=fe();v(P),m.timer&&(h.timeout=new Ww(()=>{b("timer"),delete h.timeout},m.timer),m.timerProgressBar&&(E(P),ge(P,m,"timerProgressBar"),setTimeout(()=>{h.timeout&&h.timeout.running&&ie(m.timer)})))},gx=(h,m)=>{if(!m.toast){if(!d(m.allowEnterKey))return vx();yx(h,m)||Fu(m,-1,1)}},yx=(h,m)=>m.focusDeny&&M(h.denyButton)?(h.denyButton.focus(),!0):m.focusCancel&&M(h.cancelButton)?(h.cancelButton.focus(),!0):m.focusConfirm&&M(h.confirmButton)?(h.confirmButton.focus(),!0):!1,vx=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(Fo.prototype,Rp),Object.assign(Fo,dx),Object.keys(Rp).forEach(h=>{Fo[h]=function(){if(Uu)return Uu[h](...arguments)}}),Fo.DismissReason=Ro,Fo.version="11.4.4";const da=Fo;return da.default=da,da}),typeof vi<"u"&&vi.Sweetalert2&&(vi.swal=vi.sweetAlert=vi.Swal=vi.SweetAlert=vi.Sweetalert2)})(yw);var xL=yw.exports;const Va=CL(xL);class SL{static install(e,n={}){var r;const i=Va.mixin(n),o=function(...s){return i.fire.call(i,...s)};Object.assign(o,Va),Object.keys(Va).filter(s=>typeof Va[s]=="function").forEach(s=>{o[s]=i[s].bind(i)}),(r=e.config)!=null&&r.globalProperties&&!e.config.globalProperties.$swal?(e.config.globalProperties.$swal=o,e.provide("$swal",o)):Object.prototype.hasOwnProperty.call(e,"$swal")||(e.prototype.$swal=o,e.swal=o)}}const vw=Qk(wL);vw.use(SL);vw.mount("#app");
