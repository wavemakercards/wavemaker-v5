(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const vt={},Io=[],Tr=()=>{},uw=()=>!1,ic=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Yd=t=>t.startsWith("onUpdate:"),hn=Object.assign,Xd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},dw=Object.prototype.hasOwnProperty,dt=(t,e)=>dw.call(t,e),Re=Array.isArray,Lo=t=>dl(t)==="[object Map]",oc=t=>dl(t)==="[object Set]",Nh=t=>dl(t)==="[object Date]",qe=t=>typeof t=="function",Vt=t=>typeof t=="string",Or=t=>typeof t=="symbol",St=t=>t!==null&&typeof t=="object",Qm=t=>(St(t)||qe(t))&&qe(t.then)&&qe(t.catch),eg=Object.prototype.toString,dl=t=>eg.call(t),fw=t=>dl(t).slice(8,-1),tg=t=>dl(t)==="[object Object]",Zd=t=>Vt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Cs=Gd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},hw=/-(\w)/g,sr=sc(t=>t.replace(hw,(e,n)=>n?n.toUpperCase():"")),pw=/\B([A-Z])/g,co=sc(t=>t.replace(pw,"-$1").toLowerCase()),lc=sc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Uc=sc(t=>t?`on${lc(t)}`:""),yi=(t,e)=>!Object.is(t,e),Gl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ng=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Ru=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ph;const ac=()=>Ph||(Ph=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dr(t){if(Re(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Vt(r)?bw(r):dr(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(Vt(t)||St(t))return t}const mw=/;(?![^(]*\))/g,gw=/:([^]+)/,yw=/\/\*[^]*?\*\//g;function bw(t){const e={};return t.replace(yw,"").split(mw).forEach(n=>{if(n){const r=n.split(gw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function rr(t){let e="";if(Vt(t))e=t;else if(Re(t))for(let n=0;n<t.length;n++){const r=rr(t[n]);r&&(e+=r+" ")}else if(St(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const vw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ww=Gd(vw);function rg(t){return!!t||t===""}function kw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=cc(t[r],e[r]);return n}function cc(t,e){if(t===e)return!0;let n=Nh(t),r=Nh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Or(t),r=Or(e),n||r)return t===e;if(n=Re(t),r=Re(e),n||r)return n&&r?kw(t,e):!1;if(n=St(t),r=St(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const s in t){const l=t.hasOwnProperty(s),a=e.hasOwnProperty(s);if(l&&!a||!l&&a||!cc(t[s],e[s]))return!1}}return String(t)===String(e)}function ig(t,e){return t.findIndex(n=>cc(n,e))}const og=t=>!!(t&&t.__v_isRef===!0),Cn=t=>Vt(t)?t:t==null?"":Re(t)||St(t)&&(t.toString===eg||!qe(t.toString))?og(t)?Cn(t.value):JSON.stringify(t,sg,2):String(t),sg=(t,e)=>og(e)?sg(t,e.value):Lo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],o)=>(n[Wc(r,o)+" =>"]=i,n),{})}:oc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Wc(n))}:Or(e)?Wc(e):St(e)&&!Re(e)&&!tg(e)?String(e):e,Wc=(t,e="")=>{var n;return Or(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kn;class xw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kn,!e&&kn&&(this.index=(kn.scopes||(kn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=kn;try{return kn=this,e()}finally{kn=n}}}on(){kn=this}off(){kn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function lg(){return kn}function Sw(t,e=!1){kn&&kn.cleanups.push(t)}let xt;const qc=new WeakSet;class ag{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kn&&kn.active&&kn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qc.has(this)&&(qc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ug(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$h(this),dg(this);const e=xt,n=pr;xt=this,pr=!0;try{return this.fn()}finally{fg(this),xt=e,pr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)tf(e);this.deps=this.depsTail=void 0,$h(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vu(this)&&this.run()}get dirty(){return Vu(this)}}let cg=0,Ts,Es;function ug(t,e=!1){if(t.flags|=8,e){t.next=Es,Es=t;return}t.next=Ts,Ts=t}function Qd(){cg++}function ef(){if(--cg>0)return;if(Es){let e=Es;for(Es=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ts;){let e=Ts;for(Ts=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function dg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function fg(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),tf(r),Cw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Vu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(hg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function hg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ks))return;t.globalVersion=Ks;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Vu(t)){t.flags&=-3;return}const n=xt,r=pr;xt=t,pr=!0;try{dg(t);const i=t.fn(t._value);(e.version===0||yi(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{xt=n,pr=r,fg(t),t.flags&=-3}}function tf(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)tf(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Cw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let pr=!0;const pg=[];function Ai(){pg.push(pr),pr=!1}function Mi(){const t=pg.pop();pr=t===void 0?!0:t}function $h(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=xt;xt=void 0;try{e()}finally{xt=n}}}let Ks=0;class Tw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class uc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!xt||!pr||xt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xt)n=this.activeLink=new Tw(xt,this),xt.deps?(n.prevDep=xt.depsTail,xt.depsTail.nextDep=n,xt.depsTail=n):xt.deps=xt.depsTail=n,mg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=xt.depsTail,n.nextDep=void 0,xt.depsTail.nextDep=n,xt.depsTail=n,xt.deps===n&&(xt.deps=r)}return n}trigger(e){this.version++,Ks++,this.notify(e)}notify(e){Qd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ef()}}}function mg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)mg(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const va=new WeakMap,Ji=Symbol(""),Fu=Symbol(""),Us=Symbol("");function an(t,e,n){if(pr&&xt){let r=va.get(t);r||va.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new uc),i.map=r,i.key=n),i.track()}}function Fr(t,e,n,r,i,o){const s=va.get(t);if(!s){Ks++;return}const l=a=>{a&&a.trigger()};if(Qd(),e==="clear")s.forEach(l);else{const a=Re(t),c=a&&Zd(n);if(a&&n==="length"){const u=Number(r);s.forEach((d,h)=>{(h==="length"||h===Us||!Or(h)&&h>=u)&&l(d)})}else switch((n!==void 0||s.has(void 0))&&l(s.get(n)),c&&l(s.get(Us)),e){case"add":a?c&&l(s.get("length")):(l(s.get(Ji)),Lo(t)&&l(s.get(Fu)));break;case"delete":a||(l(s.get(Ji)),Lo(t)&&l(s.get(Fu)));break;case"set":Lo(t)&&l(s.get(Ji));break}}ef()}function Ew(t,e){const n=va.get(t);return n&&n.get(e)}function bo(t){const e=ct(t);return e===t?e:(an(e,"iterate",Us),ir(t)?e:e.map(cn))}function dc(t){return an(t=ct(t),"iterate",Us),t}const Ow={__proto__:null,[Symbol.iterator](){return Jc(this,Symbol.iterator,cn)},concat(...t){return bo(this).concat(...t.map(e=>Re(e)?bo(e):e))},entries(){return Jc(this,"entries",t=>(t[1]=cn(t[1]),t))},every(t,e){return Dr(this,"every",t,e,void 0,arguments)},filter(t,e){return Dr(this,"filter",t,e,n=>n.map(cn),arguments)},find(t,e){return Dr(this,"find",t,e,cn,arguments)},findIndex(t,e){return Dr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Dr(this,"findLast",t,e,cn,arguments)},findLastIndex(t,e){return Dr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Dr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Gc(this,"includes",t)},indexOf(...t){return Gc(this,"indexOf",t)},join(t){return bo(this).join(t)},lastIndexOf(...t){return Gc(this,"lastIndexOf",t)},map(t,e){return Dr(this,"map",t,e,void 0,arguments)},pop(){return us(this,"pop")},push(...t){return us(this,"push",t)},reduce(t,...e){return Dh(this,"reduce",t,e)},reduceRight(t,...e){return Dh(this,"reduceRight",t,e)},shift(){return us(this,"shift")},some(t,e){return Dr(this,"some",t,e,void 0,arguments)},splice(...t){return us(this,"splice",t)},toReversed(){return bo(this).toReversed()},toSorted(t){return bo(this).toSorted(t)},toSpliced(...t){return bo(this).toSpliced(...t)},unshift(...t){return us(this,"unshift",t)},values(){return Jc(this,"values",cn)}};function Jc(t,e,n){const r=dc(t),i=r[e]();return r!==t&&!ir(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const Aw=Array.prototype;function Dr(t,e,n,r,i,o){const s=dc(t),l=s!==t&&!ir(t),a=s[e];if(a!==Aw[e]){const d=a.apply(t,o);return l?cn(d):d}let c=n;s!==t&&(l?c=function(d,h){return n.call(this,cn(d),h,t)}:n.length>2&&(c=function(d,h){return n.call(this,d,h,t)}));const u=a.call(s,c,r);return l&&i?i(u):u}function Dh(t,e,n,r){const i=dc(t);let o=n;return i!==t&&(ir(t)?n.length>3&&(o=function(s,l,a){return n.call(this,s,l,a,t)}):o=function(s,l,a){return n.call(this,s,cn(l),a,t)}),i[e](o,...r)}function Gc(t,e,n){const r=ct(t);an(r,"iterate",Us);const i=r[e](...n);return(i===-1||i===!1)&&of(n[0])?(n[0]=ct(n[0]),r[e](...n)):i}function us(t,e,n=[]){Ai(),Qd();const r=ct(t)[e].apply(t,n);return ef(),Mi(),r}const Mw=Gd("__proto__,__v_isRef,__isVue"),gg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Or));function _w(t){Or(t)||(t=String(t));const e=ct(this);return an(e,"has",t),e.hasOwnProperty(t)}class yg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?Fw:kg:o?wg:vg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Re(e);if(!i){let a;if(s&&(a=Ow[n]))return a;if(n==="hasOwnProperty")return _w}const l=Reflect.get(e,n,Bt(e)?e:r);return(Or(n)?gg.has(n):Mw(n))||(i||an(e,"get",n),o)?l:Bt(l)?s&&Zd(n)?l:l.value:St(l)?i?xg(l):fc(l):l}}class bg extends yg{constructor(e=!1){super(!1,e)}set(e,n,r,i){let o=e[n];if(!this._isShallow){const a=no(o);if(!ir(r)&&!no(r)&&(o=ct(o),r=ct(r)),!Re(e)&&Bt(o)&&!Bt(r))return a?!1:(o.value=r,!0)}const s=Re(e)&&Zd(n)?Number(n)<e.length:dt(e,n),l=Reflect.set(e,n,r,Bt(e)?e:i);return e===ct(i)&&(s?yi(r,o)&&Fr(e,"set",n,r):Fr(e,"add",n,r)),l}deleteProperty(e,n){const r=dt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Fr(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Or(n)||!gg.has(n))&&an(e,"has",n),r}ownKeys(e){return an(e,"iterate",Re(e)?"length":Ji),Reflect.ownKeys(e)}}class Nw extends yg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Pw=new bg,$w=new Nw,Dw=new bg(!0);const Hu=t=>t,Tl=t=>Reflect.getPrototypeOf(t);function Iw(t,e,n){return function(...r){const i=this.__v_raw,o=ct(i),s=Lo(o),l=t==="entries"||t===Symbol.iterator&&s,a=t==="keys"&&s,c=i[t](...r),u=n?Hu:e?ju:cn;return!e&&an(o,"iterate",a?Fu:Ji),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:l?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function El(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Lw(t,e){const n={get(i){const o=this.__v_raw,s=ct(o),l=ct(i);t||(yi(i,l)&&an(s,"get",i),an(s,"get",l));const{has:a}=Tl(s),c=e?Hu:t?ju:cn;if(a.call(s,i))return c(o.get(i));if(a.call(s,l))return c(o.get(l));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!t&&an(ct(i),"iterate",Ji),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,s=ct(o),l=ct(i);return t||(yi(i,l)&&an(s,"has",i),an(s,"has",l)),i===l?o.has(i):o.has(i)||o.has(l)},forEach(i,o){const s=this,l=s.__v_raw,a=ct(l),c=e?Hu:t?ju:cn;return!t&&an(a,"iterate",Ji),l.forEach((u,d)=>i.call(o,c(u),c(d),s))}};return hn(n,t?{add:El("add"),set:El("set"),delete:El("delete"),clear:El("clear")}:{add(i){!e&&!ir(i)&&!no(i)&&(i=ct(i));const o=ct(this);return Tl(o).has.call(o,i)||(o.add(i),Fr(o,"add",i,i)),this},set(i,o){!e&&!ir(o)&&!no(o)&&(o=ct(o));const s=ct(this),{has:l,get:a}=Tl(s);let c=l.call(s,i);c||(i=ct(i),c=l.call(s,i));const u=a.call(s,i);return s.set(i,o),c?yi(o,u)&&Fr(s,"set",i,o):Fr(s,"add",i,o),this},delete(i){const o=ct(this),{has:s,get:l}=Tl(o);let a=s.call(o,i);a||(i=ct(i),a=s.call(o,i)),l&&l.call(o,i);const c=o.delete(i);return a&&Fr(o,"delete",i,void 0),c},clear(){const i=ct(this),o=i.size!==0,s=i.clear();return o&&Fr(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Iw(i,t,e)}),n}function nf(t,e){const n=Lw(t,e);return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(dt(n,i)&&i in r?n:r,i,o)}const Bw={get:nf(!1,!1)},Rw={get:nf(!1,!0)},Vw={get:nf(!0,!1)};const vg=new WeakMap,wg=new WeakMap,kg=new WeakMap,Fw=new WeakMap;function Hw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jw(t){return t.__v_skip||!Object.isExtensible(t)?0:Hw(fw(t))}function fc(t){return no(t)?t:rf(t,!1,Pw,Bw,vg)}function zw(t){return rf(t,!1,Dw,Rw,wg)}function xg(t){return rf(t,!0,$w,Vw,kg)}function rf(t,e,n,r,i){if(!St(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=jw(t);if(s===0)return t;const l=new Proxy(t,s===2?r:n);return i.set(t,l),l}function Bo(t){return no(t)?Bo(t.__v_raw):!!(t&&t.__v_isReactive)}function no(t){return!!(t&&t.__v_isReadonly)}function ir(t){return!!(t&&t.__v_isShallow)}function of(t){return t?!!t.__v_raw:!1}function ct(t){const e=t&&t.__v_raw;return e?ct(e):t}function Sg(t){return!dt(t,"__v_skip")&&Object.isExtensible(t)&&ng(t,"__v_skip",!0),t}const cn=t=>St(t)?fc(t):t,ju=t=>St(t)?xg(t):t;function Bt(t){return t?t.__v_isRef===!0:!1}function sf(t){return Kw(t,!1)}function Kw(t,e){return Bt(t)?t:new Uw(t,e)}class Uw{constructor(e,n){this.dep=new uc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ct(e),this._value=n?e:cn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ir(e)||no(e);e=r?e:ct(e),yi(e,n)&&(this._rawValue=e,this._value=r?e:cn(e),this.dep.trigger())}}function wn(t){return Bt(t)?t.value:t}const Ww={get:(t,e,n)=>e==="__v_raw"?t:wn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Bt(i)&&!Bt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Cg(t){return Bo(t)?t:new Proxy(t,Ww)}class qw{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new uc,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Jw(t){return new qw(t)}function Gw(t){const e=Re(t)?new Array(t.length):{};for(const n in t)e[n]=Xw(t,n);return e}class Yw{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ew(ct(this._object),this._key)}}function Xw(t,e,n){const r=t[e];return Bt(r)?r:new Yw(t,e,n)}class Zw{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new uc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return ug(this,!0),!0}get value(){const e=this.dep.track();return hg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Qw(t,e,n=!1){let r,i;return qe(t)?r=t:(r=t.get,i=t.set),new Zw(r,i,n)}const Ol={},wa=new WeakMap;let Vi;function ek(t,e=!1,n=Vi){if(n){let r=wa.get(n);r||wa.set(n,r=[]),r.push(t)}}function tk(t,e,n=vt){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:l,call:a}=n,c=L=>i?L:ir(L)||i===!1||i===0?Hr(L,1):Hr(L);let u,d,h,m,g=!1,b=!1;if(Bt(t)?(d=()=>t.value,g=ir(t)):Bo(t)?(d=()=>c(t),g=!0):Re(t)?(b=!0,g=t.some(L=>Bo(L)||ir(L)),d=()=>t.map(L=>{if(Bt(L))return L.value;if(Bo(L))return c(L);if(qe(L))return a?a(L,2):L()})):qe(t)?e?d=a?()=>a(t,2):t:d=()=>{if(h){Ai();try{h()}finally{Mi()}}const L=Vi;Vi=u;try{return a?a(t,3,[m]):t(m)}finally{Vi=L}}:d=Tr,e&&i){const L=d,D=i===!0?1/0:i;d=()=>Hr(L(),D)}const x=lg(),E=()=>{u.stop(),x&&x.active&&Xd(x.effects,u)};if(o&&e){const L=e;e=(...D)=>{L(...D),E()}}let M=b?new Array(t.length).fill(Ol):Ol;const P=L=>{if(!(!(u.flags&1)||!u.dirty&&!L))if(e){const D=u.run();if(i||g||(b?D.some((V,H)=>yi(V,M[H])):yi(D,M))){h&&h();const V=Vi;Vi=u;try{const H=[D,M===Ol?void 0:b&&M[0]===Ol?[]:M,m];a?a(e,3,H):e(...H),M=D}finally{Vi=V}}}else u.run()};return l&&l(P),u=new ag(d),u.scheduler=s?()=>s(P,!1):P,m=L=>ek(L,!1,u),h=u.onStop=()=>{const L=wa.get(u);if(L){if(a)a(L,4);else for(const D of L)D();wa.delete(u)}},e?r?P(!0):M=u.run():s?s(P.bind(null,!0),!0):u.run(),E.pause=u.pause.bind(u),E.resume=u.resume.bind(u),E.stop=E,E}function Hr(t,e=1/0,n){if(e<=0||!St(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Bt(t))Hr(t.value,e,n);else if(Re(t))for(let r=0;r<t.length;r++)Hr(t[r],e,n);else if(oc(t)||Lo(t))t.forEach(r=>{Hr(r,e,n)});else if(tg(t)){for(const r in t)Hr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Hr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fl(t,e,n,r){try{return r?t(...r):t()}catch(i){hc(i,e,n)}}function Ar(t,e,n,r){if(qe(t)){const i=fl(t,e,n,r);return i&&Qm(i)&&i.catch(o=>{hc(o,e,n)}),i}if(Re(t)){const i=[];for(let o=0;o<t.length;o++)i.push(Ar(t[o],e,n,r));return i}}function hc(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||vt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,a,c)===!1)return}l=l.parent}if(o){Ai(),fl(o,null,10,[t,a,c]),Mi();return}}nk(t,n,i,r,s)}function nk(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const xn=[];let wr=-1;const Ro=[];let ii=null,To=0;const Tg=Promise.resolve();let ka=null;function pc(t){const e=ka||Tg;return t?e.then(this?t.bind(this):t):e}function rk(t){let e=wr+1,n=xn.length;for(;e<n;){const r=e+n>>>1,i=xn[r],o=Ws(i);o<t||o===t&&i.flags&2?e=r+1:n=r}return e}function lf(t){if(!(t.flags&1)){const e=Ws(t),n=xn[xn.length-1];!n||!(t.flags&2)&&e>=Ws(n)?xn.push(t):xn.splice(rk(e),0,t),t.flags|=1,Eg()}}function Eg(){ka||(ka=Tg.then(Ag))}function ik(t){Re(t)?Ro.push(...t):ii&&t.id===-1?ii.splice(To+1,0,t):t.flags&1||(Ro.push(t),t.flags|=1),Eg()}function Ih(t,e,n=wr+1){for(;n<xn.length;n++){const r=xn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;xn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Og(t){if(Ro.length){const e=[...new Set(Ro)].sort((n,r)=>Ws(n)-Ws(r));if(Ro.length=0,ii){ii.push(...e);return}for(ii=e,To=0;To<ii.length;To++){const n=ii[To];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ii=null,To=0}}const Ws=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ag(t){try{for(wr=0;wr<xn.length;wr++){const e=xn[wr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;wr<xn.length;wr++){const e=xn[wr];e&&(e.flags&=-2)}wr=-1,xn.length=0,Og(),ka=null,(xn.length||Ro.length)&&Ag()}}let In=null,Mg=null;function xa(t){const e=In;return In=t,Mg=t&&t.type.__scopeId||null,e}function af(t,e=In,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Uh(-1);const o=xa(e);let s;try{s=t(...i)}finally{xa(o),r._d&&Uh(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Nt(t,e){if(In===null)return t;const n=vc(In),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,l,a=vt]=e[i];o&&(qe(o)&&(o={mounted:o,updated:o}),o.deep&&Hr(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:l,modifiers:a}))}return t}function Di(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const l=i[s];o&&(l.oldValue=o[s].value);let a=l.dir[r];a&&(Ai(),Ar(a,n,8,[t.el,l,t,e]),Mi())}}const ok=Symbol("_vte"),sk=t=>t.__isTeleport;function cf(t,e){t.shapeFlag&6&&t.component?(t.transition=e,cf(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function _g(t,e){return qe(t)?hn({name:t.name},e,{setup:t}):t}function Ng(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Sa(t,e,n,r,i=!1){if(Re(t)){t.forEach((g,b)=>Sa(g,e&&(Re(e)?e[b]:e),n,r,i));return}if(Os(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Sa(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?vc(r.component):r.el,s=i?null:o,{i:l,r:a}=t,c=e&&e.r,u=l.refs===vt?l.refs={}:l.refs,d=l.setupState,h=ct(d),m=d===vt?()=>!1:g=>dt(h,g);if(c!=null&&c!==a&&(Vt(c)?(u[c]=null,m(c)&&(d[c]=null)):Bt(c)&&(c.value=null)),qe(a))fl(a,l,12,[s,u]);else{const g=Vt(a),b=Bt(a);if(g||b){const x=()=>{if(t.f){const E=g?m(a)?d[a]:u[a]:a.value;i?Re(E)&&Xd(E,o):Re(E)?E.includes(o)||E.push(o):g?(u[a]=[o],m(a)&&(d[a]=u[a])):(a.value=[o],t.k&&(u[t.k]=a.value))}else g?(u[a]=s,m(a)&&(d[a]=s)):b&&(a.value=s,t.k&&(u[t.k]=s))};s?(x.id=-1,Kn(x,n)):x()}}}ac().requestIdleCallback;ac().cancelIdleCallback;const Os=t=>!!t.type.__asyncLoader,Pg=t=>t.type.__isKeepAlive;function lk(t,e){$g(t,"a",e)}function ak(t,e){$g(t,"da",e)}function $g(t,e,n=nn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(mc(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Pg(i.parent.vnode)&&ck(r,e,n,i),i=i.parent}}function ck(t,e,n,r){const i=mc(e,t,r,!0);uf(()=>{Xd(r[e],i)},n)}function mc(t,e,n=nn,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{Ai();const l=hl(n),a=Ar(e,n,t,s);return l(),Mi(),a});return r?i.unshift(o):i.push(o),o}}const Zr=t=>(e,n=nn)=>{(!Js||t==="sp")&&mc(t,(...r)=>e(...r),n)},uk=Zr("bm"),Dg=Zr("m"),dk=Zr("bu"),fk=Zr("u"),Ig=Zr("bum"),uf=Zr("um"),hk=Zr("sp"),pk=Zr("rtg"),mk=Zr("rtc");function gk(t,e=nn){mc("ec",t,e)}const Lg="components",yk="directives";function Je(t,e){return Bg(Lg,t,!0,e)||t}const bk=Symbol.for("v-ndc");function vk(t){return Bg(yk,t)}function Bg(t,e,n=!0,r=!1){const i=In||nn;if(i){const o=i.type;if(t===Lg){const l=sx(o,!1);if(l&&(l===e||l===sr(e)||l===lc(sr(e))))return o}const s=Lh(i[t]||o[t],e)||Lh(i.appContext[t],e);return!s&&r?o:s}}function Lh(t,e){return t&&(t[e]||t[sr(e)]||t[lc(sr(e))])}function rn(t,e,n,r){let i;const o=n,s=Re(t);if(s||Vt(t)){const l=s&&Bo(t);let a=!1;l&&(a=!ir(t),t=dc(t)),i=new Array(t.length);for(let c=0,u=t.length;c<u;c++)i[c]=e(a?cn(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,o)}else if(St(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,o));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];i[a]=e(t[u],u,a,o)}}else i=[];return i}const zu=t=>t?iy(t)?vc(t):zu(t.parent):null,As=hn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>zu(t.parent),$root:t=>zu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Vg(t),$forceUpdate:t=>t.f||(t.f=()=>{lf(t.update)}),$nextTick:t=>t.n||(t.n=pc.bind(t.proxy)),$watch:t=>jk.bind(t)}),Yc=(t,e)=>t!==vt&&!t.__isScriptSetup&&dt(t,e),wk={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const m=s[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(Yc(r,e))return s[e]=1,r[e];if(i!==vt&&dt(i,e))return s[e]=2,i[e];if((c=t.propsOptions[0])&&dt(c,e))return s[e]=3,o[e];if(n!==vt&&dt(n,e))return s[e]=4,n[e];Ku&&(s[e]=0)}}const u=As[e];let d,h;if(u)return e==="$attrs"&&an(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==vt&&dt(n,e))return s[e]=4,n[e];if(h=a.config.globalProperties,dt(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return Yc(i,e)?(i[e]=n,!0):r!==vt&&dt(r,e)?(r[e]=n,!0):dt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let l;return!!n[s]||t!==vt&&dt(t,s)||Yc(e,s)||(l=o[0])&&dt(l,s)||dt(r,s)||dt(As,s)||dt(i.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:dt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Bh(t){return Re(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ku=!0;function kk(t){const e=Vg(t),n=t.proxy,r=t.ctx;Ku=!1,e.beforeCreate&&Rh(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:g,activated:b,deactivated:x,beforeDestroy:E,beforeUnmount:M,destroyed:P,unmounted:L,render:D,renderTracked:V,renderTriggered:H,errorCaptured:U,serverPrefetch:O,expose:k,inheritAttrs:F,components:C,directives:de,filters:ee}=e;if(c&&xk(c,r,null),s)for(const te in s){const Ae=s[te];qe(Ae)&&(r[te]=Ae.bind(n))}if(i){const te=i.call(n,n);St(te)&&(t.data=fc(te))}if(Ku=!0,o)for(const te in o){const Ae=o[te],tt=qe(Ae)?Ae.bind(n,n):qe(Ae.get)?Ae.get.bind(n,n):Tr,Ue=!qe(Ae)&&qe(Ae.set)?Ae.set.bind(n):Tr,it=Ju({get:tt,set:Ue});Object.defineProperty(r,te,{enumerable:!0,configurable:!0,get:()=>it.value,set:ht=>it.value=ht})}if(l)for(const te in l)Rg(l[te],r,n,te);if(a){const te=qe(a)?a.call(n):a;Reflect.ownKeys(te).forEach(Ae=>{Ak(Ae,te[Ae])})}u&&Rh(u,t,"c");function be(te,Ae){Re(Ae)?Ae.forEach(tt=>te(tt.bind(n))):Ae&&te(Ae.bind(n))}if(be(uk,d),be(Dg,h),be(dk,m),be(fk,g),be(lk,b),be(ak,x),be(gk,U),be(mk,V),be(pk,H),be(Ig,M),be(uf,L),be(hk,O),Re(k))if(k.length){const te=t.exposed||(t.exposed={});k.forEach(Ae=>{Object.defineProperty(te,Ae,{get:()=>n[Ae],set:tt=>n[Ae]=tt})})}else t.exposed||(t.exposed={});D&&t.render===Tr&&(t.render=D),F!=null&&(t.inheritAttrs=F),C&&(t.components=C),de&&(t.directives=de),O&&Ng(t)}function xk(t,e,n=Tr){Re(t)&&(t=Uu(t));for(const r in t){const i=t[r];let o;St(i)?"default"in i?o=Yl(i.from||r,i.default,!0):o=Yl(i.from||r):o=Yl(i),Bt(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function Rh(t,e,n){Ar(Re(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Rg(t,e,n,r){let i=r.includes(".")?Zg(n,r):()=>n[r];if(Vt(t)){const o=e[t];qe(o)&&Xl(i,o)}else if(qe(t))Xl(i,t.bind(n));else if(St(t))if(Re(t))t.forEach(o=>Rg(o,e,n,r));else{const o=qe(t.handler)?t.handler.bind(n):e[t.handler];qe(o)&&Xl(i,o,t)}}function Vg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,l=o.get(e);let a;return l?a=l:!i.length&&!n&&!r?a=e:(a={},i.length&&i.forEach(c=>Ca(a,c,s,!0)),Ca(a,e,s)),St(e)&&o.set(e,a),a}function Ca(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Ca(t,o,n,!0),i&&i.forEach(s=>Ca(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const l=Sk[s]||n&&n[s];t[s]=l?l(t[s],e[s]):e[s]}return t}const Sk={data:Vh,props:Fh,emits:Fh,methods:ps,computed:ps,beforeCreate:bn,created:bn,beforeMount:bn,mounted:bn,beforeUpdate:bn,updated:bn,beforeDestroy:bn,beforeUnmount:bn,destroyed:bn,unmounted:bn,activated:bn,deactivated:bn,errorCaptured:bn,serverPrefetch:bn,components:ps,directives:ps,watch:Tk,provide:Vh,inject:Ck};function Vh(t,e){return e?t?function(){return hn(qe(t)?t.call(this,this):t,qe(e)?e.call(this,this):e)}:e:t}function Ck(t,e){return ps(Uu(t),Uu(e))}function Uu(t){if(Re(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bn(t,e){return t?[...new Set([].concat(t,e))]:e}function ps(t,e){return t?hn(Object.create(null),t,e):e}function Fh(t,e){return t?Re(t)&&Re(e)?[...new Set([...t,...e])]:hn(Object.create(null),Bh(t),Bh(e??{})):e}function Tk(t,e){if(!t)return e;if(!e)return t;const n=hn(Object.create(null),t);for(const r in e)n[r]=bn(t[r],e[r]);return n}function Fg(){return{app:null,config:{isNativeTag:uw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ek=0;function Ok(t,e){return function(r,i=null){qe(r)||(r=hn({},r)),i!=null&&!St(i)&&(i=null);const o=Fg(),s=new WeakSet,l=[];let a=!1;const c=o.app={_uid:Ek++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:ax,get config(){return o.config},set config(u){},use(u,...d){return s.has(u)||(u&&qe(u.install)?(s.add(u),u.install(c,...d)):qe(u)&&(s.add(u),u(c,...d))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,d){return d?(o.components[u]=d,c):o.components[u]},directive(u,d){return d?(o.directives[u]=d,c):o.directives[u]},mount(u,d,h){if(!a){const m=c._ceVNode||yt(r,i);return m.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,c._container=u,u.__vue_app__=c,vc(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Ar(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return o.provides[u]=d,c},runWithContext(u){const d=Vo;Vo=c;try{return u()}finally{Vo=d}}};return c}}let Vo=null;function Ak(t,e){if(nn){let n=nn.provides;const r=nn.parent&&nn.parent.provides;r===n&&(n=nn.provides=Object.create(r)),n[t]=e}}function Yl(t,e,n=!1){const r=nn||In;if(r||Vo){const i=Vo?Vo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&qe(e)?e.call(r&&r.proxy):e}}const Hg={},jg=()=>Object.create(Hg),zg=t=>Object.getPrototypeOf(t)===Hg;function Mk(t,e,n,r=!1){const i={},o=jg();t.propsDefaults=Object.create(null),Kg(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:zw(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function _k(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,l=ct(i),[a]=t.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(gc(t.emitsOptions,h))continue;const m=e[h];if(a)if(dt(o,h))m!==o[h]&&(o[h]=m,c=!0);else{const g=sr(h);i[g]=Wu(a,l,g,m,t,!1)}else m!==o[h]&&(o[h]=m,c=!0)}}}else{Kg(t,e,i,o)&&(c=!0);let u;for(const d in l)(!e||!dt(e,d)&&((u=co(d))===d||!dt(e,u)))&&(a?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Wu(a,l,d,void 0,t,!0)):delete i[d]);if(o!==l)for(const d in o)(!e||!dt(e,d))&&(delete o[d],c=!0)}c&&Fr(t.attrs,"set","")}function Kg(t,e,n,r){const[i,o]=t.propsOptions;let s=!1,l;if(e)for(let a in e){if(Cs(a))continue;const c=e[a];let u;i&&dt(i,u=sr(a))?!o||!o.includes(u)?n[u]=c:(l||(l={}))[u]=c:gc(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=ct(n),c=l||vt;for(let u=0;u<o.length;u++){const d=o[u];n[d]=Wu(i,a,d,c[d],t,!dt(c,d))}}return s}function Wu(t,e,n,r,i,o){const s=t[n];if(s!=null){const l=dt(s,"default");if(l&&r===void 0){const a=s.default;if(s.type!==Function&&!s.skipFactory&&qe(a)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=hl(i);r=c[n]=a.call(null,e),u()}}else r=a;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!l?r=!1:s[1]&&(r===""||r===co(n))&&(r=!0))}return r}const Nk=new WeakMap;function Ug(t,e,n=!1){const r=n?Nk:e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},l=[];let a=!1;if(!qe(t)){const u=d=>{a=!0;const[h,m]=Ug(d,e,!0);hn(s,h),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!a)return St(t)&&r.set(t,Io),Io;if(Re(o))for(let u=0;u<o.length;u++){const d=sr(o[u]);Hh(d)&&(s[d]=vt)}else if(o)for(const u in o){const d=sr(u);if(Hh(d)){const h=o[u],m=s[d]=Re(h)||qe(h)?{type:h}:hn({},h),g=m.type;let b=!1,x=!0;if(Re(g))for(let E=0;E<g.length;++E){const M=g[E],P=qe(M)&&M.name;if(P==="Boolean"){b=!0;break}else P==="String"&&(x=!1)}else b=qe(g)&&g.name==="Boolean";m[0]=b,m[1]=x,(b||dt(m,"default"))&&l.push(d)}}const c=[s,l];return St(t)&&r.set(t,c),c}function Hh(t){return t[0]!=="$"&&!Cs(t)}const Wg=t=>t[0]==="_"||t==="$stable",df=t=>Re(t)?t.map(Sr):[Sr(t)],Pk=(t,e,n)=>{if(e._n)return e;const r=af((...i)=>df(e(...i)),n);return r._c=!1,r},qg=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Wg(i))continue;const o=t[i];if(qe(o))e[i]=Pk(i,o,r);else if(o!=null){const s=df(o);e[i]=()=>s}}},Jg=(t,e)=>{const n=df(e);t.slots.default=()=>n},Gg=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},$k=(t,e,n)=>{const r=t.slots=jg();if(t.vnode.shapeFlag&32){const i=e._;i?(Gg(r,e,n),n&&ng(r,"_",i,!0)):qg(e,r)}else e&&Jg(t,e)},Dk=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=vt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?o=!1:Gg(i,e,n):(o=!e.$stable,qg(e,i)),s=e}else e&&(Jg(t,e),s={default:1});if(o)for(const l in i)!Wg(l)&&s[l]==null&&delete i[l]},Kn=Gk;function Ik(t){return Lk(t)}function Lk(t,e){const n=ac();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=Tr,insertStaticContent:g}=t,b=(A,N,B,R=null,W=null,G=null,oe=void 0,Y=null,Z=!!N.dynamicChildren)=>{if(A===N)return;A&&!ds(A,N)&&(R=j(A),ht(A,W,G,!0),A=null),N.patchFlag===-2&&(Z=!1,N.dynamicChildren=null);const{type:X,ref:ge,shapeFlag:ae}=N;switch(X){case yc:x(A,N,B,R);break;case ro:E(A,N,B,R);break;case Zc:A==null&&M(N,B,R,oe);break;case Ge:C(A,N,B,R,W,G,oe,Y,Z);break;default:ae&1?D(A,N,B,R,W,G,oe,Y,Z):ae&6?de(A,N,B,R,W,G,oe,Y,Z):(ae&64||ae&128)&&X.process(A,N,B,R,W,G,oe,Y,Z,q)}ge!=null&&W&&Sa(ge,A&&A.ref,G,N||A,!N)},x=(A,N,B,R)=>{if(A==null)r(N.el=l(N.children),B,R);else{const W=N.el=A.el;N.children!==A.children&&c(W,N.children)}},E=(A,N,B,R)=>{A==null?r(N.el=a(N.children||""),B,R):N.el=A.el},M=(A,N,B,R)=>{[A.el,A.anchor]=g(A.children,N,B,R,A.el,A.anchor)},P=({el:A,anchor:N},B,R)=>{let W;for(;A&&A!==N;)W=h(A),r(A,B,R),A=W;r(N,B,R)},L=({el:A,anchor:N})=>{let B;for(;A&&A!==N;)B=h(A),i(A),A=B;i(N)},D=(A,N,B,R,W,G,oe,Y,Z)=>{N.type==="svg"?oe="svg":N.type==="math"&&(oe="mathml"),A==null?V(N,B,R,W,G,oe,Y,Z):O(A,N,W,G,oe,Y,Z)},V=(A,N,B,R,W,G,oe,Y)=>{let Z,X;const{props:ge,shapeFlag:ae,transition:he,dirs:pe}=A;if(Z=A.el=s(A.type,G,ge&&ge.is,ge),ae&8?u(Z,A.children):ae&16&&U(A.children,Z,null,R,W,Xc(A,G),oe,Y),pe&&Di(A,null,R,"created"),H(Z,A,A.scopeId,oe,R),ge){for(const xe in ge)xe!=="value"&&!Cs(xe)&&o(Z,xe,null,ge[xe],G,R);"value"in ge&&o(Z,"value",null,ge.value,G),(X=ge.onVnodeBeforeMount)&&vr(X,R,A)}pe&&Di(A,null,R,"beforeMount");const ne=Bk(W,he);ne&&he.beforeEnter(Z),r(Z,N,B),((X=ge&&ge.onVnodeMounted)||ne||pe)&&Kn(()=>{X&&vr(X,R,A),ne&&he.enter(Z),pe&&Di(A,null,R,"mounted")},W)},H=(A,N,B,R,W)=>{if(B&&m(A,B),R)for(let G=0;G<R.length;G++)m(A,R[G]);if(W){let G=W.subTree;if(N===G||ey(G.type)&&(G.ssContent===N||G.ssFallback===N)){const oe=W.vnode;H(A,oe,oe.scopeId,oe.slotScopeIds,W.parent)}}},U=(A,N,B,R,W,G,oe,Y,Z=0)=>{for(let X=Z;X<A.length;X++){const ge=A[X]=Y?oi(A[X]):Sr(A[X]);b(null,ge,N,B,R,W,G,oe,Y)}},O=(A,N,B,R,W,G,oe)=>{const Y=N.el=A.el;let{patchFlag:Z,dynamicChildren:X,dirs:ge}=N;Z|=A.patchFlag&16;const ae=A.props||vt,he=N.props||vt;let pe;if(B&&Ii(B,!1),(pe=he.onVnodeBeforeUpdate)&&vr(pe,B,N,A),ge&&Di(N,A,B,"beforeUpdate"),B&&Ii(B,!0),(ae.innerHTML&&he.innerHTML==null||ae.textContent&&he.textContent==null)&&u(Y,""),X?k(A.dynamicChildren,X,Y,B,R,Xc(N,W),G):oe||Ae(A,N,Y,null,B,R,Xc(N,W),G,!1),Z>0){if(Z&16)F(Y,ae,he,B,W);else if(Z&2&&ae.class!==he.class&&o(Y,"class",null,he.class,W),Z&4&&o(Y,"style",ae.style,he.style,W),Z&8){const ne=N.dynamicProps;for(let xe=0;xe<ne.length;xe++){const Oe=ne[xe],me=ae[Oe],w=he[Oe];(w!==me||Oe==="value")&&o(Y,Oe,me,w,W,B)}}Z&1&&A.children!==N.children&&u(Y,N.children)}else!oe&&X==null&&F(Y,ae,he,B,W);((pe=he.onVnodeUpdated)||ge)&&Kn(()=>{pe&&vr(pe,B,N,A),ge&&Di(N,A,B,"updated")},R)},k=(A,N,B,R,W,G,oe)=>{for(let Y=0;Y<N.length;Y++){const Z=A[Y],X=N[Y],ge=Z.el&&(Z.type===Ge||!ds(Z,X)||Z.shapeFlag&70)?d(Z.el):B;b(Z,X,ge,null,R,W,G,oe,!0)}},F=(A,N,B,R,W)=>{if(N!==B){if(N!==vt)for(const G in N)!Cs(G)&&!(G in B)&&o(A,G,N[G],null,W,R);for(const G in B){if(Cs(G))continue;const oe=B[G],Y=N[G];oe!==Y&&G!=="value"&&o(A,G,Y,oe,W,R)}"value"in B&&o(A,"value",N.value,B.value,W)}},C=(A,N,B,R,W,G,oe,Y,Z)=>{const X=N.el=A?A.el:l(""),ge=N.anchor=A?A.anchor:l("");let{patchFlag:ae,dynamicChildren:he,slotScopeIds:pe}=N;pe&&(Y=Y?Y.concat(pe):pe),A==null?(r(X,B,R),r(ge,B,R),U(N.children||[],B,ge,W,G,oe,Y,Z)):ae>0&&ae&64&&he&&A.dynamicChildren?(k(A.dynamicChildren,he,B,W,G,oe,Y),(N.key!=null||W&&N===W.subTree)&&Yg(A,N,!0)):Ae(A,N,B,ge,W,G,oe,Y,Z)},de=(A,N,B,R,W,G,oe,Y,Z)=>{N.slotScopeIds=Y,A==null?N.shapeFlag&512?W.ctx.activate(N,B,R,oe,Z):ee(N,B,R,W,G,oe,Z):Se(A,N,Z)},ee=(A,N,B,R,W,G,oe)=>{const Y=A.component=tx(A,R,W);if(Pg(A)&&(Y.ctx.renderer=q),nx(Y,!1,oe),Y.asyncDep){if(W&&W.registerDep(Y,be,oe),!A.el){const Z=Y.subTree=yt(ro);E(null,Z,N,B)}}else be(Y,A,N,B,W,G,oe)},Se=(A,N,B)=>{const R=N.component=A.component;if(qk(A,N,B))if(R.asyncDep&&!R.asyncResolved){te(R,N,B);return}else R.next=N,R.update();else N.el=A.el,R.vnode=N},be=(A,N,B,R,W,G,oe)=>{const Y=()=>{if(A.isMounted){let{next:ae,bu:he,u:pe,parent:ne,vnode:xe}=A;{const S=Xg(A);if(S){ae&&(ae.el=xe.el,te(A,ae,oe)),S.asyncDep.then(()=>{A.isUnmounted||Y()});return}}let Oe=ae,me;Ii(A,!1),ae?(ae.el=xe.el,te(A,ae,oe)):ae=xe,he&&Gl(he),(me=ae.props&&ae.props.onVnodeBeforeUpdate)&&vr(me,ne,ae,xe),Ii(A,!0);const w=zh(A),y=A.subTree;A.subTree=w,b(y,w,d(y.el),j(y),A,W,G),ae.el=w.el,Oe===null&&Jk(A,w.el),pe&&Kn(pe,W),(me=ae.props&&ae.props.onVnodeUpdated)&&Kn(()=>vr(me,ne,ae,xe),W)}else{let ae;const{el:he,props:pe}=N,{bm:ne,m:xe,parent:Oe,root:me,type:w}=A,y=Os(N);Ii(A,!1),ne&&Gl(ne),!y&&(ae=pe&&pe.onVnodeBeforeMount)&&vr(ae,Oe,N),Ii(A,!0);{me.ce&&me.ce._injectChildStyle(w);const S=A.subTree=zh(A);b(null,S,B,R,A,W,G),N.el=S.el}if(xe&&Kn(xe,W),!y&&(ae=pe&&pe.onVnodeMounted)){const S=N;Kn(()=>vr(ae,Oe,S),W)}(N.shapeFlag&256||Oe&&Os(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&A.a&&Kn(A.a,W),A.isMounted=!0,N=B=R=null}};A.scope.on();const Z=A.effect=new ag(Y);A.scope.off();const X=A.update=Z.run.bind(Z),ge=A.job=Z.runIfDirty.bind(Z);ge.i=A,ge.id=A.uid,Z.scheduler=()=>lf(ge),Ii(A,!0),X()},te=(A,N,B)=>{N.component=A;const R=A.vnode.props;A.vnode=N,A.next=null,_k(A,N.props,R,B),Dk(A,N.children,B),Ai(),Ih(A),Mi()},Ae=(A,N,B,R,W,G,oe,Y,Z=!1)=>{const X=A&&A.children,ge=A?A.shapeFlag:0,ae=N.children,{patchFlag:he,shapeFlag:pe}=N;if(he>0){if(he&128){Ue(X,ae,B,R,W,G,oe,Y,Z);return}else if(he&256){tt(X,ae,B,R,W,G,oe,Y,Z);return}}pe&8?(ge&16&&At(X,W,G),ae!==X&&u(B,ae)):ge&16?pe&16?Ue(X,ae,B,R,W,G,oe,Y,Z):At(X,W,G,!0):(ge&8&&u(B,""),pe&16&&U(ae,B,R,W,G,oe,Y,Z))},tt=(A,N,B,R,W,G,oe,Y,Z)=>{A=A||Io,N=N||Io;const X=A.length,ge=N.length,ae=Math.min(X,ge);let he;for(he=0;he<ae;he++){const pe=N[he]=Z?oi(N[he]):Sr(N[he]);b(A[he],pe,B,null,W,G,oe,Y,Z)}X>ge?At(A,W,G,!0,!1,ae):U(N,B,R,W,G,oe,Y,Z,ae)},Ue=(A,N,B,R,W,G,oe,Y,Z)=>{let X=0;const ge=N.length;let ae=A.length-1,he=ge-1;for(;X<=ae&&X<=he;){const pe=A[X],ne=N[X]=Z?oi(N[X]):Sr(N[X]);if(ds(pe,ne))b(pe,ne,B,null,W,G,oe,Y,Z);else break;X++}for(;X<=ae&&X<=he;){const pe=A[ae],ne=N[he]=Z?oi(N[he]):Sr(N[he]);if(ds(pe,ne))b(pe,ne,B,null,W,G,oe,Y,Z);else break;ae--,he--}if(X>ae){if(X<=he){const pe=he+1,ne=pe<ge?N[pe].el:R;for(;X<=he;)b(null,N[X]=Z?oi(N[X]):Sr(N[X]),B,ne,W,G,oe,Y,Z),X++}}else if(X>he)for(;X<=ae;)ht(A[X],W,G,!0),X++;else{const pe=X,ne=X,xe=new Map;for(X=ne;X<=he;X++){const ie=N[X]=Z?oi(N[X]):Sr(N[X]);ie.key!=null&&xe.set(ie.key,X)}let Oe,me=0;const w=he-ne+1;let y=!1,S=0;const $=new Array(w);for(X=0;X<w;X++)$[X]=0;for(X=pe;X<=ae;X++){const ie=A[X];if(me>=w){ht(ie,W,G,!0);continue}let se;if(ie.key!=null)se=xe.get(ie.key);else for(Oe=ne;Oe<=he;Oe++)if($[Oe-ne]===0&&ds(ie,N[Oe])){se=Oe;break}se===void 0?ht(ie,W,G,!0):($[se-ne]=X+1,se>=S?S=se:y=!0,b(ie,N[se],B,null,W,G,oe,Y,Z),me++)}const I=y?Rk($):Io;for(Oe=I.length-1,X=w-1;X>=0;X--){const ie=ne+X,se=N[ie],Te=ie+1<ge?N[ie+1].el:R;$[X]===0?b(null,se,B,Te,W,G,oe,Y,Z):y&&(Oe<0||X!==I[Oe]?it(se,B,Te,2):Oe--)}}},it=(A,N,B,R,W=null)=>{const{el:G,type:oe,transition:Y,children:Z,shapeFlag:X}=A;if(X&6){it(A.component.subTree,N,B,R);return}if(X&128){A.suspense.move(N,B,R);return}if(X&64){oe.move(A,N,B,q);return}if(oe===Ge){r(G,N,B);for(let ae=0;ae<Z.length;ae++)it(Z[ae],N,B,R);r(A.anchor,N,B);return}if(oe===Zc){P(A,N,B);return}if(R!==2&&X&1&&Y)if(R===0)Y.beforeEnter(G),r(G,N,B),Kn(()=>Y.enter(G),W);else{const{leave:ae,delayLeave:he,afterLeave:pe}=Y,ne=()=>r(G,N,B),xe=()=>{ae(G,()=>{ne(),pe&&pe()})};he?he(G,ne,xe):xe()}else r(G,N,B)},ht=(A,N,B,R=!1,W=!1)=>{const{type:G,props:oe,ref:Y,children:Z,dynamicChildren:X,shapeFlag:ge,patchFlag:ae,dirs:he,cacheIndex:pe}=A;if(ae===-2&&(W=!1),Y!=null&&Sa(Y,null,B,A,!0),pe!=null&&(N.renderCache[pe]=void 0),ge&256){N.ctx.deactivate(A);return}const ne=ge&1&&he,xe=!Os(A);let Oe;if(xe&&(Oe=oe&&oe.onVnodeBeforeUnmount)&&vr(Oe,N,A),ge&6)nt(A.component,B,R);else{if(ge&128){A.suspense.unmount(B,R);return}ne&&Di(A,null,N,"beforeUnmount"),ge&64?A.type.remove(A,N,B,q,R):X&&!X.hasOnce&&(G!==Ge||ae>0&&ae&64)?At(X,N,B,!1,!0):(G===Ge&&ae&384||!W&&ge&16)&&At(Z,N,B),R&&Ft(A)}(xe&&(Oe=oe&&oe.onVnodeUnmounted)||ne)&&Kn(()=>{Oe&&vr(Oe,N,A),ne&&Di(A,null,N,"unmounted")},B)},Ft=A=>{const{type:N,el:B,anchor:R,transition:W}=A;if(N===Ge){Me(B,R);return}if(N===Zc){L(A);return}const G=()=>{i(B),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(A.shapeFlag&1&&W&&!W.persisted){const{leave:oe,delayLeave:Y}=W,Z=()=>oe(B,G);Y?Y(A.el,G,Z):Z()}else G()},Me=(A,N)=>{let B;for(;A!==N;)B=h(A),i(A),A=B;i(N)},nt=(A,N,B)=>{const{bum:R,scope:W,job:G,subTree:oe,um:Y,m:Z,a:X}=A;jh(Z),jh(X),R&&Gl(R),W.stop(),G&&(G.flags|=8,ht(oe,A,N,B)),Y&&Kn(Y,N),Kn(()=>{A.isUnmounted=!0},N),N&&N.pendingBranch&&!N.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===N.pendingId&&(N.deps--,N.deps===0&&N.resolve())},At=(A,N,B,R=!1,W=!1,G=0)=>{for(let oe=G;oe<A.length;oe++)ht(A[oe],N,B,R,W)},j=A=>{if(A.shapeFlag&6)return j(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const N=h(A.anchor||A.el),B=N&&N[ok];return B?h(B):N};let K=!1;const J=(A,N,B)=>{A==null?N._vnode&&ht(N._vnode,null,null,!0):b(N._vnode||null,A,N,null,null,null,B),N._vnode=A,K||(K=!0,Ih(),Og(),K=!1)},q={p:b,um:ht,m:it,r:Ft,mt:ee,mc:U,pc:Ae,pbc:k,n:j,o:t};return{render:J,hydrate:void 0,createApp:Ok(J)}}function Xc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ii({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Bk(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Yg(t,e,n=!1){const r=t.children,i=e.children;if(Re(r)&&Re(i))for(let o=0;o<r.length;o++){const s=r[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=oi(i[o]),l.el=s.el),!n&&l.patchFlag!==-2&&Yg(s,l)),l.type===yc&&(l.el=s.el)}}function Rk(t){const e=t.slice(),n=[0];let r,i,o,s,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)l=o+s>>1,t[n[l]]<c?o=l+1:s=l;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}function Xg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Xg(e)}function jh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Vk=Symbol.for("v-scx"),Fk=()=>Yl(Vk);function Hk(t,e){return ff(t,null,e)}function Xl(t,e,n){return ff(t,e,n)}function ff(t,e,n=vt){const{immediate:r,deep:i,flush:o,once:s}=n,l=hn({},n),a=e&&r||!e&&o!=="post";let c;if(Js){if(o==="sync"){const m=Fk();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=Tr,m.resume=Tr,m.pause=Tr,m}}const u=nn;l.call=(m,g,b)=>Ar(m,u,g,b);let d=!1;o==="post"?l.scheduler=m=>{Kn(m,u&&u.suspense)}:o!=="sync"&&(d=!0,l.scheduler=(m,g)=>{g?m():lf(m)}),l.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=tk(t,e,l);return Js&&(c?c.push(h):a&&h()),h}function jk(t,e,n){const r=this.proxy,i=Vt(t)?t.includes(".")?Zg(r,t):()=>r[t]:t.bind(r,r);let o;qe(e)?o=e:(o=e.handler,n=e);const s=hl(this),l=ff(i,o.bind(r),n);return s(),l}function Zg(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const zk=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${sr(e)}Modifiers`]||t[`${co(e)}Modifiers`];function Kk(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||vt;let i=n;const o=e.startsWith("update:"),s=o&&zk(r,e.slice(7));s&&(s.trim&&(i=n.map(u=>Vt(u)?u.trim():u)),s.number&&(i=n.map(Ru)));let l,a=r[l=Uc(e)]||r[l=Uc(sr(e))];!a&&o&&(a=r[l=Uc(co(e))]),a&&Ar(a,t,6,i);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Ar(c,t,6,i)}}function Qg(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let s={},l=!1;if(!qe(t)){const a=c=>{const u=Qg(c,e,!0);u&&(l=!0,hn(s,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!l?(St(t)&&r.set(t,null),null):(Re(o)?o.forEach(a=>s[a]=null):hn(s,o),St(t)&&r.set(t,s),s)}function gc(t,e){return!t||!ic(e)?!1:(e=e.slice(2).replace(/Once$/,""),dt(t,e[0].toLowerCase()+e.slice(1))||dt(t,co(e))||dt(t,e))}function zh(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:l,emit:a,render:c,renderCache:u,props:d,data:h,setupState:m,ctx:g,inheritAttrs:b}=t,x=xa(t);let E,M;try{if(n.shapeFlag&4){const L=i||r,D=L;E=Sr(c.call(D,L,u,d,m,h,g)),M=l}else{const L=e;E=Sr(L.length>1?L(d,{attrs:l,slots:s,emit:a}):L(d,null)),M=e.props?l:Uk(l)}}catch(L){Ms.length=0,hc(L,t,1),E=yt(ro)}let P=E;if(M&&b!==!1){const L=Object.keys(M),{shapeFlag:D}=P;L.length&&D&7&&(o&&L.some(Yd)&&(M=Wk(M,o)),P=qo(P,M,!1,!0))}return n.dirs&&(P=qo(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&cf(P,n.transition),E=P,xa(x),E}const Uk=t=>{let e;for(const n in t)(n==="class"||n==="style"||ic(n))&&((e||(e={}))[n]=t[n]);return e},Wk=(t,e)=>{const n={};for(const r in t)(!Yd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function qk(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:l,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?Kh(r,s,c):!!s;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==r[h]&&!gc(c,h))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===s?!1:r?s?Kh(r,s,c):!0:!!s;return!1}function Kh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!gc(n,o))return!0}return!1}function Jk({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const ey=t=>t.__isSuspense;function Gk(t,e){e&&e.pendingBranch?Re(t)?e.effects.push(...t):e.effects.push(t):ik(t)}const Ge=Symbol.for("v-fgt"),yc=Symbol.for("v-txt"),ro=Symbol.for("v-cmt"),Zc=Symbol.for("v-stc"),Ms=[];let Jn=null;function z(t=!1){Ms.push(Jn=t?null:[])}function Yk(){Ms.pop(),Jn=Ms[Ms.length-1]||null}let qs=1;function Uh(t,e=!1){qs+=t,t<0&&Jn&&e&&(Jn.hasOnce=!0)}function ty(t){return t.dynamicChildren=qs>0?Jn||Io:null,Yk(),qs>0&&Jn&&Jn.push(t),t}function Q(t,e,n,r,i,o){return ty(T(t,e,n,r,i,o,!0))}function gt(t,e,n,r,i){return ty(yt(t,e,n,r,i,!0))}function Ta(t){return t?t.__v_isVNode===!0:!1}function ds(t,e){return t.type===e.type&&t.key===e.key}const ny=({key:t})=>t??null,Zl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Vt(t)||Bt(t)||qe(t)?{i:In,r:t,k:e,f:!!n}:t:null);function T(t,e=null,n=null,r=0,i=null,o=t===Ge?0:1,s=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ny(e),ref:e&&Zl(e),scopeId:Mg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:In};return l?(hf(a,n),o&128&&t.normalize(a)):n&&(a.shapeFlag|=Vt(n)?8:16),qs>0&&!s&&Jn&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Jn.push(a),a}const yt=Xk;function Xk(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===bk)&&(t=ro),Ta(t)){const l=qo(t,e,!0);return n&&hf(l,n),qs>0&&!o&&Jn&&(l.shapeFlag&6?Jn[Jn.indexOf(t)]=l:Jn.push(l)),l.patchFlag=-2,l}if(lx(t)&&(t=t.__vccOpts),e){e=Zk(e);let{class:l,style:a}=e;l&&!Vt(l)&&(e.class=rr(l)),St(a)&&(of(a)&&!Re(a)&&(a=hn({},a)),e.style=dr(a))}const s=Vt(t)?1:ey(t)?128:sk(t)?64:St(t)?4:qe(t)?2:0;return T(t,e,n,r,i,s,o,!0)}function Zk(t){return t?of(t)||zg(t)?hn({},t):t:null}function qo(t,e,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:l,transition:a}=t,c=e?ry(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ny(c),ref:e&&e.ref?n&&o?Re(o)?o.concat(Zl(e)):[o,Zl(e)]:Zl(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ge?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&qo(t.ssContent),ssFallback:t.ssFallback&&qo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&cf(u,a.clone(u)),u}function er(t=" ",e=0){return yt(yc,null,t,e)}function Pe(t="",e=!1){return e?(z(),gt(ro,null,t)):yt(ro,null,t)}function Sr(t){return t==null||typeof t=="boolean"?yt(ro):Re(t)?yt(Ge,null,t.slice()):Ta(t)?oi(t):yt(yc,null,String(t))}function oi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:qo(t)}function hf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Re(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),hf(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!zg(e)?e._ctx=In:i===3&&In&&(In.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qe(e)?(e={default:e,_ctx:In},n=32):(e=String(e),r&64?(n=16,e=[er(e)]):n=8);t.children=e,t.shapeFlag|=n}function ry(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=rr([e.class,r.class]));else if(i==="style")e.style=dr([e.style,r.style]);else if(ic(i)){const o=e[i],s=r[i];s&&o!==s&&!(Re(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function vr(t,e,n,r=null){Ar(t,e,7,[n,r])}const Qk=Fg();let ex=0;function tx(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Qk,o={uid:ex++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ug(r,i),emitsOptions:Qg(r,i),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:r.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Kk.bind(null,o),t.ce&&t.ce(o),o}let nn=null;const bc=()=>nn||In;let Ea,qu;{const t=ac(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};Ea=e("__VUE_INSTANCE_SETTERS__",n=>nn=n),qu=e("__VUE_SSR_SETTERS__",n=>Js=n)}const hl=t=>{const e=nn;return Ea(t),t.scope.on(),()=>{t.scope.off(),Ea(e)}},Wh=()=>{nn&&nn.scope.off(),Ea(null)};function iy(t){return t.vnode.shapeFlag&4}let Js=!1;function nx(t,e=!1,n=!1){e&&qu(e);const{props:r,children:i}=t.vnode,o=iy(t);Mk(t,r,o,e),$k(t,i,n);const s=o?rx(t,e):void 0;return e&&qu(!1),s}function rx(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wk);const{setup:r}=n;if(r){Ai();const i=t.setupContext=r.length>1?ox(t):null,o=hl(t),s=fl(r,t,0,[t.props,i]),l=Qm(s);if(Mi(),o(),(l||t.sp)&&!Os(t)&&Ng(t),l){if(s.then(Wh,Wh),e)return s.then(a=>{qh(t,a)}).catch(a=>{hc(a,t,0)});t.asyncDep=s}else qh(t,s)}else oy(t)}function qh(t,e,n){qe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:St(e)&&(t.setupState=Cg(e)),oy(t)}function oy(t,e,n){const r=t.type;t.render||(t.render=r.render||Tr);{const i=hl(t);Ai();try{kk(t)}finally{Mi(),i()}}}const ix={get(t,e){return an(t,"get",""),t[e]}};function ox(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ix),slots:t.slots,emit:t.emit,expose:e}}function vc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cg(Sg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in As)return As[n](t)},has(e,n){return n in e||n in As}})):t.proxy}function sx(t,e=!0){return qe(t)?t.displayName||t.name:t.name||e&&t.__name}function lx(t){return qe(t)&&"__vccOpts"in t}const Ju=(t,e)=>Qw(t,e,Js);function sy(t,e,n){const r=arguments.length;return r===2?St(e)&&!Re(e)?Ta(e)?yt(t,null,[e]):yt(t,e):yt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ta(n)&&(n=[n]),yt(t,e,n))}const ax="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gu;const Jh=typeof window<"u"&&window.trustedTypes;if(Jh)try{Gu=Jh.createPolicy("vue",{createHTML:t=>t})}catch{}const ly=Gu?t=>Gu.createHTML(t):t=>t,cx="http://www.w3.org/2000/svg",ux="http://www.w3.org/1998/Math/MathML",Br=typeof document<"u"?document:null,Gh=Br&&Br.createElement("template"),dx={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Br.createElementNS(cx,t):e==="mathml"?Br.createElementNS(ux,t):n?Br.createElement(t,{is:n}):Br.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Br.createTextNode(t),createComment:t=>Br.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Br.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Gh.innerHTML=ly(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Gh.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},fx=Symbol("_vtc");function hx(t,e,n){const r=t[fx];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Yh=Symbol("_vod"),px=Symbol("_vsh"),mx=Symbol(""),gx=/(^|;)\s*display\s*:/;function yx(t,e,n){const r=t.style,i=Vt(n);let o=!1;if(n&&!i){if(e)if(Vt(e))for(const s of e.split(";")){const l=s.slice(0,s.indexOf(":")).trim();n[l]==null&&Ql(r,l,"")}else for(const s in e)n[s]==null&&Ql(r,s,"");for(const s in n)s==="display"&&(o=!0),Ql(r,s,n[s])}else if(i){if(e!==n){const s=r[mx];s&&(n+=";"+s),r.cssText=n,o=gx.test(n)}}else e&&t.removeAttribute("style");Yh in t&&(t[Yh]=o?r.display:"",t[px]&&(r.display="none"))}const Xh=/\s*!important$/;function Ql(t,e,n){if(Re(n))n.forEach(r=>Ql(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=bx(t,e);Xh.test(n)?t.setProperty(co(r),n.replace(Xh,""),"important"):t[r]=n}}const Zh=["Webkit","Moz","ms"],Qc={};function bx(t,e){const n=Qc[e];if(n)return n;let r=sr(e);if(r!=="filter"&&r in t)return Qc[e]=r;r=lc(r);for(let i=0;i<Zh.length;i++){const o=Zh[i]+r;if(o in t)return Qc[e]=o}return e}const Qh="http://www.w3.org/1999/xlink";function ep(t,e,n,r,i,o=ww(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Qh,e.slice(6,e.length)):t.setAttributeNS(Qh,e,n):n==null||o&&!rg(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Or(n)?String(n):n)}function tp(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?ly(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=rg(n):n==null&&l==="string"?(n="",s=!0):l==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(i||e)}function Hi(t,e,n,r){t.addEventListener(e,n,r)}function vx(t,e,n,r){t.removeEventListener(e,n,r)}const np=Symbol("_vei");function wx(t,e,n,r,i=null){const o=t[np]||(t[np]={}),s=o[e];if(r&&s)s.value=r;else{const[l,a]=kx(e);if(r){const c=o[e]=Cx(r,i);Hi(t,l,c,a)}else s&&(vx(t,l,s,a),o[e]=void 0)}}const rp=/(?:Once|Passive|Capture)$/;function kx(t){let e;if(rp.test(t)){e={};let r;for(;r=t.match(rp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):co(t.slice(2)),e]}let eu=0;const xx=Promise.resolve(),Sx=()=>eu||(xx.then(()=>eu=0),eu=Date.now());function Cx(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ar(Tx(r,n.value),e,5,[r])};return n.value=t,n.attached=Sx(),n}function Tx(t,e){if(Re(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const ip=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ex=(t,e,n,r,i,o)=>{const s=i==="svg";e==="class"?hx(t,r,s):e==="style"?yx(t,n,r):ic(e)?Yd(e)||wx(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ox(t,e,r,s))?(tp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ep(t,e,r,s,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Vt(r))?tp(t,sr(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ep(t,e,r,s))};function Ox(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&ip(e)&&qe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ip(e)&&Vt(n)?!1:e in t}const Oa=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Re(e)?n=>Gl(e,n):e};function Ax(t){t.target.composing=!0}function op(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fo=Symbol("_assign"),$t={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Fo]=Oa(i);const o=r||i.props&&i.props.type==="number";Hi(t,e?"change":"input",s=>{if(s.target.composing)return;let l=t.value;n&&(l=l.trim()),o&&(l=Ru(l)),t[Fo](l)}),n&&Hi(t,"change",()=>{t.value=t.value.trim()}),e||(Hi(t,"compositionstart",Ax),Hi(t,"compositionend",op),Hi(t,"change",op))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(t[Fo]=Oa(s),t.composing)return;const l=(o||t.type==="number")&&!/^0\d/.test(t.value)?Ru(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===a)||(t.value=a))}},Mx={deep:!0,created(t,e,n){t[Fo]=Oa(n),Hi(t,"change",()=>{const r=t._modelValue,i=_x(t),o=t.checked,s=t[Fo];if(Re(r)){const l=ig(r,i),a=l!==-1;if(o&&!a)s(r.concat(i));else if(!o&&a){const c=[...r];c.splice(l,1),s(c)}}else if(oc(r)){const l=new Set(r);o?l.add(i):l.delete(i),s(l)}else s(ay(t,o))})},mounted:sp,beforeUpdate(t,e,n){t[Fo]=Oa(n),sp(t,e,n)}};function sp(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Re(e))i=ig(e,r.props.value)>-1;else if(oc(e))i=e.has(r.props.value);else{if(e===n)return;i=cc(e,ay(t,!0))}t.checked!==i&&(t.checked=i)}function _x(t){return"_value"in t?t._value:t.value}function ay(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Nx=hn({patchProp:Ex},dx);let lp;function Px(){return lp||(lp=Ik(Nx))}const $x=(...t)=>{const e=Px().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=Ix(r);if(!i)return;const o=e._component;!qe(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,Dx(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function Dx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ix(t){return Vt(t)?document.querySelector(t):t}const Ct=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rt=Object.keys,dn=Array.isArray;function Tn(t,e){return typeof e!="object"||Rt(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Ct.Promise||(Ct.Promise=Promise);const Gs=Object.getPrototypeOf,Lx={}.hasOwnProperty;function Yn(t,e){return Lx.call(t,e)}function Jo(t,e){typeof e=="function"&&(e=e(Gs(t))),(typeof Reflect>"u"?Rt:Reflect.ownKeys)(e).forEach(n=>{Ur(t,n,e[n])})}const cy=Object.defineProperty;function Ur(t,e,n,r){cy(t,e,Tn(n&&Yn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ho(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ur(t.prototype,"constructor",t),{extend:Jo.bind(null,t.prototype)}}}}const Bx=Object.getOwnPropertyDescriptor;function pf(t,e){let n;return Bx(t,e)||(n=Gs(t))&&pf(n,e)}const Rx=[].slice;function Aa(t,e,n){return Rx.call(t,e,n)}function uy(t,e){return e(t)}function ms(t){if(!t)throw new Error("Assertion Failed")}function dy(t){Ct.setImmediate?setImmediate(t):setTimeout(t,0)}function fy(t,e){return t.reduce((n,r,i)=>{var o=e(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Wr(t,e){if(typeof e=="string"&&Yn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var o=Wr(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(s!==-1){var l=t[e.substr(0,s)];return l==null?void 0:Wr(l,e.substr(s+1))}}function mr(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){ms(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)mr(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var s=e.substr(0,o),l=e.substr(o+1);if(l==="")n===void 0?dn(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var a=t[s];a&&Yn(t,s)||(a=t[s]={}),mr(a,l,n)}}else n===void 0?dn(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function hy(t){var e={};for(var n in t)Yn(t,n)&&(e[n]=t[n]);return e}const Vx=[].concat;function py(t){return Vx.apply([],t)}const my="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(py([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Ct[t]),Fx=my.map(t=>Ct[t]);fy(my,t=>[t,!0]);let si=null;function pl(t){si=typeof WeakMap<"u"&&new WeakMap;const e=Yu(t);return si=null,e}function Yu(t){if(!t||typeof t!="object")return t;let e=si&&si.get(t);if(e)return e;if(dn(t)){e=[],si&&si.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Yu(t[n]))}else if(Fx.indexOf(t.constructor)>=0)e=t;else{const o=Gs(t);for(var i in e=o===Object.prototype?{}:Object.create(o),si&&si.set(t,e),t)Yn(t,i)&&(e[i]=Yu(t[i]))}return e}const{toString:Hx}={};function Xu(t){return Hx.call(t).slice(8,-1)}const Zu=typeof Symbol<"u"?Symbol.iterator:"@@iterator",jx=typeof Zu=="symbol"?function(t){var e;return t!=null&&(e=t[Zu])&&e.apply(t)}:function(){return null},Eo={};function jr(t){var e,n,r,i;if(arguments.length===1){if(dn(t))return t.slice();if(this===Eo&&typeof t=="string")return[t];if(i=jx(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const mf=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Pr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gy(t,e){Pr=t,yy=e}var yy=()=>!0;const zx=!new Error("").stack;function uo(){if(zx)try{throw uo.arguments,new Error}catch(t){return t}return new Error}function Qu(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(yy).map(r=>`
`+r).join("")):""}var by=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gf=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(by),Kx={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function jo(t,e){this._e=uo(),this.name=t,this.message=e}function vy(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Ma(t,e,n,r){this._e=uo(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=vy(t,e)}function _s(t,e){this._e=uo(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=vy(t,e)}Ho(jo).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Qu(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Ho(Ma).from(jo),Ho(_s).from(jo);var yf=gf.reduce((t,e)=>(t[e]=e+"Error",t),{});const Ux=jo;var je=gf.reduce((t,e)=>{var n=e+"Error";function r(i,o){this._e=uo(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Kx[e]||n,this.inner=null)}return Ho(r).from(Ux),t[e]=r,t},{});je.Syntax=SyntaxError,je.Type=TypeError,je.Range=RangeError;var ap=by.reduce((t,e)=>(t[e+"Error"]=je[e],t),{}),ea=gf.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=je[e]),t),{});function wt(){}function Ys(t){return t}function Wx(t,e){return t==null||t===Ys?e:function(n){return e(t(n))}}function io(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function qx(t,e){return t===wt?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?io(r,this.onsuccess):r),i&&(this.onerror=this.onerror?io(i,this.onerror):i),o!==void 0?o:n}}function Jx(t,e){return t===wt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?io(n,this.onsuccess):n),r&&(this.onerror=this.onerror?io(r,this.onerror):r)}}function Gx(t,e){return t===wt?e:function(n){var r=t.apply(this,arguments);Tn(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?io(i,this.onsuccess):i),o&&(this.onerror=this.onerror?io(o,this.onerror):o),r===void 0?s===void 0?void 0:s:Tn(r,s)}}function Yx(t,e){return t===wt?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function bf(t,e){return t===wt?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}ea.ModifyError=Ma,ea.DexieError=jo,ea.BulkError=_s;var Xs={};const wy=100,[ed,_a,td]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Gs(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Gs(e),t]})(),ky=_a&&_a.then,ta=ed&&ed.constructor,vf=!!td;var nd=!1,Xx=td?()=>{td.then(Al)}:Ct.setImmediate?setImmediate.bind(null,Al):Ct.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Al(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Al,0)},Ns=function(t,e){gs.push([t,e]),Na&&(Xx(),Na=!1)},rd=!0,Na=!0,Gi=[],na=[],id=null,od=Ys,zo={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dp,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{dp(t[0],t[1])}catch{}})}},De=zo,gs=[],Yi=0,ra=[];function ke(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=wt,this._lib=!1;var e=this._PSD=De;if(Pr&&(this._stackHolder=uo(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Xs)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ld(this,this._value))}this._state=null,this._value=null,++e.ref,Sy(this,t)}const sd={get:function(){var t=De,e=Pa;function n(r,i){var o=!t.global&&(t!==De||e!==Pa);const s=o&&!Yr();var l=new ke((a,c)=>{wf(this,new xy($a(r,t,o,s),$a(i,t,o,s),a,c,t))});return Pr&&Ey(l,this),l}return n.prototype=Xs,n},set:function(t){Ur(this,"then",t&&t.prototype===Xs?sd:{get:function(){return t},set:sd.set})}};function xy(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function Sy(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&ml();n&&typeof n.then=="function"?Sy(t,(i,o)=>{n instanceof ke?n._then(i,o):n.then(i,o)}):(t._state=!0,t._value=n,Cy(t)),r&&gl()}},ld.bind(null,t))}catch(n){ld(t,n)}}function ld(t,e){if(na.push(e),t._state===null){var n=t._lib&&ml();e=od(e),t._state=!1,t._value=e,Pr&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,o){try{r.apply(null,o)}catch{}}(()=>{var r=pf(e,"stack");e._promise=t,Ur(e,"stack",{get:()=>nd?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Gi.some(i=>i._value===r._value)||Gi.push(r)}(t),Cy(t),n&&gl()}}function Cy(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)wf(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Yi===0&&(++Yi,Ns(()=>{--Yi==0&&kf()},[]))}function wf(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Yi,Ns(Zx,[n,t,e])}else t._listeners.push(e)}function Zx(t,e,n){try{id=e;var r,i=e._value;e._state?r=t(i):(na.length&&(na=[]),r=t(i),na.indexOf(i)===-1&&function(o){for(var s=Gi.length;s;)if(Gi[--s]._value===o._value)return void Gi.splice(s,1)}(e)),n.resolve(r)}catch(o){n.reject(o)}finally{id=null,--Yi==0&&kf(),--n.psd.ref||n.psd.finalize()}}function Ty(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,o,s=t._value;s!=null?(i=s.name||"Error",o=s.message||s,r=Qu(s,0)):(i=s,o=""),e.push(i+(o?": "+o:"")+r)}return Pr&&((r=Qu(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Ty(t._prev,e,n)),e}function Ey(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Al(){ml()&&gl()}function ml(){var t=rd;return rd=!1,Na=!1,t}function gl(){var t,e,n;do for(;gs.length>0;)for(t=gs,gs=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(gs.length>0);rd=!0,Na=!0}function kf(){var t=Gi;Gi=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=ra.slice(0),n=e.length;n;)e[--n]()}function Ml(t){return new ke(Xs,!1,t)}function Et(t,e){var n=De;return function(){var r=ml(),i=De;try{return Si(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{Si(i,!1),r&&gl()}}}Jo(ke.prototype,{then:sd,_then:function(t,e){wf(this,new xy(null,null,t,e,De))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Ml(r)):this.then(null,r=>r&&r.name===e?n(r):Ml(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Ml(e)))},stack:{get:function(){if(this._stack)return this._stack;try{nd=!0;var t=Ty(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{nd=!1}}},timeout:function(t,e){return t<1/0?new ke((n,r)=>{var i=setTimeout(()=>r(new je.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ur(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),zo.env=Oy(),Jo(ke,{all:function(){var t=jr.apply(null,arguments).map(_l);return new ke(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,o)=>ke.resolve(i).then(s=>{t[o]=s,--r||e(t)},n))})},resolve:t=>{if(t instanceof ke)return t;if(t&&typeof t.then=="function")return new ke((n,r)=>{t.then(n,r)});var e=new ke(Xs,!0,t);return Ey(e,id),e},reject:Ml,race:function(){var t=jr.apply(null,arguments).map(_l);return new ke((e,n)=>{t.map(r=>ke.resolve(r).then(e,n))})},PSD:{get:()=>De,set:t=>De=t},totalEchoes:{get:()=>Pa},newPSD:xi,usePSD:is,scheduler:{get:()=>Ns,set:t=>{Ns=t}},rejectionMapper:{get:()=>od,set:t=>{od=t}},follow:(t,e)=>new ke((n,r)=>xi((i,o)=>{var s=De;s.unhandleds=[],s.onunhandled=o,s.finalize=io(function(){(function(l){function a(){l(),ra.splice(ra.indexOf(a),1)}ra.push(a),++Yi,Ns(()=>{--Yi==0&&kf()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),t()},e,n,r))}),ta&&(ta.allSettled&&Ur(ke,"allSettled",function(){const t=jr.apply(null,arguments).map(_l);return new ke(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,o)=>ke.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||e(r)))})}),ta.any&&typeof AggregateError<"u"&&Ur(ke,"any",function(){const t=jr.apply(null,arguments).map(_l);return new ke((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((o,s)=>ke.resolve(o).then(l=>e(l),l=>{i[s]=l,--r||n(new AggregateError(i))}))})}));const un={awaits:0,echoes:0,id:0};var Qx=0,ia=[],tu=0,Pa=0,eS=0;function xi(t,e,n,r){var i=De,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++eS;var s=zo.env;o.env=vf?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject,nthen:cp(s.nthen,o),gthen:cp(s.gthen,o)}:{},e&&Tn(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=is(o,t,n,r);return o.ref===0&&o.finalize(),l}function rs(){return un.id||(un.id=++Qx),++un.awaits,un.echoes+=wy,un.id}function Yr(){return!!un.awaits&&(--un.awaits==0&&(un.id=0),un.echoes=un.awaits*wy,!0)}function _l(t){return un.echoes&&t&&t.constructor===ta?(rs(),t.then(e=>(Yr(),e),e=>(Yr(),Kt(e)))):t}function tS(t){++Pa,un.echoes&&--un.echoes!=0||(un.echoes=un.id=0),ia.push(De),Si(t,!0)}function nS(){var t=ia[ia.length-1];ia.pop(),Si(t,!1)}function Si(t,e){var n=De;if((e?!un.echoes||tu++&&t===De:!tu||--tu&&t===De)||Ay(e?tS.bind(null,t):nS),t!==De&&(De=t,n===zo&&(zo.env=Oy()),vf)){var r=zo.env.Promise,i=t.env;_a.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(Ct,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Oy(){var t=Ct.Promise;return vf?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Ct,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:_a.then,gthen:t.prototype.then}:{}}function is(t,e,n,r,i){var o=De;try{return Si(t,!0),e(n,r,i)}finally{Si(o,!1)}}function Ay(t){ky.call(ed,t)}function $a(t,e,n,r){return typeof t!="function"?t:function(){var i=De;n&&rs(),Si(e,!0);try{return t.apply(this,arguments)}finally{Si(i,!1),r&&Ay(Yr)}}}function cp(t,e){return function(n,r){return t.call(this,$a(n,e),$a(r,e))}}(""+ky).indexOf("[native code]")===-1&&(rs=Yr=wt);const up="unhandledrejection";function dp(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(Ct.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(up,!0,!0),Tn(r,i)):Ct.CustomEvent&&Tn(r=new CustomEvent(up,{detail:i}),i),r&&Ct.dispatchEvent&&(dispatchEvent(r),!Ct.PromiseRejectionEvent&&Ct.onunhandledrejection))try{Ct.onunhandledrejection(r)}catch{}Pr&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Kt=ke.reject;function ad(t,e,n,r){if(t.idbdb&&(t._state.openComplete||De.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===yf.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ad(t,e,n,r))):Kt(o)}return i._promise(e,(o,s)=>xi(()=>(De.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(t._state.openComplete)return Kt(new je.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Kt(new je.DatabaseClosed);t.open().catch(wt)}return t._state.dbReadyPromise.then(()=>ad(t,e,n,r))}const fp="3.2.7",Ki="",cd=-1/0,Ir="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",My="String expected.",Ps=[],wc=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),rS=wc,iS=wc,_y=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),kc="__dbnames",nu="readonly",ru="readwrite";function oo(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Ny={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Nl(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=pl(e))[t],e)}let oS=class{_trans(e,n,r){const i=this._tx||De.trans,o=this.name;function s(a,c,u){if(!u.schema[o])throw new je.NotFound("Table "+o+" not part of transaction");return n(u.idbtrans,u)}const l=ml();try{return i&&i.db===this.db?i===De.trans?i._promise(e,s,r):xi(()=>i._promise(e,s,r),{trans:i,transless:De.transless||De}):ad(this.db,e,[this.name],s)}finally{l&&gl()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(dn(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Rt(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==Ki){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!r&&Pr&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(c,u){try{return o.cmp(c,u)===0}catch{return!1}}const[l,a]=n.reduce(([c,u],d)=>{const h=i[d],m=e[d];return[c||h,c||!h?oo(u,h&&h.multi?g=>{const b=Wr(g,d);return dn(b)&&b.some(x=>s(m,x))}:g=>s(m,Wr(g,d))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,dn(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var o in r)if(Yn(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Tn(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=Nl(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{mr(e,i,s)}catch{}return s})}update(e,n){if(typeof e!="object"||dn(e))return this.where(":id").equals(e).modify(n);{const r=Wr(e,this.schema.primKey.keyPath);if(r===void 0)return Kt(new je.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Rt(n).forEach(i=>{mr(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=Nl(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?ke.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{mr(e,i,s)}catch{}return s})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?ke.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ny})).then(e=>e.numFailures?ke.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Nl(a)):e;return this.core.mutate({trans:s,type:"add",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return o?h:m;throw new _s(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,g)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Nl(a)):e;return this.core.mutate({trans:s,type:"put",keys:i,values:u,wantResults:o}).then(({numFailures:d,results:h,lastResult:m,failures:g})=>{if(d===0)return o?h:m;throw new _s(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new _s(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}};function $s(t){var e={},n=function(s,l){if(l){for(var a=arguments.length,c=new Array(a-1);--a;)c[a-1]=arguments[a];return e[s].subscribe.apply(null,c),t}if(typeof s=="string")return e[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,l,a){if(typeof s!="object"){var c;l||(l=Yx),a||(a=wt);var u={subscribers:[],fire:a,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=l(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(l,a)}};return e[s]=n[s]=u,u}Rt(c=s).forEach(function(d){var h=c[d];if(dn(h))o(d,c[d][0],c[d][1]);else{if(h!=="asap")throw new je.InvalidArgument("Invalid event config");var m=o(d,Ys,function(){for(var g=arguments.length,b=new Array(g);g--;)b[g]=arguments[g];m.subscribers.forEach(function(x){dy(function(){x.apply(null,b)})})})}})}}function fs(t,e){return Ho(e).from({prototype:t}),e}function vo(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function iu(t,e){t.filter=oo(t.filter,e)}function ou(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>oo(r(),e()):e,t.justLimit=n&&!r}function oa(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new je.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function hp(t,e,n){const r=oa(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Pl(t,e,n,r){const i=t.replayFilter?oo(t.filter,t.replayFilter()):t.filter;if(t.or){const o={},s=(l,a,c)=>{if(!i||i(a,c,h=>a.stop(h),h=>a.fail(h))){var u=a.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),Yn(o,d)||(o[d]=!0,e(l,a,c))}};return Promise.all([t.or._iterate(s,n),pp(hp(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return pp(hp(t,r,n),oo(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function pp(t,e,n,r){var i=Et(r?(o,s,l)=>n(r(o),s,l):n);return t.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();e&&!e(o,l=>s=l,l=>{o.stop(l),s=wt},l=>{o.fail(l),s=wt})||i(o.value,o,l=>s=l),s()})})}function Sn(t,e){try{const n=mp(t),r=mp(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c)if(i[c]!==o[c])return i[c]<o[c]?-1:1;return s===l?0:s<l?-1:1}(gp(t),gp(e));case"Array":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c){const u=Sn(i[c],o[c]);if(u!==0)return u}return s===l?0:s<l?-1:1}(t,e)}}catch{}return NaN}function mp(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Xu(t);return n==="ArrayBuffer"?"binary":n}function gp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}let sS=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Kt.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Kt.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=oo(n.algorithm,e)}_iterate(e,n){return Pl(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Tn(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Pl(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(vo(r,!0))return i.count({trans:n,query:{index:oa(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return Pl(r,()=>(++o,!1),n,i).then(()=>o)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],o=r.length-1;function s(c,u){return u?s(c[r[u]],u-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function a(c,u){var d=s(c,o),h=s(u,o);return d<h?-l:d>h?l:0}return this.toArray(function(c){return c.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&vo(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=oa(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return Pl(r,o=>i.push(o),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,vo(n)?ou(n,()=>{var r=e;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):ou(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ou(this._ctx,()=>{var n=e;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(e,n){return iu(this._ctx,function(r,i,o){return!e(r.value)||(i(o),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return iu(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=oo(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&vo(n,!0)&&n.limit>0)return this._read(i=>{var o=oa(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return iu(this._ctx,function(i){var o=i.primaryKey.toString(),s=Yn(r,o);return r[o]=!0,!s}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var o=Rt(e),s=o.length;i=function(b){for(var x=!1,E=0;E<s;++E){var M=o[E],P=e[M];Wr(b,M)!==P&&(mr(b,M,P),x=!0)}return x}}const l=n.table.core,{outbound:a,extractKey:c}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const m=[],g=(b,x)=>{const{failures:E,numFailures:M}=x;h+=b-M;for(let P of Rt(E))d.push(E[P])};return this.clone().primaryKeys().then(b=>{const x=E=>{const M=Math.min(u,b.length-E);return l.getMany({trans:r,keys:b.slice(E,E+M),cache:"immutable"}).then(P=>{const L=[],D=[],V=a?[]:null,H=[];for(let O=0;O<M;++O){const k=P[O],F={value:pl(k),primKey:b[E+O]};i.call(F,F.value,F)!==!1&&(F.value==null?H.push(b[E+O]):a||Sn(c(k),c(F.value))===0?(D.push(F.value),a&&V.push(b[E+O])):(H.push(b[E+O]),L.push(F.value)))}const U=vo(n)&&n.limit===1/0&&(typeof e!="function"||e===su)&&{index:n.index,range:n.range};return Promise.resolve(L.length>0&&l.mutate({trans:r,type:"add",values:L}).then(O=>{for(let k in O.failures)H.splice(parseInt(k),1);g(L.length,O)})).then(()=>(D.length>0||U&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:V,values:D,criteria:U,changeSpec:typeof e!="function"&&e}).then(O=>g(D.length,O))).then(()=>(H.length>0||U&&e===su)&&l.mutate({trans:r,type:"delete",keys:H,criteria:U}).then(O=>g(H.length,O))).then(()=>b.length>E+M&&x(E+u))})};return x(0).then(()=>{if(d.length>0)throw new Ma("Error modifying one or more objects",d,h,m);return b.length})})})}delete(){var e=this._ctx,n=e.range;return vo(e)&&(e.isPrimKey&&!iS||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,o=n;return e.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:l,lastResult:a,results:c,numFailures:u})=>{if(u)throw new Ma("Could not delete some values",Object.keys(l).map(d=>l[d]),s-u);return s-u}))}):this.modify(su)}};const su=(t,e)=>e.value=null;function lS(t,e){return t<e?-1:t===e?0:1}function aS(t,e){return t>e?-1:t===e?0:1}function jn(t,e,n){var r=t instanceof $y?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function wo(t){return new t.Collection(t,()=>Py("")).limit(0)}function cS(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),l=-1,a=0;a<s;++a){var c=e[a];if(c!==r[a])return i(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):i(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;i(t[a],c)<0&&(l=a)}return s<r.length&&o==="next"?t+n.substr(t.length):s<t.length&&o==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function $l(t,e,n,r){var i,o,s,l,a,c,u,d=n.length;if(!n.every(b=>typeof b=="string"))return jn(t,My);function h(b){i=function(E){return E==="next"?M=>M.toUpperCase():M=>M.toLowerCase()}(b),o=function(E){return E==="next"?M=>M.toLowerCase():M=>M.toUpperCase()}(b),s=b==="next"?lS:aS;var x=n.map(function(E){return{lower:o(E),upper:i(E)}}).sort(function(E,M){return s(E.lower,M.lower)});l=x.map(function(E){return E.upper}),a=x.map(function(E){return E.lower}),c=b,u=b==="next"?"":r}h("next");var m=new t.Collection(t,()=>ni(l[0],a[d-1]+r));m._ondirectionchange=function(b){h(b)};var g=0;return m._addAlgorithm(function(b,x,E){var M=b.key;if(typeof M!="string")return!1;var P=o(M);if(e(P,a,g))return!0;for(var L=null,D=g;D<d;++D){var V=cS(M,P,l[D],a[D],s,c);V===null&&L===null?g=D+1:(L===null||s(L,V)>0)&&(L=V)}return x(L!==null?function(){b.continue(L+u)}:E),!1}),m}function ni(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Py(t){return{type:1,lower:t,upper:t}}let $y=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?wo(this):new this.Collection(this,()=>ni(e,n,!r,!i))}catch{return jn(this,Ir)}}equals(e){return e==null?jn(this,Ir):new this.Collection(this,()=>Py(e))}above(e){return e==null?jn(this,Ir):new this.Collection(this,()=>ni(e,void 0,!0))}aboveOrEqual(e){return e==null?jn(this,Ir):new this.Collection(this,()=>ni(e,void 0,!1))}below(e){return e==null?jn(this,Ir):new this.Collection(this,()=>ni(void 0,e,!1,!0))}belowOrEqual(e){return e==null?jn(this,Ir):new this.Collection(this,()=>ni(void 0,e))}startsWith(e){return typeof e!="string"?jn(this,My):this.between(e,e+Ki,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):$l(this,(n,r)=>n.indexOf(r[0])===0,[e],Ki)}equalsIgnoreCase(e){return $l(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=jr.apply(Eo,arguments);return e.length===0?wo(this):$l(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=jr.apply(Eo,arguments);return e.length===0?wo(this):$l(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,Ki)}anyOf(){const e=jr.apply(Eo,arguments);let n=this._cmp;try{e.sort(n)}catch{return jn(this,Ir)}if(e.length===0)return wo(this);const r=new this.Collection(this,()=>ni(e[0],e[e.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((o,s,l)=>{const a=o.key;for(;n(a,e[i])>0;)if(++i,i===e.length)return s(l),!1;return n(a,e[i])===0||(s(()=>{o.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[cd,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=jr.apply(Eo,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return jn(this,Ir)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[cd,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,l=this._max;if(e.length===0)return wo(this);if(!e.every(M=>M[0]!==void 0&&M[1]!==void 0&&i(M[0],M[1])<=0))return jn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);const a=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=i;function h(M,P){return d(M[0],P[0])}try{u=e.reduce(function(M,P){let L=0,D=M.length;for(;L<D;++L){const V=M[L];if(r(P[0],V[1])<0&&r(P[1],V[0])>0){V[0]=s(V[0],P[0]),V[1]=l(V[1],P[1]);break}}return L===D&&M.push(P),M},[]),u.sort(h)}catch{return jn(this,Ir)}let m=0;const g=c?M=>i(M,u[m][1])>0:M=>i(M,u[m][1])>=0,b=a?M=>o(M,u[m][0])>0:M=>o(M,u[m][0])>=0;let x=g;const E=new this.Collection(this,()=>ni(u[0][0],u[u.length-1][1],!a,!c));return E._ondirectionchange=M=>{M==="next"?(x=g,d=i):(x=b,d=o),u.sort(h)},E._addAlgorithm((M,P,L)=>{for(var D=M.key;x(D);)if(++m,m===u.length)return P(L),!1;return!!function(V){return!g(V)&&!b(V)}(D)||(this._cmp(D,u[m][1])===0||this._cmp(D,u[m][0])===0||P(()=>{d===i?M.continue(u[m][0]):M.continue(u[m][1])}),!1)}),E}startsWithAnyOf(){const e=jr.apply(Eo,arguments);return e.every(n=>typeof n=="string")?e.length===0?wo(this):this.inAnyRange(e.map(n=>[n,n+Ki])):jn(this,"startsWithAnyOf() only works with strings")}};function xr(t){return Et(function(e){return Zs(e),t(e.target.error),!1})}function Zs(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Qs="storagemutated",ui="x-storagemutated-1",Ci=$s(null,Qs);class uS{_lock(){return ms(!De.global),++this._reculock,this._reculock!==1||De.global||(De.lockOwnerFor=this),this}_unlock(){if(ms(!De.global),--this._reculock==0)for(De.global||(De.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{is(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&De.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(ms(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new je.DatabaseClosed(r);case"MissingAPIError":throw new je.MissingAPI(r.message,r);default:throw new je.OpenFailed(r)}if(!this.active)throw new je.TransactionInactive;return ms(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Et(i=>{Zs(i),this._reject(e.error)}),e.onabort=Et(i=>{Zs(i),this.active&&this._reject(new je.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Et(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Ci.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return Kt(new je.ReadOnly("Transaction is readonly"));if(!this.active)return Kt(new je.TransactionInactive);if(this._locked())return new ke((o,s)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(o,s)},De])});if(r)return xi(()=>{var o=new ke((s,l)=>{this._lock();const a=n(s,l,this);a&&a.then&&a.then(s,l)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new ke((o,s)=>{var l=n(o,s,this);l&&l.then&&l.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=ke.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new ke((s,l)=>{r.then(a=>n._waitingQueue.push(Et(s.bind(null,a))),a=>n._waitingQueue.push(Et(l.bind(null,a)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Yn(n,e))return n[e];const r=this.schema[e];if(!r)throw new je.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function ud(t,e,n,r,i,o,s){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Dy(e)}}function Dy(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Iy(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:fy(n,r=>[r.name,r])}}let el=t=>{try{return t.only([[]]),el=()=>[[]],[[]]}catch{return el=()=>Ki,Ki}};function dd(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Wr(r,e)}(t):e=>Wr(e,t)}function yp(t){return[].slice.call(t)}let dS=0;function Ds(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function fS(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=a;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:i,hasGetAll:o}=function(a,c){const u=yp(a.objectStoreNames);return{schema:{name:a.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:m}=d,g=dn(h),b=h==null,x={},E={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:g,keyPath:h,autoIncrement:m,unique:!0,extractKey:dd(h)},indexes:yp(d.indexNames).map(M=>d.index(M)).map(M=>{const{name:P,unique:L,multiEntry:D,keyPath:V}=M,H={name:P,compound:dn(V),keyPath:V,unique:L,multiEntry:D,extractKey:dd(V)};return x[Ds(V)]=H,H}),getIndexByKeyPath:M=>x[Ds(M)]};return x[":id"]=E.primaryKey,h!=null&&(x[Ds(h)]=E.primaryKey),E})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),s=i.tables.map(a=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:m,values:g,range:b}){return new Promise((x,E)=>{x=Et(x);const M=d.objectStore(u),P=M.keyPath==null,L=h==="put"||h==="add";if(!L&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:D}=m||g||{length:1};if(m&&g&&m.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(D===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});let V;const H=[],U=[];let O=0;const k=C=>{++O,Zs(C)};if(h==="deleteRange"){if(b.type===4)return x({numFailures:O,failures:U,results:[],lastResult:void 0});b.type===3?H.push(V=M.clear()):H.push(V=M.delete(r(b)))}else{const[C,de]=L?P?[g,m]:[g,null]:[m,null];if(L)for(let ee=0;ee<D;++ee)H.push(V=de&&de[ee]!==void 0?M[h](C[ee],de[ee]):M[h](C[ee])),V.onerror=k;else for(let ee=0;ee<D;++ee)H.push(V=M[h](C[ee])),V.onerror=k}const F=C=>{const de=C.target.result;H.forEach((ee,Se)=>ee.error!=null&&(U[Se]=ee.error)),x({numFailures:O,failures:U,results:h==="delete"?m:H.map(ee=>ee.result),lastResult:de})};V.onerror=C=>{k(C),F(C)},V.onsuccess=F})},getMany:({trans:d,keys:h})=>new Promise((m,g)=>{m=Et(m);const b=d.objectStore(u),x=h.length,E=new Array(x);let M,P=0,L=0;const D=H=>{const U=H.target;E[U._pos]=U.result,++L===P&&m(E)},V=xr(g);for(let H=0;H<x;++H)h[H]!=null&&(M=b.get(h[H]),M._pos=H,M.onsuccess=D,M.onerror=V,++P);P===0&&m(E)}),get:({trans:d,key:h})=>new Promise((m,g)=>{m=Et(m);const b=d.objectStore(u).get(h);b.onsuccess=x=>m(x.target.result),b.onerror=xr(g)}),query:function(d){return h=>new Promise((m,g)=>{m=Et(m);const{trans:b,values:x,limit:E,query:M}=h,P=E===1/0?void 0:E,{index:L,range:D}=M,V=b.objectStore(u),H=L.isPrimaryKey?V:V.index(L.name),U=r(D);if(E===0)return m({result:[]});if(d){const O=x?H.getAll(U,P):H.getAllKeys(U,P);O.onsuccess=k=>m({result:k.target.result}),O.onerror=xr(g)}else{let O=0;const k=x||!("openKeyCursor"in H)?H.openCursor(U):H.openKeyCursor(U),F=[];k.onsuccess=C=>{const de=k.result;return de?(F.push(x?de.value:de.primaryKey),++O===E?m({result:F}):void de.continue()):m({result:F})},k.onerror=xr(g)}})}(o),openCursor:function({trans:d,values:h,query:m,reverse:g,unique:b}){return new Promise((x,E)=>{x=Et(x);const{index:M,range:P}=m,L=d.objectStore(u),D=M.isPrimaryKey?L:L.index(M.name),V=g?b?"prevunique":"prev":b?"nextunique":"next",H=h||!("openKeyCursor"in D)?D.openCursor(r(P),V):D.openKeyCursor(r(P),V);H.onerror=xr(E),H.onsuccess=Et(U=>{const O=H.result;if(!O)return void x(null);O.___id=++dS,O.done=!1;const k=O.continue.bind(O);let F=O.continuePrimaryKey;F&&(F=F.bind(O));const C=O.advance.bind(O),de=()=>{throw new Error("Cursor not stopped")};O.trans=d,O.stop=O.continue=O.continuePrimaryKey=O.advance=()=>{throw new Error("Cursor not started")},O.fail=Et(E),O.next=function(){let ee=1;return this.start(()=>ee--?this.continue():this.stop()).then(()=>this)},O.start=ee=>{const Se=new Promise((te,Ae)=>{te=Et(te),H.onerror=xr(Ae),O.fail=Ae,O.stop=tt=>{O.stop=O.continue=O.continuePrimaryKey=O.advance=de,te(tt)}}),be=()=>{if(H.result)try{ee()}catch(te){O.fail(te)}else O.done=!0,O.start=()=>{throw new Error("Cursor behind last entry")},O.stop()};return H.onsuccess=Et(te=>{H.onsuccess=be,be()}),O.continue=k,O.continuePrimaryKey=F,O.advance=C,be(),Se},x(O)},E)})},count({query:d,trans:h}){const{index:m,range:g}=d;return new Promise((b,x)=>{const E=h.objectStore(u),M=m.isPrimaryKey?E:E.index(m.name),P=r(g),L=P?M.count(P):M.count();L.onsuccess=Et(D=>b(D.target.result)),L.onerror=xr(x)})}}}(a)),l={};return s.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:el(e),schema:i}}function fd({_novip:t},e){const n=e.db,r=function(i,o,{IDBKeyRange:s,indexedDB:l},a){return{dbcore:function(u,d){return d.reduce((h,{create:m})=>({...h,...m(h)}),u)}(fS(o,s,a),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const o=i.name;t.core.schema.tables.some(s=>s.name===o)&&(i.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=i.core))})}function Da({_novip:t},e,n,r){n.forEach(i=>{const o=r[i];e.forEach(s=>{const l=pf(s,i);(!l||"value"in l&&l.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?Ur(s,i,{get(){return this.table(i)},set(a){cy(this,i,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new t.Table(i,o))})})}function hd({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function hS(t,e){return t._cfg.version-e._cfg.version}function pS(t,e,n,r){const i=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),l=De.transless||De;xi(()=>{De.trans=o,De.transless=l,e===0?(Rt(i).forEach(a=>{lu(n,a,i[a].primKey,i[a].indexes)}),fd(t,n),ke.follow(()=>t.on.populate.fire(o)).catch(s)):function({_novip:a},c,u,d){const h=[],m=a._versions;let g=a._dbSchema=md(a,a.idbdb,d),b=!1;const x=m.filter(M=>M._cfg.version>=c);function E(){return h.length?ke.resolve(h.shift()(u.idbtrans)).then(E):ke.resolve()}return x.forEach(M=>{h.push(()=>{const P=g,L=M._cfg.dbschema;gd(a,P,d),gd(a,L,d),g=a._dbSchema=L;const D=Ly(P,L);D.add.forEach(H=>{lu(d,H[0],H[1].primKey,H[1].indexes)}),D.change.forEach(H=>{if(H.recreate)throw new je.Upgrade("Not yet support for changing primary key");{const U=d.objectStore(H.name);H.add.forEach(O=>pd(U,O)),H.change.forEach(O=>{U.deleteIndex(O.name),pd(U,O)}),H.del.forEach(O=>U.deleteIndex(O))}});const V=M._cfg.contentUpgrade;if(V&&M._cfg.version>c){fd(a,d),u._memoizedTables={},b=!0;let H=hy(L);D.del.forEach(F=>{H[F]=P[F]}),hd(a,[a.Transaction.prototype]),Da(a,[a.Transaction.prototype],Rt(H),H),u.schema=H;const U=mf(V);let O;U&&rs();const k=ke.follow(()=>{if(O=V(u),O&&U){var F=Yr.bind(null,null);O.then(F,F)}});return O&&typeof O.then=="function"?ke.resolve(O):k.then(()=>O)}}),h.push(P=>{(!b||!rS)&&function(L,D){[].slice.call(D.db.objectStoreNames).forEach(V=>L[V]==null&&D.db.deleteObjectStore(V))}(M._cfg.dbschema,P),hd(a,[a.Transaction.prototype]),Da(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema})}),E().then(()=>{var M,P;P=d,Rt(M=g).forEach(L=>{P.db.objectStoreNames.contains(L)||lu(P,L,M[L].primKey,M[L].indexes)})})}(t,e,o,n).catch(s)})}function Ly(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],o=e[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!wc)s.recreate=!0,n.change.push(s);else{const l=i.idxByName,a=o.idxByName;let c;for(c in l)a[c]||s.del.push(c);for(c in a){const u=l[c],d=a[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function lu(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>pd(i,o)),i}function pd(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function md(t,e,n){const r={};return Aa(e.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const l=ud(Dy(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),a=[];for(let u=0;u<o.indexNames.length;++u){const d=o.index(o.indexNames[u]);s=d.keyPath;var c=ud(d.name,s,!!d.unique,!!d.multiEntry,!1,s&&typeof s!="string",!1);a.push(c)}r[i]=Iy(i,l,a)}),r}function gd({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);t._hasGetAll="getAll"in s;for(let l=0;l<s.indexNames.length;++l){const a=s.indexNames[l],c=s.index(a).keyPath,u=typeof c=="string"?c:"["+Aa(c).join("+")+"]";if(e[o]){const d=e[o].idxByName[u];d&&(d.name=a,delete e[o].idxByName[u],e[o].idxByName[a]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ct.WorkerGlobalScope&&Ct instanceof Ct.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let mS=class{_parseStoresSpec(e,n){Rt(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((s,l)=>{const a=(s=s.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return ud(a,c||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),dn(c),l===0)}),o=i.shift();if(o.multi)throw new je.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")}),n[r]=Iy(r,o,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Tn(this._cfg.storesSource,e):e;const r=n._versions,i={};let o={};return r.forEach(s=>{Tn(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,hd(n,[n._allTables,n,n.Transaction.prototype]),Da(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Rt(o),o),n._storeNames=Rt(o),this}upgrade(e){return this._cfg.contentUpgrade=bf(this._cfg.contentUpgrade||wt,e),this}};function xf(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new zt(kc,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Sf(t){return t&&typeof t.databases=="function"}function yd(t){return xi(function(){return De.letThrough=!0,t()})}function gS(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function yS(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Kt(e.dbOpenError):t);Pr&&(e.openCanceller._stackHolder=uo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new je.DatabaseClosed("db.open() was cancelled")}let o=e.dbReadyResolve,s=null,l=!1;const a=()=>new ke((c,u)=>{if(i(),!n)throw new je.MissingAPI;const d=t.name,h=e.autoSchema?n.open(d):n.open(d,Math.round(10*t.verno));if(!h)throw new je.MissingAPI;h.onerror=xr(u),h.onblocked=Et(t._fireOnBlocked),h.onupgradeneeded=Et(m=>{if(s=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=Zs,s.abort(),h.result.close();const b=n.deleteDatabase(d);b.onsuccess=b.onerror=Et(()=>{u(new je.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{s.onerror=xr(u);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=g<1,t._novip.idbdb=h.result,pS(t,g/10,s,u)}},u),h.onsuccess=Et(()=>{s=null;const m=t._novip.idbdb=h.result,g=Aa(m.objectStoreNames);if(g.length>0)try{const x=m.transaction((b=g).length===1?b[0]:b,"readonly");e.autoSchema?function({_novip:E},M,P){E.verno=M.version/10;const L=E._dbSchema=md(0,M,P);E._storeNames=Aa(M.objectStoreNames,0),Da(E,[E._allTables],Rt(L),L)}(t,m,x):(gd(t,t._dbSchema,x),function(E,M){const P=Ly(md(0,E.idbdb,M),E._dbSchema);return!(P.add.length||P.change.some(L=>L.add.length||L.change.length))}(t,x)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fd(t,x)}catch{}var b;Ps.push(t),m.onversionchange=Et(x=>{e.vcFired=!0,t.on("versionchange").fire(x)}),m.onclose=Et(x=>{t.on("close").fire(x)}),l&&function({indexedDB:x,IDBKeyRange:E},M){!Sf(x)&&M!==kc&&xf(x,E).put({name:M}).catch(wt)}(t._deps,d),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),a()):ke.reject(c));return ke.race([r,(typeof navigator>"u"?ke.resolve():gS()).then(a)]).then(()=>(i(),e.onReadyBeingFired=[],ke.resolve(yd(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(bf,wt);return e.onReadyBeingFired=[],ke.resolve(yd(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),Kt(c)}).finally(()=>{e.openComplete=!0,o()})}function bd(t){var e=o=>t.next(o),n=i(e),r=i(o=>t.throw(o));function i(o){return s=>{var l=o(s),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):dn(a)?Promise.all(a).then(n,r):n(a)}}return i(e)()}function bS(t,e,n){var r=arguments.length;if(r<2)throw new je.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,py(i),n]}function By(t,e,n,r,i){return ke.resolve().then(()=>{const o=De.transless||De,s=t._createTransaction(e,n,t._dbSchema,r),l={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===yf.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>By(t,e,n,null,i))):Kt(d)}const a=mf(i);let c;a&&rs();const u=ke.follow(()=>{if(c=i.call(s,s),c)if(a){var d=Yr.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=bd(c))},l);return(c&&typeof c.then=="function"?ke.resolve(c).then(d=>s.active?d:Kt(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&s._resolve(),s._completion.then(()=>d))).catch(d=>(s._reject(d),Kt(d)))})}function Dl(t,e,n){const r=dn(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const vS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},o=[];function s(u,d,h){const m=Ds(u),g=i[m]=i[m]||[],b=u==null?0:typeof u=="string"?1:u.length,x=d>0,E={...h,isVirtual:x,keyTail:d,keyLength:b,extractKey:dd(u),unique:!x&&h.unique};return g.push(E),E.isPrimaryKey||o.push(E),b>1&&s(b===2?u[0]:u.slice(0,b-1),d+1,h),g.sort((M,P)=>M.keyTail-P.keyTail),E}const l=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const u of r.indexes)s(u.keyPath,0,u);function a(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,m=d.keyTail,{type:h.type===1?2:h.type,lower:Dl(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:Dl(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:u;var h,m}return{...n,schema:{...r,primaryKey:l,indexes:o,getIndexByKeyPath:function(u){const d=i[Ds(u)];return d&&d[0]}},count:u=>n.count(a(u)),query:u=>n.query(a(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:m}=u.query.index;return h?n.openCursor(a(u)).then(g=>g&&function(b){return Object.create(b,{continue:{value:function(E){E!=null?b.continue(Dl(E,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?b.continue(b.key.slice(0,m).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):b.continue()}},continuePrimaryKey:{value(E,M){b.continuePrimaryKey(Dl(E,t.MAX_KEY,d),M)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const E=b.key;return m===1?E[0]:E.slice(0,m)}},value:{get:()=>b.value}})}(g)):n.openCursor(u)}}}}}};function Cf(t,e,n,r){return n=n||{},r=r||"",Rt(t).forEach(i=>{if(Yn(e,i)){var o=t[i],s=e[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const l=Xu(o);l!==Xu(s)?n[r+i]=e[i]:l==="Object"?Cf(o,s,n,r+i+"."):o!==s&&(n[r+i]=e[i])}else o!==s&&(n[r+i]=e[i])}else n[r+i]=void 0}),Rt(e).forEach(i=>{Yn(t,i)||(n[r+i]=e[i])}),n}const wS={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=De.trans,{deleting:l,creating:a,updating:c}=s.table(e).hook;switch(o.type){case"add":if(a.fire===wt)break;return s._promise("readwrite",()=>u(o),!0);case"put":if(a.fire===wt&&c.fire===wt)break;return s._promise("readwrite",()=>u(o),!0);case"delete":if(l.fire===wt)break;return s._promise("readwrite",()=>u(o),!0);case"deleteRange":if(l.fire===wt)break;return s._promise("readwrite",()=>function(h){return d(h.trans,h.range,1e4)}(o),!0)}return n.mutate(o);function u(h){const m=De.trans,g=h.keys||function(b,x){return x.type==="delete"?x.keys:x.keys||x.values.map(b.extractKey)}(r,h);if(!g)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:g}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(b,x,E){return x.type==="add"?Promise.resolve([]):b.getMany({trans:x.trans,keys:E,cache:"immutable"})}(n,h,g).then(b=>{const x=g.map((E,M)=>{const P=b[M],L={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(L,E,P,m);else if(h.type==="add"||P===void 0){const D=a.fire.call(L,E,h.values[M],m);E==null&&D!=null&&(E=D,h.keys[M]=E,r.outbound||mr(h.values[M],r.keyPath,E))}else{const D=Cf(P,h.values[M]),V=c.fire.call(L,D,E,P,m);if(V){const H=h.values[M];Object.keys(V).forEach(U=>{Yn(H,U)?H[U]=V[U]:mr(H,U,V[U])})}}return L});return n.mutate(h).then(({failures:E,results:M,numFailures:P,lastResult:L})=>{for(let D=0;D<g.length;++D){const V=M?M[D]:g[D],H=x[D];V==null?H.onerror&&H.onerror(E[D]):H.onsuccess&&H.onsuccess(h.type==="put"&&b[D]?h.values[D]:V)}return{failures:E,results:M,numFailures:P,lastResult:L}}).catch(E=>(x.forEach(M=>M.onerror&&M.onerror(E)),Promise.reject(E)))})}function d(h,m,g){return n.query({trans:h,values:!1,query:{index:r,range:m},limit:g}).then(({result:b})=>u({type:"delete",keys:b,trans:h}).then(x=>x.numFailures>0?Promise.reject(x.failures[0]):b.length<g?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...m,lower:b[b.length-1],lowerOpen:!0},g)))}}}}})};function Ry(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,o=0;i<e.keys.length&&o<t.length;++i)Sn(e.keys[i],t[o])===0&&(r.push(n?pl(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch{return null}}const kS={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Ry(r.keys,r.trans._cache,r.cache==="clone");return i?ke.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?pl(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Tf(t){return!("from"in t)}const Vr=function(t,e){if(!this){const n=new Vr;return t&&"d"in t&&Tn(n,t),n}Tn(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function tl(t,e,n){const r=Sn(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Tf(t))return Tn(t,{from:e,to:n,d:1});const i=t.l,o=t.r;if(Sn(n,t.from)<0)return i?tl(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},bp(t);if(Sn(e,t.to)>0)return o?tl(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},bp(t);Sn(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),Sn(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const s=!t.r;i&&!t.l&&Ia(t,i),o&&s&&Ia(t,o)}function Ia(t,e){Tf(e)||function n(r,{from:i,to:o,l:s,r:l}){tl(r,i,o),s&&n(r,s),l&&n(r,l)}(t,e)}function xS(t,e){const n=vd(e);let r=n.next();if(r.done)return!1;let i=r.value;const o=vd(t);let s=o.next(i.from),l=s.value;for(;!r.done&&!s.done;){if(Sn(l.from,i.to)<=0&&Sn(l.to,i.from)>=0)return!0;Sn(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(s=o.next(i.from)).value}return!1}function vd(t){let e=Tf(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Sn(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Sn(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function bp(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...t},l=t[i];t.from=l.from,t.to=l.to,t[i]=l[i],s[i]=l[o],t[o]=s,s.d=vp(s)}t.d=vp(t)}function vp({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Jo(Vr.prototype,{add(t){return Ia(this,t),this},addKey(t){return tl(this,t,t),this},addKeys(t){return t.forEach(e=>tl(this,e,e)),this},[Zu](){return vd(this)}});const SS={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Vr(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:l,outbound:a}=s,c={...i,mutate:h=>{const m=h.trans,g=m.mutatedParts||(m.mutatedParts={}),b=V=>{const H=`idb://${e}/${r}/${V}`;return g[H]||(g[H]=new Vr)},x=b(""),E=b(":dels"),{type:M}=h;let[P,L]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const D=h.trans._cache;return i.mutate(h).then(V=>{if(dn(P)){M!=="delete"&&(P=V.results),x.addKeys(P);const H=Ry(P,D);H||M==="add"||E.addKeys(P),(H||L)&&function(U,O,k,F){function C(de){const ee=U(de.name||"");function Se(te){return te!=null?de.extractKey(te):null}const be=te=>de.multiEntry&&dn(te)?te.forEach(Ae=>ee.addKey(Ae)):ee.addKey(te);(k||F).forEach((te,Ae)=>{const tt=k&&Se(k[Ae]),Ue=F&&Se(F[Ae]);Sn(tt,Ue)!==0&&(tt!=null&&be(tt),Ue!=null&&be(Ue))})}O.indexes.forEach(C)}(b,o,H,L)}else if(P){const H={from:P.lower,to:P.upper};E.add(H),x.add(H)}else x.add(n),E.add(n),o.indexes.forEach(H=>b(H.name).add(n));return V})}},u=({query:{index:h,range:m}})=>{var g,b;return[h,new Vr((g=m.lower)!==null&&g!==void 0?g:t.MIN_KEY,(b=m.upper)!==null&&b!==void 0?b:t.MAX_KEY)]},d={get:h=>[s,new Vr(h.key)],getMany:h=>[s,new Vr().addKeys(h.keys)],count:u,query:u,openCursor:u};return Rt(d).forEach(h=>{c[h]=function(m){const{subscr:g}=De;if(g){const b=L=>{const D=`idb://${e}/${r}/${L}`;return g[D]||(g[D]=new Vr)},x=b(""),E=b(":dels"),[M,P]=d[h](m);if(b(M.name||"").add(P),!M.isPrimaryKey){if(h!=="count"){const L=h==="query"&&a&&m.values&&i.query({...m,values:!1});return i[h].apply(this,arguments).then(D=>{if(h==="query"){if(a&&m.values)return L.then(({result:H})=>(x.addKeys(H),D));const V=m.values?D.result.map(l):D.result;m.values?x.addKeys(V):E.addKeys(V)}else if(h==="openCursor"){const V=D,H=m.values;return V&&Object.create(V,{key:{get:()=>(E.addKey(V.primaryKey),V.key)},primaryKey:{get(){const U=V.primaryKey;return E.addKey(U),U}},value:{get:()=>(H&&x.addKey(V.primaryKey),V.value)}})}return D})}E.add(n)}}return i[h].apply(this,arguments)}}),c}}}};let zt=class sa{constructor(e,n){this._middlewares={},this.verno=0;const r=sa.dependencies;this._options=n={addons:sa.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:wt,dbReadyPromise:null,cancelOpen:wt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new ke(l=>{o.dbReadyResolve=l}),o.openCanceller=new ke((l,a)=>{o.cancelOpen=a}),this._state=o,this.name=e,this.on=$s(this,"populate","blocked","versionchange","close",{ready:[bf,wt]}),this.on.ready.subscribe=uy(this.on.ready.subscribe,l=>(a,c)=>{sa.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||ke.resolve().then(a),c&&l(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&l(a);else{l(a);const d=this;c||l(function h(){d.on.ready.unsubscribe(a),d.on.ready.unsubscribe(h)})}})}),this.Collection=(s=this,fs(sS.prototype,function(l,a){this.db=s;let c=Ny,u=null;if(a)try{c=a()}catch(g){u=g}const d=l._ctx,h=d.table,m=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:m!==Ys?m:null}})),this.Table=function(l){return fs(oS.prototype,function(a,c,u){this.db=l,this._tx=u,this.name=a,this.schema=c,this.hook=l._allTables[a]?l._allTables[a].hook:$s(null,{creating:[qx,wt],reading:[Wx,Ys],updating:[Gx,wt],deleting:[Jx,wt]})})}(this),this.Transaction=function(l){return fs(uS.prototype,function(a,c,u,d,h){this.db=l,this.mode=a,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=$s(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke((m,g)=>{this._resolve=m,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var g=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):g&&this.idbtrans&&this.idbtrans.abort(),Kt(m)})})}(this),this.Version=function(l){return fs(mS.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return fs($y.prototype,function(a,c,u){this.db=l,this._ctx={table:a,index:c===":id"?null:c,or:u};const d=l._deps.indexedDB;if(!d)throw new je.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,m)=>d.cmp(m,h),this._max=(h,m)=>d.cmp(h,m)>0?h:m,this._min=(h,m)=>d.cmp(h,m)<0?h:m,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=el(n.IDBKeyRange),this._createTransaction=(l,a,c,u)=>new this.Transaction(l,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Ps.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(vS),this.use(wS),this.use(SS),this.use(kS),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new je.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(hS),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?e():new ke((n,r)=>{if(this._state.openComplete)return r(new je.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new je.DatabaseClosed);this.open().catch(wt)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:r??10,name:i}),o.sort((s,l)=>s.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return yS(this)}_close(){const e=this._state,n=Ps.indexOf(this);if(n>=0&&Ps.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new ke(r=>{e.dbReadyResolve=r}),e.openCanceller=new ke((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new je.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new ke((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Et(()=>{(function({indexedDB:l,IDBKeyRange:a},c){!Sf(l)&&c!==kc&&xf(l,a).delete(c).catch(wt)})(this._deps,this.name),r()}),s.onerror=xr(i),s.onblocked=this._fireOnBlocked};if(e)throw new je.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Rt(this._allTables).map(e=>this._allTables[e])}transaction(){const e=bS.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=De.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const o=e.indexOf("?")!==-1;let s,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===nu)s=nu;else{if(e!="rw"&&e!=ru)throw new je.InvalidArgument("Invalid transaction mode: "+e);s=ru}if(i){if(i.mode===nu&&s===ru){if(!o)throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!o)throw new je.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(u,d)=>{d(c)}):Kt(c)}const a=By.bind(null,this,s,l,i,r);return i?i._promise(s,a,"lock"):De.trans?is(De.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!Yn(this._allTables,e))throw new je.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}};const CS=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";let TS=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[CS](){return this}};function Vy(t,e){return Rt(e).forEach(n=>{Ia(t[n]||(t[n]=new Vr),e[n])}),t}function Fy(t){let e,n=!1;const r=new TS(i=>{const o=mf(t);let s=!1,l={},a={};const c={get closed(){return s},unsubscribe:()=>{s=!0,Ci.storagemutated.unsubscribe(m)}};i.start&&i.start(c);let u=!1,d=!1;function h(){return Rt(a).some(b=>l[b]&&xS(l[b],a[b]))}const m=b=>{Vy(l,b),h()&&g()},g=()=>{if(u||s)return;l={};const b={},x=function(E){o&&rs();const M=()=>xi(t,{subscr:E,trans:null}),P=De.trans?is(De.transless,M):M();return o&&P.then(Yr,Yr),P}(b);d||(Ci(Qs,m),d=!0),u=!0,Promise.resolve(x).then(E=>{n=!0,e=E,u=!1,s||(h()?g():(l={},a=b,i.next&&i.next(E)))},E=>{u=!1,n=!1,i.error&&i.error(E),c.unsubscribe()})};return g(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let wd;try{wd={indexedDB:Ct.indexedDB||Ct.mozIndexedDB||Ct.webkitIndexedDB||Ct.msIndexedDB,IDBKeyRange:Ct.IDBKeyRange||Ct.webkitIDBKeyRange}}catch{wd={indexedDB:null,IDBKeyRange:null}}const Li=zt;function la(t){let e=zr;try{zr=!0,Ci.storagemutated.fire(t)}finally{zr=e}}Jo(Li,{...ea,delete:t=>new Li(t,{addons:[]}).delete(),exists:t=>new Li(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Sf(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==kc)):xf(e,n).toCollection().primaryKeys()}(Li.dependencies).then(t)}catch{return Kt(new je.MissingAPI)}},defineClass:()=>function(t){Tn(this,t)},ignoreTransaction:t=>De.trans?is(De.transless,t):t(),vip:yd,async:function(t){return function(){try{var e=bd(t.apply(this,arguments));return e&&typeof e.then=="function"?e:ke.resolve(e)}catch(n){return Kt(n)}}},spawn:function(t,e,n){try{var r=bd(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:ke.resolve(r)}catch(i){return Kt(i)}},currentTransaction:{get:()=>De.trans||null},waitFor:function(t,e){const n=ke.resolve(typeof t=="function"?Li.ignoreTransaction(t):t).timeout(e||6e4);return De.trans?De.trans.waitFor(n):n},Promise:ke,debug:{get:()=>Pr,set:t=>{gy(t,t==="dexie"?()=>!0:_y)}},derive:Ho,extend:Tn,props:Jo,override:uy,Events:$s,on:Ci,liveQuery:Fy,extendObservabilitySet:Vy,getByKeyPath:Wr,setByKeyPath:mr,delByKeyPath:function(t,e){typeof e=="string"?mr(t,e,void 0):"length"in e&&[].map.call(e,function(n){mr(t,n,void 0)})},shallowClone:hy,deepClone:pl,getObjectDiff:Cf,cmp:Sn,asap:dy,minKey:cd,addons:[],connections:Ps,errnames:yf,dependencies:wd,semVer:fp,version:fp.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Li.maxKey=el(Li.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ci(Qs,t=>{if(!zr){let e;wc?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ui,!0,!0,t)):e=new CustomEvent(ui,{detail:t}),zr=!0,dispatchEvent(e),zr=!1}}),addEventListener(ui,({detail:t})=>{zr||la(t)}));let zr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(ui);typeof t.unref=="function"&&t.unref(),Ci(Qs,e=>{zr||t.postMessage(e)}),t.onmessage=e=>{e.data&&la(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ci(Qs,e=>{try{zr||(typeof localStorage<"u"&&localStorage.setItem(ui,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:ui,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===ui){const n=JSON.parse(e.newValue);n&&la(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===ui&&la(e.changedParts)})}ke.rejectionMapper=function(t,e){if(!t||t instanceof jo||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ap[t.name])return t;var n=new ap[t.name](e||t.message,t);return"stack"in t&&Ur(n,"stack",{get:function(){return this.inner.stack}}),n},gy(Pr,_y);var wp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var La=function(){return La=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},La.apply(this,arguments)};function Ti(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(d){s(d)}}function a(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(t,[])).next())})}function hr(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ES(t){var e=[t.schema.primKey].concat(t.schema.indexes);return e.map(function(n){return n.src}).join(",")}function OS(t){for(var e={},n=0,r=t.tables;n<r.length;n++){var i=r[n];e[i.name]=i.schema}return e}function Hy(t,e){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},e==="binary"?i.readAsArrayBuffer(t):i.readAsText(t)})}function jy(t,e){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=e==="binary"?n.readAsArrayBuffer(t):n.readAsText(t);return r}var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ef(t,e){return e={exports:{}},t(e,e.exports),e.exports}var xc=Ef(function(t,e){(function(n,r){t.exports=r()})(kd,function(){function n(j){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(K){return typeof K}:n=function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},n(j)}function r(j,K,J,q,ce,A,N){try{var B=j[A](N),R=B.value}catch(W){J(W);return}B.done?K(R):Promise.resolve(R).then(q,ce)}function i(j){return function(){var K=this,J=arguments;return new Promise(function(q,ce){var A=j.apply(K,J);function N(R){r(A,q,ce,N,B,"next",R)}function B(R){r(A,q,ce,N,B,"throw",R)}N(void 0)})}}function o(j,K){if(!(j instanceof K))throw new TypeError("Cannot call a class as a function")}function s(j,K){for(var J=0;J<K.length;J++){var q=K[J];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,q.key,q)}}function l(j,K,J){return K&&s(j.prototype,K),j}function a(j,K,J){return K in j?Object.defineProperty(j,K,{value:J,enumerable:!0,configurable:!0,writable:!0}):j[K]=J,j}function c(j,K){var J=Object.keys(j);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(j);K&&(q=q.filter(function(ce){return Object.getOwnPropertyDescriptor(j,ce).enumerable})),J.push.apply(J,q)}return J}function u(j){for(var K=1;K<arguments.length;K++){var J=arguments[K]!=null?arguments[K]:{};K%2?c(Object(J),!0).forEach(function(q){a(j,q,J[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(J)):c(Object(J)).forEach(function(q){Object.defineProperty(j,q,Object.getOwnPropertyDescriptor(J,q))})}return j}function d(j,K){return g(j)||x(j,K)||M()}function h(j){return m(j)||b(j)||E()}function m(j){if(Array.isArray(j)){for(var K=0,J=new Array(j.length);K<j.length;K++)J[K]=j[K];return J}}function g(j){if(Array.isArray(j))return j}function b(j){if(Symbol.iterator in Object(j)||Object.prototype.toString.call(j)==="[object Arguments]")return Array.from(j)}function x(j,K){if(Symbol.iterator in Object(j)||Object.prototype.toString.call(j)==="[object Arguments]"){var J=[],q=!0,ce=!1,A=void 0;try{for(var N=j[Symbol.iterator](),B;!(q=(B=N.next()).done)&&(J.push(B.value),!(K&&J.length===K));q=!0);}catch(R){ce=!0,A=R}finally{try{!q&&N.return!=null&&N.return()}finally{if(ce)throw A}}return J}}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function M(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var P=function j(K){o(this,j),this.p=new Promise(K)};P.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(P.prototype[Symbol.toStringTag]="TypesonPromise"),P.prototype.then=function(j,K){var J=this;return new P(function(q,ce){J.p.then(function(A){q(j?j(A):A)}).catch(function(A){return K?K(A):Promise.reject(A)}).then(q,ce)})},P.prototype.catch=function(j){return this.then(null,j)},P.resolve=function(j){return new P(function(K){K(j)})},P.reject=function(j){return new P(function(K,J){J(j)})},["all","race"].forEach(function(j){P[j]=function(K){return new P(function(J,q){Promise[j](K.map(function(ce){return ce&&ce.constructor&&ce.constructor.__typeson__type__==="TypesonPromise"?ce.p:ce})).then(J,q)})}});var L={},D=L.toString,V={}.hasOwnProperty,H=Object.getPrototypeOf,U=V.toString;function O(j,K){return ee(j)&&typeof j.then=="function"&&(!K||typeof j.catch=="function")}function k(j){return D.call(j).slice(8,-1)}function F(j,K){if(!j||n(j)!=="object")return!1;var J=H(j);if(!J)return K===null;var q=V.call(J,"constructor")&&J.constructor;return typeof q!="function"?K===null:K===q||K!==null&&U.call(q)===U.call(K)||typeof K=="function"&&typeof q.__typeson__type__=="string"&&q.__typeson__type__===K.__typeson__type__}function C(j){if(!j||k(j)!=="Object")return!1;var K=H(j);return K?F(j,Object):!0}function de(j){if(!j||k(j)!=="Object")return!1;var K=H(j);return K?F(j,Object)||de(K):!0}function ee(j){return j&&n(j)==="object"}function Se(j){return j.replace(/~/g,"~0").replace(/\./g,"~1")}function be(j){return j.replace(/~1/g,".").replace(/~0/g,"~")}function te(j,K){if(K==="")return j;var J=K.indexOf(".");if(J>-1){var q=j[be(K.slice(0,J))];return q===void 0?void 0:te(q,K.slice(J+1))}return j[be(K)]}function Ae(j,K,J){if(K==="")return J;var q=K.indexOf(".");if(q>-1){var ce=j[be(K.slice(0,q))];return Ae(ce,K.slice(q+1),J)}return j[be(K)]=J,j}function tt(j){return j===null?"null":Array.isArray(j)?"array":n(j)}var Ue=Object.keys,it=Array.isArray,ht={}.hasOwnProperty,Ft=["type","replaced","iterateIn","iterateUnsetNumeric"];function Me(j,K){if(j.keypath==="")return-1;var J=j.keypath.match(/\./g)||0,q=K.keypath.match(/\./g)||0;return J&&(J=J.length),q&&(q=q.length),J>q?-1:J<q?1:j.keypath<K.keypath?-1:j.keypath>K.keypath}var nt=function(){function j(K){o(this,j),this.options=K,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(j,[{key:"stringify",value:function(J,q,ce,A){A=u({},this.options,{},A,{stringification:!0});var N=this.encapsulate(J,null,A);return it(N)?JSON.stringify(N[0],q,ce):N.then(function(B){return JSON.stringify(B,q,ce)})}},{key:"stringifySync",value:function(J,q,ce,A){return this.stringify(J,q,ce,u({throwOnBadSyncType:!0},A,{sync:!0}))}},{key:"stringifyAsync",value:function(J,q,ce,A){return this.stringify(J,q,ce,u({throwOnBadSyncType:!0},A,{sync:!1}))}},{key:"parse",value:function(J,q,ce){return ce=u({},this.options,{},ce,{parse:!0}),this.revive(JSON.parse(J,q),ce)}},{key:"parseSync",value:function(J,q,ce){return this.parse(J,q,u({throwOnBadSyncType:!0},ce,{sync:!0}))}},{key:"parseAsync",value:function(J,q,ce){return this.parse(J,q,u({throwOnBadSyncType:!0},ce,{sync:!1}))}},{key:"specialTypeNames",value:function(J,q){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ce.returnTypeNames=!0,this.encapsulate(J,q,ce)}},{key:"rootTypeName",value:function(J,q){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ce.iterateNone=!0,this.encapsulate(J,q,ce)}},{key:"encapsulate",value:function(J,q,ce){ce=u({sync:!0},this.options,{},ce);var A=ce,N=A.sync,B=this,R={},W=[],G=[],oe=[],Y="cyclic"in ce?ce.cyclic:!0,Z=ce,X=Z.encapsulateObserver,ge=xe("",J,Y,q||{},oe);function ae(me){var w=Object.values(R);if(ce.iterateNone)return w.length?w[0]:j.getJSONType(me);if(w.length){if(ce.returnTypeNames)return h(new Set(w));!me||!C(me)||ht.call(me,"$types")?me={$:me,$types:{$:R}}:me.$types=R}else ee(me)&&ht.call(me,"$types")&&(me={$:me,$types:!0});return ce.returnTypeNames?!1:me}function he(me,w){return pe.apply(this,arguments)}function pe(){return pe=i(regeneratorRuntime.mark(function me(w,y){var S;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(y.map(function(ie){return ie[1].p}));case 2:return S=I.sent,I.next=5,Promise.all(S.map(function(){var ie=i(regeneratorRuntime.mark(function se(Te){var ve,Le,Xe,Qe,ye,ot,rt,pt,mt,Ve,Ht,Ee,fe,$e;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(ve=[],Le=y.splice(0,1),Xe=d(Le,1),Qe=Xe[0],ye=d(Qe,7),ot=ye[0],rt=ye[2],pt=ye[3],mt=ye[4],Ve=ye[5],Ht=ye[6],Ee=xe(ot,Te,rt,pt,ve,!0,Ht),fe=F(Ee,P),!(ot&&fe)){Be.next=11;break}return Be.next=8,Ee.p;case 8:return $e=Be.sent,mt[Ve]=$e,Be.abrupt("return",he(w,ve));case 11:return ot?mt[Ve]=Ee:fe?w=Ee.p:w=Ee,Be.abrupt("return",he(w,ve));case 13:case"end":return Be.stop()}},se)}));return function(se){return ie.apply(this,arguments)}}()));case 5:return I.abrupt("return",w);case 6:case"end":return I.stop()}},me)})),pe.apply(this,arguments)}function ne(me,w,y){Object.assign(me,w);var S=Ft.map(function($){var I=me[$];return delete me[$],I});y(),Ft.forEach(function($,I){me[$]=S[I]})}function xe(me,w,y,S,$,I,ie){var se,Te={},ve=n(w),Le=X?function(fe){var $e=ie||S.type||j.getJSONType(w);X(Object.assign(fe||Te,{keypath:me,value:w,cyclic:y,stateObj:S,promisesData:$,resolvingTypesonPromise:I,awaitingTypesonPromise:F(w,P)},{type:$e}))}:null;if(["string","boolean","number","undefined"].includes(ve))return w===void 0||ve==="number"&&(isNaN(w)||w===-1/0||w===1/0)?(S.replaced?se=w:se=Oe(me,w,S,$,!1,I,Le),se!==w&&(Te={replaced:se})):se=w,Le&&Le(),se;if(w===null)return Le&&Le(),w;if(y&&!S.iterateIn&&!S.iterateUnsetNumeric&&w&&n(w)==="object"){var Xe=W.indexOf(w);if(Xe<0)y===!0&&(W.push(w),G.push(me));else return R[me]="#",Le&&Le({cyclicKeypath:G[Xe]}),"#"+G[Xe]}var Qe=C(w),ye=it(w),ot=(Qe||ye)&&(!B.plainObjectReplacers.length||S.replaced)||S.iterateIn?w:Oe(me,w,S,$,Qe||ye,null,Le),rt;if(ot!==w?(se=ot,Te={replaced:ot}):me===""&&F(w,P)?($.push([me,w,y,S,void 0,void 0,S.type]),se=w):ye&&S.iterateIn!=="object"||S.iterateIn==="array"?(rt=new Array(w.length),Te={clone:rt}):!["function","symbol"].includes(n(w))&&!("toJSON"in w)&&!F(w,P)&&!F(w,Promise)&&!F(w,ArrayBuffer)||Qe||S.iterateIn==="object"?(rt={},S.addLength&&(rt.length=w.length),Te={clone:rt}):se=w,Le&&Le(),ce.iterateNone)return rt||se;if(!rt)return se;if(S.iterateIn){var pt=function($e){var _e={ownKeys:ht.call(w,$e)};ne(S,_e,function(){var Be=me+(me?".":"")+Se($e),et=xe(Be,w[$e],!!y,S,$,I);F(et,P)?$.push([Be,et,!!y,S,rt,$e,S.type]):et!==void 0&&(rt[$e]=et)})};for(var mt in w)pt(mt);Le&&Le({endIterateIn:!0,end:!0})}else Ue(w).forEach(function(fe){var $e=me+(me?".":"")+Se(fe),_e={ownKeys:!0};ne(S,_e,function(){var Be=xe($e,w[fe],!!y,S,$,I);F(Be,P)?$.push([$e,Be,!!y,S,rt,fe,S.type]):Be!==void 0&&(rt[fe]=Be)})}),Le&&Le({endIterateOwn:!0,end:!0});if(S.iterateUnsetNumeric){for(var Ve=w.length,Ht=function($e){if(!($e in w)){var _e=me+(me?".":"")+$e,Be={ownKeys:!1};ne(S,Be,function(){var et=xe(_e,void 0,!!y,S,$,I);F(et,P)?$.push([_e,et,!!y,S,rt,$e,S.type]):et!==void 0&&(rt[$e]=et)})}},Ee=0;Ee<Ve;Ee++)Ht(Ee);Le&&Le({endIterateUnsetNumeric:!0,end:!0})}return rt}function Oe(me,w,y,S,$,I,ie){for(var se=$?B.plainObjectReplacers:B.nonplainObjectReplacers,Te=se.length;Te--;){var ve=se[Te];if(ve.test(w,y)){var Le=ve.type;if(B.revivers[Le]){var Xe=R[me];R[me]=Xe?[Le].concat(Xe):Le}if(Object.assign(y,{type:Le,replaced:!0}),(N||!ve.replaceAsync)&&!ve.replace)return ie&&ie({typeDetected:!0}),xe(me,w,Y&&"readonly",y,S,I,Le);ie&&ie({replacing:!0});var Qe=N||!ve.replaceAsync?"replace":"replaceAsync";return xe(me,ve[Qe](w,y),Y&&"readonly",y,S,I,Le)}}return w}return oe.length?N&&ce.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(he(ge,oe)).then(ae):!N&&ce.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ce.stringification&&N?[ae(ge)]:N?ae(ge):Promise.resolve(ae(ge))}},{key:"encapsulateSync",value:function(J,q,ce){return this.encapsulate(J,q,u({throwOnBadSyncType:!0},ce,{sync:!0}))}},{key:"encapsulateAsync",value:function(J,q,ce){return this.encapsulate(J,q,u({throwOnBadSyncType:!0},ce,{sync:!1}))}},{key:"revive",value:function(J,q){var ce=J&&J.$types;if(!ce)return J;if(ce===!0)return J.$;q=u({sync:!0},this.options,{},q);var A=q,N=A.sync,B=[],R={},W=!0;ce.$&&C(ce.$)&&(J=J.$,ce=ce.$,W=!1);var G=this;function oe(pe,ne){var xe=G.revivers[pe]||[],Oe=d(xe,1),me=Oe[0];if(!me)throw new Error("Unregistered type: "+pe);return N&&!("revive"in me)?ne:me[N&&me.revive?"revive":!N&&me.reviveAsync?"reviveAsync":"revive"](ne,R)}function Y(){var pe=[];if(Object.entries(ce).forEach(function(ne){var xe=d(ne,2),Oe=xe[0],me=xe[1];me!=="#"&&[].concat(me).forEach(function(w){var y=G.revivers[w]||[null,{}],S=d(y,2),$=S[1].plain;$&&(pe.push({keypath:Oe,type:w}),delete ce[Oe])})}),!!pe.length)return pe.sort(Me).reduce(function ne(xe,Oe){var me=Oe.keypath,w=Oe.type;if(O(xe))return xe.then(function($){return ne($,{keypath:me,type:w})});var y=te(J,me);if(y=oe(w,y),F(y,P))return y.then(function($){var I=Ae(J,me,$);I===$&&(J=I)});var S=Ae(J,me,y);S===y&&(J=S)},void 0)}var Z=[];function X(pe,ne,xe,Oe,me){if(!(W&&pe==="$types")){var w=ce[pe],y=it(ne);if(y||C(ne)){var S=y?new Array(ne.length):{};for(Ue(ne).forEach(function(Xe){var Qe=X(pe+(pe?".":"")+Se(Xe),ne[Xe],xe||S,S,Xe),ye=function(rt){return F(rt,At)?S[Xe]=void 0:rt!==void 0&&(S[Xe]=rt),rt};F(Qe,P)?Z.push(Qe.then(function(ot){return ye(ot)})):ye(Qe)}),ne=S;B.length;){var $=d(B[0],4),I=$[0],ie=$[1],se=$[2],Te=$[3],ve=te(I,ie);if(ve!==void 0)se[Te]=ve;else break;B.splice(0,1)}}if(!w)return ne;if(w==="#"){var Le=te(xe,ne.slice(1));return Le===void 0&&B.push([xe,ne.slice(1),Oe,me]),Le}return[].concat(w).reduce(function Xe(Qe,ye){return F(Qe,P)?Qe.then(function(ot){return Xe(ot,ye)}):oe(ye,Qe)},ne)}}function ge(pe){return F(pe,At)?void 0:pe}var ae=Y(),he;return F(ae,P)?he=ae.then(function(){return J}):(he=X("",J,null),Z.length&&(he=P.resolve(he).then(function(pe){return P.all([pe].concat(Z))}).then(function(pe){var ne=d(pe,1),xe=ne[0];return xe}))),O(he)?N&&q.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():F(he,P)?he.p.then(ge):he:!N&&q.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():N?ge(he):Promise.resolve(ge(he))}},{key:"reviveSync",value:function(J,q){return this.revive(J,u({throwOnBadSyncType:!0},q,{sync:!0}))}},{key:"reviveAsync",value:function(J,q){return this.revive(J,u({throwOnBadSyncType:!0},q,{sync:!1}))}},{key:"register",value:function(J,q){return q=q||{},[].concat(J).forEach(function ce(A){var N=this;if(it(A))return A.map(function(B){return ce.call(N,B)});A&&Ue(A).forEach(function(B){if(B==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(j.JSON_TYPES.includes(B))throw new TypeError("Plain JSON object types are reserved as type names");var R=A[B],W=R&&R.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,G=W.filter(function(xe){return xe.type===B});if(G.length&&(W.splice(W.indexOf(G[0]),1),delete this.revivers[B],delete this.types[B]),typeof R=="function"){var oe=R;R={test:function(Oe){return Oe&&Oe.constructor===oe},replace:function(Oe){return u({},Oe)},revive:function(Oe){return Object.assign(Object.create(oe.prototype),Oe)}}}else if(it(R)){var Y=R,Z=d(Y,3),X=Z[0],ge=Z[1],ae=Z[2];R={test:X,replace:ge,revive:ae}}if(!(!R||!R.test)){var he={type:B,test:R.test.bind(R)};R.replace&&(he.replace=R.replace.bind(R)),R.replaceAsync&&(he.replaceAsync=R.replaceAsync.bind(R));var pe=typeof q.fallback=="number"?q.fallback:q.fallback?0:1/0;if(R.testPlainObjects?this.plainObjectReplacers.splice(pe,0,he):this.nonplainObjectReplacers.splice(pe,0,he),R.revive||R.reviveAsync){var ne={};R.revive&&(ne.revive=R.revive.bind(R)),R.reviveAsync&&(ne.reviveAsync=R.reviveAsync.bind(R)),this.revivers[B]=[ne,{plain:R.testPlainObjects}]}this.types[B]=R}},this)},this),this}}]),j}(),At=function j(){o(this,j)};return At.__typeson__type__="TypesonUndefined",nt.Undefined=At,nt.Promise=P,nt.isThenable=O,nt.toStringTag=k,nt.hasConstructorOf=F,nt.isObject=ee,nt.isPlainObject=C,nt.isUserObject=de,nt.escapeKeyPathComponent=Se,nt.unescapeKeyPathComponent=be,nt.getByKeyPath=te,nt.getJSONType=tt,nt.JSON_TYPES=["null","boolean","number","string","array","object"],nt})}),AS=Ef(function(t,e){(function(n,r){t.exports=r()})(kd,function(){function n(w){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(w)}function r(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function i(w,y){for(var S=0;S<y.length;S++){var $=y[S];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(w,$.key,$)}}function o(w,y,S){return y in w?Object.defineProperty(w,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[y]=S,w}function s(w,y){var S=Object.keys(w);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(w);y&&($=$.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),S.push.apply(S,$)}return S}function l(w){return function(S){if(Array.isArray(S))return a(S)}(w)||function(S){if(typeof Symbol<"u"&&Symbol.iterator in Object(S))return Array.from(S)}(w)||function(S,$){if(S){if(typeof S=="string")return a(S,$);var I=Object.prototype.toString.call(S).slice(8,-1);if(I==="Object"&&S.constructor&&(I=S.constructor.name),I==="Map"||I==="Set")return Array.from(S);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return a(S,$)}}(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(w,y){(y==null||y>w.length)&&(y=w.length);for(var S=0,$=new Array(y);S<y;S++)$[S]=w[S];return $}function c(w){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(w)}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function d(w,y){for(var S=0;S<y.length;S++){var $=y[S];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(w,$.key,$)}}function h(w,y,S){return y in w?Object.defineProperty(w,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[y]=S,w}function m(w,y){var S=Object.keys(w);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(w);y&&($=$.filter(function(I){return Object.getOwnPropertyDescriptor(w,I).enumerable})),S.push.apply(S,$)}return S}function g(w){for(var y=1;y<arguments.length;y++){var S=arguments[y]!=null?arguments[y]:{};y%2?m(Object(S),!0).forEach(function($){h(w,$,S[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(S)):m(Object(S)).forEach(function($){Object.defineProperty(w,$,Object.getOwnPropertyDescriptor(S,$))})}return w}function b(w,y){return function($){if(Array.isArray($))return $}(w)||function($,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object($)))){var ie=[],se=!0,Te=!1,ve=void 0;try{for(var Le,Xe=$[Symbol.iterator]();!(se=(Le=Xe.next()).done)&&(ie.push(Le.value),!I||ie.length!==I);se=!0);}catch(Qe){Te=!0,ve=Qe}finally{try{se||Xe.return==null||Xe.return()}finally{if(Te)throw ve}}return ie}}(w,y)||E(w,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x(w){return function(S){if(Array.isArray(S))return M(S)}(w)||function(S){if(typeof Symbol<"u"&&Symbol.iterator in Object(S))return Array.from(S)}(w)||E(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E(w,y){if(w){if(typeof w=="string")return M(w,y);var S=Object.prototype.toString.call(w).slice(8,-1);return S==="Object"&&w.constructor&&(S=w.constructor.name),S==="Map"||S==="Set"?Array.from(w):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?M(w,y):void 0}}function M(w,y){(y==null||y>w.length)&&(y=w.length);for(var S=0,$=new Array(y);S<y;S++)$[S]=w[S];return $}var P=function w(y){u(this,w),this.p=new Promise(y)};P.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(P.prototype[Symbol.toStringTag]="TypesonPromise"),P.prototype.then=function(w,y){var S=this;return new P(function($,I){S.p.then(function(ie){$(w?w(ie):ie)}).catch(function(ie){return y?y(ie):Promise.reject(ie)}).then($,I)})},P.prototype.catch=function(w){return this.then(null,w)},P.resolve=function(w){return new P(function(y){y(w)})},P.reject=function(w){return new P(function(y,S){S(w)})},["all","race"].forEach(function(w){P[w]=function(y){return new P(function(S,$){Promise[w](y.map(function(I){return I&&I.constructor&&I.constructor.__typeson__type__==="TypesonPromise"?I.p:I})).then(S,$)})}});var L={}.toString,D={}.hasOwnProperty,V=Object.getPrototypeOf,H=D.toString;function U(w,y){return C(w)&&typeof w.then=="function"&&(!y||typeof w.catch=="function")}function O(w){return L.call(w).slice(8,-1)}function k(w,y){if(!w||c(w)!=="object")return!1;var S=V(w);if(!S)return y===null;var $=D.call(S,"constructor")&&S.constructor;return typeof $!="function"?y===null:y===$||y!==null&&H.call($)===H.call(y)||typeof y=="function"&&typeof $.__typeson__type__=="string"&&$.__typeson__type__===y.__typeson__type__}function F(w){return!(!w||O(w)!=="Object")&&(!V(w)||k(w,Object))}function C(w){return w&&c(w)==="object"}function de(w){return w.replace(/~/g,"~0").replace(/\./g,"~1")}function ee(w){return w.replace(/~1/g,".").replace(/~0/g,"~")}function Se(w,y){if(y==="")return w;var S=y.indexOf(".");if(S>-1){var $=w[ee(y.slice(0,S))];return $===void 0?void 0:Se($,y.slice(S+1))}return w[ee(y)]}function be(w,y,S){if(y==="")return S;var $=y.indexOf(".");return $>-1?be(w[ee(y.slice(0,$))],y.slice($+1),S):(w[ee(y)]=S,w)}function te(w,y,S){return S?y?y(w):w:(w&&w.then||(w=Promise.resolve(w)),y?w.then(y):w)}var Ae=Object.keys,tt=Array.isArray,Ue={}.hasOwnProperty,it=["type","replaced","iterateIn","iterateUnsetNumeric"];function ht(w){return function(){for(var y=[],S=0;S<arguments.length;S++)y[S]=arguments[S];try{return Promise.resolve(w.apply(this,y))}catch($){return Promise.reject($)}}}function Ft(w,y){if(w.keypath==="")return-1;var S=w.keypath.match(/\./g)||0,$=y.keypath.match(/\./g)||0;return S&&(S=S.length),$&&($=$.length),S>$?-1:S<$?1:w.keypath<y.keypath?-1:w.keypath>y.keypath}var Me=function(){function w(y){u(this,w),this.options=y,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(S,$,I){return $&&d(S.prototype,$),S}(w,[{key:"stringify",value:function(S,$,I,ie){ie=g(g(g({},this.options),ie),{},{stringification:!0});var se=this.encapsulate(S,null,ie);return tt(se)?JSON.stringify(se[0],$,I):se.then(function(Te){return JSON.stringify(Te,$,I)})}},{key:"stringifySync",value:function(S,$,I,ie){return this.stringify(S,$,I,g(g({throwOnBadSyncType:!0},ie),{},{sync:!0}))}},{key:"stringifyAsync",value:function(S,$,I,ie){return this.stringify(S,$,I,g(g({throwOnBadSyncType:!0},ie),{},{sync:!1}))}},{key:"parse",value:function(S,$,I){return I=g(g(g({},this.options),I),{},{parse:!0}),this.revive(JSON.parse(S,$),I)}},{key:"parseSync",value:function(S,$,I){return this.parse(S,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"parseAsync",value:function(S,$,I){return this.parse(S,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"specialTypeNames",value:function(S,$){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.returnTypeNames=!0,this.encapsulate(S,$,I)}},{key:"rootTypeName",value:function(S,$){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return I.iterateNone=!0,this.encapsulate(S,$,I)}},{key:"encapsulate",value:function(S,$,I){var ie=ht(function(Ee,fe){return te(Promise.all(fe.map(function($e){return $e[1].p})),function($e){return te(Promise.all($e.map(ht(function(_e){var Be=!1,et=[],mn=b(fe.splice(0,1),1),bt=b(mn[0],7),on=bt[0],Nn=bt[2],ut=bt[3],Pn=bt[4],ft=bt[5],gn=bt[6],Gt=Ve(on,_e,Nn,ut,et,!0,gn),Vn=k(Gt,P);return function(We,ho){var ei=We();return ei&&ei.then?ei.then(ho):ho(ei)}(function(){if(on&&Vn)return te(Gt.p,function(Fn){return Pn[ft]=Fn,Be=!0,ie(Ee,et)})},function(Fn){return Be?Fn:(on?Pn[ft]=Gt:Ee=Vn?Gt.p:Gt,ie(Ee,et))})}))),function(){return Ee})})}),se=(I=g(g({sync:!0},this.options),I)).sync,Te=this,ve={},Le=[],Xe=[],Qe=[],ye=!("cyclic"in I)||I.cyclic,ot=I.encapsulateObserver,rt=Ve("",S,ye,$||{},Qe);function pt(Ee){var fe=Object.values(ve);if(I.iterateNone)return fe.length?fe[0]:w.getJSONType(Ee);if(fe.length){if(I.returnTypeNames)return x(new Set(fe));Ee&&F(Ee)&&!Ue.call(Ee,"$types")?Ee.$types=ve:Ee={$:Ee,$types:{$:ve}}}else C(Ee)&&Ue.call(Ee,"$types")&&(Ee={$:Ee,$types:!0});return!I.returnTypeNames&&Ee}function mt(Ee,fe,$e){Object.assign(Ee,fe);var _e=it.map(function(Be){var et=Ee[Be];return delete Ee[Be],et});$e(),it.forEach(function(Be,et){Ee[Be]=_e[et]})}function Ve(Ee,fe,$e,_e,Be,et,mn){var bt,on={},Nn=c(fe),ut=ot?function(yr){var Yt=mn||_e.type||w.getJSONType(fe);ot(Object.assign(yr||on,{keypath:Ee,value:fe,cyclic:$e,stateObj:_e,promisesData:Be,resolvingTypesonPromise:et,awaitingTypesonPromise:k(fe,P)},{type:Yt}))}:null;if(["string","boolean","number","undefined"].includes(Nn))return fe===void 0||Number.isNaN(fe)||fe===Number.NEGATIVE_INFINITY||fe===Number.POSITIVE_INFINITY?(bt=_e.replaced?fe:Ht(Ee,fe,_e,Be,!1,et,ut))!==fe&&(on={replaced:bt}):bt=fe,ut&&ut(),bt;if(fe===null)return ut&&ut(),fe;if($e&&!_e.iterateIn&&!_e.iterateUnsetNumeric&&fe&&c(fe)==="object"){var Pn=Le.indexOf(fe);if(!(Pn<0))return ve[Ee]="#",ut&&ut({cyclicKeypath:Xe[Pn]}),"#"+Xe[Pn];$e===!0&&(Le.push(fe),Xe.push(Ee))}var ft,gn=F(fe),Gt=tt(fe),Vn=(gn||Gt)&&(!Te.plainObjectReplacers.length||_e.replaced)||_e.iterateIn?fe:Ht(Ee,fe,_e,Be,gn||Gt,null,ut);if(Vn!==fe?(bt=Vn,on={replaced:Vn}):Ee===""&&k(fe,P)?(Be.push([Ee,fe,$e,_e,void 0,void 0,_e.type]),bt=fe):Gt&&_e.iterateIn!=="object"||_e.iterateIn==="array"?(ft=new Array(fe.length),on={clone:ft}):(["function","symbol"].includes(c(fe))||"toJSON"in fe||k(fe,P)||k(fe,Promise)||k(fe,ArrayBuffer))&&!gn&&_e.iterateIn!=="object"?bt=fe:(ft={},_e.addLength&&(ft.length=fe.length),on={clone:ft}),ut&&ut(),I.iterateNone)return ft||bt;if(!ft)return bt;if(_e.iterateIn){var Fn=function(Yt){var lr={ownKeys:Ue.call(fe,Yt)};mt(_e,lr,function(){var ar=Ee+(Ee?".":"")+de(Yt),br=Ve(ar,fe[Yt],!!$e,_e,Be,et);k(br,P)?Be.push([ar,br,!!$e,_e,ft,Yt,_e.type]):br!==void 0&&(ft[Yt]=br)})};for(var We in fe)Fn(We);ut&&ut({endIterateIn:!0,end:!0})}else Ae(fe).forEach(function(yr){var Yt=Ee+(Ee?".":"")+de(yr);mt(_e,{ownKeys:!0},function(){var lr=Ve(Yt,fe[yr],!!$e,_e,Be,et);k(lr,P)?Be.push([Yt,lr,!!$e,_e,ft,yr,_e.type]):lr!==void 0&&(ft[yr]=lr)})}),ut&&ut({endIterateOwn:!0,end:!0});if(_e.iterateUnsetNumeric){for(var ho=fe.length,ei=function(Yt){if(!(Yt in fe)){var lr=Ee+(Ee?".":"")+Yt;mt(_e,{ownKeys:!1},function(){var ar=Ve(lr,void 0,!!$e,_e,Be,et);k(ar,P)?Be.push([lr,ar,!!$e,_e,ft,Yt,_e.type]):ar!==void 0&&(ft[Yt]=ar)})}},ls=0;ls<ho;ls++)ei(ls);ut&&ut({endIterateUnsetNumeric:!0,end:!0})}return ft}function Ht(Ee,fe,$e,_e,Be,et,mn){for(var bt=Be?Te.plainObjectReplacers:Te.nonplainObjectReplacers,on=bt.length;on--;){var Nn=bt[on];if(Nn.test(fe,$e)){var ut=Nn.type;if(Te.revivers[ut]){var Pn=ve[Ee];ve[Ee]=Pn?[ut].concat(Pn):ut}return Object.assign($e,{type:ut,replaced:!0}),!se&&Nn.replaceAsync||Nn.replace?(mn&&mn({replacing:!0}),Ve(Ee,Nn[se||!Nn.replaceAsync?"replace":"replaceAsync"](fe,$e),ye&&"readonly",$e,_e,et,ut)):(mn&&mn({typeDetected:!0}),Ve(Ee,fe,ye&&"readonly",$e,_e,et,ut))}}return fe}return Qe.length?se&&I.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(ie(rt,Qe)).then(pt):!se&&I.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():I.stringification&&se?[pt(rt)]:se?pt(rt):Promise.resolve(pt(rt))}},{key:"encapsulateSync",value:function(S,$,I){return this.encapsulate(S,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(S,$,I){return this.encapsulate(S,$,g(g({throwOnBadSyncType:!0},I),{},{sync:!1}))}},{key:"revive",value:function(S,$){var I=S&&S.$types;if(!I)return S;if(I===!0)return S.$;var ie=($=g(g({sync:!0},this.options),$)).sync,se=[],Te={},ve=!0;I.$&&F(I.$)&&(S=S.$,I=I.$,ve=!1);var Le=this;function Xe(pt,mt){var Ve=b(Le.revivers[pt]||[],1)[0];if(!Ve)throw new Error("Unregistered type: "+pt);return ie&&!("revive"in Ve)?mt:Ve[ie&&Ve.revive?"revive":!ie&&Ve.reviveAsync?"reviveAsync":"revive"](mt,Te)}var Qe=[];function ye(pt){return k(pt,nt)?void 0:pt}var ot,rt=function(){var mt=[];if(Object.entries(I).forEach(function(Ve){var Ht=b(Ve,2),Ee=Ht[0],fe=Ht[1];fe!=="#"&&[].concat(fe).forEach(function($e){b(Le.revivers[$e]||[null,{}],2)[1].plain&&(mt.push({keypath:Ee,type:$e}),delete I[Ee])})}),mt.length)return mt.sort(Ft).reduce(function Ve(Ht,Ee){var fe=Ee.keypath,$e=Ee.type;if(U(Ht))return Ht.then(function(et){return Ve(et,{keypath:fe,type:$e})});var _e=Se(S,fe);if(k(_e=Xe($e,_e),P))return _e.then(function(et){var mn=be(S,fe,et);mn===et&&(S=mn)});var Be=be(S,fe,_e);Be===_e&&(S=Be)},void 0)}();return k(rt,P)?ot=rt.then(function(){return S}):(ot=function pt(mt,Ve,Ht,Ee,fe){if(!ve||mt!=="$types"){var $e=I[mt],_e=tt(Ve);if(_e||F(Ve)){var Be=_e?new Array(Ve.length):{};for(Ae(Ve).forEach(function(ft){var gn=pt(mt+(mt?".":"")+de(ft),Ve[ft],Ht||Be,Be,ft),Gt=function(Fn){return k(Fn,nt)?Be[ft]=void 0:Fn!==void 0&&(Be[ft]=Fn),Fn};k(gn,P)?Qe.push(gn.then(function(Vn){return Gt(Vn)})):Gt(gn)}),Ve=Be;se.length;){var et=b(se[0],4),mn=et[0],bt=et[1],on=et[2],Nn=et[3],ut=Se(mn,bt);if(ut===void 0)break;on[Nn]=ut,se.splice(0,1)}}if(!$e)return Ve;if($e==="#"){var Pn=Se(Ht,Ve.slice(1));return Pn===void 0&&se.push([Ht,Ve.slice(1),Ee,fe]),Pn}return[].concat($e).reduce(function ft(gn,Gt){return k(gn,P)?gn.then(function(Vn){return ft(Vn,Gt)}):Xe(Gt,gn)},Ve)}}("",S,null),Qe.length&&(ot=P.resolve(ot).then(function(pt){return P.all([pt].concat(Qe))}).then(function(pt){return b(pt,1)[0]}))),U(ot)?ie&&$.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():k(ot,P)?ot.p.then(ye):ot:!ie&&$.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ie?ye(ot):Promise.resolve(ye(ot))}},{key:"reviveSync",value:function(S,$){return this.revive(S,g(g({throwOnBadSyncType:!0},$),{},{sync:!0}))}},{key:"reviveAsync",value:function(S,$){return this.revive(S,g(g({throwOnBadSyncType:!0},$),{},{sync:!1}))}},{key:"register",value:function(S,$){return $=$||{},[].concat(S).forEach(function I(ie){var se=this;if(tt(ie))return ie.map(function(Te){return I.call(se,Te)});ie&&Ae(ie).forEach(function(Te){if(Te==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(w.JSON_TYPES.includes(Te))throw new TypeError("Plain JSON object types are reserved as type names");var ve=ie[Te],Le=ve&&ve.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Xe=Le.filter(function(mt){return mt.type===Te});if(Xe.length&&(Le.splice(Le.indexOf(Xe[0]),1),delete this.revivers[Te],delete this.types[Te]),typeof ve=="function"){var Qe=ve;ve={test:function(Ve){return Ve&&Ve.constructor===Qe},replace:function(Ve){return g({},Ve)},revive:function(Ve){return Object.assign(Object.create(Qe.prototype),Ve)}}}else if(tt(ve)){var ye=b(ve,3);ve={test:ye[0],replace:ye[1],revive:ye[2]}}if(ve&&ve.test){var ot={type:Te,test:ve.test.bind(ve)};ve.replace&&(ot.replace=ve.replace.bind(ve)),ve.replaceAsync&&(ot.replaceAsync=ve.replaceAsync.bind(ve));var rt=typeof $.fallback=="number"?$.fallback:$.fallback?0:Number.POSITIVE_INFINITY;if(ve.testPlainObjects?this.plainObjectReplacers.splice(rt,0,ot):this.nonplainObjectReplacers.splice(rt,0,ot),ve.revive||ve.reviveAsync){var pt={};ve.revive&&(pt.revive=ve.revive.bind(ve)),ve.reviveAsync&&(pt.reviveAsync=ve.reviveAsync.bind(ve)),this.revivers[Te]=[pt,{plain:ve.testPlainObjects}]}this.types[Te]=ve}},this)},this),this}}]),w}(),nt=function w(){u(this,w)};nt.__typeson__type__="TypesonUndefined",Me.Undefined=nt,Me.Promise=P,Me.isThenable=U,Me.toStringTag=O,Me.hasConstructorOf=k,Me.isObject=C,Me.isPlainObject=F,Me.isUserObject=function w(y){if(!y||O(y)!=="Object")return!1;var S=V(y);return!S||k(y,Object)||w(S)},Me.escapeKeyPathComponent=de,Me.unescapeKeyPathComponent=ee,Me.getByKeyPath=Se,Me.getJSONType=function(y){return y===null?"null":Array.isArray(y)?"array":c(y)},Me.JSON_TYPES=["null","boolean","number","string","array","object"];for(var At={userObject:{test:function(y,S){return Me.isUserObject(y)},replace:function(y){return function($){for(var I=1;I<arguments.length;I++){var ie=arguments[I]!=null?arguments[I]:{};I%2?s(Object(ie),!0).forEach(function(se){o($,se,ie[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(ie)):s(Object(ie)).forEach(function(se){Object.defineProperty($,se,Object.getOwnPropertyDescriptor(ie,se))})}return $}({},y)},revive:function(y){return y}}},j=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(y,S){return!!Array.isArray(y)&&(Object.keys(y).some(function($){return String(Number.parseInt($))!==$})&&(S.iterateIn="object",S.addLength=!0),!0)},replace:function(y,S){return S.iterateUnsetNumeric=!0,y},revive:function(y){if(Array.isArray(y))return y;var S=[];return Object.keys(y).forEach(function($){var I=y[$];S[$]=I}),S}}},{sparseUndefined:{test:function(y,S){return y===void 0&&S.ownKeys===!1},replace:function(y){return 0},revive:function(y){}}}],K={undef:{test:function(y,S){return y===void 0&&(S.ownKeys||!("ownKeys"in S))},replace:function(y){return 0},revive:function(y){return new Me.Undefined}}},J={StringObject:{test:function(y){return Me.toStringTag(y)==="String"&&n(y)==="object"},replace:function(y){return String(y)},revive:function(y){return new String(y)}},BooleanObject:{test:function(y){return Me.toStringTag(y)==="Boolean"&&n(y)==="object"},replace:function(y){return!!y},revive:function(y){return new Boolean(y)}},NumberObject:{test:function(y){return Me.toStringTag(y)==="Number"&&n(y)==="object"},replace:function(y){return Number(y)},revive:function(y){return new Number(y)}}},q=[{nan:{test:function(y){return Number.isNaN(y)},replace:function(y){return"NaN"},revive:function(y){return Number.NaN}}},{infinity:{test:function(y){return y===Number.POSITIVE_INFINITY},replace:function(y){return"Infinity"},revive:function(y){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(y){return y===Number.NEGATIVE_INFINITY},replace:function(y){return"-Infinity"},revive:function(y){return Number.NEGATIVE_INFINITY}}}],ce={date:{test:function(y){return Me.toStringTag(y)==="Date"},replace:function(y){var S=y.getTime();return Number.isNaN(S)?"NaN":S},revive:function(y){return y==="NaN"?new Date(Number.NaN):new Date(y)}}},A={regexp:{test:function(y){return Me.toStringTag(y)==="RegExp"},replace:function(y){return{source:y.source,flags:(y.global?"g":"")+(y.ignoreCase?"i":"")+(y.multiline?"m":"")+(y.sticky?"y":"")+(y.unicode?"u":"")}},revive:function(y){var S=y.source,$=y.flags;return new RegExp(S,$)}}},N={map:{test:function(y){return Me.toStringTag(y)==="Map"},replace:function(y){return l(y.entries())},revive:function(y){return new Map(y)}}},B={set:{test:function(y){return Me.toStringTag(y)==="Set"},replace:function(y){return l(y.values())},revive:function(y){return new Set(y)}}},R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=new Uint8Array(256),G=0;G<R.length;G++)W[R.charCodeAt(G)]=G;var oe=function(y,S,$){$==null&&($=y.byteLength);for(var I=new Uint8Array(y,0,$),ie=I.length,se="",Te=0;Te<ie;Te+=3)se+=R[I[Te]>>2],se+=R[(3&I[Te])<<4|I[Te+1]>>4],se+=R[(15&I[Te+1])<<2|I[Te+2]>>6],se+=R[63&I[Te+2]];return ie%3==2?se=se.slice(0,-1)+"=":ie%3==1&&(se=se.slice(0,-2)+"=="),se},Y=function(y){var S,$,I,ie,se=y.length,Te=.75*y.length,ve=0;y[y.length-1]==="="&&(Te--,y[y.length-2]==="="&&Te--);for(var Le=new ArrayBuffer(Te),Xe=new Uint8Array(Le),Qe=0;Qe<se;Qe+=4)S=W[y.charCodeAt(Qe)],$=W[y.charCodeAt(Qe+1)],I=W[y.charCodeAt(Qe+2)],ie=W[y.charCodeAt(Qe+3)],Xe[ve++]=S<<2|$>>4,Xe[ve++]=(15&$)<<4|I>>2,Xe[ve++]=(3&I)<<6|63&ie;return Le},Z={arraybuffer:{test:function(y){return Me.toStringTag(y)==="ArrayBuffer"},replace:function(y,S){S.buffers||(S.buffers=[]);var $=S.buffers.indexOf(y);return $>-1?{index:$}:(S.buffers.push(y),oe(y))},revive:function(y,S){if(S.buffers||(S.buffers=[]),n(y)==="object")return S.buffers[y.index];var $=Y(y);return S.buffers.push($),$}}},X=typeof self>"u"?kd:self,ge={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(w){var y=w,S=X[y];S&&(ge[w.toLowerCase()]={test:function(I){return Me.toStringTag(I)===y},replace:function(I,ie){var se=I.buffer,Te=I.byteOffset,ve=I.length;ie.buffers||(ie.buffers=[]);var Le=ie.buffers.indexOf(se);return Le>-1?{index:Le,byteOffset:Te,length:ve}:(ie.buffers.push(se),{encoded:oe(se),byteOffset:Te,length:ve})},revive:function(I,ie){ie.buffers||(ie.buffers=[]);var se,Te=I.byteOffset,ve=I.length,Le=I.encoded,Xe=I.index;return"index"in I?se=ie.buffers[Xe]:(se=Y(Le),ie.buffers.push(se)),new S(se,Te,ve)}})});var ae={dataview:{test:function(y){return Me.toStringTag(y)==="DataView"},replace:function(y,S){var $=y.buffer,I=y.byteOffset,ie=y.byteLength;S.buffers||(S.buffers=[]);var se=S.buffers.indexOf($);return se>-1?{index:se,byteOffset:I,byteLength:ie}:(S.buffers.push($),{encoded:oe($),byteOffset:I,byteLength:ie})},revive:function(y,S){S.buffers||(S.buffers=[]);var $,I=y.byteOffset,ie=y.byteLength,se=y.encoded,Te=y.index;return"index"in y?$=S.buffers[Te]:($=Y(se),S.buffers.push($)),new DataView($,I,ie)}}},he={IntlCollator:{test:function(y){return Me.hasConstructorOf(y,Intl.Collator)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.Collator(y.locale,y)}},IntlDateTimeFormat:{test:function(y){return Me.hasConstructorOf(y,Intl.DateTimeFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.DateTimeFormat(y.locale,y)}},IntlNumberFormat:{test:function(y){return Me.hasConstructorOf(y,Intl.NumberFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.NumberFormat(y.locale,y)}}};function pe(w){for(var y=new Uint8Array(w.length),S=0;S<w.length;S++)y[S]=w.charCodeAt(S);return y.buffer}var ne={file:{test:function(y){return Me.toStringTag(y)==="File"},replace:function(y){var S=new XMLHttpRequest;if(S.overrideMimeType("text/plain; charset=x-user-defined"),S.open("GET",URL.createObjectURL(y),!1),S.send(),S.status!==200&&S.status!==0)throw new Error("Bad File access: "+S.status);return{type:y.type,stringContents:S.responseText,name:y.name,lastModified:y.lastModified}},revive:function(y){var S=y.name,$=y.type,I=y.stringContents,ie=y.lastModified;return new File([pe(I)],S,{type:$,lastModified:ie})},replaceAsync:function(y){return new Me.Promise(function(S,$){var I=new FileReader;I.addEventListener("load",function(){S({type:y.type,stringContents:I.result,name:y.name,lastModified:y.lastModified})}),I.addEventListener("error",function(){$(I.error)}),I.readAsBinaryString(y)})}}},xe={bigint:{test:function(y){return typeof y=="bigint"},replace:function(y){return String(y)},revive:function(y){return BigInt(y)}}},Oe={bigintObject:{test:function(y){return n(y)==="object"&&Me.hasConstructorOf(y,BigInt)},replace:function(y){return String(y)},revive:function(y){return new Object(BigInt(y))}}},me={cryptokey:{test:function(y){return Me.toStringTag(y)==="CryptoKey"&&y.extractable},replaceAsync:function(y){return new Me.Promise(function(S,$){crypto.subtle.exportKey("jwk",y).catch(function(I){$(I)}).then(function(I){S({jwk:I,algorithm:y.algorithm,usages:y.usages})})})},revive:function(y){var S=y.jwk,$=y.algorithm,I=y.usages;return crypto.subtle.importKey("jwk",S,$,!0,I)}}};return[At,K,j,J,q,ce,A,{imagedata:{test:function(y){return Me.toStringTag(y)==="ImageData"},replace:function(y){return{array:l(y.data),width:y.width,height:y.height}},revive:function(y){return new ImageData(new Uint8ClampedArray(y.array),y.width,y.height)}}},{imagebitmap:{test:function(y){return Me.toStringTag(y)==="ImageBitmap"||y&&y.dataset&&y.dataset.toStringTag==="ImageBitmap"},replace:function(y){var S=document.createElement("canvas");return S.getContext("2d").drawImage(y,0,0),S.toDataURL()},revive:function(y){var S=document.createElement("canvas"),$=S.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){$.drawImage(I,0,0)}),I.src=y,S},reviveAsync:function(y){var S=document.createElement("canvas"),$=S.getContext("2d"),I=document.createElement("img");return I.addEventListener("load",function(){$.drawImage(I,0,0)}),I.src=y,createImageBitmap(S)}}},ne,{file:ne.file,filelist:{test:function(y){return Me.toStringTag(y)==="FileList"},replace:function(y){for(var S=[],$=0;$<y.length;$++)S[$]=y.item($);return S},revive:function(y){return new(function(){function S(){r(this,S),this._files=arguments[0],this.length=this._files.length}return function(I,ie,se){return ie&&i(I.prototype,ie),I}(S,[{key:"item",value:function(I){return this._files[I]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),S}())(y)}}},{blob:{test:function(y){return Me.toStringTag(y)==="Blob"},replace:function(y){var S=new XMLHttpRequest;if(S.overrideMimeType("text/plain; charset=x-user-defined"),S.open("GET",URL.createObjectURL(y),!1),S.send(),S.status!==200&&S.status!==0)throw new Error("Bad Blob access: "+S.status);return{type:y.type,stringContents:S.responseText}},revive:function(y){var S=y.type,$=y.stringContents;return new Blob([pe($)],{type:S})},replaceAsync:function(y){return new Me.Promise(function(S,$){var I=new FileReader;I.addEventListener("load",function(){S({type:y.type,stringContents:I.result})}),I.addEventListener("error",function(){$(I.error)}),I.readAsBinaryString(y)})}}}].concat(typeof Map=="function"?N:[],typeof Set=="function"?B:[],typeof ArrayBuffer=="function"?Z:[],typeof Uint8Array=="function"?ge:[],typeof DataView=="function"?ae:[],typeof Intl<"u"?he:[],typeof crypto<"u"?me:[],typeof BigInt<"u"?[xe,Oe]:[])})}),_o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ys=new Uint8Array(256);for(var Il=0;Il<_o.length;Il++)ys[_o.codePointAt(Il)]=Il;var xd=function(e,n,r){r==null&&(r=e.byteLength);for(var i=new Uint8Array(e,0,r),o=i.length,s="",l=0;l<o;l+=3)s+=_o[i[l]>>2],s+=_o[(i[l]&3)<<4|i[l+1]>>4],s+=_o[(i[l+1]&15)<<2|i[l+2]>>6],s+=_o[i[l+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},zy=function(e){var n=e.length,r=e.length*.75,i=0,o,s,l,a;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),u=new Uint8Array(c),d=0;d<n;d+=4)o=ys[e.codePointAt(d)],s=ys[e.codePointAt(d+1)],l=ys[e.codePointAt(d+2)],a=ys[e.codePointAt(d+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|l>>2,u[i++]=(l&3)<<6|a&63;return c},MS=typeof self>"u"?global:self,Ky={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){var e=t,n=MS[e];n&&(Ky[t.toLowerCase()+"2"]={test:function(r){return xc.toStringTag(r)===e},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var _S={arraybuffer:{test:function(t){return xc.toStringTag(t)==="ArrayBuffer"},replace:function(t){return xd(t,0,t.byteLength)},revive:function(t){var e=zy(t);return e}}},Zn=new xc().register(AS),NS="FileReaderSync"in self,Ba=[],aa=0;Zn.register([_S,Ky,{blob2:{test:function(t){return xc.toStringTag(t)==="Blob"},replace:function(t){if(t.isClosed)throw new Error("The Blob is closed");if(NS){var e=jy(t,"binary"),n=xd(e,0,e.byteLength);return{type:t.type,data:n}}else{Ba.push(t);var r={type:t.type,data:{start:aa,end:aa+t.size}};return aa+=t.size,r}},finalize:function(t,e){t.data=xd(e,0,e.byteLength)},revive:function(t){var e=t.type,n=t.data;return new Blob([zy(n)],{type:e})}}}]);Zn.mustFinalize=function(){return Ba.length>0};Zn.finalize=function(t){return Ti(void 0,void 0,void 0,function(){var e,n,r,i,o,s,l,a,c,u,d,h;return hr(this,function(m){switch(m.label){case 0:return[4,Hy(new Blob(Ba),"binary")];case 1:if(e=m.sent(),t){for(n=0,r=t;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(l in o)a=o[l],c=Zn.types[a],c&&c.finalize&&(u=zt.getByKeyPath(i,s?"$."+l:l),c.finalize(u,e.slice((d=u.data)===null||d===void 0?void 0:d.start,(h=u.data)===null||h===void 0?void 0:h.end)))}}return Ba=[],aa=0,[2]}})})};var PS=2e3;function $S(t,e){return Ti(this,void 0,void 0,function(){function n(){return Ti(this,void 0,void 0,function(){var d,h,m,g,b,x,E,M,P,L;return hr(this,function(D){switch(D.label){case 0:return[4,Promise.all(i.map(function(V){return V.count()}))];case 1:d=D.sent(),d.forEach(function(V,H){return s[H].rowCount=V}),u.totalRows=d.reduce(function(V,H){return V+H}),h=JSON.stringify(a,void 0,l?2:void 0),m=h.lastIndexOf("]"),g=h.substring(0,m),o.push(g),b=e.filter,x=e.transform,E=function(V){var H,U,O,k,F,C,de,ee,Se,be,te,Ae;return hr(this,function(tt){switch(tt.label){case 0:H=t.table(V),U=H.schema.primKey,O=!!U.keyPath,k=e.numRowsPerChunk||PS,F=O?{tableName:H.name,inbound:!0,rows:[]}:{tableName:H.name,inbound:!1,rows:[]},C=JSON.stringify(F,void 0,l?2:void 0),l&&(C=C.split(`
`).join(`
    `)),de=C.lastIndexOf("]"),o.push(C.substring(0,de)),ee=null,Se=0,be=!0,te=function(){var Ue,it,ht,Ft,Me,K,nt,At,j,K;return hr(this,function(J){switch(J.label){case 0:return c&&zt.ignoreTransaction(function(){return c(u)}),Ue=ee==null?H.limit(k):H.where(":id").above(ee).limit(k),[4,Ue.toArray()];case 1:return it=J.sent(),it.length===0?[2,"break"]:(ee!=null&&Se>0&&(o.push(","),l&&o.push(`
      `)),be=it.length===k,O?(ht=b?it.filter(function(q){return b(V,q)}):it,Ft=x?ht.map(function(q){return x(V,q).value}):ht,Me=Ft.map(function(q){return Zn.encapsulate(q)}),Zn.mustFinalize()?[4,zt.waitFor(Zn.finalize(Me))]:[3,3]):[3,4]);case 2:J.sent(),J.label=3;case 3:return K=JSON.stringify(Me,void 0,l?2:void 0),l&&(K=K.split(`
`).join(`
      `)),o.push(new Blob([K.substring(1,K.length-1)])),Se=Ft.length,ee=it.length>0?zt.getByKeyPath(it[it.length-1],U.keyPath):null,[3,8];case 4:return[4,Ue.primaryKeys()];case 5:return nt=J.sent(),At=nt.map(function(q,ce){return[q,it[ce]]}),b&&(At=At.filter(function(q){var ce=q[0],A=q[1];return b(V,A,ce)})),x&&(At=At.map(function(q){var ce=q[0],A=q[1],N=x(V,A,ce);return[N.key,N.value]})),j=At.map(function(q){return Zn.encapsulate(q)}),Zn.mustFinalize()?[4,zt.waitFor(Zn.finalize(j))]:[3,7];case 6:J.sent(),J.label=7;case 7:K=JSON.stringify(j,void 0,l?2:void 0),l&&(K=K.split(`
`).join(`
      `)),o.push(new Blob([K.substring(1,K.length-1)])),Se=At.length,ee=nt.length>0?nt[nt.length-1]:null,J.label=8;case 8:return u.completedRows+=it.length,[2]}})},tt.label=1;case 1:return be?[5,te()]:[3,3];case 2:return Ae=tt.sent(),Ae==="break"?[3,3]:[3,1];case 3:return o.push(C.substr(de)),u.completedTables+=1,u.completedTables<u.totalTables&&o.push(","),[2]}})},M=0,P=s,D.label=2;case 2:return M<P.length?(L=P[M].name,[5,E(L)]):[3,5];case 3:D.sent(),D.label=4;case 4:return M++,[3,2];case 5:return o.push(h.substr(m)),u.done=!0,c&&zt.ignoreTransaction(function(){return c(u)}),[2]}})})}var r,i,o,s,l,a,c,u;return hr(this,function(d){switch(d.label){case 0:e=e||{},r=e.skipTables?e.skipTables:[],i=t.tables.filter(function(h){return!r.includes(h.name)}),o=[],s=i.map(function(h){return{name:h.name,schema:ES(h),rowCount:0}}),l=e.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:t.name,databaseVersion:t.verno,tables:s,data:[]}},c=e.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:s.length},d.label=1;case 1:return d.trys.push([1,,6,7]),e.noTransaction?[4,n()]:[3,3];case 2:return d.sent(),[3,5];case 3:return[4,t.transaction("r",t.tables,n)];case 4:d.sent(),d.label=5;case 5:return[3,7];case 6:return Zn.finalize(),[7];case 7:return[2,new Blob(o,{type:"text/json"})]}})})}var DS=1,IS={Stream:function(){}},LS=Ef(function(t,e){(function(n){var r=typeof process=="object"&&wp?wp:self;n.parser=function(O){return new m(O)},n.CParser=m,n.CStream=b,n.createStream=g,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(O){return O!=="error"&&O!=="end"}),s=0,l;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var a in n.STATE)n.STATE[n.STATE[a]]=a;s=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(O){function k(){this.__proto__=O}return k.prototype=O,new k}),Object.getPrototypeOf||(Object.getPrototypeOf=function(O){return O.__proto__}),Object.keys||(Object.keys=function(O){var k=[];for(var F in O)O.hasOwnProperty(F)&&k.push(F);return k});function u(O){var k=Math.max(n.MAX_BUFFER_LENGTH,10),F=0;for(var C in i){var de=O[C]===void 0?0:O[C].length;if(de>k)switch(C){case"text":closeText(O);break;default:D(O,"Max buffer length exceeded: "+C)}F=Math.max(F,de)}O.bufferCheckPosition=n.MAX_BUFFER_LENGTH-F+O.position}function d(O){for(var k in i)O[k]=i[k]}var h=/[\\"\n]/g;function m(O){if(!(this instanceof m))return new m(O);var k=this;d(k),k.bufferCheckPosition=n.MAX_BUFFER_LENGTH,k.q=k.c=k.p="",k.opt=O||{},k.closed=k.closedRoot=k.sawRoot=!1,k.tag=k.error=null,k.state=s.BEGIN,k.stack=new Array,k.position=k.column=0,k.line=1,k.slashed=!1,k.unicodeI=0,k.unicodeS=null,k.depth=0,x(k,"onready")}m.prototype={end:function(){V(this)},write:U,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=IS.Stream}catch{l=function(){}}function g(O){return new b(O)}function b(O){if(!(this instanceof b))return new b(O);this._parser=new m(O),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var k=this;l.apply(k),this._parser.onend=function(){k.emit("end")},this._parser.onerror=function(F){k.emit("error",F),k._parser.error=null},o.forEach(function(F){Object.defineProperty(k,"on"+F,{get:function(){return k._parser["on"+F]},set:function(C){if(!C)return k.removeAllListeners(F),k._parser["on"+F]=C,C;k.on(F,C)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(l.prototype,{constructor:{value:b}}),b.prototype.write=function(O){O=new Buffer(O);for(var k=0;k<O.length;k++){var F=O[k];if(this.bytes_remaining>0){for(var C=0;C<this.bytes_remaining;C++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+C]=O[C];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,k=k+C-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&F>=128)if(F>=194&&F<=223&&(this.bytes_in_sequence=2),F>=224&&F<=239&&(this.bytes_in_sequence=3),F>=240&&F<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+k>O.length){for(var de=0;de<=O.length-1-k;de++)this.temp_buffs[this.bytes_in_sequence][de]=O[k+de];return this.bytes_remaining=k+this.bytes_in_sequence-O.length,!0}else{this.string=O.slice(k,k+this.bytes_in_sequence).toString(),k=k+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ee=k;ee<O.length&&!(O[ee]>=128);ee++);this.string=O.slice(k,ee).toString(),this._parser.write(this.string),this.emit("data",this.string),k=ee-1}},b.prototype.end=function(O){return O&&O.length&&this._parser.write(O.toString()),this._parser.end(),!0},b.prototype.on=function(O,k){var F=this;return!F._parser["on"+O]&&o.indexOf(O)!==-1&&(F._parser["on"+O]=function(){var C=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);C.splice(0,0,O),F.emit.apply(F,C)}),l.prototype.on.call(F,O,k)},b.prototype.destroy=function(){d(this._parser),this.emit("close")};function x(O,k,F){n.INFO&&console.log("-- emit",k,F),O[k]&&O[k](F)}function E(O,k,F){M(O),x(O,k,F)}function M(O,k){O.textNode=L(O.opt,O.textNode),O.textNode!==void 0&&x(O,k||"onvalue",O.textNode),O.textNode=void 0}function P(O){O.numberNode&&x(O,"onvalue",parseFloat(O.numberNode)),O.numberNode=""}function L(O,k){return k===void 0||(O.trim&&(k=k.trim()),O.normalize&&(k=k.replace(/\s+/g," "))),k}function D(O,k){return M(O),k+=`
Line: `+O.line+`
Column: `+O.column+`
Char: `+O.c,k=new Error(k),O.error=k,x(O,"onerror",k),O}function V(O){return(O.state!==s.VALUE||O.depth!==0)&&D(O,"Unexpected end"),M(O),O.c="",O.closed=!0,x(O,"onend"),m.call(O,O.opt),O}function H(O){return O===c.carriageReturn||O===c.lineFeed||O===c.space||O===c.tab}function U(O){var k=this;if(this.error)throw this.error;if(k.closed)return D(k,"Cannot write after close. Assign an onready handler.");if(O===null)return V(k);var F=0,C=O.charCodeAt(0),de=k.p;for(n.DEBUG&&console.log("write -> ["+O+"]");C&&(de=C,k.c=C=O.charCodeAt(F++),de!==C?k.p=de:de=k.p,!!C);)switch(n.DEBUG&&console.log(F,C,n.STATE[k.state]),k.position++,C===c.lineFeed?(k.line++,k.column=0):k.column++,k.state){case s.BEGIN:C===c.openBrace?k.state=s.OPEN_OBJECT:C===c.openBracket?k.state=s.OPEN_ARRAY:H(C)||D(k,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(H(C))continue;if(k.state===s.OPEN_KEY)k.stack.push(s.CLOSE_KEY);else if(C===c.closeBrace){x(k,"onopenobject"),this.depth++,x(k,"oncloseobject"),this.depth--,k.state=k.stack.pop()||s.VALUE;continue}else k.stack.push(s.CLOSE_OBJECT);C===c.doubleQuote?k.state=s.STRING:D(k,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(H(C))continue;k.state,s.CLOSE_KEY,C===c.colon?(k.state===s.CLOSE_OBJECT?(k.stack.push(s.CLOSE_OBJECT),M(k,"onopenobject"),this.depth++):M(k,"onkey"),k.state=s.VALUE):C===c.closeBrace?(E(k,"oncloseobject"),this.depth--,k.state=k.stack.pop()||s.VALUE):C===c.comma?(k.state===s.CLOSE_OBJECT&&k.stack.push(s.CLOSE_OBJECT),M(k),k.state=s.OPEN_KEY):D(k,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(H(C))continue;if(k.state===s.OPEN_ARRAY)if(x(k,"onopenarray"),this.depth++,k.state=s.VALUE,C===c.closeBracket){x(k,"onclosearray"),this.depth--,k.state=k.stack.pop()||s.VALUE;continue}else k.stack.push(s.CLOSE_ARRAY);C===c.doubleQuote?k.state=s.STRING:C===c.openBrace?k.state=s.OPEN_OBJECT:C===c.openBracket?k.state=s.OPEN_ARRAY:C===c.t?k.state=s.TRUE:C===c.f?k.state=s.FALSE:C===c.n?k.state=s.NULL:C===c.minus?k.numberNode+="-":c._0<=C&&C<=c._9?(k.numberNode+=String.fromCharCode(C),k.state=s.NUMBER_DIGIT):D(k,"Bad value");continue;case s.CLOSE_ARRAY:if(C===c.comma)k.stack.push(s.CLOSE_ARRAY),M(k,"onvalue"),k.state=s.VALUE;else if(C===c.closeBracket)E(k,"onclosearray"),this.depth--,k.state=k.stack.pop()||s.VALUE;else{if(H(C))continue;D(k,"Bad array")}continue;case s.STRING:k.textNode===void 0&&(k.textNode="");var ee=F-1,Se=k.slashed,be=k.unicodeI;e:for(;;){for(n.DEBUG&&console.log(F,C,n.STATE[k.state],Se);be>0;)if(k.unicodeS+=String.fromCharCode(C),C=O.charCodeAt(F++),k.position++,be===4?(k.textNode+=String.fromCharCode(parseInt(k.unicodeS,16)),be=0,ee=F-1):be++,!C)break e;if(C===c.doubleQuote&&!Se){k.state=k.stack.pop()||s.VALUE,k.textNode+=O.substring(ee,F-1),k.position+=F-1-ee;break}if(C===c.backslash&&!Se&&(Se=!0,k.textNode+=O.substring(ee,F-1),k.position+=F-1-ee,C=O.charCodeAt(F++),k.position++,!C))break;if(Se){if(Se=!1,C===c.n?k.textNode+=`
`:C===c.r?k.textNode+="\r":C===c.t?k.textNode+="	":C===c.f?k.textNode+="\f":C===c.b?k.textNode+="\b":C===c.u?(be=1,k.unicodeS=""):k.textNode+=String.fromCharCode(C),C=O.charCodeAt(F++),k.position++,ee=F-1,C)continue;break}h.lastIndex=F;var te=h.exec(O);if(te===null){F=O.length+1,k.textNode+=O.substring(ee,F-1),k.position+=F-1-ee;break}if(F=te.index+1,C=O.charCodeAt(te.index),!C){k.textNode+=O.substring(ee,F-1),k.position+=F-1-ee;break}}k.slashed=Se,k.unicodeI=be;continue;case s.TRUE:C===c.r?k.state=s.TRUE2:D(k,"Invalid true started with t"+C);continue;case s.TRUE2:C===c.u?k.state=s.TRUE3:D(k,"Invalid true started with tr"+C);continue;case s.TRUE3:C===c.e?(x(k,"onvalue",!0),k.state=k.stack.pop()||s.VALUE):D(k,"Invalid true started with tru"+C);continue;case s.FALSE:C===c.a?k.state=s.FALSE2:D(k,"Invalid false started with f"+C);continue;case s.FALSE2:C===c.l?k.state=s.FALSE3:D(k,"Invalid false started with fa"+C);continue;case s.FALSE3:C===c.s?k.state=s.FALSE4:D(k,"Invalid false started with fal"+C);continue;case s.FALSE4:C===c.e?(x(k,"onvalue",!1),k.state=k.stack.pop()||s.VALUE):D(k,"Invalid false started with fals"+C);continue;case s.NULL:C===c.u?k.state=s.NULL2:D(k,"Invalid null started with n"+C);continue;case s.NULL2:C===c.l?k.state=s.NULL3:D(k,"Invalid null started with nu"+C);continue;case s.NULL3:C===c.l?(x(k,"onvalue",null),k.state=k.stack.pop()||s.VALUE):D(k,"Invalid null started with nul"+C);continue;case s.NUMBER_DECIMAL_POINT:C===c.period?(k.numberNode+=".",k.state=s.NUMBER_DIGIT):D(k,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:c._0<=C&&C<=c._9?k.numberNode+=String.fromCharCode(C):C===c.period?(k.numberNode.indexOf(".")!==-1&&D(k,"Invalid number has two dots"),k.numberNode+="."):C===c.e||C===c.E?((k.numberNode.indexOf("e")!==-1||k.numberNode.indexOf("E")!==-1)&&D(k,"Invalid number has two exponential"),k.numberNode+="e"):C===c.plus||C===c.minus?(de===c.e||de===c.E||D(k,"Invalid symbol in number"),k.numberNode+=String.fromCharCode(C)):(P(k),F--,k.state=k.stack.pop()||s.VALUE);continue;default:D(k,"Unknown state: "+k.state)}return k.position>=k.bufferCheckPosition&&u(k),k}})(e)});function BS(t){var e=0,n=RS(),r={pullAsync:function(i){return Ti(this,void 0,void 0,function(){var o,s,l;return hr(this,function(a){switch(a.label){case 0:return o=t.slice(e,e+i),e+=i,[4,Hy(o,"text")];case 1:return s=a.sent(),l=n.write(s),r.result=l||{},[2,l]}})})},pullSync:function(i){var o=t.slice(e,e+i);e+=i;var s=jy(o,"text"),l=n.write(s);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return e>=t.size},result:{}};return r}function RS(t){var e=LS.parser(),n=0,r,i=[],o,s,l=!1,a=!1;return e.onopenobject=function(c){var u={};u.incomplete=!0,r||(r=u),o&&(i.push([s,o,a]),a?o.push(u):o[s]=u),o=u,s=c,a=!1,++n},e.onkey=function(c){return s=c},e.onvalue=function(c){return a?o.push(c):o[s]=c},e.oncloseobject=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},e.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),o&&(i.push([s,o,a]),a?o.push(c):o[s]=c),o=c,a=!0,s=null,++n},e.onclosearray=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},{write:function(c){return e.write(c),r},done:function(){return l}}}var Uy=1024;function Wy(t,e){return Ti(this,void 0,void 0,function(){var n,r,i,o;return hr(this,function(s){switch(s.label){case 0:return e=e||{},n=e.chunkSizeBytes||Uy*1024,[4,Jy(t,n)];case 1:return r=s.sent(),i=r.result.data,o=new zt(e.name!==void 0?e.name:i.databaseName),o.version(i.databaseVersion).stores(OS(i)),[4,qy(o,r,e.name!==void 0?La(La({},e),{acceptNameDiff:!0}):e)];case 2:return s.sent(),[2,o]}})})}function qy(t,e,n){return Ti(this,void 0,void 0,function(){function r(){return Ti(this,void 0,void 0,function(){var b,x,E,M,P;return hr(this,function(L){switch(L.label){case 0:b=function(D){var V,H,U,O,k,F,C,de,ee,Se,be,te,Ae;return hr(this,function(tt){switch(tt.label){case 0:if(c.includes(D.tableName))return[2,"continue"];if(!D.rows)return[2,"break"];if(!D.rows.incomplete&&D.rows.length===0)return[2,"continue"];if(u&&zt.ignoreTransaction(function(){return u(d)}),V=D.tableName,H=t.table(V),U=a.tables.filter(function(Ue){return Ue.name===V})[0].schema,!H){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(D.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&U.split(",")[0]!=H.schema.primKey.src)throw new Error("Primary key differs for table ".concat(D.tableName,". "));for(O=D.rows,k=[],F=0;F<O.length&&(C=O[F],!C.incomplete);F++)k.push(Zn.revive(C));return de=n.filter,ee=n.transform,Se=de?D.inbound?k.filter(function(Ue){return de(V,Ue)}):k.filter(function(Ue){var it=Ue[0],ht=Ue[1];return de(V,ht,it)}):k,ee&&(Se=Se.map(D.inbound?function(Ue){return ee(V,Ue).value}:function(Ue){var it=Ue[0],ht=Ue[1],Ft=ee(V,ht,it);return[Ft.key,Ft.value]})),be=D.inbound?[void 0,Se]:[Se.map(function(Ue){return Ue[0]}),k.map(function(Ue){return Ue[1]})],te=be[0],Ae=be[1],n.overwriteValues?[4,H.bulkPut(Ae,te)]:[3,2];case 1:return tt.sent(),[3,4];case 2:return[4,H.bulkAdd(Ae,te)];case 3:tt.sent(),tt.label=4;case 4:return d.completedRows+=k.length,k.incomplete||(d.completedTables+=1),O.splice(0,k.length),[2]}})},x=0,E=a.data,L.label=1;case 1:return x<E.length?(M=E[x],[5,b(M)]):[3,4];case 2:if(P=L.sent(),P==="break")return[3,4];L.label=3;case 3:return x++,[3,1];case 4:for(;a.data.length>0&&a.data[0].rows&&!a.data[0].rows.incomplete;)a.data.splice(0,1);return!o.done()&&!o.eof()?l?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,zt.waitFor(o.pullAsync(i))];case 6:L.sent(),L.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,l,a,c,u,d,h,m,g;return hr(this,function(b){switch(b.label){case 0:return n=n||{},i=n.chunkSizeBytes||Uy*1024,[4,Jy(e,i)];case 1:if(o=b.sent(),s=o.result,l="FileReaderSync"in self,a=s.data,c=n.skipTables?n.skipTables:[],!n.acceptNameDiff&&t.name!==a.databaseName)throw new Error("Name differs. Current database name is ".concat(t.name," but export is ").concat(a.databaseName));if(!n.acceptVersionDiff&&t.verno!==a.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(t.verno," but export is ").concat(a.databaseVersion));if(u=n.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:a.tables.reduce(function(x,E){return x+E.rowCount},0),totalTables:a.tables.length},u&&zt.ignoreTransaction(function(){return u(d)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=t.tables,b.label=2;case 2:return h<m.length?(g=m[h],c.includes(g.name)?[3,4]:[4,g.clear()]):[3,5];case 3:b.sent(),b.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return b.sent(),[3,9];case 7:return[4,t.transaction("rw",t.tables,r)];case 8:b.sent(),b.label=9;case 9:return d.done=!0,u&&zt.ignoreTransaction(function(){return u(d)}),[2]}})})}function Jy(t,e){return Ti(this,void 0,void 0,function(){var n,r;return hr(this,function(i){switch(i.label){case 0:n="slice"in t?BS(t):t,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(e)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>DS)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}zt.prototype.export=function(t){return $S(this,t)};zt.prototype.import=function(t,e){return qy(this,t,e)};zt.import=function(t,e){return Wy(t,e)};function VS(t){return lg()?(Sw(t),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function FS(t,e){const n=sf(e==null?void 0:e.initialValue),r=t.subscribe({next:i=>n.value=i,error:e==null?void 0:e.onError});return VS(()=>{r.unsubscribe()}),n}let Ll;const HS=new Uint8Array(16);function jS(){if(!Ll&&(Ll=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ll))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ll(HS)}const Xt=[];for(let t=0;t<256;++t)Xt.push((t+256).toString(16).slice(1));function zS(t,e=0){return Xt[t[e+0]]+Xt[t[e+1]]+Xt[t[e+2]]+Xt[t[e+3]]+"-"+Xt[t[e+4]]+Xt[t[e+5]]+"-"+Xt[t[e+6]]+Xt[t[e+7]]+"-"+Xt[t[e+8]]+Xt[t[e+9]]+"-"+Xt[t[e+10]]+Xt[t[e+11]]+Xt[t[e+12]]+Xt[t[e+13]]+Xt[t[e+14]]+Xt[t[e+15]]}const KS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kp={randomUUID:KS};function US(t,e,n){if(kp.randomUUID&&!e&&!t)return kp.randomUUID();t=t||{};const r=t.random||(t.rng||jS)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return zS(r)}const WS=async t=>await t.export(),qS={data(){return{dbRef:null,db:null,databaseName:null,dblist:[],useObservable:FS,liveQuery:Fy,uuid:US,syncdb:{},DBstores:{Settings:"uuid, settings, lastupdated",Writer:"uuid, title, description, files, lastupdated",Cards:"uuid, title,description,content,style,labels,options,lastupdated",Files:"uuid, writerid, title, content, lastupdated",Snowflake:"uuid, title, description,content,lastupdated",Timeline:"uuid, title, description,content,lastupdated",Gridplanner:"uuid, title, description,content,lastupdated",Mindmap:"uuid, title, description,content,lastupdated",ImageLibrary:"uuid, title, base64"}}},methods:{async getDatabases(){},async initDatabase(){console.log(this.databaseName),this.databaseName||(console.log("New Db Created"),this.databaseName=this.uuid()),this.db||(console.log("Creating new database"),this.db=await new zt(this.databaseName),console.log("Creating new stores"),this.db.version(1).stores(this.DBstores));let t=await this.db.Settings.toArray(),e={};if(t){if(t.length)e=t[0],this.dbRef=e.uuid;else{let n=JSON.parse(JSON.stringify(this.$root.SettingsTemplate));n.uuid=this.$root.uuid(),n.ProjectName="New Project",await this.$root.AddRecord("Settings",n),this.dbRef=n.uuid}if(this.syncdb.Settings=await this.useObservable(this.liveQuery(async()=>await this.db.Settings.get(this.dbRef))),this.syncdb.Cards=await this.useObservable(this.liveQuery(async()=>await this.db.Cards.toArray())),this.syncdb.Files=await this.useObservable(this.liveQuery(async()=>await this.db.Files.toArray())),this.syncdb.Gridplanner=await this.useObservable(this.liveQuery(async()=>await this.db.Gridplanner.toArray())),this.syncdb.ImageLibrary=await this.useObservable(this.liveQuery(async()=>await this.db.ImageLibrary.toArray())),this.syncdb.Mindmap=await this.useObservable(this.liveQuery(async()=>await this.db.Mindmap.toArray())),this.syncdb.Snowflake=await this.useObservable(this.liveQuery(async()=>await this.db.Snowflake.toArray())),this.syncdb.Timeline=await this.useObservable(this.liveQuery(async()=>await this.db.Timeline.toArray())),this.syncdb.Writer=await this.useObservable(this.liveQuery(async()=>await this.db.Writer.toArray())),console.log(this.$root.currentTool,this.$root.urlSelected),this.$root.currentTool){console.log("New Window link");const n=this.$root.currentTool,r=n.charAt(0).toUpperCase()+n.slice(1);this.$root.urlSelected&&(this.$root.tools[this.$root.currentTool].selected=await this.db[r].get(this.$root.urlSelected))}}},async dbImport(t){this.databaseName=t.data.databaseName;const e=new Blob([JSON.stringify(t)],{type:"text/json;charset=utf-8"});this.db=await Wy(e,{clearTablesBeforeImport:!0}),await this.initDatabase()},async dbExport(){const t=await new zt(this.databaseName).open(),e=await WS(t);return t.close(),e},async getImage(t){return await this.$root.db.ImageLibrary.get(t)},async AddRecord(t,e){return e.lastupdated=Date.now(),await this.db[t].add(e)},async UpdateRecord(t,e,n){return n.uuid=e,n.lastupdated=Date.now(),await this.db[t].put(JSON.parse(JSON.stringify(n)))},async DeleteRecord(t,e){return await this.db[t].delete(e)},clearDatabase(){this.$root.db.Settings.clear(),this.$root.db.Writer.clear(),this.$root.db.Cards.clear(),this.$root.db.Files.clear(),this.$root.db.Mindmap.clear(),this.$root.db.ImageLibrary.clear(),this.$root.db.Gridplanner.clear(),this.$root.db.Snowflake.clear(),this.$root.db.Timeline.clear()},async closeProject(){this.$swal({title:"Are you sure?",text:"This will close the project any unsaved changes will be lost!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, close it!"}).then(async t=>{t.isConfirmed&&(window.removeEventListener("beforeunload",this.$root.unloadEvent),this.dbRef=null,this.$root.clearDatabase(),await this.$root.db.delete(),location.reload())})},async closeAndDeleteDatabase(){this.db&&(await this.db.close(),await zt.delete(this.databaseName),console.log(`Database ${this.databaseName} closed and deleted.`))}},async mounted(){this.databaseName?await this.initDatabase():this.getDatabases(),console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))},beforeDestroy(){console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))}},JS={data(){return{SettingsTemplate:{documentprefs:{align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-align")),fontsize:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-fontsize")),lspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-lspacing")),indentation:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-indentation")),pspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-pspacing")),page:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-page")),font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-font")),color:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-color")),bgcolor:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-bgcolor")),h1align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h1align")),h2align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h2align")),h3align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h3align")),h4align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h4align")),distractionfree_font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-font")),distractionfree_bg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-bg")),distractionfree_fg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-fg")),typesound:!1,caretfocus:!1}},writerTemplate:{title:"Another Great Novel",author:"A.N. Author",description:" ... ",files:[]},fileTemplate:{title:"New Section",content:"",notes:[]}}},methods:{dotrim(t){return t[0]===" "&&(t=t.substring(1)),t},async makeNewCard(t){let e=this.$root.uuid();t&&(e=t);let n={};n.uuid=e,n.title="",n.description="",n.showdesc=!1,n.content="",n.labels=[],n.images=[],n.style="",n.options={},n.color="cardcolor0",console.log(n),await this.$root.AddRecord("Cards",n),this.$root.modal=!0,this.$root.tools.cards.selected=n},async makeMindmap(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Mindmap",e.description="",e.content={links:[],nodes:{}},await this.$root.AddRecord("Mindmap",e),this.$root.tools.mindmap.selected=e},async makeTimeline(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Timeline",e.description="",e.content={items:[]},await this.$root.AddRecord("Timeline",e),this.$root.tools.timeline.selected=e},async makeGridplanner(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="New Gridplanner",e.description="",e.content={headers:[],rows:[]},await this.$root.AddRecord("Gridplanner",e),this.$root.tools.gridplanner.selected=e},async makeSnowflake(){let t=this.$root.uuid(),e={};e.uuid=t,e.title="",e.description="",e.content=[],await this.$root.AddRecord("Snowflake",e),this.$root.tools.snowflake.selected=e}}},GS={data(){return{}},methods:{handleKeyPress(t){this.$root.databaseName&&t.keyCode==83&&(navigator.userAgent.includes("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.saveFile())},async openFile(){try{[this.$root.fileHandle]=await window.showOpenFilePicker({types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]},extensions:["wmc"]}]});const e=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(e),this.$root.dbImport(this.$root.jsonData)}catch(t){console.error("Error opening file:",t)}},async snapShot(){let t=this.sanitizeFilename(this.$root.syncdb.Settings.ProjectName);const n=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(n);const r=new Blob([JSON.stringify(this.$root.jsonData,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},sanitizeFilename(t){const e=new Date,n=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}`;return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")+`-${n}.wmc`},async saveFile(){const e=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(e);try{this.$root.fileHandle||(this.$root.fileHandle=await window.showSaveFilePicker({suggestedName:"untitled.wmc",types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]}}]}));const n=await this.$root.fileHandle.createWritable();await n.write(JSON.stringify(this.$root.jsonData,null,2)),await n.close(),this.$swal({title:"Your File Was saved",text:"The file was saved successfully",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch{this.$swal({title:"Your file was not saved",text:"Please try again, or use other export tools to make a backup.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}},async clearFile(){this.$root.closeProject()}},created(){"launchQueue"in window&&"files"in window.LaunchParams.prototype&&window.launchQueue.setConsumer(async t=>{if(!t.files.length)return;this.$root.fileHandle=t.files[0];const n=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(n),await this.$root.dbImport(this.$root.jsonData)})},mounted(){window.addEventListener("keydown",this.handleKeyPress)},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyPress)}},YS={data(){return{windowID:null,parentID:null,mainwindow:!0,childWindows:[]}},methods:{openNewWindow(){let t="",e="";this.$root.currentTool&&(t=this.$root.currentTool,this.$root.tools[this.$root.currentTool].selected&&(e=this.$root.tools[this.$root.currentTool].selected.uuid,console.log(e)));let n=window.location.href;n=n+"?parentid="+this.windowID,n=n+"&dbname="+this.$root.databaseName,n=n+"&tool="+t,n=n+"&selected="+e;const r=window.open(n,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600");this.childWindows.push(r),r.onload=function(){new URL(r.location)}},closeChildWindows(){this.childWindows.forEach(t=>{t&&!t.closed&&t.close()}),this.childWindows=[]}},async created(){const t=new URLSearchParams(window.location.search);for(const[e,n]of t.entries())console.log(`${e}: ${n}`);this.parentID=t.get("parentid"),this.$root.databaseName=t.get("dbname"),this.$root.currentTool=t.get("tool"),this.$root.urlSelected=t.get("selected"),console.log("SubWindow",this.parentID),this.parentID&&(this.mainwindow=!1),this.windowID=this.uuid(),window.addEventListener("beforeunload",this.closeChildWindows)},beforeDestroy(){window.removeEventListener("beforeunload",this.closeChildWindows)}},lt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},XS={},ZS={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 453.543 453.543","xml:space":"preserve",class:"logo"};function QS(t,e){return z(),Q("svg",ZS,e[0]||(e[0]=[T("path",{d:"M464.632 212.901 337.566 83.292a55.653 55.653 0 0 0-79.771 0l-126.63 129.386a19.322 19.322 0 0 0 0 27.122l38.359 39.127 25.5 24.232c7.628 7.114 19.18 7.114 26.808 0l51.219-48.242c14.167-13.338 35.744-13.338 49.693 0l51.219 48.242c7.629 7.114 19.18 7.114 26.809 0l25.501-24.232 38.359-38.904c7.193-7.337 7.193-19.563 0-27.122z",class:"logotop",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1),T("path",{d:"m58.804 367.853 198.991 202.973a55.657 55.657 0 0 0 79.771 0l198.991-202.973c34.437-35.125 10.244-45.574-15.039-70.029L490.35 267.59c-7.409-7.336-19.18-7.113-26.808 0l-51.218 48.242c-14.169 13.339-35.744 13.339-49.694 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-51.219 48.242c-14.167 13.339-35.744 13.339-49.693 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-28.77 27.123c-26.37 24.899-54.05 36.236-18.088 73.14z",class:"logobtm",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1)]))}const Of=lt(XS,[["render",QS],["__scopeId","data-v-c0fdd851"]]),eC={methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)}}},tC={key:0};function nC(t,e,n,r,i,o){return this.$root.syncdb.Settings?(z(),Q("span",tC,[Nt(T("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>this.$root.syncdb.Settings.ProjectName=s),placeholder:"Project Name",onBlur:e[1]||(e[1]=s=>o.update())},null,544),[[$t,this.$root.syncdb.Settings.ProjectName]])])):Pe("",!0)}const Gy=lt(eC,[["render",nC]]),rC={components:{Logo:Of,ProjectName:Gy},methods:{}},iC={class:"toptoolbar"},oC={class:"floatRight"},sC={key:3};function lC(t,e,n,r,i,o){const s=Je("Logo"),l=Je("ProjectName");return z(),Q("div",iC,[T("button",{onClick:e[0]||(e[0]=a=>t.$root.currentTool=null),class:"titlebtn"},[yt(s,{style:{width:"30px",height:"30px"}})]),yt(l,{class:"projectname"}),T("span",oC,[t.$root.dbRef?Pe("",!0):(z(),Q("button",{key:0,onClick:e[1]||(e[1]=(...a)=>t.$root.openFileFromGoogleDrive&&t.$root.openFileFromGoogleDrive(...a))},e[8]||(e[8]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Google Drive"),T("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})],-1)]))),t.$root.dbRef?Pe("",!0):(z(),Q("button",{key:1,onClick:e[2]||(e[2]=(...a)=>t.$root.openFileFromDropBox&&t.$root.openFileFromDropBox(...a))},e[9]||(e[9]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Dropbox"),T("path",{d:"M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z"})],-1)]))),t.$root.dbRef?Pe("",!0):(z(),Q("button",{key:2,onClick:e[3]||(e[3]=a=>t.$root.openFile())},e[10]||(e[10]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Load your Project"),T("path",{d:"M20 18H4V8H20M20 6H12L10 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V8A2 2 0 0 0 20 6M16 17H14V13H11L15 9L19 13H16Z"})],-1)]))),t.$root.dbRef?(z(),Q("span",sC,[T("button",{title:"Open in a new window",onClick:e[4]||(e[4]=a=>t.$root.openNewWindow())},e[11]||(e[11]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Open New Window"),T("path",{d:"M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z"})],-1)])),T("button",{onClick:e[5]||(e[5]=a=>t.$root.snapShot())},e[12]||(e[12]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Snapshot Project"),T("path",{d:"M20,4H16.83L15,2H9L7.17,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,18H4V6H8.05L9.88,4H14.12L15.95,6H20V18M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15Z"})],-1)])),T("button",{onClick:e[6]||(e[6]=a=>t.$root.saveFile())},e[13]||(e[13]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Save Project"),T("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z"})],-1)])),T("button",{onClick:e[7]||(e[7]=a=>t.$root.clearFile())},e[14]||(e[14]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Close Project"),T("path",{d:"M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,8.4L13.4,12L17,15.6L15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4Z"})],-1)]))])):Pe("",!0)])])}const aC=lt(rC,[["render",lC],["__scopeId","data-v-6290f712"]]),cC={name:"CardEditor",data(){return{colorlist:["cardcolor0","cardcolor1","cardcolor2","cardcolor3","cardcolor4","cardcolor5","cardcolor6"]}},methods:{update(){this.$root.UpdateRecord("Cards",this.$root.tools.cards.selected.uuid,this.$root.tools.cards.selected)},setColor(t){console.log(t),this.$root.tools.cards.selected.color=t,this.update()}}},uC={key:0},dC=["onClick"];function fC(t,e,n,r,i,o){return z(),Q(Ge,null,[t.$root.tools.cards.selected?Pe("",!0):(z(),Q("div",uC,[e[9]||(e[9]=er(" no card picked - so its gonna be link or new ")),T("button",{onClick:e[0]||(e[0]=s=>t.$root.makeNewCard())},"New Card")])),t.$root.tools.cards.selected?(z(),Q("div",{key:1,class:rr(["card",t.$root.tools.cards.selected.color])},[T("div",null,[(z(!0),Q(Ge,null,rn(i.colorlist,s=>(z(),Q("button",{class:rr(["colorbtn",s]),onClick:l=>o.setColor(s)},null,10,dC))),256))]),T("h1",null,[Nt(T("input",{type:"text",placeholder:"Card Title","onUpdate:modelValue":e[1]||(e[1]=s=>t.$root.tools.cards.selected.title=s),onBlur:e[2]||(e[2]=s=>o.update())},null,544),[[$t,t.$root.tools.cards.selected.title]])]),e[11]||(e[11]=T("h2",null,"Description",-1)),T("label",null,[Nt(T("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>t.$root.tools.cards.selected.showdesc=s),onBlur:e[4]||(e[4]=s=>o.update())},null,544),[[Mx,t.$root.tools.cards.selected.showdesc]]),e[10]||(e[10]=er(" Show on card"))]),T("p",null,[Nt(T("textarea",{placeholder:"card summary","onUpdate:modelValue":e[5]||(e[5]=s=>t.$root.tools.cards.selected.description=s),onBlur:e[6]||(e[6]=s=>o.update())},null,544),[[$t,t.$root.tools.cards.selected.description]])]),e[12]||(e[12]=T("h2",null,"Content",-1)),T("p",null,[Nt(T("textarea",{placeholder:"card details","onUpdate:modelValue":e[7]||(e[7]=s=>t.$root.tools.cards.selected.content=s),onBlur:e[8]||(e[8]=s=>o.update())},null,544),[[$t,t.$root.tools.cards.selected.content]])]),e[13]||(e[13]=T("p",null,null,-1))],2)):Pe("",!0)],64)}const hC=lt(cC,[["render",fC],["__scopeId","data-v-ab29f6c2"]]),pC={components:{CardEditor:hC}},mC={class:"centreme"};function gC(t,e,n,r,i,o){const s=Je("CardEditor");return z(),Q(Ge,null,[T("div",{class:"blackout",onClick:e[0]||(e[0]=l=>t.$root.modal=!1)}),T("div",mC,[T("button",{onClick:e[1]||(e[1]=l=>t.$root.modal=!1),class:"modalclose"},e[2]||(e[2]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"close-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)])),yt(s)])],64)}const yC=lt(pC,[["render",gC],["__scopeId","data-v-21b499cb"]]),bC={},vC={class:"footerbar"};function wC(t,e){return z(),Q("div",vC," Wavemaker Cards v5  2021 ")}const kC=lt(bC,[["render",wC]]),xC={data(){return{deferredPrompt:null,showInstallBanner:!1}},mounted(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showInstallBanner=!0})},methods:{async installApp(){this.showInstallBanner=!1,this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;console.log(t==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null}}},SC={key:0,class:"install-banner"};function CC(t,e,n,r,i,o){return i.showInstallBanner?(z(),Q("div",SC,[e[1]||(e[1]=T("p",null,"Install our app for a better experience!",-1)),T("button",{onClick:e[0]||(e[0]=(...s)=>o.installApp&&o.installApp(...s))},"Install")])):Pe("",!0)}const TC=lt(xC,[["render",CC],["__scopeId","data-v-7d957fbf"]]),EC={name:"About",components:{Logo:Of},data(){return{}},methods:{async newProject(){this.$root.initDatabase()}}},OC={class:"center-box"},AC={class:"hero"},MC={style:{display:"flex","justify-content":"center","align-items":"center"}},_C={style:{display:"block"}};function NC(t,e,n,r,i,o){const s=Je("Logo");return z(),Q("div",OC,[T("div",AC,[T("div",MC,[yt(s,{style:{width:"50px"}}),e[2]||(e[2]=T("h1",null,"Wavemaker Cards",-1))]),e[5]||(e[5]=T("p",null,[T("strong",null,"Version 5")],-1)),e[6]||(e[6]=T("p",{style:{padding:"10px","font-size":"1rem"}},"Start Writing",-1)),T("div",_C,[T("button",{class:"btn welcomebtn",onClick:e[0]||(e[0]=l=>o.newProject())},e[3]||(e[3]=[T("svg",{class:"icon",viewBox:"0 0 24 24"},[T("path",{d:"M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})],-1),er(" Create a new project")])),T("button",{class:"btn welcomebtn",onClick:e[1]||(e[1]=l=>t.$root.openFile())},e[4]||(e[4]=[T("svg",{class:"icon",viewBox:"0 0 24 24"},[T("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),T("span",null," Load a project (.wmc file) ",-1)]))])])])}const PC=lt(EC,[["render",NC],["__scopeId","data-v-200f914c"]]),$C={data(){return{currentdate:new Date,wordcountprogress:0,month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{monthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n+1,0).getDate()},prevMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n,0).getDate()},nextMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n-1,0).getDate()}},mounted(){this.$root.syncdb.Settings.tracker||(this.$root.syncdb.Settings.tracker={wordcount:0,target:2500,log:{"2025-02-01":123,"2025-02-02":432,"2025-02-03":234,"2025-02-04":345,"2025-02-05":456,"2025-02-06":567,"2025-02-07":678,"2025-02-08":789,"2025-02-09":890,"2025-02-10":901,"2025-02-11":123,"2025-02-12":234,"2025-02-13":345,"2025-02-14":456,"2025-02-15":567,"2025-02-16":678,"2025-02-17":789,"2025-02-18":890,"2025-02-19":901,"2025-02-20":123,"2025-02-21":234,"2025-02-22":345,"2025-02-23":456,"2025-02-24":567,"2025-02-25":678,"2025-02-26":789,"2025-02-27":890,"2025-02-28":901,"2025-03-01":123,"2025-03-02":234,"2025-03-03":345,"2025-03-04":456,"2025-03-05":567,"2025-03-06":678,"2025-03-07":789,"2025-03-08":890,"2025-03-09":901,"2025-03-10":123,"2025-03-11":234,"2025-03-12":345,"2025-03-13":456,"2025-03-14":567,"2025-03-15":678,"2025-03-16":789,"2025-03-17":890,"2025-03-18":901,"2025-03-19":123,"2025-03-20":234,"2025-03-21":345}})},methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)},monthName(t=0){let e=this.currentdate.getMonth()+t;return e===-1&&(e=11),e===12&&(e=0),this.month[e]},getLogValue(t,e){const n=this.currentdate.getFullYear(),r=this.currentdate.getMonth()+e,i=String(t).padStart(2,"0"),o=`${n}-${String(r).padStart(2,"0")}-${i}`,s=this.$root.syncdb.Settings.tracker.log[o]||0,l=this.$root.syncdb.Settings.tracker.target||1,a=s/l;return{count:s,percent:a}},advanceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()+1),this.currentdate=t},reduceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()-1),this.currentdate=t}}},DC={key:0},IC={class:"calendars"},LC={class:"month"},BC={class:"calendar"},RC=["title"],VC={class:"month"},FC={class:"calendar"},HC=["title"],jC={class:"progress-container"},zC={class:"progress-circle",viewBox:"0 0 36 36"};function KC(t,e,n,r,i,o){return this.$root.syncdb.Settings.tracker?(z(),Q("div",DC,[T("h3",null,Cn(t.$root.syncdb.Settings.tracker.wordcount)+" Words",1),T("label",null,[e[3]||(e[3]=er("Daily Wordcount Target ")),Nt(T("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>t.$root.syncdb.Settings.tracker.target=s)},null,512),[[$t,t.$root.syncdb.Settings.tracker.target]])]),e[5]||(e[5]=T("p",{style:{"text-align":"center"}},"Your Goals",-1)),T("div",null,[T("button",{onClick:e[1]||(e[1]=(...s)=>o.reduceMonth&&o.reduceMonth(...s))},"Previous Month"),T("button",{onClick:e[2]||(e[2]=(...s)=>o.advanceMonth&&o.advanceMonth(...s))},"Next Month")]),T("div",IC,[T("div",null,[T("div",LC,Cn(o.monthName(-1)),1),T("div",BC,[(z(!0),Q(Ge,null,rn(o.prevMonthDays,s=>(z(),Q("div",{class:"day",title:o.getLogValue(s,0).count+" Words"},[T("div",{class:"block",style:dr(`opacity:${o.getLogValue(s,0).percent}`)},null,4)],8,RC))),256))])]),T("div",null,[T("div",VC,Cn(o.monthName()),1),T("div",FC,[(z(!0),Q(Ge,null,rn(o.monthDays,s=>(z(),Q("div",{class:"day",title:o.getLogValue(s,1).count+" Words"},[T("div",{class:"block",style:dr(`opacity:${o.getLogValue(s,1).percent}`)},null,4)],8,HC))),256))])]),T("div",jC,[(z(),Q("svg",zC,[e[4]||(e[4]=T("path",{class:"circle-bg",d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,-1)),T("path",{class:"circle",style:dr(`stroke-dasharray: ${i.wordcountprogress}, 100`),d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,4)]))])])])):Pe("",!0)}const UC=lt($C,[["render",KC]]),WC={name:"ProjectHome",components:{Logo:Of,ProjectName:Gy,GridLogger:UC},mounted(){this.$root.tools.writer.selected=null,this.$root.tools.gridplanner.selected=null,this.$root.tools.timeline.selected=null,this.$root.tools.mindmap.selected=null,this.$root.tools.snowflake.selected=null,this.$root.tools.planningboard.selected=null},methods:{}},qC={key:0,class:"project-home"},JC={style:{"text-align":"center"}},GC={open:""},YC={class:"inputstyle"},XC={class:"mainnav"};function ZC(t,e,n,r,i,o){const s=Je("Logo"),l=Je("ProjectName"),a=Je("GridLogger");return this.$root.syncdb.Settings?(z(),Q("div",qC,[T("div",JC,[yt(s,{style:{width:"150px",height:"150px"}})]),T("details",GC,[e[6]||(e[6]=T("summary",null,"Project Settings",-1)),e[7]||(e[7]=T("p",{style:{"text-align":"center"}},"What is this project called?",-1)),T("h2",YC,[yt(l)]),yt(a)]),T("div",XC,[T("button",{onClick:e[0]||(e[0]=c=>t.$root.currentTool="writer")},e[8]||(e[8]=[T("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[T("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1),er(" Your Books")])),T("button",{onClick:e[1]||(e[1]=c=>t.$root.currentTool="gridplanner")},e[9]||(e[9]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"view-grid"),T("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1),er(" Grid Planner ")])),T("button",{onClick:e[2]||(e[2]=c=>t.$root.currentTool="mindmap")},e[10]||(e[10]=[T("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[T("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1),er(" Mindmap Builder")])),T("button",{onClick:e[3]||(e[3]=c=>t.$root.currentTool="timeline")},e[11]||(e[11]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"timeline-outline"),T("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1),er(" Timeline Creator")])),T("button",{onClick:e[4]||(e[4]=c=>t.$root.currentTool="snowflake")},e[12]||(e[12]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"snowflake"),T("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1),er(" Snowflake Tool")])),T("button",{onClick:e[5]||(e[5]=c=>t.$root.currentTool="cardsdatabase")},e[13]||(e[13]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"cards-outline"),T("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1),er(" Cards Database")]))])])):Pe("",!0)}const QC=lt(WC,[["render",ZC],["__scopeId","data-v-220df877"]]);var e2=Object.defineProperty,Ra=Object.getOwnPropertySymbols,Yy=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable,xp=(t,e,n)=>e in t?e2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,No=(t,e)=>{for(var n in e||(e={}))Yy.call(e,n)&&xp(t,n,e[n]);if(Ra)for(var n of Ra(e))Xy.call(e,n)&&xp(t,n,e[n]);return t},Zy=(t,e)=>{var n={};for(var r in t)Yy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ra)for(var r of Ra(t))e.indexOf(r)<0&&Xy.call(t,r)&&(n[r]=t[r]);return n};const Qy="[vue-draggable-plus]: ";function t2(t){console.warn(Qy+t)}function n2(t){console.error(Qy+t)}function Sp(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function r2(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function i2(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[r2(n)]=t[n]),e),{})}function Cp(t,e){return Array.isArray(t)&&t.splice(e,1),t}function Tp(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function o2(t){return typeof t>"u"}function s2(t){return typeof t=="string"}function Ep(t,e,n){const r=t.children[n];t.insertBefore(e,r)}function au(t){t.parentNode&&t.parentNode.removeChild(t)}function l2(t,e=document){var n;let r=null;return typeof(e==null?void 0:e.querySelector)=="function"?r=(n=e==null?void 0:e.querySelector)==null?void 0:n.call(e,t):r=document.querySelector(t),r||t2(`Element not found: ${t}`),r}function a2(t,e,n=null){return function(...r){return t.apply(n,r),e.apply(n,r)}}function c2(t,e){const n=No({},t);return Object.keys(e).forEach(r=>{n[r]?n[r]=a2(t[r],e[r]):n[r]=e[r]}),n}function u2(t){return t instanceof HTMLElement}function Op(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function d2(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const f2=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ap(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ap(Object(n),!0).forEach(function(r){h2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ap(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ca(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ca=function(e){return typeof e}:ca=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(t)}function h2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xr(){return Xr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xr.apply(this,arguments)}function p2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function m2(t,e){if(t==null)return{};var n=p2(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var g2="1.15.2";function qr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Qr=qr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yl=qr(/Edge/i),Mp=qr(/firefox/i),Is=qr(/safari/i)&&!qr(/chrome/i)&&!qr(/android/i),e1=qr(/iP(ad|od|hone)/i),t1=qr(/chrome/i)&&qr(/android/i),n1={capture:!1,passive:!1};function at(t,e,n){t.addEventListener(e,n,!Qr&&n1)}function st(t,e,n){t.removeEventListener(e,n,!Qr&&n1)}function Va(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function y2(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ur(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Va(t,e):Va(t,e))||r&&t===n)return t;if(t===n)break}while(t=y2(t))}return null}var _p=/\s+/g;function zn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(_p," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(_p," ")}}function Fe(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Ko(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Fe(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function r1(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Er(){var t=document.scrollingElement;return t||document.documentElement}function It(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var o,s,l,a,c,u,d;if(t!==window&&t.parentNode&&t!==Er()?(o=t.getBoundingClientRect(),s=o.top,l=o.left,a=o.bottom,c=o.right,u=o.height,d=o.width):(s=0,l=0,a=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Qr))do if(i&&i.getBoundingClientRect&&(Fe(i,"transform")!=="none"||n&&Fe(i,"position")!=="static")){var h=i.getBoundingClientRect();s-=h.top+parseInt(Fe(i,"border-top-width")),l-=h.left+parseInt(Fe(i,"border-left-width")),a=s+o.height,c=l+o.width;break}while(i=i.parentNode);if(r&&t!==window){var m=Ko(i||t),g=m&&m.a,b=m&&m.d;m&&(s/=b,l/=g,d/=g,u/=b,a=s+u,c=l+d)}return{top:s,left:l,bottom:a,right:c,width:d,height:u}}}function Np(t,e,n){for(var r=hi(t,!0),i=It(t)[e];r;){var o=It(r)[n],s=void 0;if(s=i>=o,!s)return r;if(r===Er())break;r=hi(r,!1)}return!1}function Go(t,e,n,r){for(var i=0,o=0,s=t.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==He.ghost&&(r||s[o]!==He.dragged)&&ur(s[o],n.draggable,t,!1)){if(i===e)return s[o];i++}o++}return null}function Af(t,e){for(var n=t.lastElementChild;n&&(n===He.ghost||Fe(n,"display")==="none"||e&&!Va(n,e));)n=n.previousElementSibling;return n||null}function Xn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==He.clone&&(!e||Va(t,e))&&n++;return n}function Pp(t){var e=0,n=0,r=Er();if(t)do{var i=Ko(t),o=i.a,s=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*s}while(t!==r&&(t=t.parentNode));return[e,n]}function b2(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function hi(t,e){if(!t||!t.getBoundingClientRect)return Er();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Fe(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Er();if(r||e)return n;r=!0}}while(n=n.parentNode);return Er()}function v2(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function cu(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ls;function i1(t,e){return function(){if(!Ls){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Ls=setTimeout(function(){Ls=void 0},e)}}}function w2(){clearTimeout(Ls),Ls=void 0}function o1(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function s1(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function l1(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var o,s,l,a;if(!(!ur(i,e.draggable,t,!1)||i.animated||i===n)){var c=It(i);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,c.right),r.bottom=Math.max((a=r.bottom)!==null&&a!==void 0?a:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Wn="Sortable"+new Date().getTime();function k2(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Fe(r,"display")==="none"||r===He.ghost)){t.push({target:r,rect:It(r)});var i=Mr({},t[t.length-1].rect);if(r.thisAnimationDuration){var o=Ko(r,!0);o&&(i.top-=o.f,i.left-=o.e)}r.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(b2(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,o=0;t.forEach(function(s){var l=0,a=s.target,c=a.fromRect,u=It(a),d=a.prevFromRect,h=a.prevToRect,m=s.rect,g=Ko(a,!0);g&&(u.top-=g.f,u.left-=g.e),a.toRect=u,a.thisAnimationDuration&&cu(d,u)&&!cu(c,u)&&(m.top-u.top)/(m.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(l=S2(m,d,h,r.options)),cu(u,c)||(a.prevFromRect=c,a.prevToRect=u,l||(l=r.options.animation),r.animate(a,m,u,l)),l&&(i=!0,o=Math.max(o,l),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},l),a.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),t=[]},animate:function(n,r,i,o){if(o){Fe(n,"transition",""),Fe(n,"transform","");var s=Ko(this.el),l=s&&s.a,a=s&&s.d,c=(r.left-i.left)/(l||1),u=(r.top-i.top)/(a||1);n.animatingX=!!c,n.animatingY=!!u,Fe(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=x2(n),Fe(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Fe(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Fe(n,"transition",""),Fe(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function x2(t){return t.offsetWidth}function S2(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var ko=[],uu={initializeByDefault:!0},bl={mount:function(t){for(var e in uu)uu.hasOwnProperty(e)&&!(e in t)&&(t[e]=uu[e]);ko.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ko.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=t+"Global";ko.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][i]&&e[o.pluginName][i](Mr({sortable:e},n)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](Mr({sortable:e},n)))})},initializePlugins:function(t,e,n,r){ko.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var a=new s(t,e,t.options);a.sortable=t,a.options=t.options,t[l]=a,Xr(n,a.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var o=this.modifyOption(t,i,t.options[i]);typeof o<"u"&&(t.options[i]=o)}},getEventProperties:function(t,e){var n={};return ko.forEach(function(r){typeof r.eventProperties=="function"&&Xr(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return ko.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[e]=="function"&&(r=i.optionListeners[e].call(t[i.pluginName],n))}),r}};function C2(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,s=t.toEl,l=t.fromEl,a=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[Wn],!!e){var b,x=e.options,E="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Qr&&!yl?b=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(r,!0,!0)),b.to=s||n,b.from=l||n,b.item=i||n,b.clone=o,b.oldIndex=a,b.newIndex=c,b.oldDraggableIndex=u,b.newDraggableIndex=d,b.originalEvent=h,b.pullMode=m?m.lastPutMode:void 0;var M=Mr(Mr({},g),bl.getEventProperties(r,e));for(var P in M)b[P]=M[P];n&&n.dispatchEvent(b),x[E]&&x[E].call(e,b)}}var T2=["evt"],Dn=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=m2(n,T2);bl.pluginEvent.bind(He)(t,e,Mr({dragEl:ue,parentEl:Mt,ghostEl:Ke,rootEl:Tt,nextEl:Fi,lastDownEl:ua,cloneEl:Ot,cloneHidden:di,dragStarted:bs,putSortable:Zt,activeSortable:He.active,originalEvent:r,oldIndex:Po,oldDraggableIndex:Bs,newIndex:Un,newDraggableIndex:li,hideGhostForTarget:d1,unhideGhostForTarget:f1,cloneNowHidden:function(){di=!0},cloneNowShown:function(){di=!1},dispatchSortableEvent:function(o){vn({sortable:e,name:o,originalEvent:r})}},i))};function vn(t){C2(Mr({putSortable:Zt,cloneEl:Ot,targetEl:ue,rootEl:Tt,oldIndex:Po,oldDraggableIndex:Bs,newIndex:Un,newDraggableIndex:li},t))}var ue,Mt,Ke,Tt,Fi,ua,Ot,di,Po,Un,Bs,li,Bl,Zt,Oo=!1,Fa=!1,Ha=[],Bi,cr,du,fu,$p,Dp,bs,xo,Rs,Vs=!1,Rl=!1,da,sn,hu=[],Sd=!1,ja=[],Sc=typeof document<"u",Vl=e1,Ip=yl||Qr?"cssFloat":"float",E2=Sc&&!t1&&!e1&&"draggable"in document.createElement("div"),a1=function(){if(Sc){if(Qr)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),c1=function(t,e){var n=Fe(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Go(t,0,e),o=Go(t,1,e),s=i&&Fe(i),l=o&&Fe(o),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+It(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+It(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||a>=r&&n[Ip]==="none"||o&&n[Ip]==="none"&&a+c>r)?"vertical":"horizontal"},O2=function(t,e,n){var r=n?t.left:t.top,i=n?t.right:t.bottom,o=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,a=n?e.width:e.height;return r===s||i===l||r+o/2===s+a/2},A2=function(t,e){var n;return Ha.some(function(r){var i=r[Wn].options.emptyInsertThreshold;if(!(!i||Af(r))){var o=It(r),s=t>=o.left-i&&t<=o.right+i,l=e>=o.top-i&&e<=o.bottom+i;if(s&&l)return n=r}}),n},u1=function(t){function e(i,o){return function(s,l,a,c){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(o||u))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return e(i(s,l,a,c),o)(s,l,a,c);var d=(o?s:l).options.group.name;return i===!0||typeof i=="string"&&i===d||i.join&&i.indexOf(d)>-1}}var n={},r=t.group;(!r||ca(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},d1=function(){!a1&&Ke&&Fe(Ke,"display","none")},f1=function(){!a1&&Ke&&Fe(Ke,"display","")};Sc&&!t1&&document.addEventListener("click",function(t){if(Fa)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Fa=!1,!1},!0);var Ri=function(t){if(ue){t=t.touches?t.touches[0]:t;var e=A2(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Wn]._onDragOver(n)}}},M2=function(t){ue&&ue.parentNode[Wn]._isOutsideThisEl(t.target)};function He(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xr({},e),t[Wn]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return c1(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:He.supportPointer!==!1&&"PointerEvent"in window&&!Is,emptyInsertThreshold:5};bl.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);u1(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:E2,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?at(t,"pointerdown",this._onTapStart):(at(t,"mousedown",this._onTapStart),at(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(at(t,"dragover",this),at(t,"dragenter",this)),Ha.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xr(this,k2())}He.prototype={constructor:He,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(xo=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,ue):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,i=r.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=r.filter;if(B2(n),!ue&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||r.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&Is&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ur(l,r.draggable,n,!1),!(l&&l.animated)&&ua!==l)){if(Po=Xn(l),Bs=Xn(l,r.draggable),typeof c=="function"){if(c.call(this,t,l,this)){vn({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:n,fromEl:n}),Dn("filter",e,{evt:t}),i&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=ur(a,u.trim(),n,!1),u)return vn({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:n,toEl:n}),Dn("filter",e,{evt:t}),!0}),c)){i&&t.cancelable&&t.preventDefault();return}r.handle&&!ur(a,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,i=r.el,o=r.options,s=i.ownerDocument,l;if(n&&!ue&&n.parentNode===i){var a=It(n);if(Tt=i,ue=n,Mt=ue.parentNode,Fi=ue.nextSibling,ua=n,Bl=o.group,He.dragged=ue,Bi={target:ue,clientX:(e||t).clientX,clientY:(e||t).clientY},$p=Bi.clientX-a.left,Dp=Bi.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,ue.style["will-change"]="all",l=function(){if(Dn("delayEnded",r,{evt:t}),He.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Mp&&r.nativeDraggable&&(ue.draggable=!0),r._triggerDragStart(t,e),vn({sortable:r,name:"choose",originalEvent:t}),zn(ue,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){r1(ue,c.trim(),pu)}),at(s,"dragover",Ri),at(s,"mousemove",Ri),at(s,"touchmove",Ri),at(s,"mouseup",r._onDrop),at(s,"touchend",r._onDrop),at(s,"touchcancel",r._onDrop),Mp&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ue.draggable=!0),Dn("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(yl||Qr))){if(He.eventCanceled){this._onDrop();return}at(s,"mouseup",r._disableDelayedDrag),at(s,"touchend",r._disableDelayedDrag),at(s,"touchcancel",r._disableDelayedDrag),at(s,"mousemove",r._delayedDragTouchMoveHandler),at(s,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&at(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ue&&pu(ue),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;st(t,"mouseup",this._disableDelayedDrag),st(t,"touchend",this._disableDelayedDrag),st(t,"touchcancel",this._disableDelayedDrag),st(t,"mousemove",this._delayedDragTouchMoveHandler),st(t,"touchmove",this._delayedDragTouchMoveHandler),st(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?at(document,"pointermove",this._onTouchMove):e?at(document,"touchmove",this._onTouchMove):at(document,"mousemove",this._onTouchMove):(at(ue,"dragend",this),at(Tt,"dragstart",this._onDragStart));try{document.selection?fa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Oo=!1,Tt&&ue){Dn("dragStarted",this,{evt:e}),this.nativeDraggable&&at(document,"dragover",M2);var n=this.options;!t&&zn(ue,n.dragClass,!1),zn(ue,n.ghostClass,!0),He.active=this,t&&this._appendGhost(),vn({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(cr){this._lastX=cr.clientX,this._lastY=cr.clientY,d1();for(var t=document.elementFromPoint(cr.clientX,cr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(cr.clientX,cr.clientY),t!==e);)e=t;if(ue.parentNode[Wn]._isOutsideThisEl(t),e)do{if(e[Wn]){var n=void 0;if(n=e[Wn]._onDragOver({clientX:cr.clientX,clientY:cr.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);f1()}},_onTouchMove:function(t){if(Bi){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=Ke&&Ko(Ke,!0),s=Ke&&o&&o.a,l=Ke&&o&&o.d,a=Vl&&sn&&Pp(sn),c=(i.clientX-Bi.clientX+r.x)/(s||1)+(a?a[0]-hu[0]:0)/(s||1),u=(i.clientY-Bi.clientY+r.y)/(l||1)+(a?a[1]-hu[1]:0)/(l||1);if(!He.active&&!Oo){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ke){o?(o.e+=c-(du||0),o.f+=u-(fu||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Fe(Ke,"webkitTransform",d),Fe(Ke,"mozTransform",d),Fe(Ke,"msTransform",d),Fe(Ke,"transform",d),du=c,fu=u,cr=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ke){var t=this.options.fallbackOnBody?document.body:Tt,e=It(ue,!0,Vl,!0,t),n=this.options;if(Vl){for(sn=t;Fe(sn,"position")==="static"&&Fe(sn,"transform")==="none"&&sn!==document;)sn=sn.parentNode;sn!==document.body&&sn!==document.documentElement?(sn===document&&(sn=Er()),e.top+=sn.scrollTop,e.left+=sn.scrollLeft):sn=Er(),hu=Pp(sn)}Ke=ue.cloneNode(!0),zn(Ke,n.ghostClass,!1),zn(Ke,n.fallbackClass,!0),zn(Ke,n.dragClass,!0),Fe(Ke,"transition",""),Fe(Ke,"transform",""),Fe(Ke,"box-sizing","border-box"),Fe(Ke,"margin",0),Fe(Ke,"top",e.top),Fe(Ke,"left",e.left),Fe(Ke,"width",e.width),Fe(Ke,"height",e.height),Fe(Ke,"opacity","0.8"),Fe(Ke,"position",Vl?"absolute":"fixed"),Fe(Ke,"zIndex","100000"),Fe(Ke,"pointerEvents","none"),He.ghost=Ke,t.appendChild(Ke),Fe(Ke,"transform-origin",$p/parseInt(Ke.style.width)*100+"% "+Dp/parseInt(Ke.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,i=n.options;if(Dn("dragStart",this,{evt:t}),He.eventCanceled){this._onDrop();return}Dn("setupClone",this),He.eventCanceled||(Ot=s1(ue),Ot.removeAttribute("id"),Ot.draggable=!1,Ot.style["will-change"]="",this._hideClone(),zn(Ot,this.options.chosenClass,!1),He.clone=Ot),n.cloneId=fa(function(){Dn("clone",n),!He.eventCanceled&&(n.options.removeCloneOnHide||Tt.insertBefore(Ot,ue),n._hideClone(),vn({sortable:n,name:"clone"}))}),!e&&zn(ue,i.dragClass,!0),e?(Fa=!0,n._loopId=setInterval(n._emulateDragOver,50)):(st(document,"mouseup",n._onDrop),st(document,"touchend",n._onDrop),st(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,ue)),at(document,"drop",n),Fe(ue,"transform","translateZ(0)")),Oo=!0,n._dragStartId=fa(n._dragStarted.bind(n,e,t)),at(document,"selectstart",n),bs=!0,Is&&Fe(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,i,o,s=this.options,l=s.group,a=He.active,c=Bl===l,u=s.sort,d=Zt||a,h,m=this,g=!1;if(Sd)return;function b(te,Ae){Dn(te,m,Mr({evt:t,isOwner:c,axis:h?"vertical":"horizontal",revert:o,dragRect:r,targetRect:i,canSort:u,fromSortable:d,target:n,completed:E,onMove:function(tt,Ue){return Fl(Tt,e,ue,r,tt,It(tt),t,Ue)},changed:M},Ae))}function x(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==d&&d.captureAnimationState()}function E(te){return b("dragOverCompleted",{insertion:te}),te&&(c?a._hideClone():a._showClone(m),m!==d&&(zn(ue,Zt?Zt.options.ghostClass:a.options.ghostClass,!1),zn(ue,s.ghostClass,!0)),Zt!==m&&m!==He.active?Zt=m:m===He.active&&Zt&&(Zt=null),d===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===ue&&!ue.animated||n===e&&!n.animated)&&(xo=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(ue.parentNode[Wn]._isOutsideThisEl(t.target),!te&&Ri(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function M(){Un=Xn(ue),li=Xn(ue,s.draggable),vn({sortable:m,name:"change",toEl:e,newIndex:Un,newDraggableIndex:li,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=ur(n,s.draggable,e,!0),b("dragOver"),He.eventCanceled)return g;if(ue.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return E(!1);if(Fa=!1,a&&!s.disabled&&(c?u||(o=Mt!==Tt):Zt===this||(this.lastPutMode=Bl.checkPull(this,a,ue,t))&&l.checkPut(this,a,ue,t))){if(h=this._getDirection(t,n)==="vertical",r=It(ue),b("dragOverValid"),He.eventCanceled)return g;if(o)return Mt=Tt,x(),this._hideClone(),b("revert"),He.eventCanceled||(Fi?Tt.insertBefore(ue,Fi):Tt.appendChild(ue)),E(!0);var P=Af(e,s.draggable);if(!P||$2(t,h,this)&&!P.animated){if(P===ue)return E(!1);if(P&&e===t.target&&(n=P),n&&(i=It(n)),Fl(Tt,e,ue,r,n,i,t,!!n)!==!1)return x(),P&&P.nextSibling?e.insertBefore(ue,P.nextSibling):e.appendChild(ue),Mt=e,M(),E(!0)}else if(P&&P2(t,h,this)){var L=Go(e,0,s,!0);if(L===ue)return E(!1);if(n=L,i=It(n),Fl(Tt,e,ue,r,n,i,t,!1)!==!1)return x(),e.insertBefore(ue,L),Mt=e,M(),E(!0)}else if(n.parentNode===e){i=It(n);var D=0,V,H=ue.parentNode!==e,U=!O2(ue.animated&&ue.toRect||r,n.animated&&n.toRect||i,h),O=h?"top":"left",k=Np(n,"top","top")||Np(ue,"top","top"),F=k?k.scrollTop:void 0;xo!==n&&(V=i[O],Vs=!1,Rl=!U&&s.invertSwap||H),D=D2(t,n,i,h,U?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Rl,xo===n);var C;if(D!==0){var de=Xn(ue);do de-=D,C=Mt.children[de];while(C&&(Fe(C,"display")==="none"||C===Ke))}if(D===0||C===n)return E(!1);xo=n,Rs=D;var ee=n.nextElementSibling,Se=!1;Se=D===1;var be=Fl(Tt,e,ue,r,n,i,t,Se);if(be!==!1)return(be===1||be===-1)&&(Se=be===1),Sd=!0,setTimeout(N2,30),x(),Se&&!ee?e.appendChild(ue):n.parentNode.insertBefore(ue,Se?ee:n),k&&o1(k,0,F-k.scrollTop),Mt=ue.parentNode,V!==void 0&&!Rl&&(da=Math.abs(V-It(n)[O])),M(),E(!0)}if(e.contains(ue))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){st(document,"mousemove",this._onTouchMove),st(document,"touchmove",this._onTouchMove),st(document,"pointermove",this._onTouchMove),st(document,"dragover",Ri),st(document,"mousemove",Ri),st(document,"touchmove",Ri)},_offUpEvents:function(){var t=this.el.ownerDocument;st(t,"mouseup",this._onDrop),st(t,"touchend",this._onDrop),st(t,"pointerup",this._onDrop),st(t,"touchcancel",this._onDrop),st(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(Un=Xn(ue),li=Xn(ue,n.draggable),Dn("drop",this,{evt:t}),Mt=ue&&ue.parentNode,Un=Xn(ue),li=Xn(ue,n.draggable),He.eventCanceled){this._nulling();return}Oo=!1,Rl=!1,Vs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Cd(this.cloneId),Cd(this._dragStartId),this.nativeDraggable&&(st(document,"drop",this),st(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Is&&Fe(document.body,"user-select",""),Fe(ue,"transform",""),t&&(bs&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ke&&Ke.parentNode&&Ke.parentNode.removeChild(Ke),(Tt===Mt||Zt&&Zt.lastPutMode!=="clone")&&Ot&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),ue&&(this.nativeDraggable&&st(ue,"dragend",this),pu(ue),ue.style["will-change"]="",bs&&!Oo&&zn(ue,Zt?Zt.options.ghostClass:this.options.ghostClass,!1),zn(ue,this.options.chosenClass,!1),vn({sortable:this,name:"unchoose",toEl:Mt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Tt!==Mt?(Un>=0&&(vn({rootEl:Mt,name:"add",toEl:Mt,fromEl:Tt,originalEvent:t}),vn({sortable:this,name:"remove",toEl:Mt,originalEvent:t}),vn({rootEl:Mt,name:"sort",toEl:Mt,fromEl:Tt,originalEvent:t}),vn({sortable:this,name:"sort",toEl:Mt,originalEvent:t})),Zt&&Zt.save()):Un!==Po&&Un>=0&&(vn({sortable:this,name:"update",toEl:Mt,originalEvent:t}),vn({sortable:this,name:"sort",toEl:Mt,originalEvent:t})),He.active&&((Un==null||Un===-1)&&(Un=Po,li=Bs),vn({sortable:this,name:"end",toEl:Mt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Dn("nulling",this),Tt=ue=Mt=Ke=Fi=Ot=ua=di=Bi=cr=bs=Un=li=Po=Bs=xo=Rs=Zt=Bl=He.dragged=He.ghost=He.clone=He.active=null,ja.forEach(function(t){t.checked=!0}),ja.length=du=fu=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ue&&(this._onDragOver(t),_2(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)e=n[r],ur(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||L2(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(i,o){var s=r.children[o];ur(s,this.options.draggable,r,!1)&&(n[i]=s)},this),e&&this.captureAnimationState(),t.forEach(function(i){n[i]&&(r.removeChild(n[i]),r.appendChild(n[i]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return ur(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=bl.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&u1(n)},destroy:function(){Dn("destroy",this);var t=this.el;t[Wn]=null,st(t,"mousedown",this._onTapStart),st(t,"touchstart",this._onTapStart),st(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(st(t,"dragover",this),st(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ha.splice(Ha.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!di){if(Dn("hideClone",this),He.eventCanceled)return;Fe(Ot,"display","none"),this.options.removeCloneOnHide&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),di=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(di){if(Dn("showClone",this),He.eventCanceled)return;ue.parentNode==Tt&&!this.options.group.revertClone?Tt.insertBefore(Ot,ue):Fi?Tt.insertBefore(Ot,Fi):Tt.appendChild(Ot),this.options.group.revertClone&&this.animate(ue,Ot),Fe(Ot,"display",""),di=!1}}};function _2(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Fl(t,e,n,r,i,o,s,l){var a,c=t[Wn],u=c.options.onMove,d;return window.CustomEvent&&!Qr&&!yl?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=r,a.related=i||e,a.relatedRect=o||It(e),a.willInsertAfter=l,a.originalEvent=s,t.dispatchEvent(a),u&&(d=u.call(c,a,s)),d}function pu(t){t.draggable=!1}function N2(){Sd=!1}function P2(t,e,n){var r=It(Go(n.el,0,n.options,!0)),i=l1(n.el,n.options,Ke),o=10;return e?t.clientX<i.left-o||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-o||t.clientY<r.bottom&&t.clientX<r.left}function $2(t,e,n){var r=It(Af(n.el,n.options.draggable)),i=l1(n.el,n.options,Ke),o=10;return e?t.clientX>i.right+o||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+o||t.clientX>r.right&&t.clientY>r.top}function D2(t,e,n,r,i,o,s,l){var a=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,h=!1;if(!s){if(l&&da<c*i){if(!Vs&&(Rs===1?a>u+c*o/2:a<d-c*o/2)&&(Vs=!0),Vs)h=!0;else if(Rs===1?a<u+da:a>d-da)return-Rs}else if(a>u+c*(1-i)/2&&a<d-c*(1-i)/2)return I2(e)}return h=h||s,h&&(a<u+c*o/2||a>d-c*o/2)?a>u+c/2?1:-1:0}function I2(t){return Xn(ue)<Xn(t)?1:-1}function L2(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function B2(t){ja.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ja.push(r)}}function fa(t){return setTimeout(t,0)}function Cd(t){return clearTimeout(t)}Sc&&at(document,"touchmove",function(t){(He.active||Oo)&&t.cancelable&&t.preventDefault()});He.utils={on:at,off:st,css:Fe,find:r1,is:function(t,e){return!!ur(t,e,t,!1)},extend:v2,throttle:i1,closest:ur,toggleClass:zn,clone:s1,index:Xn,nextTick:fa,cancelNextTick:Cd,detectDirection:c1,getChild:Go};He.get=function(t){return t[Wn]};He.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(He.utils=Mr(Mr({},He.utils),r.utils)),bl.mount(r)})};He.create=function(t,e){return new He(t,e)};He.version=g2;var Dt=[],vs,Td,Ed=!1,mu,gu,za,ws;function R2(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?at(document,"dragover",this._handleAutoScroll):this.options.supportPointer?at(document,"pointermove",this._handleFallbackAutoScroll):n.touches?at(document,"touchmove",this._handleFallbackAutoScroll):at(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?st(document,"dragover",this._handleAutoScroll):(st(document,"pointermove",this._handleFallbackAutoScroll),st(document,"touchmove",this._handleFallbackAutoScroll),st(document,"mousemove",this._handleFallbackAutoScroll)),Lp(),ha(),w2()},nulling:function(){za=Td=vs=Ed=ws=mu=gu=null,Dt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(i,o);if(za=e,n||this.options.forceAutoScrollFallback||yl||Qr||Is){yu(e,this.options,s,n);var l=hi(s,!0);Ed&&(!ws||i!==mu||o!==gu)&&(ws&&Lp(),ws=setInterval(function(){var a=hi(document.elementFromPoint(i,o),!0);a!==l&&(l=a,ha()),yu(e,r.options,a,n)},10),mu=i,gu=o)}else{if(!this.options.bubbleScroll||hi(s,!0)===Er()){ha();return}yu(e,this.options,hi(s,!1),!1)}}},Xr(t,{pluginName:"scroll",initializeByDefault:!0})}function ha(){Dt.forEach(function(t){clearInterval(t.pid)}),Dt=[]}function Lp(){clearInterval(ws)}var yu=i1(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,a=Er(),c=!1,u;Td!==n&&(Td=n,ha(),vs=e.scroll,u=e.scrollFn,vs===!0&&(vs=hi(n,!0)));var d=0,h=vs;do{var m=h,g=It(m),b=g.top,x=g.bottom,E=g.left,M=g.right,P=g.width,L=g.height,D=void 0,V=void 0,H=m.scrollWidth,U=m.scrollHeight,O=Fe(m),k=m.scrollLeft,F=m.scrollTop;m===a?(D=P<H&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),V=L<U&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(D=P<H&&(O.overflowX==="auto"||O.overflowX==="scroll"),V=L<U&&(O.overflowY==="auto"||O.overflowY==="scroll"));var C=D&&(Math.abs(M-i)<=s&&k+P<H)-(Math.abs(E-i)<=s&&!!k),de=V&&(Math.abs(x-o)<=s&&F+L<U)-(Math.abs(b-o)<=s&&!!F);if(!Dt[d])for(var ee=0;ee<=d;ee++)Dt[ee]||(Dt[ee]={});(Dt[d].vx!=C||Dt[d].vy!=de||Dt[d].el!==m)&&(Dt[d].el=m,Dt[d].vx=C,Dt[d].vy=de,clearInterval(Dt[d].pid),(C!=0||de!=0)&&(c=!0,Dt[d].pid=setInterval((function(){r&&this.layer===0&&He.active._onTouchMove(za);var Se=Dt[this.layer].vy?Dt[this.layer].vy*l:0,be=Dt[this.layer].vx?Dt[this.layer].vx*l:0;typeof u=="function"&&u.call(He.dragged.parentNode[Wn],be,Se,t,za,Dt[this.layer].el)!=="continue"||o1(Dt[this.layer].el,be,Se)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==a&&(h=hi(h,!1)));Ed=c}},30),h1=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=n||i;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);l(),a&&!a.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Mf(){}Mf.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Go(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:h1};Xr(Mf,{pluginName:"revertOnSpill"});function _f(){}_f.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:h1};Xr(_f,{pluginName:"removeOnSpill"});He.mount(new R2);He.mount(_f,Mf);function V2(t){return t==null?t:JSON.parse(JSON.stringify(t))}function F2(t){bc()&&uf(t)}function H2(t){bc()?Dg(t):pc(t)}let p1=null,m1=null;function Bp(t=null,e=null){p1=t,m1=e}function j2(){return{data:p1,clonedData:m1}}const Rp=Symbol("cloneElement");function z2(...t){var e,n;const r=(e=bc())==null?void 0:e.proxy;let i=null;const o=t[0];let[,s,l]=t;Array.isArray(wn(s))||(l=s,s=null);let a=null;const{immediate:c=!0,clone:u=V2,customUpdate:d}=(n=wn(l))!=null?n:{};function h(U){var O;const{from:k,oldIndex:F,item:C}=U;i=Array.from(k.childNodes);const de=wn((O=wn(s))==null?void 0:O[F]),ee=u(de);Bp(de,ee),C[Rp]=ee}function m(U){const O=U.item[Rp];if(!o2(O)){if(au(U.item),Bt(s)){const k=[...wn(s)];s.value=Tp(k,U.newDraggableIndex,O);return}Tp(wn(s),U.newDraggableIndex,O)}}function g(U){const{from:O,item:k,oldIndex:F,oldDraggableIndex:C,pullMode:de,clone:ee}=U;if(Ep(O,k,F),de==="clone"){au(ee);return}if(Bt(s)){const Se=[...wn(s)];s.value=Cp(Se,C);return}Cp(wn(s),C)}function b(U){if(d){d(U);return}const{from:O,item:k,oldIndex:F,oldDraggableIndex:C,newDraggableIndex:de}=U;if(au(k),Ep(O,k,F),Bt(s)){const ee=[...wn(s)];s.value=Sp(ee,C,de);return}Sp(wn(s),C,de)}function x(U){const{newIndex:O,oldIndex:k,from:F,to:C}=U;let de=null;const ee=O===k&&F===C;try{if(ee){let Se=null;i==null||i.some((be,te)=>{if(Se&&(i==null?void 0:i.length)!==C.childNodes.length)return F.insertBefore(Se,be.nextSibling),!0;const Ae=C.childNodes[te];Se=C==null?void 0:C.replaceChild(be,Ae)})}}catch(Se){de=Se}finally{i=null}pc(()=>{if(Bp(),de)throw de})}const E={onUpdate:b,onStart:h,onAdd:m,onRemove:g,onEnd:x};function M(U){const O=wn(o);return U||(U=s2(O)?l2(O,r==null?void 0:r.$el):O),U&&!u2(U)&&(U=U.$el),U||n2("Root element not found"),U}function P(){var U;const O=(U=wn(l))!=null?U:{},{immediate:k,clone:F}=O,C=Zy(O,["immediate","clone"]);return Op(C,(de,ee)=>{d2(de)&&(C[de]=(Se,...be)=>{const te=j2();return f2(Se,te),ee(Se,...be)})}),c2(s===null?{}:E,C)}const L=U=>{U=M(U),a&&D.destroy(),a=new He(U,P())};Xl(()=>l,()=>{a&&Op(P(),(U,O)=>{a==null||a.option(U,O)})},{deep:!0});const D={option:(U,O)=>a==null?void 0:a.option(U,O),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...U)=>a==null?void 0:a.closest(...U)},V=()=>D==null?void 0:D.option("disabled",!0),H=()=>D==null?void 0:D.option("disabled",!1);return H2(()=>{c&&L()}),F2(D.destroy),No({start:L,pause:V,resume:H},D)}const Od=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],K2=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Od.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],Nf=_g({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:K2,emits:["update:modelValue",...Od],setup(t,{slots:e,emit:n,expose:r,attrs:i}){const o=Od.reduce((u,d)=>{const h=`on${d.replace(/^\S/,m=>m.toUpperCase())}`;return u[h]=(...m)=>n(d,...m),u},{}),s=Ju(()=>{const u=Gw(t),{modelValue:d}=u,h=Zy(u,["modelValue"]),m=Object.entries(h).reduce((g,[b,x])=>{const E=wn(x);return E!==void 0&&(g[b]=E),g},{});return No(No({},o),i2(No(No({},i),m)))}),l=Ju({get:()=>t.modelValue,set:u=>n("update:modelValue",u)}),a=sf(),c=fc(z2(t.target||a,l,s));return r(c),()=>{var u;return sy(t.tag||"div",{ref:a},(u=e==null?void 0:e.default)==null?void 0:u.call(e,c))}}}),U2={props:["myuuid","formmode"],data(){return{myfile:null,editme:!1}},async mounted(){this.formmode&&(this.editme=!0),this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.myuuid)))},methods:{update(){this.myfile.title==""&&(this.myfile.title="...."),console.log(this.myfile),this.$root.UpdateRecord("Files",this.myuuid,this.myfile),this.formmode||(this.editme=!1)}}},W2={key:0};function q2(t,e,n,r,i,o){return i.myfile?(z(),Q("span",W2,[i.editme?Pe("",!0):(z(),Q("div",{key:0,onDblclick:e[0]||(e[0]=s=>i.editme=!0)},Cn(i.myfile.title),33)),i.editme?Nt((z(),Q("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>i.myfile.title=s),placeholder:"......",onBlur:e[2]||(e[2]=s=>o.update())},null,544)),[[$t,i.myfile.title]]):Pe("",!0)])):Pe("",!0)}const g1=lt(U2,[["render",q2]]),J2={props:{modelValue:{required:!0,type:Array}},components:{VueDraggable:Nf,FileName:g1},computed:{list:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{handleChange(t){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.$root.tools.writer.selected)}},name:"DocStructureNode"},G2={class:"btn"},Y2=["onClick"],X2={key:0,viewBox:"0 0 24 24"},Z2={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Q2=["onClick"];function eT(t,e,n,r,i,o){const s=Je("FileName"),l=Je("DocStructureNode",!0),a=Je("VueDraggable");return z(),gt(a,{class:"dragArea",tag:"ul",modelValue:o.list,"onUpdate:modelValue":e[0]||(e[0]=c=>o.list=c),group:"files","item-key":"name",onEnd:o.handleChange},{default:af(()=>[(z(!0),Q(Ge,null,rn(n.modelValue,(c,u)=>(z(),Q("li",{class:"node",key:u},[T("div",G2,[T("button",{onClick:d=>c.open=!c.open,class:"toggle"},[c.open?Pe("",!0):(z(),Q("svg",X2,e[1]||(e[1]=[T("title",null,"chevron-right",-1),T("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,-1)]))),c.open?(z(),Q("svg",Z2,e[2]||(e[2]=[T("title",null,"chevron-down-box",-1),T("path",{d:"M19,3H5A2,2 0 0,0 3,5V19C3,20.11 3.9,21 5,21H19C20.11,21 21,20.11 21,19V5A2,2 0 0,0 19,3M12,15.71L6,9.71L7.41,8.29L12,12.88L16.59,8.29L18,9.71L12,15.71Z"},null,-1)]))):Pe("",!0)],8,Y2),T("button",{class:rr(["labelbtn",{selected:t.$root.tools.writer.selectednode===c.uuid}]),onClick:d=>t.$root.tools.writer.selectednode=c.uuid},[(z(),gt(s,{myuuid:c.uuid,key:c.uuid},null,8,["myuuid"]))],10,Q2)]),c.open?(z(),gt(l,{key:0,modelValue:c.files,"onUpdate:modelValue":d=>c.files=d},null,8,["modelValue","onUpdate:modelValue"])):Pe("",!0)]))),128))]),_:1},8,["modelValue","onEnd"])}const tT=lt(J2,[["render",eT],["__scopeId","data-v-451b7a3a"]]),nT={name:"DocStructure",components:{DocStructureNode:tT},data(){return{bookwatch:null}},async mounted(){this.bookwatch=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected.uuid))),this.$watch("bookwatch",(t,e)=>{this.$root.tools.writer.selected=JSON.parse(JSON.stringify(t))})},methods:{async addNode(){let t=JSON.parse(JSON.stringify(this.$root.fileTemplate));t.writerid=this.$root.tools.writer.selected,t.uuid=this.$root.uuid(),await this.$root.AddRecord("Files",t);let e={};e.open=!1,e.uuid=t.uuid,e.files=[];let n=null;this.$root.tools.writer.selectednode?n=this.findNodeByUUID(this.$root.tools.writer.selectednode,this.$root.tools.writer.selected):n=this.$root.tools.writer.selected,n.files.push(e),n.open=!0,this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.$root.tools.writer.selected)},findNodeByUUID(t,e){if(e.uuid===t)return e;for(let n of e.files){let r=this.findNodeByUUID(t,n);if(r)return r}return null}}},rT={key:0,class:"documentStructure"},iT={class:"lhstools"},oT={class:"docsettings"},sT={style:{padding:"10px"}},lT={class:"lhsscrollcontainer"};function aT(t,e,n,r,i,o){const s=Je("DocStructureNode");return this.$root.tools.writer.selected?(z(),Q("div",rT,[T("div",iT,[T("button",{onClick:e[0]||(e[0]=(...l)=>o.addNode&&o.addNode(...l)),class:"btn"},e[3]||(e[3]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"Add File"),T("path",{d:"M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H13.81C13.28 21.09 13 20.05 13 19C13 15.69 15.69 13 19 13C19.34 13 19.67 13.03 20 13.08V8L14 2M13 9V3.5L18.5 9H13M23 20H20V23H18V20H15V18H18V15H20V18H23V20Z"})],-1),T("span",null,"Add",-1)]))]),T("div",null,[T("div",oT,[T("button",{class:"btn",onClick:e[1]||(e[1]=l=>t.$root.tools.writer.selectednode=null)},e[4]||(e[4]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"book-open-page-variant-outline"),T("path",{d:"M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z"})],-1),er(" Document Settings ")]))]),T("div",sT,[T("div",lT,[this.$root.tools.writer.selected.files.length?(z(),gt(s,{key:0,modelValue:this.$root.tools.writer.selected.files,"onUpdate:modelValue":e[2]||(e[2]=l=>this.$root.tools.writer.selected.files=l)},null,8,["modelValue"])):Pe("",!0)])])])])):Pe("",!0)}const cT=lt(nT,[["render",aT],["__scopeId","data-v-9d6f2238"]]);function Qt(t){this.content=t}Qt.prototype={constructor:Qt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Qt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Qt(n)},addToStart:function(t,e){return new Qt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Qt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Qt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Qt.from(t),t.size?new Qt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Qt.from(t),t.size?new Qt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Qt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Qt.from=function(t){if(t instanceof Qt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Qt(e)};function y1(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=y1(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function b1(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=b1(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class re{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new re(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new re(r,i)}cutByIndex(e,n){return e==n?re.empty:e==0&&n==this.content.length?this:new re(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new re(i,o)}addToStart(e){return new re([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new re(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return y1(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return b1(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Hl(0,e);if(e==this.size)return Hl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Hl(r+1,s):Hl(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return re.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new re(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return re.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new re(n||e,r)}static from(e){if(!e)return re.empty;if(e instanceof re)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new re([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}re.empty=new re([],0);const bu={index:0,offset:0};function Hl(t,e){return bu.index=t,bu.offset=e,bu}function Ka(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ka(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ka(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let kt=class Ad{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ka(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ad.none;if(e instanceof Ad)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};kt.none=[];class Ua extends Error{}class we{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=w1(this.content,e+this.openStart,n);return r&&new we(r,this.openStart,this.openEnd)}removeBetween(e,n){return new we(v1(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return we.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new we(re.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new we(e,r,i)}}we.empty=new we(re.empty,0,0);function v1(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(v1(o.content,e-i-1,n-i-1)))}function w1(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=w1(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function uT(t,e,n){if(n.openStart>t.depth)throw new Ua("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ua("Inconsistent open depths");return k1(t,e,n,0)}function k1(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=k1(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return Zi(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=dT(n,t);return Zi(o,S1(t,s,l,e,r))}else return Zi(o,Wa(t,e,r))}function x1(t,e){if(!e.type.compatibleContent(t.type))throw new Ua("Cannot join "+e.type.name+" onto "+t.type.name)}function Md(t,e,n){let r=t.node(n);return x1(r,e.node(n)),r}function Xi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Fs(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Xi(t.nodeAfter,r),o++));for(let l=o;l<s;l++)Xi(i.child(l),r);e&&e.depth==n&&e.textOffset&&Xi(e.nodeBefore,r)}function Zi(t,e){return t.type.checkContent(e),t.copy(e)}function S1(t,e,n,r,i){let o=t.depth>i&&Md(t,e,i+1),s=r.depth>i&&Md(n,r,i+1),l=[];return Fs(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(x1(o,s),Xi(Zi(o,S1(t,e,n,r,i+1)),l)):(o&&Xi(Zi(o,Wa(t,e,i+1)),l),Fs(e,n,i,l),s&&Xi(Zi(s,Wa(n,r,i+1)),l)),Fs(r,null,i,l),new re(l)}function Wa(t,e,n){let r=[];if(Fs(null,t,n,r),t.depth>n){let i=Md(t,e,n+1);Xi(Zi(i,Wa(t,e,n+1)),r)}return Fs(e,null,n,r),new re(r)}function dT(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(re.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class nl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return kt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new qa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(r.push(s,l,i+a),!c||(s=s.child(l),s.isText))break;o=c-1,i+=a+1}return new nl(n,r,o)}static resolveCached(e,n){let r=Vp.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else Vp.set(e,r=new fT);let i=r.elts[r.i]=nl.resolve(e,n);return r.i=(r.i+1)%hT,i}}class fT{constructor(){this.elts=[],this.i=0}}const hT=12,Vp=new WeakMap;class qa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pT=Object.create(null);let bi=class _d{constructor(e,n,r,i=kt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||re.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ka(this.attrs,n||e.defaultAttrs||pT)&&kt.sameSet(this.marks,r||kt.none)}copy(e=null){return e==this.content?this:new _d(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new _d(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return we.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),c=i.node(s).content.cut(i.pos-l,o.pos-l);return new we(c,i.depth-s,o.depth-s)}replace(e,n,r){return uT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return nl.resolveCached(this,e)}resolveNoCache(e){return nl.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),C1(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=re.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=kt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!kt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=re.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};bi.prototype.text=void 0;class Ja extends bi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):C1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ja(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ja(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function C1(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class so{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new mT(e,n);if(r.next==null)return so.empty;let i=T1(r);r.next&&r.err("Unexpected trailing text");let o=xT(kT(i));return ST(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return re.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=o(d,l.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}so.empty=new so(!0);class mT{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function T1(t){let e=[];do e.push(gT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function gT(t){let e=[];do e.push(yT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function yT(t){let e=wT(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=bT(t,e);else break;return e}function Fp(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function bT(t,e){let n=Fp(t),r=n;return t.eat(",")&&(t.next!="}"?r=Fp(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function vT(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function wT(t){if(t.eat("(")){let e=T1(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=vT(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function kT(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;i(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,a),u),a=u}if(s.max==-1)i(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=n();r(a,u),i(o(s.expr,a),u),a=u}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function E1(t,e){return e-t}function Hp(t,e){let n=[];return r(e),n.sort(E1);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function xT(t){let e=Object.create(null);return n(Hp(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Hp(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new so(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(E1);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function ST(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function O1(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function A1(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function M1(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function _1(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new TT(t,r,e[r]);return n}let jp=class N1{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=_1(e,r.attrs),this.defaultAttrs=O1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==so.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:A1(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new bi(this,this.computeAttrs(e),re.from(n),kt.setFrom(r))}createChecked(e=null,n,r){return n=re.from(n),this.checkContent(n),new bi(this,this.computeAttrs(e),n,kt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=re.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(re.empty,!0);return o?new bi(this,e,n.append(o),kt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){M1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:kt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new N1(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function CT(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class TT{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?CT(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Cc{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=_1(e,i.attrs),this.excluded=null;let o=O1(this.attrs);this.instance=o?new kt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new kt(this,A1(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Cc(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){M1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class P1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Qt.from(e.nodes),n.marks=Qt.from(e.marks||{}),this.nodes=jp.compile(this.spec.nodes,this),this.marks=Cc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=so.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?zp(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:zp(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof jp){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ja(r,r.defaultAttrs,e,kt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return bi.fromJSON(this,e)}markFromJSON(e){return kt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function zp(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function ET(t){return t.tag!=null}function OT(t){return t.style!=null}let Hs=class Nd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(ET(i))this.tags.push(i);else if(OT(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Up(this,n,!1);return r.addAll(e,kt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Up(this,n,!0);return r.addAll(e,kt.none,n.from,n.to),we.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(_T(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Wp(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Wp(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Nd(e,Nd.schemaRules(e)))}};const $1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},AT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},D1={ol:!0,ul:!0},rl=1,Pd=2,pa=4;function Kp(t,e,n){return e!=null?(e?rl:0)|(e==="full"?Pd:0):t&&t.whitespace=="pre"?rl|Pd:n&-5}class jl{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=kt.none,this.match=o||(s&pa?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(re.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&rl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=re.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(re.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!$1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Up{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=Kp(null,n.preserveWhitespace,0)|(r?pa:0);i?o=new jl(i.type,i.attrs,kt.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new jl(null,null,kt.none,!0,null,s):o=new jl(e.schema.topNodeType,null,kt.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Pd?"full":this.localPreserveWS||(i.options&rl)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;D1.hasOwnProperty(s)&&this.parser.normalizeLists&&MT(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:AT.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if($1.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=kt.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):qp(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Kp(e,o,s.options);s.options&pa&&s.content.length==0&&(l|=pa);let a=kt.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):qp(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new jl(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=rl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function MT(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&D1.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function _T(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Wp(t){let e={};for(let n in t)e[n]=t[n];return e}function qp(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class fo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=vu(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(o[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ma(vu(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ma(vu(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ma(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new fo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Jp(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Jp(e.marks)}}function Jp(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function vu(t){return t.document||window.document}const Gp=new WeakMap;function NT(t){let e=Gp.get(t);return e===void 0&&Gp.set(t,e=PT(t)),e}function PT(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ma(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=NT(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?a.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:m,contentDOM:g}=ma(t,h,n,r);if(a.appendChild(m),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const I1=65535,L1=Math.pow(2,16);function $T(t,e){return t+e*L1}function Yp(t){return t&I1}function DT(t){return(t-(t&I1))/L1}const B1=1,R1=2,ga=4,V1=8;class $d{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&V1)>0}get deletedBefore(){return(this.delInfo&(B1|ga))>0}get deletedAfter(){return(this.delInfo&(R1|ga))>0}get deletedAcross(){return(this.delInfo&ga)>0}}class qn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&qn.empty)return qn.empty}recover(e){let n=0,r=Yp(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+DT(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+o],u=this.ranges[l+s],d=a+c;if(e<=d){let h=c?e==a?-1:e==d?1:n:n,m=a+i+(h<0?0:u);if(r)return m;let g=e==(n<0?a:d)?null:$T(l/3,e-a),b=e==a?R1:e==d?B1:ga;return(n<0?e!=a:e!=d)&&(b|=V1),new $d(m,b,g)}i+=u-c}return r?e+i:new $d(e+i,0,null)}touches(e,n){let r=0,i=Yp(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),o+=u-c}}invert(){return new qn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?qn.empty:new qn(e<0?[0,-e,0]:[0,0,e])}}qn.empty=new qn([]);class il{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new il(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new il;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new $d(e,i,null)}}const wu=Object.create(null);class pn{getMap(){return qn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wu[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in wu)throw new RangeError("Duplicate use of step JSON ID "+e);return wu[e]=n,n.prototype.jsonID=e,n}}class Lt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Lt(e,null)}static fail(e){return new Lt(null,e)}static fromReplace(e,n,r,i){try{return Lt.ok(e.replace(n,r,i))}catch(o){if(o instanceof Ua)return Lt.fail(o.message);throw o}}}function Pf(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Pf(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return re.fromArray(r)}class pi extends pn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new we(Pf(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Lt.fromReplace(e,this.from,this.to,o)}invert(){return new Cr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new pi(n.pos,r.pos,this.mark)}merge(e){return e instanceof pi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new pi(n.from,n.to,e.markFromJSON(n.mark))}}pn.jsonID("addMark",pi);class Cr extends pn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new we(Pf(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Lt.fromReplace(e,this.from,this.to,r)}invert(){return new pi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Cr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Cr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Cr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Cr(n.from,n.to,e.markFromJSON(n.mark))}}pn.jsonID("removeMark",Cr);class mi extends pn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Lt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Lt.fromReplace(e,this.pos,this.pos+1,new we(re.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new mi(this.pos,n.marks[i]);return new mi(this.pos,this.mark)}}return new Yo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new mi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new mi(n.pos,e.markFromJSON(n.mark))}}pn.jsonID("addNodeMark",mi);class Yo extends pn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Lt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Lt.fromReplace(e,this.pos,this.pos+1,new we(re.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new mi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Yo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yo(n.pos,e.markFromJSON(n.mark))}}pn.jsonID("removeNodeMark",Yo);class Ut extends pn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Dd(e,this.from,this.to)?Lt.fail("Structure replace would overwrite content"):Lt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new qn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ut(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ut(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ut)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ut(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ut(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ut(n.from,n.to,we.fromJSON(e,n.slice),!!n.structure)}}pn.jsonID("replace",Ut);class Wt extends pn{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Dd(e,this.from,this.gapFrom)||Dd(e,this.gapTo,this.to)))return Lt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Lt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Lt.fromReplace(e,this.from,this.to,r):Lt.fail("Content does not fit in gap")}getMap(){return new qn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Wt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Wt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Wt(n.from,n.to,n.gapFrom,n.gapTo,we.fromJSON(e,n.slice),n.insert,!!n.structure)}}pn.jsonID("replaceAround",Wt);function Dd(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function IT(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),m=Math.min(c+a.nodeSize,n),g=r.addToSet(d);for(let b=0;b<d.length;b++)d[b].isInSet(g)||(s&&s.to==h&&s.mark.eq(d[b])?s.to=m:i.push(s=new Cr(h,m,d[b])));l&&l.to==h?l.to=m:o.push(l=new pi(h,m,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function LT(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Cc){let c=s.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],h;for(let m=0;m<i.length;m++){let g=i[m];g.step==o-1&&d.eq(i[m].style)&&(h=g)}h?(h.to=c,h.step=o):i.push({style:d,from:Math.max(l,e),to:c,step:o})}}}),i.forEach(s=>t.step(new Cr(s.from,s.to,s.style)))}function $f(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let c=o.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new Ut(l,u,we.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Cr(l,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(c.text);)g||(g=new we(re.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ut(l+h.index,l+h.index+h[0].length,g))}}l=u}if(!r.validEnd){let a=r.fillBefore(re.empty,!0);t.replace(l,l,new we(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function BT(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ss(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!BT(i,o,s))break}return null}function RT(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,c=l,u=re.empty,d=0;for(let g=o,b=!1;g>n;g--)b||r.index(g)>0?(b=!0,u=re.from(r.node(g).copy(u)),d++):a--;let h=re.empty,m=0;for(let g=o,b=!1;g>n;g--)b||i.after(g+1)<i.end(g)?(b=!0,h=re.from(i.node(g).copy(h)),m++):c++;t.step(new Wt(a,c,s,l,new we(u.append(h),d,m),u.size-d,!0))}function Df(t,e,n=null,r=t){let i=VT(t,e),o=i&&FT(r,e);return o?i.map(Xp).concat({type:e,attrs:n}).concat(o.map(Xp)):null}function Xp(t){return{type:t,attrs:null}}function VT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function FT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function HT(t,e,n){let r=re.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=re.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Wt(i,o,i,o,new we(r,0,0),n.length,!0))}function jT(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&zT(t.doc,t.mapping.slice(o).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?c=!1:!m&&g&&(c=!0)}c===!1&&H1(t,s,l,o),$f(t,t.mapping.slice(o).map(l,1),r,void 0,c===null);let u=t.mapping.slice(o),d=u.map(l,1),h=u.map(l+s.nodeSize,1);return t.step(new Wt(d,h,d+1,h-1,new we(re.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&F1(t,s,l,o),!1}})}function F1(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function H1(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function zT(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function KT(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Wt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new we(re.from(s),0,0),1,!0))}function Jr(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(h,d.childCount),g=r&&r[u+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let b=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!b.type.validContent(m))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function UT(t,e,n=1,r){let i=t.doc.resolve(e),o=re.empty,s=re.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){o=re.from(i.node(l).copy(o));let u=r&&r[c];s=re.from(u?u.type.create(u.attrs,s):i.node(l).copy(s))}t.step(new Ut(e,e,new we(o.append(s),n,n),!0))}function _i(t,e){let n=t.resolve(e),r=n.index();return j1(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function WT(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function j1(t,e){return!!(t&&e&&!t.isLeaf&&WT(t,e))}function Tc(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&j1(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function qT(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);H1(t,u.node(),u.before(),l)}s.inlineContent&&$f(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Ut(c,a.map(e+n,-1),we.empty,!0)),r===!0){let u=t.doc.resolve(c);F1(t,u.node(),u.before(),t.steps.length)}return t}function JT(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function z1(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(a,a,i);else{let d=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Ec(t,e,n=e,r=we.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return K1(i,o,r)?new Ut(e,n,r):new GT(i,o,r).fit()}function K1(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class GT{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=re.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=re.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new we(o,s,l);return e>-1?new Wt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Ut(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ku(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(re.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ku(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new we(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ku(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new we(ks(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new we(ks(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let b=0;b<o.length;b++)this.openFrontierNode(o[b]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)u.push(i.child(b));d=d.matchFragment(i)}let m=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let b=l.child(c),x=d.matchType(b.type);if(!x)break;c++,(c>1||a==0||b.content.size)&&(d=x,u.push(U1(b.mark(h.allowedMarks(b.marks)),c==1?a:0,c==l.childCount?m:-1)))}let g=c==l.childCount;g||(m=-1),this.placed=xs(this.placed,n,re.from(u)),this.frontier[n].match=d,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,x=l;b<m;b++){let E=x.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),x=E.content}this.unplaced=g?e==0?we.empty:new we(ks(s.content,e-1,1),e-1,m<0?s.openEnd:e-1):new we(ks(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!xu(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=xu(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=xu(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=xs(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=xs(this.placed,this.depth,re.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(re.empty,!0);n.childCount&&(this.placed=xs(this.placed,this.frontier.length,n))}}function ks(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ks(t.firstChild.content,e-1,n)))}function xs(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(xs(t.lastChild.content,e-1,n)))}function ku(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function U1(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,U1(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(re.empty,!0)))),t.copy(r)}function xu(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!YT(n,o.content,s)?l:null}function YT(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function XT(t){return t.spec.defining||t.spec.definingForContent}function ZT(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(K1(i,o,r))return t.step(new Ut(e,n,r));let s=q1(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let h=i.depth,m=i.pos-1;h>0;h--,m--){let g=i.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;s.indexOf(h)>-1?l=h:i.before(h)==m&&s.splice(1,0,-h)}let a=s.indexOf(l),c=[],u=r.openStart;for(let h=r.content,m=0;;m++){let g=h.firstChild;if(c.push(g),m==r.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let m=c[h],g=XT(m.type);if(g&&!m.sameMarkup(i.node(Math.abs(l)-1)))u=h;else if(g||!m.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let m=(h+u+1)%(r.openStart+1),g=c[m];if(g)for(let b=0;b<s.length;b++){let x=s[(b+a)%s.length],E=!0;x<0&&(E=!1,x=-x);let M=i.node(x-1),P=i.index(x-1);if(M.canReplaceWith(P,P,g.type,g.marks))return t.replace(i.before(x),E?o.after(x):n,new we(W1(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let h=s.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let m=s[h];m<0||(e=i.before(m),n=o.after(m))}}function W1(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(W1(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(re.empty,!0))}return t}function QT(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=JT(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new we(re.from(r),0,0))}function eE(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=q1(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function q1(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Uo extends pn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Lt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Lt.fromReplace(e,this.pos,this.pos+1,new we(re.from(i),0,n.isLeaf?0:1))}getMap(){return qn.empty}invert(e){return new Uo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Uo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Uo(n.pos,n.attr,n.value)}}pn.jsonID("attr",Uo);class ol extends pn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Lt.ok(r)}getMap(){return qn.empty}invert(e){return new ol(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ol(n.attr,n.value)}}pn.jsonID("docAttr",ol);let Xo=class extends Error{};Xo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Xo.prototype=Object.create(Error.prototype);Xo.prototype.constructor=Xo;Xo.prototype.name="TransformError";class tE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new il}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Xo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=we.empty){let i=Ec(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new we(re.from(r),0,0))}delete(e,n){return this.replace(e,n,we.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return ZT(this,e,n,r),this}replaceRangeWith(e,n,r){return QT(this,e,n,r),this}deleteRange(e,n){return eE(this,e,n),this}lift(e,n){return RT(this,e,n),this}join(e,n=1){return qT(this,e,n),this}wrap(e,n){return HT(this,e,n),this}setBlockType(e,n=e,r,i=null){return jT(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return KT(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Uo(e,n,r)),this}setDocAttribute(e,n){return this.step(new ol(e,n)),this}addNodeMark(e,n){return this.step(new mi(e,n)),this}removeNodeMark(e,n){if(!(n instanceof kt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Yo(e,n)),this}split(e,n=1,r){return UT(this,e,n,r),this}addMark(e,n,r){return IT(this,e,n,r),this}removeMark(e,n,r){return LT(this,e,n,r),this}clearIncompatible(e,n,r){return $f(this,e,n,r),this}}const Su=Object.create(null);class Ye{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new nE(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=we.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(o);e.replaceRange(u.map(a.pos),u.map(c.pos),l?we.empty:n),l==0&&em(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),c=a.map(s.pos),u=a.map(l.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),em(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ze(e):Ao(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Ao(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ao(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Gn(e.node(0))}static atStart(e){return Ao(e,e,0,0,1)||new Gn(e)}static atEnd(e){return Ao(e,e,e.content.size,e.childCount,-1)||new Gn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Su[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Su)throw new RangeError("Duplicate use of selection JSON ID "+e);return Su[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ze.between(this.$anchor,this.$head).getBookmark()}}Ye.prototype.visible=!0;class nE{constructor(e,n){this.$from=e,this.$to=n}}let Zp=!1;function Qp(t){!Zp&&!t.parent.inlineContent&&(Zp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ze extends Ye{constructor(e,n=e){Qp(e),Qp(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ye.near(r);let i=e.resolve(n.map(this.anchor));return new ze(i.parent.inlineContent?i:r,r)}replace(e,n=we.empty){if(super.replace(e,n),n==we.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ze&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Oc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ze(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Ye.findFrom(n,r,!0)||Ye.findFrom(n,-r,!0);if(o)n=o.$head;else return Ye.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Ye.findFrom(e,-r,!0)||Ye.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ze(e,n)}}Ye.jsonID("text",ze);class Oc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Oc(e.map(this.anchor),e.map(this.head))}resolve(e){return ze.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ie extends Ye{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?Ye.near(o):new Ie(o)}content(){return new we(re.from(this.node),0,0)}eq(e){return e instanceof Ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new If(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ie(e.resolve(n.anchor))}static create(e,n){return new Ie(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ie.prototype.visible=!1;Ye.jsonID("node",Ie);class If{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Oc(r,r):new If(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ie.isSelectable(r)?new Ie(n):Ye.near(n)}}class Gn extends Ye{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=we.empty){if(n==we.empty){e.delete(0,e.doc.content.size);let r=Ye.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Gn(e)}map(e){return new Gn(e)}eq(e){return e instanceof Gn}getBookmark(){return rE}}Ye.jsonID("all",Gn);const rE={map(){return this},resolve(t){return new Gn(t)}};function Ao(t,e,n,r,i,o=!1){if(e.inlineContent)return ze.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&Ie.isSelectable(l))return Ie.create(t,n-(i<0?l.nodeSize:0))}else{let a=Ao(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function em(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ut||i instanceof Wt))return;let o=t.mapping.maps[r],s;o.forEach((l,a,c,u)=>{s==null&&(s=u)}),t.setSelection(Ye.near(t.doc.resolve(s),n))}const tm=1,nm=2,rm=4;class iE extends tE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|tm)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&tm)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=nm,this}ensureMarks(e){return kt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&nm)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||kt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(Ye.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rm,this}get scrolledIntoView(){return(this.updated&rm)>0}}function im(t,e){return!e||!t?t:t.bind(e)}class Ss{constructor(e,n,r){this.name=e,this.init=im(n.init,r),this.apply=im(n.apply,r)}}const oE=[new Ss("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ss("selection",{init(t,e){return t.selection||Ye.atStart(e.doc)},apply(t){return t.selection}}),new Ss("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ss("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Cu{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=oE.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ss(r.key,r.spec.state,r))})}}class $o{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,c=i?i[s].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new $o(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new iE(this)}static create(e){let n=new Cu(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new $o(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Cu(this.schema,e.plugins),r=n.fields,i=new $o(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Cu(e.schema,e.plugins),o=new $o(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=bi.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=Ye.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function J1(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=J1(i,e,{})),n[r]=i}return n}class Rn{constructor(e){this.spec=e,this.props={},e.props&&J1(e.props,this,this.props),this.key=e.key?e.key.key:G1("plugin")}getState(e){return e[this.key]}}const Tu=Object.create(null);function G1(t){return t in Tu?t+"$"+ ++Tu[t]:(Tu[t]=0,t+"$")}class $r{constructor(e="key"){this.key=G1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const en=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zo=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Id=null;const Rr=function(t,e,n){let r=Id||(Id=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},sE=function(){Id=null},lo=function(t,e,n,r){return n&&(om(t,e,n,r,-1)||om(t,e,n,r,1))},lE=/^(img|br|input|textarea|hr)$/i;function om(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:tr(t))){let o=t.parentNode;if(!o||o.nodeType!=1||vl(t)||lE.test(t.nodeName)||t.contentEditable=="false")return!1;e=en(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?tr(t):0}else return!1}}function tr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function aE(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=tr(t)}else if(t.parentNode&&!vl(t))e=en(t),t=t.parentNode;else return null}}function cE(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!vl(t))e=en(t)+1,t=t.parentNode;else return null}}function uE(t,e,n){for(let r=e==0,i=e==tr(t);r||i;){if(t==n)return!0;let o=en(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==tr(t)}}function vl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ac=function(t){return t.focusNode&&lo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ji(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function dE(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function fE(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(tr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(tr(r.startContainer),r.startOffset)}}}const _r=typeof navigator<"u"?navigator:null,sm=typeof document<"u"?document:null,Ni=_r&&_r.userAgent||"",Ld=/Edge\/(\d+)/.exec(Ni),Y1=/MSIE \d/.exec(Ni),Bd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ni),Ln=!!(Y1||Bd||Ld),vi=Y1?document.documentMode:Bd?+Bd[1]:Ld?+Ld[1]:0,gr=!Ln&&/gecko\/(\d+)/i.test(Ni);gr&&+(/Firefox\/(\d+)/.exec(Ni)||[0,0])[1];const Rd=!Ln&&/Chrome\/(\d+)/.exec(Ni),fn=!!Rd,X1=Rd?+Rd[1]:0,En=!Ln&&!!_r&&/Apple Computer/.test(_r.vendor),Qo=En&&(/Mobile\/\w+/.test(Ni)||!!_r&&_r.maxTouchPoints>2),Qn=Qo||(_r?/Mac/.test(_r.platform):!1),hE=_r?/Win/.test(_r.platform):!1,Kr=/Android \d/.test(Ni),wl=!!sm&&"webkitFontSmoothing"in sm.documentElement.style,pE=wl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function mE(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Lr(t,e){return typeof t=="number"?t:t[e]}function gE(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function lm(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Zo(s);continue}let l=s,a=l==o.body,c=a?mE(o):gE(l),u=0,d=0;if(e.top<c.top+Lr(r,"top")?d=-(c.top-e.top+Lr(i,"top")):e.bottom>c.bottom-Lr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Lr(i,"top")-c.top:e.bottom-c.bottom+Lr(i,"bottom")),e.left<c.left+Lr(r,"left")?u=-(c.left-e.left+Lr(i,"left")):e.right>c.right-Lr(r,"right")&&(u=e.right-c.right+Lr(i,"right")),u||d)if(a)o.defaultView.scrollBy(u,d);else{let m=l.scrollLeft,g=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let b=l.scrollLeft-m,x=l.scrollTop-g;e={left:e.left-b,top:e.top-x,right:e.right-b,bottom:e.bottom-x}}let h=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:Zo(s)}}function yE(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Z1(t.dom)}}function Z1(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Zo(r));return e}function bE({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Q1(n,r==0?0:r-e)}function Q1(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let So=null;function vE(t){if(t.setActive)return t.setActive();if(So)return t.focus(So);let e=Z1(t);t.focus(So==null?{get preventScroll(){return So={preventScroll:!0},!0}}:void 0),So||(So=!1,Q1(e,0))}function eb(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Rr(u).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.top<=s&&g.bottom>=l){s=Math.max(g.bottom,s),l=Math.min(g.top,l);let b=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(b<r){n=u,r=b,i=b&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&b&&(o=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(o=d+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?wE(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:eb(n,i)}function wE(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=ri(r,1);if(o.top!=o.bottom&&Lf(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Lf(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function kE(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function xE(t,e,n){let{node:r,offset:i}=eb(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function SE(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function tb(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Lf(e,c))return tb(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function CE(t,e){let n=t.dom.ownerDocument,r,i=0,o=fE(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Lf(e,c)||(s=tb(t.dom,e,c),!s))return null}if(En)for(let c=s;r&&c;c=Zo(c))c.draggable&&(r=void 0);if(s=kE(s,e),r){if(gr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;wl&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=SE(t,r,i,e))}l==null&&(l=xE(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function am(t){return t.top<t.bottom||t.left<t.right}function ri(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(am(r))return r}return Array.prototype.find.call(n,am)||t.getBoundingClientRect()}const TE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function nb(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=wl||gr;if(r.nodeType==3)if(s&&(TE.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=ri(Rr(r,i,i),n);if(gr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ri(Rr(r,i-1,i-1),-1);if(c.top==a.top){let u=ri(Rr(r,i,i+1),-1);if(u.top!=a.top)return hs(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,hs(ri(Rr(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==tr(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Eu(a.getBoundingClientRect(),!1)}if(o==null&&i<tr(r)){let a=r.childNodes[i];if(a.nodeType==1)return Eu(a.getBoundingClientRect(),!0)}return Eu(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==tr(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Rr(a,tr(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return hs(ri(c,1),!1)}if(o==null&&i<tr(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Rr(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return hs(ri(c,-1),!0)}return hs(ri(r.nodeType==3?Rr(r):r,-n),n>=0)}function hs(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Eu(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function rb(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function EE(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return rb(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=nb(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Rr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const OE=/[\u0590-\u08ac]/;function AE(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!OE.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:rb(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:b}=t.domSelectionRange(),x=g&&!m.contains(g.nodeType==1?g:g.parentNode)||a==g&&c==b;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return h!=null&&(l.caretBidiLevel=h),x}):r.pos==r.start()||r.pos==r.end()}let cm=null,um=null,dm=!1;function ME(t,e,n){return cm==e&&um==n?dm:(cm=e,um=n,dm=n=="up"||n=="down"?EE(t,e,n):AE(t,e,n))}const or=0,fm=1,Ui=2,Nr=3;class kl{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=or,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof ob){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof ib&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?en(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?en(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(i==-1&&e<=c){let u=s+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=s;for(let d=l;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=en(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=en(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let m=0,g=0;m<this.children.length;m++){let b=this.children[m],x=g+b.size;if(o>g&&s<x)return b.setSelection(e-g-b.border,n-g-b.border,r,i);g=x}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((gr||En)&&e==n){let{node:m,offset:g}=l;if(m.nodeType==3){if(d=!!(g&&m.nodeValue[g-1]==`
`),d&&g==m.nodeValue.length)for(let b=m,x;b;b=b.parentNode){if(x=b.nextSibling){x.nodeName=="BR"&&(l=a={node:x.parentNode,offset:en(x)+1});break}let E=b.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let b=m.childNodes[g-1];d=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(gr&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||d&&En)&&lo(l.node,l.offset,u.anchorNode,u.anchorOffset)&&lo(a.node,a.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>n){let g=l;l=a,a=g}let m=document.createRange();m.setEnd(a.node,a.offset),m.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Ui:fm,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Nr:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ui:Nr}r=s}this.dirty=Ui}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ui:fm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class ib extends kl{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==or&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class _E extends kl{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ao extends kl{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=fo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ao(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Nr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Nr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=or){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=or}}slice(e,n,r){let i=ao.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Fd(o,n,s,r)),e>0&&(o=Fd(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class wi extends kl{constructor(e,n,r,i,o,s,l,a,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,c=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=fo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=ab(u,r,n),c?a=new NE(e,n,r,i,u,d||null,h,c,o,s+1):n.isText?new Mc(e,n,r,i,u,h,o):new wi(e,n,r,i,u,d||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>re.empty)}return e}matchesNode(e,n,r){return this.dirty==or&&e.eq(this.node)&&Ga(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new $E(this,s&&s.node,e);LE(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?kt.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,d,h)=>{a.syncToMarks(c.marks,r,e);let m;a.findNodeMatch(c,u,d,h)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(m=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(c,u,d,m,e)||a.updateNextNode(c,u,d,e,h,i)||a.addNode(c,u,d,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Ui)&&(s&&this.protectLocalComposition(e,s),sb(this.contentDOM,this.children,e),Qo&&BE(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ze)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=RE(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new _E(this,o,n,i);e.input.compositionNodes.push(s),this.children=Fd(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Nr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=or}updateOuterDeco(e){if(Ga(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=lb(this.dom,this.nodeDOM,Vd(this.outerDeco,this.node,n),Vd(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function hm(t,e,n,r,i){ab(r,e,t);let o=new wi(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Mc extends wi{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Nr||this.dirty!=or&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=or||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=or,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Mc(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Nr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ob extends kl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==or&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class NE extends wi{constructor(e,n,r,i,o,s,l,a,c,u){super(e,n,r,i,o,s,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==Nr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function sb(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=pm(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof ao){let a=r?r.previousSibling:t.lastChild;sb(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=pm(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const js=function(t){t&&(this.nodeName=t)};js.prototype=Object.create(null);const Wi=[new js];function Vd(t,e,n){if(t.length==0)return Wi;let r=n?Wi[0]:new js,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new js(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new js(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function lb(t,e,n,r){if(n==Wi&&r==Wi)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Wi[0]),i=a}PE(i,l||Wi[0],s)}return i}function PE(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function ab(t,e,n){return lb(t,t,Wi,Vd(e,n,t.nodeType!=1))}function Ga(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function pm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class $E{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=DE(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=or,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=ao.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Nr&&s.dom==s.contentDOM&&(s.dirty=Ui),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof wi){let c=this.preMatch.matched.get(a);if(c!=null&&c!=o)return!1;let u=a.dom,d,h=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Nr&&Ga(n,a.outerDeco));if(!h&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Ui,d.updateChildren(i,s+1),d.dirty=or),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ga(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=wi.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=wi.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new ib(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ao;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Mc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((En||fn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ob(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function DE(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof ao)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function IE(t,e){return t.type.side-e.type.side}function LE(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let x=i[s++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(IE);for(let x=0;x<d.length;x++)n(d[x],c,!!a)}else n(u,c,!!a);let h,m;if(a)m=-1,h=a,a=null;else if(c<t.childCount)m=c,h=t.child(c++);else break;for(let x=0;x<l.length;x++)l[x].to<=o&&l.splice(x--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let g=o+h.nodeSize;if(h.isText){let x=g;s<i.length&&i[s].from<x&&(x=i[s].from);for(let E=0;E<l.length;E++)l[E].to<x&&(x=l[E].to);x<g&&(a=h.cut(x-o),h=h.cut(0,x-o),g=x,m=-1)}else for(;s<i.length&&i[s].to<g;)s++;let b=h.isInline&&!h.isLeaf?l.filter(x=>!x.inline):l.slice();r(h,b,e.forChild(o,h),m),o=g}}function BE(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function RE(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;a+=c.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Fd(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,u=l+=a.size;c>=n||u<=e?o.push(a):(c<e&&o.push(a.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(a.slice(n-c,a.size,r)))}return o}function Bf(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(Ac(n)){for(a=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&Ie.isSelectable(d)&&i.parent&&!(d.isInline&&uE(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Ie(s==h?l:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,h=s;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[a,s]=h==t.state.selection.anchor?[h,d]:[d,h],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;c=Rf(t,u,l,d)}return c}function cb(t){return t.editable?t.hasFocus():db(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Gr(t,e=!1){let n=t.state.selection;if(ub(t,n),!!cb(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&fn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&lo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)FE(t);else{let{anchor:r,head:i}=n,o,s;mm&&!(n instanceof ze)&&(n.$from.parent.inlineContent||(o=gm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=gm(t,n.to))),t.docView.setSelection(r,i,t,e),mm&&(o&&ym(o),s&&ym(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&VE(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const mm=En||fn&&X1<63;function gm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(En&&i&&i.contentEditable=="false")return Ou(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Ou(i);if(o)return Ou(o)}}function Ou(t){return t.contentEditable="true",En&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ym(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function VE(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!cb(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function FE(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,en(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Ln&&vi<=11&&(r.disabled=!0,r.disabled=!1)}function ub(t,e){if(e instanceof Ie){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(bm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else bm(t)}function bm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Rf(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ze.between(e,n,r)}function vm(t){return t.editable&&!t.hasFocus()?!1:db(t)}function db(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function HE(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return lo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Hd(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Ye.findFrom(o,e)}function ai(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function wm(t,e,n){let r=t.state.selection;if(r instanceof ze)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return ai(t,new ze(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Hd(t.state,e);return i&&i instanceof Ie?ai(t,i):!1}else if(!(Qn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?Ie.isSelectable(o)?ai(t,new Ie(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):wl?ai(t,new ze(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ie&&r.node.isInline)return ai(t,new ze(e>0?r.$to:r.$from));{let i=Hd(t.state,e);return i?ai(t,i):!1}}}function Ya(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function zs(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Co(t,e){return e<0?jE(t):zE(t)}function jE(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(gr&&n.nodeType==1&&r<Ya(n)&&zs(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(zs(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(fb(n))break;{let l=n.previousSibling;for(;l&&zs(l,-1);)i=n.parentNode,o=en(l),l=l.previousSibling;if(l)n=l,r=Ya(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?jd(t,n,r):i&&jd(t,i,o)}function zE(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Ya(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(zs(l,1))o=n,s=++r;else break}else{if(fb(n))break;{let l=n.nextSibling;for(;l&&zs(l,1);)o=l.parentNode,s=en(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Ya(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&jd(t,o,s)}function fb(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function KE(t,e){for(;t&&e==t.childNodes.length&&!vl(t);)e=en(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function UE(t,e){for(;t&&!e&&!vl(t);)e=en(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function jd(t,e,n){if(e.nodeType!=3){let o,s;(s=KE(e,n))?(e=s,n=0):(o=UE(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ac(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Gr(t)},50)}function km(t,e){let n=t.state.doc.resolve(e);if(!(fn||hE)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function xm(t,e,n){let r=t.state.selection;if(r instanceof ze&&!r.empty||n.indexOf("s")>-1||Qn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Hd(t.state,e);if(s&&s instanceof Ie)return ai(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof Gn?Ye.near(s,e):Ye.findFrom(s,e);return l?ai(t,l):!1}return!1}function Sm(t,e){if(!(t.state.selection instanceof ze))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Cm(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function WE(t){if(!En||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Cm(t,r,"true"),setTimeout(()=>Cm(t,r,"false"),20)}return!1}function qE(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function JE(t,e){let n=e.keyCode,r=qE(e);if(n==8||Qn&&n==72&&r=="c")return Sm(t,-1)||Co(t,-1);if(n==46&&!e.shiftKey||Qn&&n==68&&r=="c")return Sm(t,1)||Co(t,1);if(n==13||n==27)return!0;if(n==37||Qn&&n==66&&r=="c"){let i=n==37?km(t,t.state.selection.from)=="ltr"?-1:1:-1;return wm(t,i,r)||Co(t,i)}else if(n==39||Qn&&n==70&&r=="c"){let i=n==39?km(t,t.state.selection.from)=="ltr"?1:-1:1;return wm(t,i,r)||Co(t,i)}else{if(n==38||Qn&&n==80&&r=="c")return xm(t,-1,r)||Co(t,-1);if(n==40||Qn&&n==78&&r=="c")return WE(t)||xm(t,1,r)||Co(t,1);if(r==(Qn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Vf(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=t.someProp("clipboardSerializer")||fo.fromSchema(t.state.schema),l=bb(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=yb[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let g=l.createElement(u[m]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:h,slice:e}}function hb(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",h=>{e=h(e,o||r,t)}),o)return e?new we(re.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):we.empty;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)l=d;else{let h=i.marks(),{schema:m}=t.state,g=fo.fromSchema(m);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let x=s.appendChild(document.createElement("p"));b&&x.appendChild(g.serializeNode(m.text(b,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=ZE(n),wl&&QE(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Hs.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!GE.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)l=eO(Tm(l,+u[1],+u[2]),u[4]);else if(l=we.maxOpen(YE(l.content,i),!0),l.openStart||l.openEnd){let d=0,h=0;for(let m=l.content.firstChild;d<l.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=l.content.lastChild;h<l.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);l=Tm(l,d,h)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const GE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function YE(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&o.length&&mb(a,o,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=gb(s[s.length-1],o.length));let u=pb(l,a);s.push(u),i=i.matchType(u.type),o=a}}),s)return re.from(s)}return t}function pb(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,re.from(t));return t}function mb(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=mb(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(re.from(pb(n,t,i+1))))}}function gb(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,gb(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(re.empty,!0);return t.copy(n.append(r))}function zd(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=zd(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(re.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Tm(t,e,n){return e<t.openStart&&(t=new we(zd(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new we(zd(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const yb={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Em=null;function bb(){return Em||(Em=document.implementation.createHTMLDocument("title"))}let Au=null;function XE(t){let e=window.trustedTypes;return e?(Au||(Au=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Au.createHTML(t)):t}function ZE(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=bb().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&yb[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=XE(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function QE(t){let e=t.querySelectorAll(fn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function eO(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=re.from(a.create(r[l+1],i)),o++,s++}return new we(i,o,s)}const On={},An={},tO={touchstart:!0,touchmove:!0};class nO{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function rO(t){for(let e in On){let n=On[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{oO(t,r)&&!Ff(t,r)&&(t.editable||!(r.type in An))&&n(t,r)},tO[e]?{passive:!0}:void 0)}En&&t.dom.addEventListener("input",()=>null),Kd(t)}function gi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function iO(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Kd(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Ff(t,r))})}function Ff(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function oO(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function sO(t,e){!Ff(t,e)&&On[e.type]&&(t.editable||!(e.type in An))&&On[e.type](t,e)}An.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!wb(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Kr&&fn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Qo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,ji(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||JE(t,n)?n.preventDefault():gi(t,"key")};An.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};An.keypress=(t,e)=>{let n=e;if(wb(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Qn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ze)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function _c(t){return{left:t.clientX,top:t.clientY}}function lO(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Hf(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Wo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function aO(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ie.isSelectable(r)?(Wo(t,new Ie(n)),!0):!1}function cO(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Ie&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(Ie.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Wo(t,Ie.create(t.state.doc,i)),!0):!1}function uO(t,e,n,r,i){return Hf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?cO(t,n):aO(t,n))}function dO(t,e,n,r){return Hf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function fO(t,e,n,r){return Hf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||hO(t,n,r)}function hO(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Wo(t,ze.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Wo(t,ze.create(r,l+1,l+1+s.content.size));else if(Ie.isSelectable(s))Wo(t,Ie.create(r,l));else continue;return!0}}function jf(t){return Xa(t)}const vb=Qn?"metaKey":"ctrlKey";On.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=jf(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&lO(n,t.input.lastClick)&&!n[vb]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(_c(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new pO(t,s,n,!!r)):(o=="doubleClick"?dO:fO)(t,s.pos,s.inside,n)?n.preventDefault():gi(t,"pointer"))};class pO{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[vb],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Ie&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),gi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(_c(e))),this.updateAllowDefault(e),this.allowDefault||!n?gi(this.view,"pointer"):uO(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||En&&this.mightDrag&&!this.mightDrag.node.isAtom||fn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Wo(this.view,Ye.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):gi(this.view,"pointer")}move(e){this.updateAllowDefault(e),gi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}On.touchstart=t=>{t.input.lastTouch=Date.now(),jf(t),gi(t,"pointer")};On.touchmove=t=>{t.input.lastTouch=Date.now(),gi(t,"pointer")};On.contextmenu=t=>jf(t);function wb(t,e){return t.composing?!0:En&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const mO=Kr?5e3:-1;An.compositionstart=An.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ze&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Xa(t,!0),t.markCursor=null;else if(Xa(t,!e.selection.empty),gr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}kb(t,mO)};An.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,kb(t,20))};function kb(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Xa(t),e))}function xb(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=yO());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function gO(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=aE(e.focusNode,e.focusOffset),r=cE(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function yO(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Xa(t,e=!1){if(!(Kr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),xb(t),e||t.docView&&t.docView.dirty){let n=Bf(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function bO(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const sl=Ln&&vi<15||Qo&&pE<604;On.copy=An.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=sl?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Vf(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):bO(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function vO(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function wO(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ll(t,r.value,null,i,e):ll(t,r.textContent,r.innerHTML,i,e)},50)}function ll(t,e,n,r,i){let o=hb(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||we.empty)))return!0;if(!o)return!1;let s=vO(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Sb(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}An.paste=(t,e)=>{let n=e;if(t.composing&&!Kr)return;let r=sl?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ll(t,Sb(r),r.getData("text/html"),i,n)?n.preventDefault():wO(t,n)};class Cb{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Tb=Qn?"altKey":"ctrlKey";On.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(_c(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Ie?i.to-1:i.to))){if(r&&r.mightDrag)s=Ie.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=Ie.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:u}=Vf(t,l);(!n.dataTransfer.files.length||!fn||X1>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(sl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",sl||n.dataTransfer.setData("text/plain",c),t.dragging=new Cb(u,!n[Tb],s)};On.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};An.dragover=An.dragenter=(t,e)=>e.preventDefault();An.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(_c(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",g=>{s=g(s,t)}):s=hb(t,Sb(n.dataTransfer),sl?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[Tb]);if(t.someProp("handleDrop",g=>g(t,n,s||we.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?z1(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let c=t.state.tr;if(l){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let m=c.doc.resolve(u);if(d&&Ie.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Ie(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((b,x,E,M)=>g=M),c.setSelection(Rf(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};On.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Gr(t)},20))};On.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};On.beforeinput=(t,e)=>{if(fn&&Kr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,ji(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in An)On[t]=An[t];function al(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Za{constructor(e,n){this.toDOM=e,this.spec=n||Qi,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new nr(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Za&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&al(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ki{constructor(e,n){this.attrs=e,this.spec=n||Qi}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new nr(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ki&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}static is(e){return e.type instanceof ki}destroy(){}}class zf{constructor(e,n){this.attrs=e,this.spec=n||Qi}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new nr(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof zf&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}destroy(){}}class nr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new nr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new nr(e,e,new Za(n,r))}static inline(e,n,r,i){return new nr(e,n,new ki(r,i))}static node(e,n,r,i){return new nr(e,n,new zf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ki}get widget(){return this.type instanceof Za}}const Mo=[],Qi={};class jt{constructor(e,n){this.local=e.length?e:Mo,this.children=n.length?n:Mo}static create(e,n){return n.length?Qa(n,e,0,Qi):ln}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==ln||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Qi)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?kO(this.children,s||[],e,n,r,i,o):s?new jt(s.sort(eo),Mo):ln}add(e,n){return n.length?this==ln?jt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let c=a+r,u;if(u=Ob(n,l,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,u,c+1):i.splice(o,0,a,a+l.nodeSize,Qa(u,l,c+1,Qi)),o+=3}});let s=Eb(o?Ab(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new jt(s.length?this.local.concat(s).sort(eo):this.local,i||this.children)}remove(e){return e.length==0||this==ln?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,l+1);c!=ln?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new jt(i,r):ln}forChild(e,n){if(this==ln)return this;if(n.isLeaf)return jt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof ki){let c=Math.max(o,a.from)-o,u=Math.min(s,a.to)-o;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new jt(i.sort(eo),Mo);return r?new fi([l,r]):l}return r||ln}eq(e){if(this==e)return!0;if(!(e instanceof jt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Kf(this.localsInner(e))}localsInner(e){if(this==ln)return Mo;if(e.inlineContent||!this.local.some(ki.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ki||n.push(this.local[r]);return n}forEachSet(e){e(this)}}jt.empty=new jt([],[]);jt.removeOverlap=Kf;const ln=jt.empty;class fi{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Qi));return fi.from(r)}forChild(e,n){if(n.isLeaf)return jt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=ln&&(o instanceof fi?r=r.concat(o.members):r.push(o))}return fi.from(r)}eq(e){if(!(e instanceof fi)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Kf(r?n:n.sort(eo)):Mo}static from(e){switch(e.length){case 0:return ln;case 1:return e[0];default:return new fi(e.every(n=>n instanceof jt)?e:e.reduce((n,r)=>n.concat(r instanceof jt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function kO(t,e,n,r,i,o,s){let l=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,m,g,b)=>{let x=b-g-(m-h);for(let E=0;E<l.length;E+=3){let M=l[E+1];if(M<0||h>M+u-d)continue;let P=l[E]+u-d;m>=P?l[E+1]=h<=P?-2:-1:h>=u&&x&&(l[E]+=x,l[E+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){a=!0;continue}let h=n.map(t[c+1]+o,-1),m=h-i,{index:g,offset:b}=r.content.findIndex(d),x=r.maybeChild(g);if(x&&b==d&&b+x.nodeSize==m){let E=l[c+2].mapInner(n,x,u+1,t[c]+o+1,s);E!=ln?(l[c]=d,l[c+1]=m,l[c+2]=E):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=xO(l,t,e,n,i,o,s),u=Qa(c,r,0,s);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let m=u.children[d];for(;h<l.length&&l[h]<m;)h+=3;l.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new jt(e.sort(eo),l)}function Eb(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new nr(i.from+e,i.to+e,i.type))}return n}function xO(t,e,n,r,i,o,s){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function Ob(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function Ab(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Qa(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let c=Ob(t,l,a+n);if(c){o=!0;let u=Qa(c,l,n+a+1,r);u!=ln&&i.push(a,a+l.nodeSize,u)}});let s=Eb(o?Ab(t):t,-n).sort(eo);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new jt(s,i):ln}function eo(t,e){return t.from-e.from||t.to-e.to}function Kf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Om(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Om(e,i,r.copy(o.from,r.to)));break}}}return e}function Om(t,e,n){for(;e<t.length&&eo(n,t[e])>0;)e++;t.splice(e,0,n)}function Mu(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ln&&e.push(r)}),t.cursorWrapper&&e.push(jt.create(t.state.doc,[t.cursorWrapper.deco])),fi.from(e)}const SO={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CO=Ln&&vi<=11;class TO{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class EO{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new TO,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ln&&vi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),CO&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,SO)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(vm(this.view)){if(this.suppressingSelectionUpdates)return Gr(this.view);if(Ln&&vi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&lo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Zo(o))n.add(o);for(let o=e.anchorNode;o;o=Zo(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&vm(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(gr&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let m=h.parentNode;m&&m.nodeName=="LI"&&(!d||MO(e,d)!=m)&&h.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ac(r)&&(c=Bf(e))&&c.eq(Ye.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),OO(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Ln&&vi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h)}let s=i&&i.parentNode==e.target?en(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?en(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Am=new WeakMap,Mm=!1;function OO(t){if(!Am.has(t)&&(Am.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=gr,Mm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Mm=!0}}function _m(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return lo(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function AO(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return _m(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?_m(t,n):null}function MO(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function _O(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Ac(a)||c.push({node:a.focusNode,offset:a.focusOffset})),fn&&t.input.lastKeyCode===8)for(let x=o;x>i;x--){let E=r.childNodes[x-1],M=E.pmViewDesc;if(E.nodeName=="BR"&&!M){o=x;break}if(!M||M.size)break}let d=t.state.doc,h=t.someProp("domParser")||Hs.fromSchema(t.state.schema),m=d.resolve(s),g=null,b=h.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:o,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:NO,context:m});if(c&&c[0].pos!=null){let x=c[0].pos,E=c[1]&&c[1].pos;E==null&&(E=x),g={anchor:x+s,head:E+s}}return{doc:b,sel:g,from:s,to:l}}function NO(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(En&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||En&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const PO=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function $O(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,k=Bf(t,O);if(k&&!t.state.selection.eq(k)){if(fn&&Kr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,ji(13,"Enter"))))return;let F=t.state.tr.setSelection(k);O=="pointer"?F.setMeta("pointer",!0):O=="key"&&F.scrollIntoView(),o&&F.setMeta("composition",o),t.dispatch(F)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=_O(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,m="end"):(h=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=LO(d.content,c.doc.content,c.from,h,m);if(g&&t.input.domChangeCount++,(Qo&&t.input.lastIOSEnter>Date.now()-225||Kr)&&i.some(O=>O.nodeType==1&&!PO.test(O.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",O=>O(t,ji(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof ze&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let O=Nm(t,t.state.doc,c.sel);if(O&&!O.eq(t.state.selection)){let k=t.state.tr.setSelection(O);o&&k.setMeta("composition",o),t.dispatch(k)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof ze&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Ln&&vi<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let b=c.doc.resolveNoCache(g.start-c.from),x=c.doc.resolveNoCache(g.endB-c.from),E=u.resolve(g.start),M=b.sameParent(x)&&b.parent.inlineContent&&E.end()>=g.endA,P;if((Qo&&t.input.lastIOSEnter>Date.now()-225&&(!M||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!M&&b.pos<c.doc.content.size&&!b.sameParent(x)&&(P=Ye.findFrom(c.doc.resolve(b.pos+1),1,!0))&&P.head==x.pos)&&t.someProp("handleKeyDown",O=>O(t,ji(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&IO(u,g.start,g.endA,b,x)&&t.someProp("handleKeyDown",O=>O(t,ji(8,"Backspace")))){Kr&&fn&&t.domObserver.suppressSelectionUpdates();return}fn&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),Kr&&!M&&b.start()!=x.start()&&x.parentOffset==0&&b.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,x=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,ji(13,"Enter"))})},20));let L=g.start,D=g.endA,V,H,U;if(M){if(b.pos==x.pos)Ln&&vi<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gr(t),20)),V=t.state.tr.delete(L,D),H=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(U=DO(b.parent.content.cut(b.parentOffset,x.parentOffset),E.parent.content.cut(E.parentOffset,g.endA-E.start()))))V=t.state.tr,U.type=="add"?V.addMark(L,D,U.mark):V.removeMark(L,D,U.mark);else if(b.parent.child(b.index()).isText&&b.index()==x.index()-(x.textOffset?0:1)){let O=b.parent.textBetween(b.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",k=>k(t,L,D,O)))return;V=t.state.tr.insertText(O,L,D)}}if(V||(V=t.state.tr.replace(L,D,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let O=Nm(t,V.doc,c.sel);O&&!(fn&&t.composing&&O.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(O.head==L||O.head==V.mapping.map(D)-1)||Ln&&O.empty&&O.head==L)&&V.setSelection(O)}H&&V.ensureMarks(H),o&&V.setMeta("composition",o),t.dispatch(V.scrollIntoView())}function Nm(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Rf(t,e.resolve(n.anchor),e.resolve(n.head))}function DO(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(re.from(c).eq(t))return{mark:l,type:s}}function IO(t,e,n,r,i){if(n-e<=i.pos-r.pos||_u(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(_u(o,!0,!0));return!s.parent.isTextblock||s.pos>n||_u(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function _u(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function LO(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&Pm(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&Pm(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function Pm(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class BO{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new nO,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Bm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Im(this),Dm(this),this.nodeViews=Lm(this),this.docView=hm(this.state.doc,$m(this),Mu(this),this.dom,this),this.domObserver=new EO(this,(r,i,o,s)=>$O(this,r,i,o,s)),this.domObserver.start(),rO(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Kd(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Bm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(xb(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=Lm(this);VO(m,this.nodeViews)&&(this.nodeViews=m,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Kd(this),this.editable=Im(this),Dm(this);let a=Mu(this),c=$m(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(i.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&yE(this);if(s){this.domObserver.stop();let m=d&&(Ln||fn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&RO(i.selection,e.selection);if(d){let g=fn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=gO(this)),(o||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=hm(e.doc,c,a,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&HE(this))?Gr(this,m):(ub(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&bE(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ie){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&lm(this,n.getBoundingClientRect(),e)}else lm(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new Cb(e.slice,e.move,i<0?void 0:Ie.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Ln){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&vE(this.dom),Gr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return CE(this,e)}coordsAtPos(e,n=1){return nb(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return ME(this,n||this.state,e)}pasteHTML(e,n){return ll(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ll(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Vf(this,e)}destroy(){this.docView&&(iO(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,sE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return sO(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?En&&this.root.nodeType===11&&dE(this.dom.ownerDocument)==this.dom&&AO(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function $m(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[nr.node(0,t.state.doc.content.size,e)]}function Dm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:nr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Im(t){return!t.someProp("editable",e=>e(t.state)===!1)}function RO(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Lm(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function VO(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Bm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ei={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ec={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},FO=typeof navigator<"u"&&/Mac/.test(navigator.platform),HO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tn=0;tn<10;tn++)Ei[48+tn]=Ei[96+tn]=String(tn);for(var tn=1;tn<=24;tn++)Ei[tn+111]="F"+tn;for(var tn=65;tn<=90;tn++)Ei[tn]=String.fromCharCode(tn+32),ec[tn]=String.fromCharCode(tn);for(var Nu in Ei)ec.hasOwnProperty(Nu)||(ec[Nu]=Ei[Nu]);function jO(t){var e=FO&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||HO&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ec:Ei)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const zO=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function KO(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))zO?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function UO(t){let e=Object.create(null);for(let n in t)e[KO(n)]=t[n];return e}function Pu(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function WO(t){return new Rn({props:{handleKeyDown:Mb(t)}})}function Mb(t){let e=UO(t);return function(n,r){let i=jO(r),o,s=e[Pu(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Pu(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Ei[r.keyCode])&&o!=i){let l=e[Pu(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Uf=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function _b(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Nb=(t,e,n)=>{let r=_b(t,n);if(!r)return!1;let i=Wf(r);if(!i){let s=r.blockRange(),l=s&&ss(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(Fb(t,i,e,-1))return!0;if(r.parent.content.size==0&&(es(o,"end")||Ie.isSelectable(o)))for(let s=r.depth;;s--){let l=Ec(t.doc,r.before(s),r.after(s),we.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(es(o,"end")?Ye.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Ie.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},qO=(t,e,n)=>{let r=_b(t,n);if(!r)return!1;let i=Wf(r);return i?Pb(t,i,e):!1},JO=(t,e,n)=>{let r=Db(t,n);if(!r)return!1;let i=qf(r);return i?Pb(t,i,e):!1};function Pb(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=Ec(t.doc,o,a,we.empty);if(!c||c.from!=o||c instanceof Ut&&c.slice.size>=a-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(ze.create(u.doc,o)),n(u.scrollIntoView())}return!0}function es(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const $b=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Wf(r)}let s=o&&o.nodeBefore;return!s||!Ie.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Ie.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Wf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Db(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Ib=(t,e,n)=>{let r=Db(t,n);if(!r)return!1;let i=qf(r);if(!i)return!1;let o=i.nodeAfter;if(Fb(t,i,e,1))return!0;if(r.parent.content.size==0&&(es(o,"start")||Ie.isSelectable(o))){let s=Ec(t.doc,r.before(),r.after(),we.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(es(o,"start")?Ye.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Ie.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Lb=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=qf(r)}let s=o&&o.nodeAfter;return!s||!Ie.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Ie.create(t.doc,o.pos)).scrollIntoView()),!0)};function qf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const GO=(t,e)=>{let n=t.selection,r=n instanceof Ie,i;if(r){if(n.node.isTextblock||!_i(t.doc,n.from))return!1;i=n.from}else if(i=Tc(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Ie.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},YO=(t,e)=>{let n=t.selection,r;if(n instanceof Ie){if(n.node.isTextblock||!_i(t.doc,n.to))return!1;r=n.to}else if(r=Tc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},XO=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&ss(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Bb=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Jf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ZO=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Jf(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(Ye.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Rb=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Gn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Jf(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(ze.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},Vb=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Jr(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ss(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function QO(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Ie&&e.selection.node.isBlock)return!r.parentOffset||!Jr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){a=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),l=Jf(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),o.unshift(a&&l?{type:l}:null),s=m;break}else{if(m==1)return!1;o.unshift(null)}let u=e.tr;(e.selection instanceof ze||e.selection instanceof Gn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=Jr(u.doc,d,o.length,o);if(h||(o[0]=l?{type:l}:null,h=Jr(u.doc,d,o.length,o)),u.split(d,o.length,o),!a&&c&&r.node(s).type!=l){let m=u.mapping.map(r.before(s)),g=u.doc.resolve(m);l&&r.node(s-1).canReplaceWith(g.index(),g.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(s)),l)}return n&&n(u.scrollIntoView()),!0}}const eA=QO(),tA=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Ie.create(t.doc,i))),!0)};function nA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||_i(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Fb(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&nA(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let m=e.pos+o.nodeSize,g=re.empty;for(let E=s.length-1;E>=0;E--)g=re.from(s[E].create(null,g));g=re.from(i.copy(g));let b=t.tr.step(new Wt(e.pos-1,m,e.pos,m,new we(g,1,0),s.length,!0)),x=b.doc.resolve(m+2*s.length);x.nodeAfter&&x.nodeAfter.type==i.type&&_i(b.doc,x.pos)&&b.join(x.pos),n(b.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&a?null:Ye.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&ss(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&es(o,"start",!0)&&es(i,"end")){let m=i,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let b=o,x=1;for(;!b.isTextblock;b=b.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(n){let E=re.empty;for(let P=g.length-1;P>=0;P--)E=re.from(g[P].copy(E));let M=t.tr.step(new Wt(e.pos-g.length,e.pos+o.nodeSize,e.pos+x,e.pos+o.nodeSize-x,new we(E,g.length,0),0,!0));n(M.scrollIntoView())}return!0}}return!1}function Hb(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(ze.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const rA=Hb(-1),iA=Hb(1);function oA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&Df(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Rm(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}function Gf(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Gf(Uf,Nb,$b);Gf(Uf,Ib,Lb);Gf(Bb,Rb,Vb,eA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function sA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return lA(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function lA(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new qa(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new qa(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=Df(o,n,r,e);return l?(t&&aA(t,e,l,i,n),!0):!1}function aA(t,e,n,r,i){let o=re.empty;for(let u=n.length-1;u>=0;u--)o=re.from(n[u].type.create(n[u].attrs,o));t.step(new Wt(e.start-(r?2:0),e.end,e.start,e.end,new we(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Jr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function cA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?uA(e,n,t,o):dA(e,n,o):!0:!1}}function uA(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Wt(o-1,s,o,s,new we(re.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new qa(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=ss(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return _i(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function dA(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,g=n.endIndex-1,b=n.startIndex;g>b;g--)m-=i.child(g).nodeSize,r.delete(m-1,m+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?re.empty:re.from(i))))return!1;let d=o.pos,h=d+s.nodeSize;return r.step(new Wt(d-(l?1:0),h+(a?1:0),d+1,h-1,new we((l?re.empty:re.from(i.copy(re.empty))).append(a?re.empty:re.from(i.copy(re.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function fA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=re.from(c?t.create():null),d=new we(re.from(t.create(null,re.from(l.type.create(null,u)))),c?3:1,0),h=o.start,m=o.end;n(e.tr.step(new Wt(h-(c?3:1),m,h,m,d,1,!0)).scrollIntoView())}return!0}}function Nc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class Pc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,c=e||o.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,m])=>[h,(...b)=>{const x=this.buildProps(c,n),E=m(...b)(x);return l.push(E),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Nc({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class hA{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Ce(t,e,n){return t.config[e]===void 0&&t.parent?Ce(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ce(t.parent,e,n):null}):t.config[e]}function $c(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function jb(t){const e=[],{nodeExtensions:n,markExtensions:r}=$c(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=Ce(s,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,m])=>{e.push({type:d,name:h,attribute:{...o,...m}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=Ce(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const h={...o,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function Jt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Mn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),l.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Ud(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Mn(n,r),{})}function zb(t){return typeof t=="function"}function Ze(t,e=void 0,...n){return zb(t)?e?t.bind(e)(...n):t(...n):t}function pA(t={}){return Object.keys(t).length===0&&t.constructor===Object}function mA(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Vm(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):mA(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function Fm(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&pA(n)?!1:n!=null))}function gA(t,e){var n;const r=jb(t),{nodeExtensions:i,markExtensions:o}=$c(t),s=(n=i.find(c=>Ce(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(E=>E.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((E,M)=>{const P=Ce(M,"extendNodeSchema",d);return{...E,...P?P(c):{}}},{}),m=Fm({...h,content:Ze(Ce(c,"content",d)),marks:Ze(Ce(c,"marks",d)),group:Ze(Ce(c,"group",d)),inline:Ze(Ce(c,"inline",d)),atom:Ze(Ce(c,"atom",d)),selectable:Ze(Ce(c,"selectable",d)),draggable:Ze(Ce(c,"draggable",d)),code:Ze(Ce(c,"code",d)),whitespace:Ze(Ce(c,"whitespace",d)),linebreakReplacement:Ze(Ce(c,"linebreakReplacement",d)),defining:Ze(Ce(c,"defining",d)),isolating:Ze(Ce(c,"isolating",d)),attrs:Object.fromEntries(u.map(E=>{var M;return[E.name,{default:(M=E==null?void 0:E.attribute)===null||M===void 0?void 0:M.default}]}))}),g=Ze(Ce(c,"parseHTML",d));g&&(m.parseDOM=g.map(E=>Vm(E,u)));const b=Ce(c,"renderHTML",d);b&&(m.toDOM=E=>b({node:E,HTMLAttributes:Ud(E,u)}));const x=Ce(c,"renderText",d);return x&&(m.toText=x),[c.name,m]})),a=Object.fromEntries(o.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((x,E)=>{const M=Ce(E,"extendMarkSchema",d);return{...x,...M?M(c):{}}},{}),m=Fm({...h,inclusive:Ze(Ce(c,"inclusive",d)),excludes:Ze(Ce(c,"excludes",d)),group:Ze(Ce(c,"group",d)),spanning:Ze(Ce(c,"spanning",d)),code:Ze(Ce(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var E;return[x.name,{default:(E=x==null?void 0:x.attribute)===null||E===void 0?void 0:E.default}]}))}),g=Ze(Ce(c,"parseHTML",d));g&&(m.parseDOM=g.map(x=>Vm(x,u)));const b=Ce(c,"renderHTML",d);return b&&(m.toDOM=x=>b({mark:x,HTMLAttributes:Ud(x,u)})),[c.name,m]}));return new P1({topNode:s,nodes:l,marks:a})}function $u(t,e){return e.nodes[t]||e.marks[t]||null}function Hm(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Yf(t,e){const n=fo.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const yA=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function Xf(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Dc{constructor(e){this.find=e.find,this.handler=e.handler}}const bA=(t,e)=>{if(Xf(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function zl(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=yA(c)+o;return s.forEach(h=>{if(u)return;const m=bA(d,h.find);if(!m)return;const g=a.state.tr,b=Nc({state:a.state,transaction:g}),x={from:r-(m[0].length-o.length),to:i},{commands:E,chain:M,can:P}=new Pc({editor:n,state:b});h.handler({state:b,range:x,match:m,commands:E,chain:M,can:P})===null||!g.steps.length||(g.setMeta(l,{transform:g,from:r,to:i,text:o}),a.dispatch(g),u=!0)}),u}function vA(t){const{editor:e,rules:n}=t,r=new Rn({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=Yf(re.from(u),s.schema);const{from:d}=a,h=d+u.length;zl({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return zl({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&zl({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?zl({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function wA(t){return Object.prototype.toString.call(t).slice(8,-1)}function Kl(t){return wA(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Ic(t,e){const n={...t};return Kl(t)&&Kl(e)&&Object.keys(e).forEach(r=>{Kl(e[r])&&Kl(t[r])?n[r]=Ic(t[r],e[r]):n[r]=e[r]}),n}class Oi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(Ce(this,"addOptions",{name:this.name}))),this.storage=Ze(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Oi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ic(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Oi(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ze(Ce(n,"addOptions",{name:n.name})),n.storage=Ze(Ce(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function kA(t){return typeof t=="number"}class xA{constructor(e){this.find=e.find,this.handler=e.handler}}const SA=(t,e,n)=>{if(Xf(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function CA(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:u}=new Pc({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const b=Math.max(r,g),x=Math.min(i,g+m.content.size),E=m.textBetween(b-g,x-g,void 0,"");SA(E,o.find,s).forEach(P=>{if(P.index===void 0)return;const L=b+P.index+1,D=L+P[0].length,V={from:n.tr.mapping.map(L),to:n.tr.mapping.map(D)},H=o.handler({state:n,range:V,match:P,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});d.push(H)})}),d.every(m=>m!==null)}let Ul=null;const TA=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function EA(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:d,to:h,rule:m,pasteEvt:g})=>{const b=u.tr,x=Nc({state:u,transaction:b});if(!(!CA({editor:e,state:x,from:Math.max(d-1,0),to:h.b-1,rule:m,pasteEvent:g,dropEvent:l})||!b.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(u=>new Rn({view(d){const h=g=>{var b;r=!((b=d.dom.parentElement)===null||b===void 0)&&b.contains(g.target)?d.dom.parentElement:null,r&&(Ul=e)},m=()=>{Ul&&(Ul=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(o=r===d.dom.parentElement,l=h,!o){const m=Ul;m&&setTimeout(()=>{const g=m.state.selection;g&&m.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,h)=>{var m;const g=(m=h.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=h,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,m)=>{const g=d[0],b=g.getMeta("uiEvent")==="paste"&&!i,x=g.getMeta("uiEvent")==="drop"&&!o,E=g.getMeta("applyPasteRules"),M=!!E;if(!b&&!x&&!M)return;if(M){let{text:D}=E;typeof D=="string"?D=D:D=Yf(re.from(D),m.schema);const{from:V}=E,H=V+D.length,U=TA(D);return a({rule:u,state:m,from:V,to:{b:H},pasteEvt:U})}const P=h.doc.content.findDiffStart(m.doc.content),L=h.doc.content.findDiffEnd(m.doc.content);if(!(!kA(P)||!L||P===L.b))return a({rule:u,state:m,from:P,to:L,pasteEvt:s})}}))}function OA(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Do{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Do.resolve(e),this.schema=gA(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Do.sort(Do.flatten(e)),r=OA(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=Ce(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=Ce(r,"priority")||100,s=Ce(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:$u(n.name,this.schema)},i=Ce(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Do.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:$u(s.name,this.schema)},a=[],c=Ce(s,"addKeyboardShortcuts",l);let u={};if(s.type==="mark"&&Ce(s,"exitable",l)&&(u.ArrowRight=()=>Oi.handleExit({editor:e,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([x,E])=>[x,()=>E({editor:e})]));u={...u,...b}}const d=WO(u);a.push(d);const h=Ce(s,"addInputRules",l);Hm(s,e.options.enableInputRules)&&h&&r.push(...h());const m=Ce(s,"addPasteRules",l);Hm(s,e.options.enablePasteRules)&&m&&i.push(...m());const g=Ce(s,"addProseMirrorPlugins",l);if(g){const b=g();a.push(...b)}return a}).flat();return[vA({editor:e,rules:r}),...EA({editor:e,rules:i}),...o]}get attributes(){return jb(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=$c(this.extensions);return Object.fromEntries(n.filter(r=>!!Ce(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Jt(r.name,this.schema)},s=Ce(r,"addNodeView",o);if(!s)return[];const l=(a,c,u,d,h)=>{const m=Ud(a,i);return s()({node:a,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:$u(e.name,this.schema)};e.type==="mark"&&(!((n=Ze(Ce(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=Ce(e,"onBeforeCreate",r),o=Ce(e,"onCreate",r),s=Ce(e,"onUpdate",r),l=Ce(e,"onSelectionUpdate",r),a=Ce(e,"onTransaction",r),c=Ce(e,"onFocus",r),u=Ce(e,"onBlur",r),d=Ce(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class _n{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(Ce(this,"addOptions",{name:this.name}))),this.storage=Ze(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _n(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ic(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new _n({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ze(Ce(n,"addOptions",{name:n.name})),n.storage=Ze(Ce(n,"addStorage",{name:n.name,options:n.options})),n}}function Kb(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,d)=>{var h;a.isBlock&&c>r&&(l+=o);const m=s==null?void 0:s[a.type.name];if(m)return u&&(l+=m({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(h=a==null?void 0:a.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),l}function Ub(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const AA=_n.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rn({key:new $r("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),l=Math.max(...o.map(u=>u.$to.pos)),a=Ub(n);return Kb(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),MA=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_A=(t=!1)=>({commands:e})=>e.setContent("",t),NA=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),h=c.resolve(u.map(a+l.nodeSize)),m=d.blockRange(h);if(!m)return;const g=ss(m);if(l.type.isTextblock){const{defaultType:b}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,b)}(g||g===0)&&e.lift(m,g)})}),!0},PA=t=>e=>t(e),$A=()=>({state:t,dispatch:e})=>Rb(t,e),DA=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new ze(r.doc.resolve(s-1))),!0},IA=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},LA=t=>({tr:e,state:n,dispatch:r})=>{const i=Jt(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),c=o.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},BA=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},RA=()=>({state:t,dispatch:e})=>Uf(t,e),VA=()=>({commands:t})=>t.keyboardShortcut("Enter"),FA=()=>({state:t,dispatch:e})=>ZO(t,e);function tc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Xf(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Wb(t,e,n={}){return t.find(r=>r.type===e&&tc(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function jm(t,e,n={}){return!!Wb(t,e,n)}function Zf(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Wb([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,c=l+i.node.nodeSize;for(;s>0&&jm([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&jm([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Pi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const HA=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Pi(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const d=Zf(a,o,e);if(d&&d.from<=c&&d.to>=u){const h=ze.create(s,d.from,d.to);n.setSelection(h)}}return!0},jA=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function qb(t){return t instanceof ze}function qi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Jb(t,e=null){if(!e)return null;const n=Ye.atStart(t),r=Ye.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?ze.create(t,qi(0,i,o),qi(t.content.size,i,o)):ze.create(t,qi(e,i,o),qi(e,i,o))}function zA(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Qf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const KA=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Qf()||zA())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!qb(n.state.selection))return s(),!0;const l=Jb(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},UA=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),WA=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Gb=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Gb(r)}return t};function Wl(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Gb(n)}function nc(t,e,n){if(t instanceof bi||t instanceof re)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return re.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),nc("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new P1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Hs.fromSchema(a).parseSlice(Wl(t),n.parseOptions):Hs.fromSchema(a).parse(Wl(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=Hs.fromSchema(e);return n.slice?o.parseSlice(Wl(t),n.parseOptions).content:o.parse(Wl(t),n.parseOptions)}return nc("",e,n)}function qA(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ut||i instanceof Wt))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,c,u)=>{s===0&&(s=u)}),t.setSelection(Ye.near(t.doc.resolve(s),n))}const JA=t=>!("type"in t),GA=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=nc(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(g){return o.emit("contentError",{editor:o,error:g,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((JA(l)?l:[l]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),a===c&&d){const{parent:g}=r.doc.resolve(a);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(a-=1,c+=1)}let m;if(u){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof re){let g="";e.forEach(b=>{b.text&&(g+=b.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,a,c)}else m=l,r.replaceWith(a,c,m);n.updateSelection&&qA(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:m})}return!0},YA=()=>({state:t,dispatch:e})=>GO(t,e),XA=()=>({state:t,dispatch:e})=>YO(t,e),ZA=()=>({state:t,dispatch:e})=>Nb(t,e),QA=()=>({state:t,dispatch:e})=>Ib(t,e),eM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Tc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},tM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Tc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},nM=()=>({state:t,dispatch:e})=>qO(t,e),rM=()=>({state:t,dispatch:e})=>JO(t,e);function Yb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function iM(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Qf()||Yb()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const oM=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=iM(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function cl(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Jt(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const m=Math.max(r,h),g=Math.min(i,h+d.nodeSize);l.push({node:d,from:m,to:g})});const a=i-r,c=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>tc(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=a}const sM=(t,e={})=>({state:n,dispatch:r})=>{const i=Jt(t,n.schema);return cl(n,i,e)?XO(n,r):!1},lM=()=>({state:t,dispatch:e})=>Vb(t,e),aM=t=>({state:e,dispatch:n})=>{const r=Jt(t,e.schema);return cA(r)(e,n)},cM=()=>({state:t,dispatch:e})=>Bb(t,e);function Lc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function zm(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const uM=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Lc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Jt(t,r.schema)),l==="mark"&&(s=Pi(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,zm(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(zm(d.attrs,e)))})})}),!0):!1},dM=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),fM=()=>({tr:t,dispatch:e})=>{if(e){const n=new Gn(t.doc);t.setSelection(n)}return!0},hM=()=>({state:t,dispatch:e})=>$b(t,e),pM=()=>({state:t,dispatch:e})=>Lb(t,e),mM=()=>({state:t,dispatch:e})=>tA(t,e),gM=()=>({state:t,dispatch:e})=>iA(t,e),yM=()=>({state:t,dispatch:e})=>rA(t,e);function Wd(t,e,n={},r={}){return nc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const bM=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=Wd(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function Xb(t,e){const n=Pi(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function vM(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function wM(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function eh(t){return e=>wM(e.$from,t)}function kM(t,e){const n={from:0,to:t.content.size};return Kb(t,n,e)}function xM(t,e){const n=Jt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function SM(t,e){const n=Lc(typeof e=="string"?e:e.name,t.schema);return n==="node"?xM(t,e):n==="mark"?Xb(t,e):{}}function Zb(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=Zf(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function ya(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function qd(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Pi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>tc(d.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:h})=>{const m=d.pos,g=h.pos;t.doc.nodesBetween(m,g,(b,x)=>{if(!b.isText&&!b.marks.length)return;const E=Math.max(m,x),M=Math.min(g,x+b.nodeSize),P=M-E;s+=P,l.push(...b.marks.map(L=>({mark:L,from:E,to:M})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>tc(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,h)=>d+h.to-h.from,0);return(a>0?a+c:a)>=s}function CM(t,e,n={}){if(!e)return cl(t,null,n)||qd(t,null,n);const r=Lc(e,t.schema);return r==="node"?cl(t,e,n):r==="mark"?qd(t,e,n):!1}function Km(t,e){const{nodeExtensions:n}=$c(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ze(Ce(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function th(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(th(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function TM(t){return t instanceof Ie}function EM(t,e,n){var r;const{selection:i}=e;let o=null;if(qb(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const m=!h||h.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(b=>b.type.excludes(n));c=m&&g}return!c}),c})}const OM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Pi(t,r.schema);if(i)if(s){const c=Xb(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,m)=>{const g=Math.max(m,u),b=Math.min(m+h.nodeSize,d);h.marks.find(E=>E.type===a)?h.marks.forEach(E=>{a===E.type&&n.addMark(g,b,a.create({...E.attrs,...e}))}):n.addMark(g,b,a.create(e))})});return EM(r,n,a)},AM=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),MM=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Jt(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>Rm(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Rm(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},_M=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=qi(t,0,r.content.size),o=Ie.create(r,i);e.setSelection(o)}return!0},NM=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=ze.atStart(r).from,l=ze.atEnd(r).to,a=qi(i,s,l),c=qi(o,s,l),u=ze.create(r,a,c);e.setSelection(u)}return!0},PM=t=>({state:e,dispatch:n})=>{const r=Jt(t,e.schema);return fA(r)(e,n)};function Um(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const $M=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,c=i.extensionManager.attributes,u=ya(c,l.node().type.name,l.node().attrs);if(o instanceof Ie&&o.node.isBlock)return!l.parentOffset||!Jr(s,l.pos)?!1:(r&&(t&&Um(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,h=l.depth===0?void 0:vM(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=d&&h?[{type:h,attrs:u}]:void 0,g=Jr(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!g&&Jr(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:u}]:void 0),r){if(g&&(o instanceof ze&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),h&&!d&&!l.parentOffset&&l.parent.type!==h)){const b=e.mapping.map(l.before()),x=e.doc.resolve(b);l.node(-1).canReplaceWith(x.index(),x.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}t&&Um(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return g},DM=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=Jt(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const h=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let E=re.empty;const M=a.index(-1)?1:a.index(-2)?2:3;for(let U=a.depth-M;U>=a.depth-3;U-=1)E=re.from(a.node(U).copy(E));const P=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,L={...ya(h,a.node().type.name,a.node().attrs),...e},D=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(L))||void 0;E=E.append(re.from(l.createAndFill(null,D)||void 0));const V=a.before(a.depth-(M-1));n.replace(V,a.after(-P),new we(E,4-M,0));let H=-1;n.doc.nodesBetween(V,n.doc.content.size,(U,O)=>{if(H>-1)return!1;U.isTextblock&&U.content.size===0&&(H=O+1)}),H>-1&&n.setSelection(ze.near(n.doc.resolve(H))),n.scrollIntoView()}return!0}const m=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,g={...ya(h,d.type.name,d.attrs),...e},b={...ya(h,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const x=m?[{type:l,attrs:g},{type:m,attrs:b}]:[{type:l,attrs:g}];if(!Jr(n.doc,a.pos,2))return!1;if(i){const{selection:E,storedMarks:M}=r,{splittableMarks:P}=o.extensionManager,L=M||E.$to.parentOffset&&E.$from.marks();if(n.split(a.pos,2,x).scrollIntoView(),!L||!i)return!0;const D=L.filter(V=>P.includes(V.type.name));n.ensureMarks(D)}return!0},Du=(t,e)=>{const n=eh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&_i(t.doc,n.pos)&&t.join(n.pos),!0},Iu=(t,e)=>{const n=eh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&_i(t.doc,r)&&t.join(r),!0},IM=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,m=Jt(t,s.schema),g=Jt(e,s.schema),{selection:b,storedMarks:x}=s,{$from:E,$to:M}=b,P=E.blockRange(M),L=x||b.$to.parentOffset&&b.$from.marks();if(!P)return!1;const D=eh(V=>Km(V.type.name,d))(b);if(P.depth>=1&&D&&P.depth-D.depth<=1){if(D.node.type===m)return c.liftListItem(g);if(Km(D.node.type.name,d)&&m.validContent(D.node.content)&&l)return a().command(()=>(o.setNodeMarkup(D.pos,m),!0)).command(()=>Du(o,m)).command(()=>Iu(o,m)).run()}return!n||!L||!l?a().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>Du(o,m)).command(()=>Iu(o,m)).run():a().command(()=>{const V=u().wrapInList(m,r),H=L.filter(U=>h.includes(U.type.name));return o.ensureMarks(H),V?!0:c.clearNodes()}).wrapInList(m,r).command(()=>Du(o,m)).command(()=>Iu(o,m)).run()},LM=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Pi(t,r.schema);return qd(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},BM=(t,e,n={})=>({state:r,commands:i})=>{const o=Jt(t,r.schema),s=Jt(e,r.schema),l=cl(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},RM=(t,e={})=>({state:n,commands:r})=>{const i=Jt(t,n.schema);return cl(n,i,e)?r.lift(i):r.wrapIn(i,e)},VM=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},FM=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},HM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Pi(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!i)return!0;if(u&&s){let{from:h,to:m}=l;const g=(o=c.marks().find(x=>x.type===a))===null||o===void 0?void 0:o.attrs,b=Zf(c,a,g);b&&(h=b.from,m=b.to),n.removeMark(h,m,a)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,a)});return n.removeStoredMark(a),!0},jM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Lc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Jt(t,r.schema)),l==="mark"&&(s=Pi(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let d,h,m,g;n.selection.empty?r.doc.nodesBetween(c,u,(b,x)=>{o&&o===b.type&&(m=Math.max(x,c),g=Math.min(x+b.nodeSize,u),d=x,h=b)}):r.doc.nodesBetween(c,u,(b,x)=>{x<c&&o&&o===b.type&&(m=Math.max(x,c),g=Math.min(x+b.nodeSize,u),d=x,h=b),x>=c&&x<=u&&(o&&o===b.type&&n.setNodeMarkup(x,void 0,{...b.attrs,...e}),s&&b.marks.length&&b.marks.forEach(E=>{if(s===E.type){const M=Math.max(x,c),P=Math.min(x+b.nodeSize,u);n.addMark(M,P,s.create({...E.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(b=>{s===b.type&&n.addMark(m,g,s.create({...b.attrs,...e}))}))}),!0):!1},zM=(t,e={})=>({state:n,dispatch:r})=>{const i=Jt(t,n.schema);return oA(i,e)(n,r)},KM=(t,e={})=>({state:n,dispatch:r})=>{const i=Jt(t,n.schema);return sA(i,e)(n,r)};var UM=Object.freeze({__proto__:null,blur:MA,clearContent:_A,clearNodes:NA,command:PA,createParagraphNear:$A,cut:DA,deleteCurrentNode:IA,deleteNode:LA,deleteRange:BA,deleteSelection:RA,enter:VA,exitCode:FA,extendMarkRange:HA,first:jA,focus:KA,forEach:UA,insertContent:WA,insertContentAt:GA,joinBackward:ZA,joinDown:XA,joinForward:QA,joinItemBackward:eM,joinItemForward:tM,joinTextblockBackward:nM,joinTextblockForward:rM,joinUp:YA,keyboardShortcut:oM,lift:sM,liftEmptyBlock:lM,liftListItem:aM,newlineInCode:cM,resetAttributes:uM,scrollIntoView:dM,selectAll:fM,selectNodeBackward:hM,selectNodeForward:pM,selectParentNode:mM,selectTextblockEnd:gM,selectTextblockStart:yM,setContent:bM,setMark:OM,setMeta:AM,setNode:MM,setNodeSelection:_M,setTextSelection:NM,sinkListItem:PM,splitBlock:$M,splitListItem:DM,toggleList:IM,toggleMark:LM,toggleNode:BM,toggleWrap:RM,undoInputRule:VM,unsetAllMarks:FM,unsetMark:HM,updateAttributes:jM,wrapIn:zM,wrapInList:KM});const WM=_n.create({name:"commands",addCommands(){return{...UM}}}),qM=_n.create({name:"drop",addProseMirrorPlugins(){return[new Rn({key:new $r("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),JM=_n.create({name:"editable",addProseMirrorPlugins(){return[new Rn({key:new $r("editable"),props:{editable:()=>this.editor.options.editable}})]}}),GM=_n.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Rn({key:new $r("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),YM=_n.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:h,parent:m}=d,g=d.parent.isTextblock&&h>0?l.doc.resolve(h-1):d,b=g.parent.type.spec.isolating,x=d.pos-d.parentOffset,E=b&&g.parent.childCount===1?x===d.pos:Ye.atStart(c).from===h;return!u||!m.type.isTextblock||m.textContent.length||!E||E&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Qf()||Yb()?o:i},addProseMirrorPlugins(){return[new Rn({key:new $r("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(b=>b.getMeta("composition")))return;const r=t.some(b=>b.docChanged)&&!e.doc.eq(n.doc),i=t.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=Ye.atStart(e.doc).from,c=Ye.atEnd(e.doc).to;if(o||!(s===a&&l===c)||!th(n.doc))return;const h=n.tr,m=Nc({state:n,transaction:h}),{commands:g}=new Pc({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),XM=_n.create({name:"paste",addProseMirrorPlugins(){return[new Rn({key:new $r("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ZM=_n.create({name:"tabindex",addProseMirrorPlugins(){return[new Rn({key:new $r("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class zi{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new zi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new zi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new zi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new zi(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new zi(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const QM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function e_(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let t_=class extends hA{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=e_(QM,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=zb(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[JM,AA.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),WM,GM,YM,ZM,qM,XM].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Do(i,this)}createCommandManager(){this.commandManager=new Pc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Wd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Jb(n,this.options.autofocus);this.view=new BO(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:$o.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return SM(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return CM(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Yf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return kM(this.state.doc,{blockSeparator:n,textSerializers:{...Ub(this.schema),...r}})}get isEmpty(){return th(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new zi(n,this)}get $doc(){return this.$pos(0)}};function ts(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ze(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),u=c+s.length;if(Zb(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+a,c);const h=n.from+a+s.length;o.addMark(n.from+a,h,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function n_(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ze(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Jd(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ze(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function ul(t){return new Dc({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ze(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&Df(a,t.type,o);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:m}=t.editor.extensionManager,g=h||d.$to.parentOffset&&d.$from.marks();if(g){const b=g.filter(x=>m.includes(x.type.name));s.ensureMarks(b)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&_i(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}class Bn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(Ce(this,"addOptions",{name:this.name}))),this.storage=Ze(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Bn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Ic(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Bn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ze(Ce(n,"addOptions",{name:n.name})),n.storage=Ze(Ce(n,"addStorage",{name:n.name,options:n.options})),n}}function ns(t){return new xA({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ze(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),h=d+l.length;if(Zb(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(x=>x===t.type&&x!==g.mark.type)).filter(g=>g.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+l.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function Wm(t){return Jw((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Qb extends t_{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=Wm(this.view.state),this.reactiveExtensionStorage=Wm(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),Sg(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const e0=_g({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=sf(),n=bc();return Hk(()=>{const r=t.editor;r&&r.options.element&&e.value&&pc(()=>{if(!e.value||!r.options.element.firstChild)return;const i=wn(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:i}),r.createNodeViews()})}),Ig(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return sy("div",{ref:t=>{this.rootEl=t}})}}),r_=/^\s*>\s$/,i_=Bn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ul({find:r_,type:this.type})]}}),o_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,s_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,l_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,a_=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,c_=Oi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ts({find:o_,type:this.type}),ts({find:l_,type:this.type})]},addPasteRules(){return[ns({find:s_,type:this.type}),ns({find:a_,type:this.type})]}}),u_="listItem",qm="textStyle",Jm=/^\s*([-+*])\s$/,d_=Bn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(u_,this.editor.getAttributes(qm)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ul({find:Jm,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:Jm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(qm),editor:this.editor})),[t]}}),f_=/(^|[^`])`([^`]+)`(?!`)/,h_=/(^|[^`])`([^`]+)`(?!`)/g,p_=Oi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ts({find:f_,type:this.type})]},addPasteRules(){return[ns({find:h_,type:this.type})]}}),m_=/^```([a-z]+)?[\s\n]$/,g_=/^~~~([a-z]+)?[\s\n]$/,y_=Bn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Mn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(Ye.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Jd({find:m_,type:this.type,getAttributes:t=>({language:t[1]})}),Jd({find:g_,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Rn({key:new $r("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(ze.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),b_=Bn.create({name:"doc",topNode:!0,content:"block+"});function v_(t={}){return new Rn({view(e){return new w_(e,t)}})}class w_{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=l?u.bottom:u.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let l=i.getBoundingClientRect();o=l.left-i.scrollLeft,s=l.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=z1(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const k_=_n.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[v_(this.options)]}});class _t extends Ye{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return _t.valid(r)?new _t(r):Ye.near(r)}content(){return we.empty}eq(e){return e instanceof _t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(e.resolve(n.pos))}getBookmark(){return new nh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!x_(e)||!S_(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&_t.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(_t.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Ie.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(_t.valid(l))return l}return null}}}_t.prototype.visible=!1;_t.findFrom=_t.findGapCursorFrom;Ye.jsonID("gapcursor",_t);class nh{constructor(e){this.pos=e}map(e){return new nh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return _t.valid(n)?new _t(n):Ye.near(n)}}function x_(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function S_(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function C_(){return new Rn({props:{decorations:A_,createSelectionBetween(t,e,n){return e.pos==n.pos&&_t.valid(n)?new _t(n):null},handleClick:E_,handleKeyDown:T_,handleDOMEvents:{beforeinput:O_}}})}const T_=Mb({ArrowLeft:ql("horiz",-1),ArrowRight:ql("horiz",1),ArrowUp:ql("vert",-1),ArrowDown:ql("vert",1)});function ql(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof ze){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=_t.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new _t(c))),!0):!1}}function E_(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!_t.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ie.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new _t(r))),!0)}function O_(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof _t))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=re.empty;for(let s=r.length-1;s>=0;s--)i=re.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new we(i,0,0));return o.setSelection(ze.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function A_(t){if(!(t.selection instanceof _t))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",jt.create(t.doc,[nr.widget(t.selection.head,e,{key:"gapcursor"})])}const M_=_n.create({name:"gapCursor",addProseMirrorPlugins(){return[C_()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ze(Ce(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),__=Bn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Mn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&s){const d=a.filter(h=>l.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),N_=Bn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Mn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Jd({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var rc=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<rc&&this.leafAppend(e)||this.length<rc&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new P_(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};qt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};qt.from=function(e){return e instanceof qt?e:e&&e.length?new t0(e):qt.empty};var t0=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=rc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=rc)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(qt);qt.empty=new t0([]);var P_=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(qt);const $_=500;class fr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new kr(d.map));let m=d.step.map(i.slice(o)),g;m&&s.maybeStep(m).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new kr(g,void 0,void 0,c.length+u.length))),o--,g&&i.appendMap(g,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new fr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new kr(e.mapping.maps[u],d,n),m;(m=a&&a.merge(h))&&(h=m,u?o.pop():l=l.slice(0,l.length-1)),o.push(h),n&&(s++,n=void 0),i||(a=h)}let c=s-r.depth;return c>I_&&(l=D_(l,c),s-=c),new fr(l.append(o),s)}remapping(e,n){let r=new il;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new fr(this.items.append(e.map(n=>new kr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},i);let a=n;this.items.forEach(h=>{let m=o.getMirror(--a);if(m==null)return;s=Math.min(s,m);let g=o.maps[m];if(h.step){let b=e.steps[m].invert(e.docs[m]),x=h.selection&&h.selection.map(o.slice(a+1,m));x&&l++,r.push(new kr(g,b,x))}else r.push(new kr(g))},i);let c=[];for(let h=n;h<s;h++)c.push(new kr(o.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new fr(u,l);return d.emptyItemCount()>$_&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new kr(c.invert(),a,u),h,m=i.length-1;(h=i.length&&i[m].merge(d))?i[m]=h:i.push(d)}}else s.map&&r--},this.items.length,0),new fr(qt.from(i.reverse()),o)}}fr.empty=new fr(qt.empty,0);function D_(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class kr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new kr(n.getMap().invert(),n,this.selection)}}}class ci{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const I_=20;function L_(t,e,n,r){let i=n.getMeta(to),o;if(i)return i.historyState;n.getMeta(V_)&&(t=new ci(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(to))return s.getMeta(to).redo?new ci(t.done.addTransform(n,void 0,r,ba(e)),t.undone,Gm(n.mapping.maps),t.prevTime,t.prevComposition):new ci(t.done,t.undone.addTransform(n,void 0,r,ba(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!B_(n,t.prevRanges)),c=s?Lu(t.prevRanges,n.mapping):Gm(n.mapping.maps);return new ci(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,ba(e)),fr.empty,c,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new ci(t.done.rebased(n,o),t.undone.rebased(n,o),Lu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ci(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Lu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function B_(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Gm(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function Lu(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function R_(t,e,n){let r=ba(e),i=to.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new ci(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(to,{redo:n,historyState:a})}let Bu=!1,Ym=null;function ba(t){let e=t.plugins;if(Ym!=e){Bu=!1,Ym=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Bu=!0;break}}return Bu}const to=new $r("history"),V_=new $r("closeHistory");function F_(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Rn({key:to,state:{init(){return new ci(fr.empty,fr.empty,null,0,-1)},apply(e,n,r){return L_(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?r0:r=="historyRedo"?i0:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function n0(t,e){return(n,r)=>{let i=to.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=R_(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const r0=n0(!1,!0),i0=n0(!0,!0),H_=_n.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>r0(t,e),redo:()=>({state:t,dispatch:e})=>i0(t,e)}},addProseMirrorPlugins(){return[F_(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),j_=Bn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Mn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):TM(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(ze.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Ie.create(s.doc,c.pos)):s.setSelection(ze.create(s.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(u,d),s.setSelection(ze.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[n_({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),z_=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,K_=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,U_=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,W_=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,q_=Oi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ts({find:z_,type:this.type}),ts({find:U_,type:this.type})]},addPasteRules(){return[ns({find:K_,type:this.type}),ns({find:W_,type:this.type})]}}),J_=Bn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Mn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),G_="listItem",Xm="textStyle",Zm=/^(\d+)\.\s$/,Y_=Bn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Mn(this.options.HTMLAttributes,n),0]:["ol",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(G_,this.editor.getAttributes(Xm)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ul({find:Zm,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:Zm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Xm)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),X_=Bn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Z_=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Q_=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,eN=Oi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Mn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ts({find:Z_,type:this.type})]},addPasteRules(){return[ns({find:Q_,type:this.type})]}}),tN=Bn.create({name:"text",group:"inline"}),o0=_n.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,l,a,c,u,d,h,m,g,b,x,E;const M=[];return this.options.bold!==!1&&M.push(c_.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&M.push(i_.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&M.push(d_.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&M.push(p_.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&M.push(y_.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&M.push(b_.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&M.push(k_.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&M.push(M_.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&M.push(__.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&M.push(N_.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&M.push(H_.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&M.push(j_.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&M.push(q_.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&M.push(J_.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&M.push(Y_.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&M.push(X_.configure((b=this.options)===null||b===void 0?void 0:b.paragraph)),this.options.strike!==!1&&M.push(eN.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&M.push(tN.configure((E=this.options)===null||E===void 0?void 0:E.text)),M}}),nN={components:{EditorContent:e0},props:{content:{type:String,required:!0}},emits:["update:content"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:content",this.editor.getHTML())}},mounted(){this.editor=new Qb({content:this.content,extensions:[o0]}),this.editor.on("blur",this.emitContent)},beforeUnmount(){this.editor&&this.editor.destroy()}};function rN(t,e,n,r,i,o){const s=Je("editor-content");return z(),gt(s,{class:"editor",editor:i.editor},null,8,["editor"])}const iN=lt(nN,[["render",rN],["__scopeId","data-v-3da2c5ae"]]),oN={components:{FileName:g1,TipTap:iN},methods:{async handleChange(){await this.$root.UpdateRecord("Files",this.myfile.uuid,this.myfile)},updateContent(t){this.myfile.content=t,console.log(t),this.handleChange()}},name:"FileEditor",data(){return{myfile:null}},async mounted(){this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.$root.tools.writer.selectednode)))}},sN={style:{"text-align":"center"}};function lN(t,e,n,r,i,o){const s=Je("FileName"),l=Je("TipTap");return z(),Q(Ge,null,[T("div",sN,[(z(),gt(s,{myuuid:t.$root.tools.writer.selectednode,key:t.$root.tools.writer.selectednode,formmode:!0},null,8,["myuuid"]))]),i.myfile?(z(),gt(l,{content:i.myfile.content,"onUpdate:content":o.updateContent,key:i.myfile.lastupdated},null,8,["content","onUpdate:content"])):Pe("",!0)],64)}const aN=lt(oN,[["render",lN]]),cN={mounted(t){const e=()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"};t.style.height="auto",t.style.height=t.scrollHeight+"px",t.addEventListener("input",e),window.addEventListener("resize",e),t._onResize=e},updated(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},unmounted(t){window.removeEventListener("resize",t._onResize)}},s0=""+new URL("../resources/bookcover.png",import.meta.url).href,uN={props:{myimage:{type:String,default:""}},data(){return{base64Image:this.myimage}},methods:{onFileChange(t){const e=t.target.files[0];if(e){const n=new FileReader;n.onload=r=>{const i=new Image;i.src=r.target.result,i.onload=()=>{const o=document.createElement("canvas"),s=200,l=s/i.width;o.width=s,o.height=i.height*l,o.getContext("2d").drawImage(i,0,0,o.width,o.height),this.base64Image=o.toDataURL("image/jpeg"),this.$emit("image-changed",this.base64Image)}},n.readAsDataURL(e)}},triggerFileUpload(){this.$refs.fileInput.click()}}},dN=["src"];function fN(t,e,n,r,i,o){return z(),Q("div",null,[T("input",{type:"file",onChange:e[0]||(e[0]=(...s)=>o.onFileChange&&o.onFileChange(...s)),ref:"fileInput",style:{display:"none"}},null,544),i.base64Image?(z(),Q("img",{key:0,src:i.base64Image,alt:"Image Preview",class:"image-preview",onClick:e[1]||(e[1]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))},null,8,dN)):Pe("",!0),i.base64Image?Pe("",!0):(z(),Q("img",{key:1,src:s0,alt:"Image Preview",class:"image-preview",onClick:e[2]||(e[2]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))}))])}const hN=lt(uN,[["render",fN],["__scopeId","data-v-e0f8ef46"]]),pN={directives:{autosize:cN},components:{ImageUpload:hN},methods:{handleChange(){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected.uuid,this.this.$root.tools.writer.selected)},imageChanged(t){this.this.$root.tools.writer.selected.cover=t,this.handleChange()}},name:"BookEditor",data(){return{}},async mounted(){}},mN={key:0,class:"infocontainer"},gN={class:"bookcover"};function yN(t,e,n,r,i,o){const s=Je("ImageUpload"),l=vk("autosize");return this.$root.tools.writer.selected?(z(),Q("div",mN,[T("div",gN,[yt(s,{myimage:this.$root.tools.writer.selected.cover,onImageChanged:o.imageChanged},null,8,["myimage","onImageChanged"])]),e[5]||(e[5]=T("label",null,"Book Title",-1)),Nt(T("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>this.$root.tools.writer.selected.title=a),onBlur:e[1]||(e[1]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[$t,this.$root.tools.writer.selected.title]]),e[6]||(e[6]=T("label",null,"Author",-1)),Nt(T("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>this.$root.tools.writer.selected.author=a),onBlur:e[3]||(e[3]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[$t,this.$root.tools.writer.selected.author]]),e[7]||(e[7]=T("label",null,"Description",-1)),Nt(T("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>this.$root.tools.writer.selected.description=a)},null,512),[[l],[$t,this.$root.tools.writer.selected.description]])])):Pe("",!0)}const bN=lt(pN,[["render",yN],["__scopeId","data-v-e1a2651a"]]),vN={name:"WriterHome",components:{DocStructure:cT,FileEditor:aN,BookEditor:bN},data(){return{lhshidden:!1,rhshidden:!1}},computed:{displaylist(){return this.$root.syncdb.Writer.sort((t,e)=>new Date(e.lastupdated)-new Date(t.lastupdated))}},methods:{addNewBook(){let t=JSON.parse(JSON.stringify(this.$root.writerTemplate));t.uuid=this.$root.uuid(),this.$root.AddRecord("Writer",t)}}},wN={key:0},kN={class:"writer-home"},xN={class:"gridcard-grid"},SN=["onClick"],CN={class:"book-3d"},TN={class:"book-3d__inner"},EN=["src","alt"],ON=["alt"],AN={key:1};function MN(t,e,n,r,i,o){const s=Je("FileEditor"),l=Je("BookEditor"),a=Je("DocStructure");return z(),Q(Ge,null,[t.$root.tools.writer.selected?Pe("",!0):(z(),Q("div",wN,[T("div",kN,[T("button",{onClick:e[0]||(e[0]=(...c)=>o.addNewBook&&o.addNewBook(...c))},"Add a New Book"),T("div",xN,[(z(!0),Q(Ge,null,rn(o.displaylist,(c,u)=>(z(),Q("div",{class:"gridcard",key:u,onClick:d=>t.$root.tools.writer.selected=c},[T("div",CN,[T("div",TN,[c.cover?(z(),Q("img",{key:0,src:c.cover,class:"book-3d__cover",alt:c.title},null,8,EN)):(z(),Q("img",{key:1,class:"book-3d__cover",src:s0,alt:c.title},null,8,ON))])]),T("h2",null,Cn(c.title),1),T("p",null,"by "+Cn(c.author),1),T("p",null,Cn(c.description),1),T("p",null,Cn(c.lastupdated),1)],8,SN))),128))])])])),t.$root.tools.writer.selected?(z(),Q("div",AN,[T("div",{class:rr(["main",{lhsmain:i.lhshidden,rhsmain:i.rhshidden}])},[t.$root.tools.writer.selectednode?(z(),gt(s,{key:t.$root.tools.writer.selectednode})):Pe("",!0),t.$root.tools.writer.selectednode?Pe("",!0):(z(),gt(l,{key:1}))],2),T("div",{class:rr(["lhs",{lhshidden:i.lhshidden}])},[T("button",{onClick:e[1]||(e[1]=c=>i.lhshidden=!i.lhshidden),class:"btn lhsbtn"},e[3]||(e[3]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"menu"),T("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)])),yt(a)],2),T("div",{class:rr(["rhs",{rhshidden:i.rhshidden}])},[T("button",{onClick:e[2]||(e[2]=c=>i.rhshidden=!i.rhshidden),class:"btn rhsbtn"},e[4]||(e[4]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"menu"),T("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)]))],2)])):Pe("",!0)],64)}const _N=lt(vN,[["render",MN],["__scopeId","data-v-6762adfd"]]),NN={components:{EditorContent:e0},props:{modelValue:{type:String,required:!0}},emits:["update:modelValue","blur"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:modelValue",this.editor.getHTML())},emitBlur(){this.$emit("blur")}},mounted(){this.editor=new Qb({content:this.modelValue,extensions:[o0]}),this.editor.on("update",this.emitContent),this.editor.on("blur",this.emitBlur)},beforeUnmount(){this.editor&&this.editor.destroy()}};function PN(t,e,n,r,i,o){const s=Je("editor-content");return z(),gt(s,{class:"editor",editor:i.editor},null,8,["editor"])}const rh=lt(NN,[["render",PN]]),$N={name:"MindmapEditor",components:{MiniEditor:rh},data(){return{mymindmap:null}},async mounted(){this.mymindmap=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Mindmap.get(this.$root.tools.mindmap.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Mindmap",this.mymindmap.uuid,this.mymindmap)},addTime(t){let e={};e.title="Title Here",e.text="",e.date="Date Label",t==null?this.mymindmap.content.items.push(e):this.mymindmap.content.items.splice(t,0,e)}}},DN={key:0,class:"subbar"},IN={key:1,class:"mindmap"},LN={class:"content"},BN=["onUpdate:modelValue"],RN={class:"time"},VN=["onUpdate:modelValue"],FN={style:{"text-align":"center"}};function HN(t,e,n,r,i,o){const s=Je("MiniEditor");return z(),Q(Ge,null,[i.mymindmap?(z(),Q("div",DN,[Nt(T("input",{onBlur:e[0]||(e[0]=l=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mymindmap.title=l)},null,544),[[$t,this.mymindmap.title]]),T("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.mindmap.selected=null)},e[7]||(e[7]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"close"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Pe("",!0),i.mymindmap?(z(),Q("div",IN,[T("ul",null,[(z(!0),Q(Ge,null,rn(i.mymindmap.content.items,(l,a)=>(z(),Q("li",null,[T("div",LN,[T("h3",null,[Nt(T("input",{type:"text","onUpdate:modelValue":c=>l.title=c,placeholder:"Title Here",onBlur:e[3]||(e[3]=c=>o.update())},null,40,BN),[[$t,l.title]])]),T("p",null,[(z(),gt(s,{modelValue:l.text,"onUpdate:modelValue":c=>l.text=c,onBlur:e[4]||(e[4]=c=>o.update()),key:i.mymindmap.lastupdated},null,8,["modelValue","onUpdate:modelValue"]))])]),T("div",RN,[T("h4",null,[Nt(T("input",{type:"text","onUpdate:modelValue":c=>l.date=c,placeholder:"label",onBlur:e[5]||(e[5]=c=>o.update())},null,40,VN),[[$t,l.date]])])])]))),256)),e[9]||(e[9]=T("div",{style:{clear:"both"}},null,-1)),T("div",FN,[T("button",{onClick:e[6]||(e[6]=l=>o.addTime()),class:"tlbutton"},e[8]||(e[8]=[T("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"plus-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):Pe("",!0)],64)}const jN=lt($N,[["render",HN]]),zN={name:"MindmapHome",components:{MindmapEditor:jN}},KN={key:0,class:"mindmaps"},UN=["onClick"],WN={key:1};function qN(t,e,n,r,i,o){const s=Je("MindmapEditor");return z(),Q(Ge,null,[t.$root.tools.mindmap.selected?Pe("",!0):(z(),Q("div",KN,[(z(!0),Q(Ge,null,rn(this.$root.syncdb.Mindmap,(l,a)=>(z(),Q("button",{onClick:c=>t.$root.tools.mindmap.selected=l},[e[1]||(e[1]=T("svg",{class:"icon",viewBox:"0 0 24 24"},[T("title",null,"view-grid"),T("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)),T("div",null,Cn(l.title),1)],8,UN))),256)),T("button",{onClick:e[0]||(e[0]=l=>t.$root.makeMindmap()),class:"add"},e[2]||(e[2]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"plus-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),T("div",null,"Add",-1)]))])),t.$root.tools.mindmap.selected?(z(),Q("div",WN,[yt(s)])):Pe("",!0)],64)}const JN=lt(zN,[["render",qN],["__scopeId","data-v-f35151a6"]]),GN={name:"TimelineEditor",components:{MiniEditor:rh},data(){return{mytimeline:null}},async mounted(){this.mytimeline=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Timeline.get(this.$root.tools.timeline.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Timeline",this.mytimeline.uuid,this.mytimeline)},addTime(t){let e={};e.title="Title Here",e.text="",e.date="Date Label",t==null?this.mytimeline.content.items.push(e):this.mytimeline.content.items.splice(t,0,e)}}},YN={key:0,class:"subbar"},XN={key:1,class:"timeline"},ZN={class:"content"},QN=["onUpdate:modelValue"],eP={class:"time"},tP=["onUpdate:modelValue"],nP={style:{"text-align":"center"}};function rP(t,e,n,r,i,o){const s=Je("MiniEditor");return z(),Q(Ge,null,[i.mytimeline?(z(),Q("div",YN,[Nt(T("input",{onBlur:e[0]||(e[0]=l=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mytimeline.title=l)},null,544),[[$t,this.mytimeline.title]]),T("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.timeline.selected=null)},e[7]||(e[7]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"close"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Pe("",!0),i.mytimeline?(z(),Q("div",XN,[T("ul",null,[(z(!0),Q(Ge,null,rn(i.mytimeline.content.items,(l,a)=>(z(),Q("li",null,[T("div",ZN,[T("h3",null,[Nt(T("input",{type:"text","onUpdate:modelValue":c=>l.title=c,placeholder:"Title Here",onBlur:e[3]||(e[3]=c=>o.update())},null,40,QN),[[$t,l.title]])]),T("p",null,[(z(),gt(s,{modelValue:l.text,"onUpdate:modelValue":c=>l.text=c,onBlur:e[4]||(e[4]=c=>o.update()),key:i.mytimeline.lastupdated},null,8,["modelValue","onUpdate:modelValue"]))])]),T("div",eP,[T("h4",null,[Nt(T("input",{type:"text","onUpdate:modelValue":c=>l.date=c,placeholder:"label",onBlur:e[5]||(e[5]=c=>o.update())},null,40,tP),[[$t,l.date]])])])]))),256)),e[9]||(e[9]=T("div",{style:{clear:"both"}},null,-1)),T("div",nP,[T("button",{onClick:e[6]||(e[6]=l=>o.addTime()),class:"tlbutton"},e[8]||(e[8]=[T("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"plus-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):Pe("",!0)],64)}const iP=lt(GN,[["render",rP],["__scopeId","data-v-50942c24"]]),oP={name:"TimelineHome",components:{TimelineEditor:iP}},sP={key:0,class:"timelines"},lP=["onClick"],aP={key:1};function cP(t,e,n,r,i,o){const s=Je("TimelineEditor");return z(),Q(Ge,null,[t.$root.tools.timeline.selected?Pe("",!0):(z(),Q("div",sP,[(z(!0),Q(Ge,null,rn(this.$root.syncdb.Timeline,(l,a)=>(z(),Q("button",{onClick:c=>t.$root.tools.timeline.selected=l},[e[1]||(e[1]=T("svg",{class:"icon",viewBox:"0 0 24 24"},[T("title",null,"timeline-outline"),T("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1)),T("div",null,Cn(l.title),1)],8,lP))),256)),T("button",{onClick:e[0]||(e[0]=l=>t.$root.makeTimeline()),class:"add"},e[2]||(e[2]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"plus-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),T("div",null,"Add",-1)]))])),t.$root.tools.timeline.selected?(z(),Q("div",aP,[yt(s)])):Pe("",!0)],64)}const uP=lt(oP,[["render",cP],["__scopeId","data-v-71745106"]]),dP={name:"SnowflakeEditor",components:{MiniEditor:rh},data(){return{mysnowflake:null}},async mounted(){this.mysnowflake=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Snowflake.get(this.$root.tools.snowflake.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Snowflake",this.mysnowflake.uuid,this.mysnowflake)},addTime(t){let e={};e.title="Title Here",e.text="",e.date="Date Label",t==null?this.mysnowflake.content.items.push(e):this.mysnowflake.content.items.splice(t,0,e)}}},fP={key:0,class:"subbar"},hP={key:1,class:"snowflake"},pP={class:"content"},mP=["onUpdate:modelValue"],gP={class:"time"},yP=["onUpdate:modelValue"],bP={style:{"text-align":"center"}};function vP(t,e,n,r,i,o){const s=Je("MiniEditor");return z(),Q(Ge,null,[i.mysnowflake?(z(),Q("div",fP,[Nt(T("input",{onBlur:e[0]||(e[0]=l=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>this.mysnowflake.title=l)},null,544),[[$t,this.mysnowflake.title]]),T("button",{class:"btn",onClick:e[2]||(e[2]=l=>t.$root.tools.snowflake.selected=null)},e[7]||(e[7]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"close"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Pe("",!0),i.mysnowflake?(z(),Q("div",hP,[T("ul",null,[(z(!0),Q(Ge,null,rn(i.mysnowflake.content.items,(l,a)=>(z(),Q("li",null,[T("div",pP,[T("h3",null,[Nt(T("input",{type:"text","onUpdate:modelValue":c=>l.title=c,placeholder:"Title Here",onBlur:e[3]||(e[3]=c=>o.update())},null,40,mP),[[$t,l.title]])]),T("p",null,[(z(),gt(s,{modelValue:l.text,"onUpdate:modelValue":c=>l.text=c,onBlur:e[4]||(e[4]=c=>o.update()),key:i.mysnowflake.lastupdated},null,8,["modelValue","onUpdate:modelValue"]))])]),T("div",gP,[T("h4",null,[Nt(T("input",{type:"text","onUpdate:modelValue":c=>l.date=c,placeholder:"label",onBlur:e[5]||(e[5]=c=>o.update())},null,40,yP),[[$t,l.date]])])])]))),256)),e[9]||(e[9]=T("div",{style:{clear:"both"}},null,-1)),T("div",bP,[T("button",{onClick:e[6]||(e[6]=l=>o.addTime()),class:"tlbutton"},e[8]||(e[8]=[T("svg",{icon:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"plus-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1)]))])])])):Pe("",!0)],64)}const wP=lt(dP,[["render",vP]]),kP={name:"SnowflakeHome",components:{SnowflakeEditor:wP}},xP={key:0,class:"snowflakes"},SP=["onClick"],CP={key:1};function TP(t,e,n,r,i,o){const s=Je("SnowflakeEditor");return z(),Q(Ge,null,[t.$root.tools.snowflake.selected?Pe("",!0):(z(),Q("div",xP,[(z(!0),Q(Ge,null,rn(this.$root.syncdb.Snowflake,(l,a)=>(z(),Q("button",{onClick:c=>t.$root.tools.snowflake.selected=l},[e[1]||(e[1]=T("svg",{class:"icon",viewBox:"0 0 24 24"},[T("title",null,"snowflake"),T("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1)),T("div",null,Cn(l.title),1)],8,SP))),256)),T("button",{onClick:e[0]||(e[0]=l=>t.$root.makeSnowflake()),class:"add"},e[2]||(e[2]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"plus-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),T("div",null,"Add",-1)]))])),t.$root.tools.snowflake.selected?(z(),Q("div",CP,[yt(s)])):Pe("",!0)],64)}const EP=lt(kP,[["render",TP],["__scopeId","data-v-3f3ef46f"]]),OP={name:"CardViewer",components:{},props:{cardRef:{type:String}},data(){return{currentcard:null}},async mounted(){this.currentcard=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Cards.get(this.cardRef)))},methods:{editcard(t){this.$root.tools.cards.selected=this.currentcard,this.$root.modal=!0}}},AP={key:0,class:"card card-placeholder"},MP={class:"card-title"},_P={class:"card-description"};function NP(t,e,n,r,i,o){return z(),Q("div",{class:"",onClick:e[0]||(e[0]=s=>o.editcard(i.currentcard.uuid))},[i.currentcard?Pe("",!0):(z(),Q("div",AP,' No card ref provided so we need to have the "create" or "link" option ')),i.currentcard?(z(),Q("div",{key:1,class:rr(["card card-button",i.currentcard.color])},[T("h1",MP,Cn(i.currentcard.title),1),T("div",_P,Cn(i.currentcard.description),1)],2)):Pe("",!0)])}const l0=lt(OP,[["render",NP],["__scopeId","data-v-fef44b76"]]),PP={name:"GridPlannerCell",emits:["MakeChange"],components:{VueDraggable:Nf,CardViewer:l0},props:{parentList:{type:Array,required:!0}},computed:{dragOptions(){return{animation:200,group:"Cards",disabled:!1,ghostClass:"ghost"}}},data(){return{drag:!1,colWidth:320}},methods:{linkCard(t,e){var n=this.parentList.find(r=>r.uuid===e);n.uuid=t,this.updateDatabase()},deleteNote(t){this.$swal({title:this.$root.setlang.confirmmodal.confirmdelete,text:this.$root.setlang.confirmmodal.noundo,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$root.setlang.confirmmodal.confirmbtn,cancelButtonText:this.$root.setlang.confirmmodal.cancelbtn}).then(e=>{e.isConfirmed&&(this.parentList.splice(t,1),this.updateDatabase(),this.$swal(this.$root.setlang.confirmmodal.success,this.$root.setlang.confirmmodal.successfeedback,"success"))})},addCard(){let t={};t.uuid=this.$root.uuid(),this.parentList.push(t),this.updateDatabase()},updateDatabase(){this.$emit("MakeChange")}}},$P={class:"clearInterfaceIconButton cardHandle"},DP={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},IP=["onClick"],LP={style:{width:"18px",height:"18px"},viewBox:"0 0 24 24"},BP={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"};function RP(t,e,n,r,i,o){const s=Je("CardViewer"),l=Je("VueDraggable");return z(),Q(Ge,null,[yt(l,ry({list:n.parentList,tag:"transition-group",group:"board",class:"list-group-card","component-data":{tag:"div",type:"transition-group",name:i.drag?null:"flip-list"},handle:".cardHandle"},o.dragOptions,{onStart:e[0]||(e[0]=a=>i.drag=!0),onEnd:e[1]||(e[1]=a=>i.drag=!1),emptyInsertThreshold:90,onChange:o.updateDatabase}),{default:af(()=>[(z(!0),Q(Ge,null,rn(n.parentList,(a,c)=>(z(),Q("div",{key:c,class:"list-group-card-item",tabindex:"0"},[(z(),gt(s,{cardid:a.uuid,allowlink:!0,onLinkcard:o.linkCard,key:t.$root.uuid()},null,8,["cardid","onLinkcard"])),T("div",$P,[(z(),Q("svg",DP,e[3]||(e[3]=[T("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"},null,-1)])))]),T("button",{class:"deleteIconButton",onClick:u=>o.deleteNote(c),tabindex:"0"},[(z(),Q("svg",LP,e[4]||(e[4]=[T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},null,-1)])))],8,IP)]))),128))]),_:1},16,["list","component-data","onChange"]),T("button",{class:rr(["add-card",{bigbtn:!n.parentList.length}]),onClick:e[2]||(e[2]=a=>o.addCard(n.parentList))},[(z(),Q("svg",BP,e[5]||(e[5]=[T("path",{d:"M13.09 20H4C2.9 20 2 19.11 2 18V6C2 4.89 2.9 4 4 4H20C21.11 4 22 4.89 22 6V13.81C21.12 13.3 20.09 13 19 13C15.69 13 13 15.69 13 19C13 19.34 13.04 19.67 13.09 20M18 15V18H15V20H18V23H20V20H23V18H20V15H18Z"},null,-1)])))],2)],64)}const VP=lt(PP,[["render",RP],["__scopeId","data-v-10f2544f"]]),FP={name:"GridPlanner",components:{VueDraggable:Nf,GridPlannerCell:VP},computed:{tablewidth(){return this.colwidth*this.mygridplanner.content.headers.length}},data(){return{mygridplanner:null,colwidth:300}},async mounted(){this.mygridplanner=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Gridplanner.get(this.$root.tools.gridplanner.selected.uuid)))},methods:{async update(){console.log("updating"),await this.$root.UpdateRecord("Gridplanner",this.mygridplanner.uuid,this.mygridplanner)},addCol(){let t={};t.uuid=this.$root.uuid(),t.title="",this.mygridplanner.content.headers.push(t),this.mygridplanner.content.rows.forEach(e=>{e.cells[t.uuid]=[]}),this.update()},addRow(){let t={};t.title="",t.cells={},this.mygridplanner.content.headers.forEach(e=>{t.cells[e.uuid]=[]}),this.mygridplanner.content.rows.push(t),this.update()},deleteCol(t){this.$swal({title:"Delete?",text:"this is permmanend",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}).then(e=>{if(e.isConfirmed){let n=this.mygridplanner.content.headers[t].uuid;this.mygridplanner.content.rows.forEach(r=>{delete r.cells[n]}),this.mygridplanner.content.headers.splice(t,1),this.update(),this.$swal("Success","All done","success")}})},deleteRow(t){this.$swal({title:"Delete?",text:"pernamnen",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm",cancelButtonText:"cancel"}).then(e=>{e.isConfirmed&&(this.mygridplanner.content.rows.splice(t,1),this.update(),this.$swal("Success","that worked","success"))})}}},HP={key:0,class:"subbar"},jP={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},zP={style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},KP={key:1,class:"scroller"},UP={class:"grid-row"},WP=["onUpdate:modelValue","placeholder"],qP=["onUpdate:modelValue","placeholder"];function JP(t,e,n,r,i,o){return z(),Q(Ge,null,[i.mygridplanner?(z(),Q("div",HP,[Nt(T("input",{onBlur:e[0]||(e[0]=s=>o.update()),type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>this.mygridplanner.title=s)},null,544),[[$t,this.mygridplanner.title]]),T("button",{onClick:e[2]||(e[2]=(...s)=>o.addRow&&o.addRow(...s)),class:"btn"},[(z(),Q("svg",jP,e[5]||(e[5]=[T("path",{d:"M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z"},null,-1)])))]),T("button",{onClick:e[3]||(e[3]=(...s)=>o.addCol&&o.addCol(...s)),class:"btn"},[(z(),Q("svg",zP,e[6]||(e[6]=[T("path",{d:"M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z"},null,-1)])))]),T("button",{class:"btn",onClick:e[4]||(e[4]=s=>t.$root.tools.gridplanner.selected=null)},e[7]||(e[7]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"close"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"})],-1)]))])):Pe("",!0),i.mygridplanner?(z(),Q("div",KP,[T("div",{class:"grid-container",style:dr(`width:${o.tablewidth}px`)},[T("div",UP,[T("div",{class:"grid-header col1",style:dr(`${i.colwidth}px`)},null,4),(z(!0),Q(Ge,null,rn(i.mygridplanner.content.headers,(s,l)=>(z(),Q("div",{key:"header-"+l,class:"grid-header",style:dr(`${i.colwidth}px`)},[e[8]||(e[8]=T("div",{class:"handle"},[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"menu"),T("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})])],-1)),Nt(T("input",{class:"handleinput",type:"text","onUpdate:modelValue":a=>s.title=a,placeholder:"Header "+(l+1)},null,8,WP),[[$t,s.title]])],4))),128))]),T("div",null,[(z(!0),Q(Ge,null,rn(i.mygridplanner.content.rows,(s,l)=>(z(),Q("div",{key:"row-"+l,class:"grid-row"},[T("div",{class:"grid-header col1",style:dr(`${i.colwidth}px`)},[e[9]||(e[9]=T("div",{class:"handle"},[T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"menu"),T("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})])],-1)),Nt(T("input",{class:"handleinput",type:"text","onUpdate:modelValue":a=>s.title=a,placeholder:"Header "+(l+1)},null,8,qP),[[$t,s.title]])],4),(z(!0),Q(Ge,null,rn(i.mygridplanner.content.headers,(a,c)=>(z(),Q("div",{key:"cell-"+l+"-"+c,class:"grid-cell",style:dr(`${i.colwidth}px`)},null,4))),128))]))),128))])],4)])):Pe("",!0)],64)}const GP=lt(FP,[["render",JP],["__scopeId","data-v-c015e31d"]]),YP={name:"GridplannerHome",components:{GridplannerEditor:GP}},XP={key:0,class:"gridplanners"},ZP=["onClick"],QP={key:1};function e$(t,e,n,r,i,o){const s=Je("GridplannerEditor");return z(),Q(Ge,null,[t.$root.tools.gridplanner.selected?Pe("",!0):(z(),Q("div",XP,[(z(!0),Q(Ge,null,rn(this.$root.syncdb.Gridplanner,(l,a)=>(z(),Q("button",{onClick:c=>t.$root.tools.gridplanner.selected=l},[e[1]||(e[1]=T("svg",{class:"icon",viewBox:"0 0 24 24"},[T("title",null,"view-grid"),T("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1)),T("div",null,Cn(l.title),1)],8,ZP))),256)),T("button",{onClick:e[0]||(e[0]=l=>t.$root.makeGridplanner()),class:"add"},e[2]||(e[2]=[T("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[T("title",null,"plus-circle-outline"),T("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})],-1),T("div",null,"Add",-1)]))])),t.$root.tools.gridplanner.selected?(z(),Q("div",QP,[yt(s)])):Pe("",!0)],64)}const t$=lt(YP,[["render",e$],["__scopeId","data-v-e5e60fa1"]]),n$={name:"CardsdatabaseHome",components:{CardViewer:l0},computed:{filteredCardList(){return this.$root.syncdb.Cards}},methods:{}},r$={class:"masonry-grid"};function i$(t,e,n,r,i,o){const s=Je("CardViewer");return z(),Q(Ge,null,[T("div",null,[T("button",{class:"btn",onClick:e[0]||(e[0]=l=>t.$root.makeNewCard())},e[1]||(e[1]=[T("svg",{class:"icon",viewBox:"0 0 24 24"},[T("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),T("span",null,"NEW",-1)]))]),T("div",r$,[(z(!0),Q(Ge,null,rn(o.filteredCardList,(l,a)=>(z(),gt(s,{key:l.uuid,cardRef:l.uuid,class:"masonry-item"},null,8,["cardRef"]))),128))])],64)}const o$=lt(n$,[["render",i$],["__scopeId","data-v-e0e201cc"]]),s$={name:"App Home",components:{ProjectHome:QC,WriterHome:_N,MindmapHome:JN,TimelineHome:uP,SnowflakeHome:EP,GridplannerHome:t$,CardsdatabaseHome:o$},data(){return{}}};function l$(t,e,n,r,i,o){const s=Je("ProjectHome"),l=Je("WriterHome"),a=Je("MindmapHome"),c=Je("TimelineHome"),u=Je("SnowflakeHome"),d=Je("GridplannerHome"),h=Je("CardsdatabaseHome");return z(),Q(Ge,null,[t.$root.currentTool?Pe("",!0):(z(),gt(s,{key:0})),t.$root.currentTool==="writer"?(z(),gt(l,{key:1})):Pe("",!0),t.$root.currentTool==="mindmap"?(z(),gt(a,{key:2})):Pe("",!0),t.$root.currentTool==="timeline"?(z(),gt(c,{key:3})):Pe("",!0),t.$root.currentTool==="snowflake"?(z(),gt(u,{key:4})):Pe("",!0),t.$root.currentTool==="gridplanner"?(z(),gt(d,{key:5})):Pe("",!0),t.$root.currentTool==="cardsdatabase"?(z(),gt(h,{key:6})):Pe("",!0)],64)}const a$=lt(s$,[["render",l$]]),c$={mixins:[qS,JS,GS,YS],components:{TopToolbar:aC,ModalManager:yC,InstallPopup:TC,FooterBar:kC,ApplicationSections:a$,Welcome:PC},data(){return{modal:null,currentTool:null,urlSelected:null,FileManager:{fileHandle:null,jsonData:null},tools:{current:null,writer:{selected:null,selectednode:null,mybook:null},cards:{searchterms:null,selected:null},gridplanner:{selected:null},timeline:{selected:null},snowflake:{selected:null},mindmap:{selected:null},planningboard:{selected:null}}}},created(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Would you like to update?")&&window.location.reload()})}})},methods:{}},u$={id:"app"};function d$(t,e,n,r,i,o){const s=Je("TopToolbar"),l=Je("Welcome"),a=Je("ApplicationSections"),c=Je("FooterBar"),u=Je("ModalManager"),d=Je("InstallPopup");return z(),Q(Ge,null,[T("div",u$,[t.$root.mainwindow?(z(),gt(s,{key:0})):Pe("",!0),T("div",{class:rr(["container",{mainwindow:t.$root.mainwindow}])},[t.$root.dbRef?(z(),gt(a,{key:1})):(z(),gt(l,{key:0}))],2),t.$root.mainwindow?(z(),gt(c,{key:1})):Pe("",!0)]),t.$root.modal?(z(),gt(u,{key:0})):Pe("",!0),yt(d)],64)}const f$=lt(c$,[["render",d$]]);var ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function h$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a0={exports:{}};/*!
* sweetalert2 v11.4.4
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(ti,function(){const n="SweetAlert2:",r=f=>{const p=[];for(let v=0;v<f.length;v++)p.indexOf(f[v])===-1&&p.push(f[v]);return p},i=f=>f.charAt(0).toUpperCase()+f.slice(1),o=f=>Array.prototype.slice.call(f),s=f=>{console.warn("".concat(n," ").concat(typeof f=="object"?f.join(" "):f))},l=f=>{console.error("".concat(n," ").concat(f))},a=[],c=f=>{a.includes(f)||(a.push(f),s(f))},u=(f,p)=>{c('"'.concat(f,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},d=f=>typeof f=="function"?f():f,h=f=>f&&typeof f.toPromise=="function",m=f=>h(f)?f.toPromise():Promise.resolve(f),g=f=>f&&Promise.resolve(f)===f,b={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},x=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],E={},M=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],P=f=>Object.prototype.hasOwnProperty.call(b,f),L=f=>x.indexOf(f)!==-1,D=f=>E[f],V=f=>{P(f)||s('Unknown parameter "'.concat(f,'"'))},H=f=>{M.includes(f)&&s('The parameter "'.concat(f,'" is incompatible with toasts'))},U=f=>{D(f)&&u(f,D(f))},O=f=>{!f.backdrop&&f.allowOutsideClick&&s('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const p in f)V(p),f.toast&&H(p),U(p)},k="swal2-",F=f=>{const p={};for(const v in f)p[f[v]]=k+f[v];return p},C=F(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),de=F(["success","warning","info","question","error"]),ee=()=>document.body.querySelector(".".concat(C.container)),Se=f=>{const p=ee();return p?p.querySelector(f):null},be=f=>Se(".".concat(f)),te=()=>be(C.popup),Ae=()=>be(C.icon),tt=()=>be(C.title),Ue=()=>be(C["html-container"]),it=()=>be(C.image),ht=()=>be(C["progress-steps"]),Ft=()=>be(C["validation-message"]),Me=()=>Se(".".concat(C.actions," .").concat(C.confirm)),nt=()=>Se(".".concat(C.actions," .").concat(C.deny)),At=()=>be(C["input-label"]),j=()=>Se(".".concat(C.loader)),K=()=>Se(".".concat(C.actions," .").concat(C.cancel)),J=()=>be(C.actions),q=()=>be(C.footer),ce=()=>be(C["timer-progress-bar"]),A=()=>be(C.close),N=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,B=()=>{const f=o(te().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((v,_)=>{const le=parseInt(v.getAttribute("tabindex")),Ne=parseInt(_.getAttribute("tabindex"));return le>Ne?1:le<Ne?-1:0}),p=o(te().querySelectorAll(N)).filter(v=>v.getAttribute("tabindex")!=="-1");return r(f.concat(p)).filter(v=>I(v))},R=()=>Z(document.body,C.shown)&&!Z(document.body,C["toast-shown"])&&!Z(document.body,C["no-backdrop"]),W=()=>te()&&Z(te(),C.toast),G=()=>te().hasAttribute("data-loading"),oe={previousBodyPadding:null},Y=(f,p)=>{if(f.textContent="",p){const v=new DOMParser().parseFromString(p,"text/html");o(v.querySelector("head").childNodes).forEach(_=>{f.appendChild(_)}),o(v.querySelector("body").childNodes).forEach(_=>{f.appendChild(_)})}},Z=(f,p)=>{if(!p)return!1;const v=p.split(/\s+/);for(let _=0;_<v.length;_++)if(!f.classList.contains(v[_]))return!1;return!0},X=(f,p)=>{o(f.classList).forEach(v=>{!Object.values(C).includes(v)&&!Object.values(de).includes(v)&&!Object.values(p.showClass).includes(v)&&f.classList.remove(v)})},ge=(f,p,v)=>{if(X(f,p),p.customClass&&p.customClass[v]){if(typeof p.customClass[v]!="string"&&!p.customClass[v].forEach)return s("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(typeof p.customClass[v],'"'));ne(f,p.customClass[v])}},ae=(f,p)=>{if(!p)return null;switch(p){case"select":case"textarea":case"file":return f.querySelector(".".concat(C.popup," > .").concat(C[p]));case"checkbox":return f.querySelector(".".concat(C.popup," > .").concat(C.checkbox," input"));case"radio":return f.querySelector(".".concat(C.popup," > .").concat(C.radio," input:checked"))||f.querySelector(".".concat(C.popup," > .").concat(C.radio," input:first-child"));case"range":return f.querySelector(".".concat(C.popup," > .").concat(C.range," input"));default:return f.querySelector(".".concat(C.popup," > .").concat(C.input))}},he=f=>{if(f.focus(),f.type!=="file"){const p=f.value;f.value="",f.value=p}},pe=(f,p,v)=>{!f||!p||(typeof p=="string"&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(_=>{Array.isArray(f)?f.forEach(le=>{v?le.classList.add(_):le.classList.remove(_)}):v?f.classList.add(_):f.classList.remove(_)}))},ne=(f,p)=>{pe(f,p,!0)},xe=(f,p)=>{pe(f,p,!1)},Oe=(f,p)=>{const v=o(f.childNodes);for(let _=0;_<v.length;_++)if(Z(v[_],p))return v[_]},me=(f,p,v)=>{v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?f.style[p]=typeof v=="number"?"".concat(v,"px"):v:f.style.removeProperty(p)},w=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";f.style.display=p},y=f=>{f.style.display="none"},S=(f,p,v,_)=>{const le=f.querySelector(p);le&&(le.style[v]=_)},$=(f,p,v)=>{p?w(f,v):y(f)},I=f=>!!(f&&(f.offsetWidth||f.offsetHeight||f.getClientRects().length)),ie=()=>!I(Me())&&!I(nt())&&!I(K()),se=f=>f.scrollHeight>f.clientHeight,Te=f=>{const p=window.getComputedStyle(f),v=parseFloat(p.getPropertyValue("animation-duration")||"0"),_=parseFloat(p.getPropertyValue("transition-duration")||"0");return v>0||_>0},ve=function(f){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const v=ce();I(v)&&(p&&(v.style.transition="none",v.style.width="100%"),setTimeout(()=>{v.style.transition="width ".concat(f/1e3,"s linear"),v.style.width="0%"},10))},Le=()=>{const f=ce(),p=parseInt(window.getComputedStyle(f).width);f.style.removeProperty("transition"),f.style.width="100%";const v=parseInt(window.getComputedStyle(f).width),_=p/v*100;f.style.removeProperty("transition"),f.style.width="".concat(_,"%")},Xe=()=>typeof window>"u"||typeof document>"u",Qe=100,ye={},ot=()=>{ye.previousActiveElement&&ye.previousActiveElement.focus?(ye.previousActiveElement.focus(),ye.previousActiveElement=null):document.body&&document.body.focus()},rt=f=>new Promise(p=>{if(!f)return p();const v=window.scrollX,_=window.scrollY;ye.restoreFocusTimeout=setTimeout(()=>{ot(),p()},Qe),window.scrollTo(v,_)}),pt=`
 <div aria-labelledby="`.concat(C.title,'" aria-describedby="').concat(C["html-container"],'" class="').concat(C.popup,`" tabindex="-1">
   <button type="button" class="`).concat(C.close,`"></button>
   <ul class="`).concat(C["progress-steps"],`"></ul>
   <div class="`).concat(C.icon,`"></div>
   <img class="`).concat(C.image,`" />
   <h2 class="`).concat(C.title,'" id="').concat(C.title,`"></h2>
   <div class="`).concat(C["html-container"],'" id="').concat(C["html-container"],`"></div>
   <input class="`).concat(C.input,`" />
   <input type="file" class="`).concat(C.file,`" />
   <div class="`).concat(C.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(C.select,`"></select>
   <div class="`).concat(C.radio,`"></div>
   <label for="`).concat(C.checkbox,'" class="').concat(C.checkbox,`">
     <input type="checkbox" />
     <span class="`).concat(C.label,`"></span>
   </label>
   <textarea class="`).concat(C.textarea,`"></textarea>
   <div class="`).concat(C["validation-message"],'" id="').concat(C["validation-message"],`"></div>
   <div class="`).concat(C.actions,`">
     <div class="`).concat(C.loader,`"></div>
     <button type="button" class="`).concat(C.confirm,`"></button>
     <button type="button" class="`).concat(C.deny,`"></button>
     <button type="button" class="`).concat(C.cancel,`"></button>
   </div>
   <div class="`).concat(C.footer,`"></div>
   <div class="`).concat(C["timer-progress-bar-container"],`">
     <div class="`).concat(C["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),mt=()=>{const f=ee();return f?(f.remove(),xe([document.documentElement,document.body],[C["no-backdrop"],C["toast-shown"],C["has-column"]]),!0):!1},Ve=()=>{ye.currentInstance.resetValidationMessage()},Ht=()=>{const f=te(),p=Oe(f,C.input),v=Oe(f,C.file),_=f.querySelector(".".concat(C.range," input")),le=f.querySelector(".".concat(C.range," output")),Ne=Oe(f,C.select),Pt=f.querySelector(".".concat(C.checkbox," input")),Hn=Oe(f,C.textarea);p.oninput=Ve,v.onchange=Ve,Ne.onchange=Ve,Pt.onchange=Ve,Hn.oninput=Ve,_.oninput=()=>{Ve(),le.value=_.value},_.onchange=()=>{Ve(),_.nextSibling.value=_.value}},Ee=f=>typeof f=="string"?document.querySelector(f):f,fe=f=>{const p=te();p.setAttribute("role",f.toast?"alert":"dialog"),p.setAttribute("aria-live",f.toast?"polite":"assertive"),f.toast||p.setAttribute("aria-modal","true")},$e=f=>{window.getComputedStyle(f).direction==="rtl"&&ne(ee(),C.rtl)},_e=f=>{const p=mt();if(Xe()){l("SweetAlert2 requires document to initialize");return}const v=document.createElement("div");v.className=C.container,p&&ne(v,C["no-transition"]),Y(v,pt);const _=Ee(f.target);_.appendChild(v),fe(f),$e(_),Ht()},Be=(f,p)=>{f instanceof HTMLElement?p.appendChild(f):typeof f=="object"?et(f,p):f&&Y(p,f)},et=(f,p)=>{f.jquery?mn(p,f):Y(p,f.toString())},mn=(f,p)=>{if(f.textContent="",0 in p)for(let v=0;v in p;v++)f.appendChild(p[v].cloneNode(!0));else f.appendChild(p.cloneNode(!0))},bt=(()=>{if(Xe())return!1;const f=document.createElement("div"),p={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&typeof f.style[v]<"u")return p[v];return!1})(),on=()=>{const f=document.createElement("div");f.className=C["scrollbar-measure"],document.body.appendChild(f);const p=f.getBoundingClientRect().width-f.clientWidth;return document.body.removeChild(f),p},Nn=(f,p)=>{const v=J(),_=j();!p.showConfirmButton&&!p.showDenyButton&&!p.showCancelButton?y(v):w(v),ge(v,p,"actions"),ut(v,_,p),Y(_,p.loaderHtml),ge(_,p,"loader")};function ut(f,p,v){const _=Me(),le=nt(),Ne=K();ft(_,"confirm",v),ft(le,"deny",v),ft(Ne,"cancel",v),Pn(_,le,Ne,v),v.reverseButtons&&(v.toast?(f.insertBefore(Ne,_),f.insertBefore(le,_)):(f.insertBefore(Ne,p),f.insertBefore(le,p),f.insertBefore(_,p)))}function Pn(f,p,v,_){if(!_.buttonsStyling)return xe([f,p,v],C.styled);ne([f,p,v],C.styled),_.confirmButtonColor&&(f.style.backgroundColor=_.confirmButtonColor,ne(f,C["default-outline"])),_.denyButtonColor&&(p.style.backgroundColor=_.denyButtonColor,ne(p,C["default-outline"])),_.cancelButtonColor&&(v.style.backgroundColor=_.cancelButtonColor,ne(v,C["default-outline"]))}function ft(f,p,v){$(f,v["show".concat(i(p),"Button")],"inline-block"),Y(f,v["".concat(p,"ButtonText")]),f.setAttribute("aria-label",v["".concat(p,"ButtonAriaLabel")]),f.className=C[p],ge(f,v,"".concat(p,"Button")),ne(f,v["".concat(p,"ButtonClass")])}function gn(f,p){typeof p=="string"?f.style.background=p:p||ne([document.documentElement,document.body],C["no-backdrop"])}function Gt(f,p){p in C?ne(f,C[p]):(s('The "position" parameter is not valid, defaulting to "center"'),ne(f,C.center))}function Vn(f,p){if(p&&typeof p=="string"){const v="grow-".concat(p);v in C&&ne(f,C[v])}}const Fn=(f,p)=>{const v=ee();v&&(gn(v,p.backdrop),Gt(v,p.position),Vn(v,p.grow),ge(v,p,"container"))};var We={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ho=["input","file","range","select","radio","checkbox","textarea"],ei=(f,p)=>{const v=te(),_=We.innerParams.get(f),le=!_||p.input!==_.input;ho.forEach(Ne=>{const Pt=C[Ne],Hn=Oe(v,Pt);Yt(Ne,p.inputAttributes),Hn.className=Pt,le&&y(Hn)}),p.input&&(le&&ls(p),lr(p))},ls=f=>{if(!$n[f.input])return l('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(f.input,'"'));const p=ih(f.input),v=$n[f.input](p,f);w(v),setTimeout(()=>{he(v)})},yr=f=>{for(let p=0;p<f.attributes.length;p++){const v=f.attributes[p].name;["type","value","style"].includes(v)||f.removeAttribute(v)}},Yt=(f,p)=>{const v=ae(te(),f);if(v){yr(v);for(const _ in p)v.setAttribute(_,p[_])}},lr=f=>{const p=ih(f.input);f.customClass&&ne(p,f.customClass.input)},ar=(f,p)=>{(!f.placeholder||p.inputPlaceholder)&&(f.placeholder=p.inputPlaceholder)},br=(f,p,v)=>{if(v.inputLabel){f.id=C.input;const _=document.createElement("label"),le=C["input-label"];_.setAttribute("for",f.id),_.className=le,ne(_,v.customClass.inputLabel),_.innerText=v.inputLabel,p.insertAdjacentElement("beforebegin",_)}},ih=f=>{const p=C[f]?C[f]:C.input;return Oe(te(),p)},$n={};$n.text=$n.email=$n.password=$n.number=$n.tel=$n.url=(f,p)=>(typeof p.inputValue=="string"||typeof p.inputValue=="number"?f.value=p.inputValue:g(p.inputValue)||s('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof p.inputValue,'"')),br(f,f,p),ar(f,p),f.type=p.input,f),$n.file=(f,p)=>(br(f,f,p),ar(f,p),f),$n.range=(f,p)=>{const v=f.querySelector("input"),_=f.querySelector("output");return v.value=p.inputValue,v.type=p.input,_.value=p.inputValue,br(v,f,p),f},$n.select=(f,p)=>{if(f.textContent="",p.inputPlaceholder){const v=document.createElement("option");Y(v,p.inputPlaceholder),v.value="",v.disabled=!0,v.selected=!0,f.appendChild(v)}return br(f,f,p),f},$n.radio=f=>(f.textContent="",f),$n.checkbox=(f,p)=>{const v=ae(te(),"checkbox");v.value="1",v.id=C.checkbox,v.checked=!!p.inputValue;const _=f.querySelector("span");return Y(_,p.inputPlaceholder),f},$n.textarea=(f,p)=>{f.value=p.inputValue,ar(f,p),br(f,f,p);const v=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const _=parseInt(window.getComputedStyle(te()).width),le=()=>{const Ne=f.offsetWidth+v(f);Ne>_?te().style.width="".concat(Ne,"px"):te().style.width=null};new MutationObserver(le).observe(f,{attributes:!0,attributeFilter:["style"]})}}),f};const u0=(f,p)=>{const v=Ue();ge(v,p,"htmlContainer"),p.html?(Be(p.html,v),w(v,"block")):p.text?(v.textContent=p.text,w(v,"block")):y(v),ei(f,p)},d0=(f,p)=>{const v=q();$(v,p.footer),p.footer&&Be(p.footer,v),ge(v,p,"footer")},f0=(f,p)=>{const v=A();Y(v,p.closeButtonHtml),ge(v,p,"closeButton"),$(v,p.showCloseButton),v.setAttribute("aria-label",p.closeButtonAriaLabel)},h0=(f,p)=>{const v=We.innerParams.get(f),_=Ae();if(v&&p.icon===v.icon){sh(_,p),oh(_,p);return}if(!p.icon&&!p.iconHtml)return y(_);if(p.icon&&Object.keys(de).indexOf(p.icon)===-1)return l('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),y(_);w(_),sh(_,p),oh(_,p),ne(_,p.showClass.icon)},oh=(f,p)=>{for(const v in de)p.icon!==v&&xe(f,de[v]);ne(f,de[p.icon]),y0(f,p),p0(),ge(f,p,"icon")},p0=()=>{const f=te(),p=window.getComputedStyle(f).getPropertyValue("background-color"),v=f.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<v.length;_++)v[_].style.backgroundColor=p},m0=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,g0=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,sh=(f,p)=>{f.textContent="",p.iconHtml?Y(f,lh(p.iconHtml)):p.icon==="success"?Y(f,m0):p.icon==="error"?Y(f,g0):Y(f,lh({question:"?",warning:"!",info:"i"}[p.icon]))},y0=(f,p)=>{if(p.iconColor){f.style.color=p.iconColor,f.style.borderColor=p.iconColor;for(const v of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])S(f,v,"backgroundColor",p.iconColor);S(f,".swal2-success-ring","borderColor",p.iconColor)}},lh=f=>'<div class="'.concat(C["icon-content"],'">').concat(f,"</div>"),b0=(f,p)=>{const v=it();if(!p.imageUrl)return y(v);w(v,""),v.setAttribute("src",p.imageUrl),v.setAttribute("alt",p.imageAlt),me(v,"width",p.imageWidth),me(v,"height",p.imageHeight),v.className=C.image,ge(v,p,"image")},v0=f=>{const p=document.createElement("li");return ne(p,C["progress-step"]),Y(p,f),p},w0=f=>{const p=document.createElement("li");return ne(p,C["progress-step-line"]),f.progressStepsDistance&&(p.style.width=f.progressStepsDistance),p},k0=(f,p)=>{const v=ht();if(!p.progressSteps||p.progressSteps.length===0)return y(v);w(v),v.textContent="",p.currentProgressStep>=p.progressSteps.length&&s("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),p.progressSteps.forEach((_,le)=>{const Ne=v0(_);if(v.appendChild(Ne),le===p.currentProgressStep&&ne(Ne,C["active-progress-step"]),le!==p.progressSteps.length-1){const Pt=w0(p);v.appendChild(Pt)}})},x0=(f,p)=>{const v=tt();$(v,p.title||p.titleText,"block"),p.title&&Be(p.title,v),p.titleText&&(v.innerText=p.titleText),ge(v,p,"title")},S0=(f,p)=>{const v=ee(),_=te();p.toast?(me(v,"width",p.width),_.style.width="100%",_.insertBefore(j(),Ae())):me(_,"width",p.width),me(_,"padding",p.padding),p.color&&(_.style.color=p.color),p.background&&(_.style.background=p.background),y(Ft()),C0(_,p)},C0=(f,p)=>{f.className="".concat(C.popup," ").concat(I(f)?p.showClass.popup:""),p.toast?(ne([document.documentElement,document.body],C["toast-shown"]),ne(f,C.toast)):ne(f,C.modal),ge(f,p,"popup"),typeof p.customClass=="string"&&ne(f,p.customClass),p.icon&&ne(f,C["icon-".concat(p.icon)])},ah=(f,p)=>{S0(f,p),Fn(f,p),k0(f,p),h0(f,p),b0(f,p),x0(f,p),f0(f,p),u0(f,p),Nn(f,p),d0(f,p),typeof p.didRender=="function"&&p.didRender(te())},po=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),T0=()=>{o(document.body.children).forEach(f=>{f===ee()||f.contains(ee())||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")),f.setAttribute("aria-hidden","true"))})},ch=()=>{o(document.body.children).forEach(f=>{f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},uh=["swal-title","swal-html","swal-footer"],E0=f=>{const p=typeof f.template=="string"?document.querySelector(f.template):f.template;if(!p)return{};const v=p.content;return $0(v),Object.assign(O0(v),A0(v),M0(v),_0(v),N0(v),P0(v,uh))},O0=f=>{const p={};return o(f.querySelectorAll("swal-param")).forEach(v=>{$i(v,["name","value"]);const _=v.getAttribute("name"),le=v.getAttribute("value");typeof b[_]=="boolean"&&le==="false"&&(p[_]=!1),typeof b[_]=="object"&&(p[_]=JSON.parse(le))}),p},A0=f=>{const p={};return o(f.querySelectorAll("swal-button")).forEach(v=>{$i(v,["type","color","aria-label"]);const _=v.getAttribute("type");p["".concat(_,"ButtonText")]=v.innerHTML,p["show".concat(i(_),"Button")]=!0,v.hasAttribute("color")&&(p["".concat(_,"ButtonColor")]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(p["".concat(_,"ButtonAriaLabel")]=v.getAttribute("aria-label"))}),p},M0=f=>{const p={},v=f.querySelector("swal-image");return v&&($i(v,["src","width","height","alt"]),v.hasAttribute("src")&&(p.imageUrl=v.getAttribute("src")),v.hasAttribute("width")&&(p.imageWidth=v.getAttribute("width")),v.hasAttribute("height")&&(p.imageHeight=v.getAttribute("height")),v.hasAttribute("alt")&&(p.imageAlt=v.getAttribute("alt"))),p},_0=f=>{const p={},v=f.querySelector("swal-icon");return v&&($i(v,["type","color"]),v.hasAttribute("type")&&(p.icon=v.getAttribute("type")),v.hasAttribute("color")&&(p.iconColor=v.getAttribute("color")),p.iconHtml=v.innerHTML),p},N0=f=>{const p={},v=f.querySelector("swal-input");v&&($i(v,["type","label","placeholder","value"]),p.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(p.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(p.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(p.inputValue=v.getAttribute("value")));const _=f.querySelectorAll("swal-input-option");return _.length&&(p.inputOptions={},o(_).forEach(le=>{$i(le,["value"]);const Ne=le.getAttribute("value"),Pt=le.innerHTML;p.inputOptions[Ne]=Pt})),p},P0=(f,p)=>{const v={};for(const _ in p){const le=p[_],Ne=f.querySelector(le);Ne&&($i(Ne,[]),v[le.replace(/^swal-/,"")]=Ne.innerHTML.trim())}return v},$0=f=>{const p=uh.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);o(f.children).forEach(v=>{const _=v.tagName.toLowerCase();p.indexOf(_)===-1&&s("Unrecognized element <".concat(_,">"))})},$i=(f,p)=>{o(f.attributes).forEach(v=>{p.indexOf(v.name)===-1&&s(['Unrecognized attribute "'.concat(v.name,'" on <').concat(f.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})};var dh={email:(f,p)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid email address"),url:(f,p)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid URL")};function D0(f){f.inputValidator||Object.keys(dh).forEach(p=>{f.input===p&&(f.inputValidator=dh[p])})}function I0(f){(!f.target||typeof f.target=="string"&&!document.querySelector(f.target)||typeof f.target!="string"&&!f.target.appendChild)&&(s('Target parameter is not valid, defaulting to "body"'),f.target="body")}function L0(f){D0(f),f.showLoaderOnConfirm&&!f.preConfirm&&s(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),I0(f),typeof f.title=="string"&&(f.title=f.title.split(`
`).join("<br />")),_e(f)}class B0{constructor(p,v){this.callback=p,this.remaining=v,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(p){const v=this.running;return v&&this.stop(),this.remaining+=p,v&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const R0=()=>{oe.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(oe.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(oe.previousBodyPadding+on(),"px"))},V0=()=>{oe.previousBodyPadding!==null&&(document.body.style.paddingRight="".concat(oe.previousBodyPadding,"px"),oe.previousBodyPadding=null)},F0=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!Z(document.body,C.iosfix)){const f=document.body.scrollTop;document.body.style.top="".concat(f*-1,"px"),ne(document.body,C.iosfix),j0(),H0()}},H0=()=>{const f=navigator.userAgent,p=!!f.match(/iPad/i)||!!f.match(/iPhone/i),v=!!f.match(/WebKit/i);p&&v&&!f.match(/CriOS/i)&&te().scrollHeight>window.innerHeight-44&&(ee().style.paddingBottom="".concat(44,"px"))},j0=()=>{const f=ee();let p;f.ontouchstart=v=>{p=z0(v)},f.ontouchmove=v=>{p&&(v.preventDefault(),v.stopPropagation())}},z0=f=>{const p=f.target,v=ee();return K0(f)||U0(f)?!1:p===v||!se(v)&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!(se(Ue())&&Ue().contains(p))},K0=f=>f.touches&&f.touches.length&&f.touches[0].touchType==="stylus",U0=f=>f.touches&&f.touches.length>1,W0=()=>{if(Z(document.body,C.iosfix)){const f=parseInt(document.body.style.top,10);xe(document.body,C.iosfix),document.body.style.top="",document.body.scrollTop=f*-1}},fh=10,q0=f=>{const p=ee(),v=te();typeof f.willOpen=="function"&&f.willOpen(v);const _=window.getComputedStyle(document.body).overflowY;Y0(p,v,f),setTimeout(()=>{J0(p,v)},fh),R()&&(G0(p,f.scrollbarPadding,_),T0()),!W()&&!ye.previousActiveElement&&(ye.previousActiveElement=document.activeElement),typeof f.didOpen=="function"&&setTimeout(()=>f.didOpen(v)),xe(p,C["no-transition"])},hh=f=>{const p=te();if(f.target!==p)return;const v=ee();p.removeEventListener(bt,hh),v.style.overflowY="auto"},J0=(f,p)=>{bt&&Te(p)?(f.style.overflowY="hidden",p.addEventListener(bt,hh)):f.style.overflowY="auto"},G0=(f,p,v)=>{F0(),p&&v!=="hidden"&&R0(),setTimeout(()=>{f.scrollTop=0})},Y0=(f,p,v)=>{ne(f,v.showClass.backdrop),p.style.setProperty("opacity","0","important"),w(p,"grid"),setTimeout(()=>{ne(p,v.showClass.popup),p.style.removeProperty("opacity")},fh),ne([document.documentElement,document.body],C.shown),v.heightAuto&&v.backdrop&&!v.toast&&ne([document.documentElement,document.body],C["height-auto"])},mo=f=>{let p=te();p||new Cl,p=te();const v=j();W()?y(Ae()):X0(p,f),w(v),p.setAttribute("data-loading",!0),p.setAttribute("aria-busy",!0),p.focus()},X0=(f,p)=>{const v=J(),_=j();!p&&I(Me())&&(p=Me()),w(v),p&&(y(p),_.setAttribute("data-button-to-replace",p.className)),_.parentNode.insertBefore(_,p),ne([f,v],C.loading)},Z0=(f,p)=>{p.input==="select"||p.input==="radio"?rv(f,p):["text","email","number","tel","textarea"].includes(p.input)&&(h(p.inputValue)||g(p.inputValue))&&(mo(Me()),iv(f,p))},Q0=(f,p)=>{const v=f.getInput();if(!v)return null;switch(p.input){case"checkbox":return ev(v);case"radio":return tv(v);case"file":return nv(v);default:return p.inputAutoTrim?v.value.trim():v.value}},ev=f=>f.checked?1:0,tv=f=>f.checked?f.value:null,nv=f=>f.files.length?f.getAttribute("multiple")!==null?f.files:f.files[0]:null,rv=(f,p)=>{const v=te(),_=le=>ov[p.input](v,Bc(le),p);h(p.inputOptions)||g(p.inputOptions)?(mo(Me()),m(p.inputOptions).then(le=>{f.hideLoading(),_(le)})):typeof p.inputOptions=="object"?_(p.inputOptions):l("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof p.inputOptions))},iv=(f,p)=>{const v=f.getInput();y(v),m(p.inputValue).then(_=>{v.value=p.input==="number"?parseFloat(_)||0:"".concat(_),w(v),v.focus(),f.hideLoading()}).catch(_=>{l("Error in inputValue promise: ".concat(_)),v.value="",w(v),v.focus(),f.hideLoading()})},ov={select:(f,p,v)=>{const _=Oe(f,C.select),le=(Ne,Pt,Hn)=>{const yn=document.createElement("option");yn.value=Hn,Y(yn,Pt),yn.selected=ph(Hn,v.inputValue),Ne.appendChild(yn)};p.forEach(Ne=>{const Pt=Ne[0],Hn=Ne[1];if(Array.isArray(Hn)){const yn=document.createElement("optgroup");yn.label=Pt,yn.disabled=!1,_.appendChild(yn),Hn.forEach(yo=>le(yn,yo[1],yo[0]))}else le(_,Hn,Pt)}),_.focus()},radio:(f,p,v)=>{const _=Oe(f,C.radio);p.forEach(Ne=>{const Pt=Ne[0],Hn=Ne[1],yn=document.createElement("input"),yo=document.createElement("label");yn.type="radio",yn.name=C.radio,yn.value=Pt,ph(Pt,v.inputValue)&&(yn.checked=!0);const Kc=document.createElement("span");Y(Kc,Hn),Kc.className=C.label,yo.appendChild(yn),yo.appendChild(Kc),_.appendChild(yo)});const le=_.querySelectorAll("input");le.length&&le[0].focus()}},Bc=f=>{const p=[];return typeof Map<"u"&&f instanceof Map?f.forEach((v,_)=>{let le=v;typeof le=="object"&&(le=Bc(le)),p.push([_,le])}):Object.keys(f).forEach(v=>{let _=f[v];typeof _=="object"&&(_=Bc(_)),p.push([v,_])}),p},ph=(f,p)=>p&&p.toString()===f.toString();function mh(){const f=We.innerParams.get(this);if(!f)return;const p=We.domCache.get(this);y(p.loader),W()?f.icon&&w(Ae()):sv(p),xe([p.popup,p.actions],C.loading),p.popup.removeAttribute("aria-busy"),p.popup.removeAttribute("data-loading"),p.confirmButton.disabled=!1,p.denyButton.disabled=!1,p.cancelButton.disabled=!1}const sv=f=>{const p=f.popup.getElementsByClassName(f.loader.getAttribute("data-button-to-replace"));p.length?w(p[0],"inline-block"):ie()&&y(f.actions)};function lv(f){const p=We.innerParams.get(f||this),v=We.domCache.get(f||this);return v?ae(v.popup,p.input):null}var as={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function gh(f,p,v,_){W()?yh(f,_):(rt(v).then(()=>yh(f,_)),ye.keydownTarget.removeEventListener("keydown",ye.keydownHandler,{capture:ye.keydownListenerCapture}),ye.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(p.setAttribute("style","display:none !important"),p.removeAttribute("class"),p.innerHTML=""):p.remove(),R()&&(V0(),W0(),ch()),av()}function av(){xe([document.documentElement,document.body],[C.shown,C["height-auto"],C["no-backdrop"],C["toast-shown"]])}function xl(f){f=fv(f);const p=as.swalPromiseResolve.get(this),v=uv(this);this.isAwaitingPromise()?f.isDismissed||(cs(this),p(f)):v&&p(f)}function cv(){return!!We.awaitingPromise.get(this)}const uv=f=>{const p=te();if(!p)return!1;const v=We.innerParams.get(f);if(!v||Z(p,v.hideClass.popup))return!1;xe(p,v.showClass.popup),ne(p,v.hideClass.popup);const _=ee();return xe(_,v.showClass.backdrop),ne(_,v.hideClass.backdrop),hv(f,p,v),!0};function dv(f){const p=as.swalPromiseReject.get(this);cs(this),p&&p(f)}const cs=f=>{f.isAwaitingPromise()&&(We.awaitingPromise.delete(f),We.innerParams.get(f)||f._destroy())},fv=f=>typeof f>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},f),hv=(f,p,v)=>{const _=ee(),le=bt&&Te(p);typeof v.willClose=="function"&&v.willClose(p),le?pv(f,p,_,v.returnFocus,v.didClose):gh(f,_,v.returnFocus,v.didClose)},pv=(f,p,v,_,le)=>{ye.swalCloseEventFinishedCallback=gh.bind(null,f,v,_,le),p.addEventListener(bt,function(Ne){Ne.target===p&&(ye.swalCloseEventFinishedCallback(),delete ye.swalCloseEventFinishedCallback)})},yh=(f,p)=>{setTimeout(()=>{typeof p=="function"&&p.bind(f.params)(),f._destroy()})};function bh(f,p,v){const _=We.domCache.get(f);p.forEach(le=>{_[le].disabled=v})}function vh(f,p){if(!f)return!1;if(f.type==="radio"){const v=f.parentNode.parentNode.querySelectorAll("input");for(let _=0;_<v.length;_++)v[_].disabled=p}else f.disabled=p}function mv(){bh(this,["confirmButton","denyButton","cancelButton"],!1)}function gv(){bh(this,["confirmButton","denyButton","cancelButton"],!0)}function yv(){return vh(this.getInput(),!1)}function bv(){return vh(this.getInput(),!0)}function vv(f){const p=We.domCache.get(this),v=We.innerParams.get(this);Y(p.validationMessage,f),p.validationMessage.className=C["validation-message"],v.customClass&&v.customClass.validationMessage&&ne(p.validationMessage,v.customClass.validationMessage),w(p.validationMessage);const _=this.getInput();_&&(_.setAttribute("aria-invalid",!0),_.setAttribute("aria-describedby",C["validation-message"]),he(_),ne(_,C.inputerror))}function wv(){const f=We.domCache.get(this);f.validationMessage&&y(f.validationMessage);const p=this.getInput();p&&(p.removeAttribute("aria-invalid"),p.removeAttribute("aria-describedby"),xe(p,C.inputerror))}function kv(){return We.domCache.get(this).progressSteps}function xv(f){const p=te(),v=We.innerParams.get(this);if(!p||Z(p,v.hideClass.popup))return s("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const _=Sv(f),le=Object.assign({},v,_);ah(this,le),We.innerParams.set(this,le),Object.defineProperties(this,{params:{value:Object.assign({},this.params,f),writable:!1,enumerable:!0}})}const Sv=f=>{const p={};return Object.keys(f).forEach(v=>{L(v)?p[v]=f[v]:s('Invalid parameter to update: "'.concat(v,`". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`))}),p};function Cv(){const f=We.domCache.get(this),p=We.innerParams.get(this);if(!p){wh(this);return}f.popup&&ye.swalCloseEventFinishedCallback&&(ye.swalCloseEventFinishedCallback(),delete ye.swalCloseEventFinishedCallback),ye.deferDisposalTimer&&(clearTimeout(ye.deferDisposalTimer),delete ye.deferDisposalTimer),typeof p.didDestroy=="function"&&p.didDestroy(),Tv(this)}const Tv=f=>{wh(f),delete f.params,delete ye.keydownHandler,delete ye.keydownTarget,delete ye.currentInstance},wh=f=>{f.isAwaitingPromise()?(Rc(We,f),We.awaitingPromise.set(f,!0)):(Rc(as,f),Rc(We,f))},Rc=(f,p)=>{for(const v in f)f[v].delete(p)};var kh=Object.freeze({hideLoading:mh,disableLoading:mh,getInput:lv,close:xl,isAwaitingPromise:cv,rejectPromise:dv,handleAwaitingPromise:cs,closePopup:xl,closeModal:xl,closeToast:xl,enableButtons:mv,disableButtons:gv,enableInput:yv,disableInput:bv,showValidationMessage:vv,resetValidationMessage:wv,getProgressSteps:kv,update:xv,_destroy:Cv});const Ev=f=>{const p=We.innerParams.get(f);f.disableButtons(),p.input?xh(f,"confirm"):Fc(f,!0)},Ov=f=>{const p=We.innerParams.get(f);f.disableButtons(),p.returnInputValueOnDeny?xh(f,"deny"):Vc(f,!1)},Av=(f,p)=>{f.disableButtons(),p(po.cancel)},xh=(f,p)=>{const v=We.innerParams.get(f);if(!v.input)return l('The "input" parameter is needed to be set when using returnInputValueOn'.concat(i(p)));const _=Q0(f,v);v.inputValidator?Mv(f,_,p):f.getInput().checkValidity()?p==="deny"?Vc(f,_):Fc(f,_):(f.enableButtons(),f.showValidationMessage(v.validationMessage))},Mv=(f,p,v)=>{const _=We.innerParams.get(f);f.disableInput(),Promise.resolve().then(()=>m(_.inputValidator(p,_.validationMessage))).then(le=>{f.enableButtons(),f.enableInput(),le?f.showValidationMessage(le):v==="deny"?Vc(f,p):Fc(f,p)})},Vc=(f,p)=>{const v=We.innerParams.get(f||void 0);v.showLoaderOnDeny&&mo(nt()),v.preDeny?(We.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preDeny(p,v.validationMessage))).then(_=>{_===!1?(f.hideLoading(),cs(f)):f.closePopup({isDenied:!0,value:typeof _>"u"?p:_})}).catch(_=>Ch(f||void 0,_))):f.closePopup({isDenied:!0,value:p})},Sh=(f,p)=>{f.closePopup({isConfirmed:!0,value:p})},Ch=(f,p)=>{f.rejectPromise(p)},Fc=(f,p)=>{const v=We.innerParams.get(f||void 0);v.showLoaderOnConfirm&&mo(),v.preConfirm?(f.resetValidationMessage(),We.awaitingPromise.set(f||void 0,!0),Promise.resolve().then(()=>m(v.preConfirm(p,v.validationMessage))).then(_=>{I(Ft())||_===!1?(f.hideLoading(),cs(f)):Sh(f,typeof _>"u"?p:_)}).catch(_=>Ch(f||void 0,_))):Sh(f,p)},_v=(f,p,v)=>{We.innerParams.get(f).toast?Nv(f,p,v):($v(p),Dv(p),Iv(f,p,v))},Nv=(f,p,v)=>{p.popup.onclick=()=>{const _=We.innerParams.get(f);_&&(Pv(_)||_.timer||_.input)||v(po.close)}},Pv=f=>f.showConfirmButton||f.showDenyButton||f.showCancelButton||f.showCloseButton;let Sl=!1;const $v=f=>{f.popup.onmousedown=()=>{f.container.onmouseup=function(p){f.container.onmouseup=void 0,p.target===f.container&&(Sl=!0)}}},Dv=f=>{f.container.onmousedown=()=>{f.popup.onmouseup=function(p){f.popup.onmouseup=void 0,(p.target===f.popup||f.popup.contains(p.target))&&(Sl=!0)}}},Iv=(f,p,v)=>{p.container.onclick=_=>{const le=We.innerParams.get(f);if(Sl){Sl=!1;return}_.target===p.container&&d(le.allowOutsideClick)&&v(po.backdrop)}},Lv=()=>I(te()),Th=()=>Me()&&Me().click(),Bv=()=>nt()&&nt().click(),Rv=()=>K()&&K().click(),Vv=(f,p,v,_)=>{p.keydownTarget&&p.keydownHandlerAdded&&(p.keydownTarget.removeEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!1),v.toast||(p.keydownHandler=le=>Hv(f,le,_),p.keydownTarget=v.keydownListenerCapture?window:te(),p.keydownListenerCapture=v.keydownListenerCapture,p.keydownTarget.addEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!0)},Hc=(f,p,v)=>{const _=B();if(_.length)return p=p+v,p===_.length?p=0:p===-1&&(p=_.length-1),_[p].focus();te().focus()},Eh=["ArrowRight","ArrowDown"],Fv=["ArrowLeft","ArrowUp"],Hv=(f,p,v)=>{const _=We.innerParams.get(f);_&&(p.isComposing||p.keyCode===229||(_.stopKeydownPropagation&&p.stopPropagation(),p.key==="Enter"?jv(f,p,_):p.key==="Tab"?zv(p,_):[...Eh,...Fv].includes(p.key)?Kv(p.key):p.key==="Escape"&&Uv(p,_,v)))},jv=(f,p,v)=>{if(d(v.allowEnterKey)&&p.target&&f.getInput()&&p.target.outerHTML===f.getInput().outerHTML){if(["textarea","file"].includes(v.input))return;Th(),p.preventDefault()}},zv=(f,p)=>{const v=f.target,_=B();let le=-1;for(let Ne=0;Ne<_.length;Ne++)if(v===_[Ne]){le=Ne;break}f.shiftKey?Hc(p,le,-1):Hc(p,le,1),f.stopPropagation(),f.preventDefault()},Kv=f=>{const p=Me(),v=nt(),_=K();if(![p,v,_].includes(document.activeElement))return;const le=Eh.includes(f)?"nextElementSibling":"previousElementSibling";let Ne=document.activeElement;for(let Pt=0;Pt<J().children.length;Pt++){if(Ne=Ne[le],!Ne)return;if(I(Ne)&&Ne instanceof HTMLButtonElement)break}Ne instanceof HTMLButtonElement&&Ne.focus()},Uv=(f,p,v)=>{d(p.allowEscapeKey)&&(f.preventDefault(),v(po.esc))},Wv=f=>typeof f=="object"&&f.jquery,Oh=f=>f instanceof Element||Wv(f),qv=f=>{const p={};return typeof f[0]=="object"&&!Oh(f[0])?Object.assign(p,f[0]):["title","html","icon"].forEach((v,_)=>{const le=f[_];typeof le=="string"||Oh(le)?p[v]=le:le!==void 0&&l("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(typeof le))}),p};function Jv(){const f=this;for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return new f(...v)}function Gv(f){class p extends this{_main(_,le){return super._main(_,Object.assign({},f,le))}}return p}const Yv=()=>ye.timeout&&ye.timeout.getTimerLeft(),Ah=()=>{if(ye.timeout)return Le(),ye.timeout.stop()},Mh=()=>{if(ye.timeout){const f=ye.timeout.start();return ve(f),f}},Xv=()=>{const f=ye.timeout;return f&&(f.running?Ah():Mh())},Zv=f=>{if(ye.timeout){const p=ye.timeout.increase(f);return ve(p,!0),p}},Qv=()=>ye.timeout&&ye.timeout.isRunning();let _h=!1;const jc={};function ew(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";jc[f]=this,_h||(document.body.addEventListener("click",tw),_h=!0)}const tw=f=>{for(let p=f.target;p&&p!==document;p=p.parentNode)for(const v in jc){const _=p.getAttribute(v);if(_){jc[v].fire({template:_});return}}};var nw=Object.freeze({isValidParameter:P,isUpdatableParameter:L,isDeprecatedParameter:D,argsToParams:qv,isVisible:Lv,clickConfirm:Th,clickDeny:Bv,clickCancel:Rv,getContainer:ee,getPopup:te,getTitle:tt,getHtmlContainer:Ue,getImage:it,getIcon:Ae,getInputLabel:At,getCloseButton:A,getActions:J,getConfirmButton:Me,getDenyButton:nt,getCancelButton:K,getLoader:j,getFooter:q,getTimerProgressBar:ce,getFocusableElements:B,getValidationMessage:Ft,isLoading:G,fire:Jv,mixin:Gv,showLoading:mo,enableLoading:mo,getTimerLeft:Yv,stopTimer:Ah,resumeTimer:Mh,toggleTimer:Xv,increaseTimer:Zv,isTimerRunning:Qv,bindClickHandler:ew});let zc;class go{constructor(){if(typeof window>"u")return;zc=this;for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];const le=Object.freeze(this.constructor.argsToParams(v));Object.defineProperties(this,{params:{value:le,writable:!1,enumerable:!0,configurable:!0}});const Ne=this._main(this.params);We.promise.set(this,Ne)}_main(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};O(Object.assign({},v,p)),ye.currentInstance&&(ye.currentInstance._destroy(),R()&&ch()),ye.currentInstance=this;const _=iw(p,v);L0(_),Object.freeze(_),ye.timeout&&(ye.timeout.stop(),delete ye.timeout),clearTimeout(ye.restoreFocusTimeout);const le=ow(this);return ah(this,_),We.innerParams.set(this,_),rw(this,le,_)}then(p){return We.promise.get(this).then(p)}finally(p){return We.promise.get(this).finally(p)}}const rw=(f,p,v)=>new Promise((_,le)=>{const Ne=Pt=>{f.closePopup({isDismissed:!0,dismiss:Pt})};as.swalPromiseResolve.set(f,_),as.swalPromiseReject.set(f,le),p.confirmButton.onclick=()=>Ev(f),p.denyButton.onclick=()=>Ov(f),p.cancelButton.onclick=()=>Av(f,Ne),p.closeButton.onclick=()=>Ne(po.close),_v(f,p,Ne),Vv(f,ye,v,Ne),Z0(f,v),q0(v),sw(ye,v,Ne),lw(p,v),setTimeout(()=>{p.container.scrollTop=0})}),iw=(f,p)=>{const v=E0(f),_=Object.assign({},b,p,v,f);return _.showClass=Object.assign({},b.showClass,_.showClass),_.hideClass=Object.assign({},b.hideClass,_.hideClass),_},ow=f=>{const p={popup:te(),container:ee(),actions:J(),confirmButton:Me(),denyButton:nt(),cancelButton:K(),loader:j(),closeButton:A(),validationMessage:Ft(),progressSteps:ht()};return We.domCache.set(f,p),p},sw=(f,p,v)=>{const _=ce();y(_),p.timer&&(f.timeout=new B0(()=>{v("timer"),delete f.timeout},p.timer),p.timerProgressBar&&(w(_),ge(_,p,"timerProgressBar"),setTimeout(()=>{f.timeout&&f.timeout.running&&ve(p.timer)})))},lw=(f,p)=>{if(!p.toast){if(!d(p.allowEnterKey))return cw();aw(f,p)||Hc(p,-1,1)}},aw=(f,p)=>p.focusDeny&&I(f.denyButton)?(f.denyButton.focus(),!0):p.focusCancel&&I(f.cancelButton)?(f.cancelButton.focus(),!0):p.focusConfirm&&I(f.confirmButton)?(f.confirmButton.focus(),!0):!1,cw=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(go.prototype,kh),Object.assign(go,nw),Object.keys(kh).forEach(f=>{go[f]=function(){if(zc)return zc[f](...arguments)}}),go.DismissReason=po,go.version="11.4.4";const Cl=go;return Cl.default=Cl,Cl}),typeof ti<"u"&&ti.Sweetalert2&&(ti.swal=ti.sweetAlert=ti.Swal=ti.SweetAlert=ti.Sweetalert2)})(a0);var p$=a0.exports;const Jl=h$(p$);class m${static install(e,n={}){var r;const i=Jl.mixin(n),o=function(...s){return i.fire.call(i,...s)};Object.assign(o,Jl),Object.keys(Jl).filter(s=>typeof Jl[s]=="function").forEach(s=>{o[s]=i[s].bind(i)}),(r=e.config)!=null&&r.globalProperties&&!e.config.globalProperties.$swal?(e.config.globalProperties.$swal=o,e.provide("$swal",o)):Object.prototype.hasOwnProperty.call(e,"$swal")||(e.prototype.$swal=o,e.swal=o)}}const c0=$x(f$);c0.use(m$);c0.mount("#app");
