(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function qf(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const mt={},No=[],vr=()=>{},Z1=()=>!1,nc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Jf=t=>t.startsWith("onUpdate:"),un=Object.assign,Yf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Q1=Object.prototype.hasOwnProperty,at=(t,e)=>Q1.call(t,e),Ve=Array.isArray,Po=t=>rc(t)==="[object Map]",Wm=t=>rc(t)==="[object Set]",We=t=>typeof t=="function",Rt=t=>typeof t=="string",ki=t=>typeof t=="symbol",xt=t=>t!==null&&typeof t=="object",qm=t=>(xt(t)||We(t))&&We(t.then)&&We(t.catch),Jm=Object.prototype.toString,rc=t=>Jm.call(t),ew=t=>rc(t).slice(8,-1),Ym=t=>rc(t)==="[object Object]",Gf=t=>Rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xs=qf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ic=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},tw=/-(\w)/g,er=ic(t=>t.replace(tw,(e,n)=>n?n.toUpperCase():"")),nw=/\B([A-Z])/g,io=ic(t=>t.replace(nw,"-$1").toLowerCase()),oc=ic(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hc=ic(t=>t?`on${oc(t)}`:""),fi=(t,e)=>!Object.is(t,e),Wl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Gm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},$u=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Oh;const sc=()=>Oh||(Oh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Io(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Rt(r)?sw(r):Io(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(Rt(t)||xt(t))return t}const rw=/;(?![^(]*\))/g,iw=/:([^]+)/,ow=/\/\*[^]*?\*\//g;function sw(t){const e={};return t.replace(ow,"").split(rw).forEach(n=>{if(n){const r=n.split(iw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function di(t){let e="";if(Rt(t))e=t;else if(Ve(t))for(let n=0;n<t.length;n++){const r=di(t[n]);r&&(e+=r+" ")}else if(xt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const lw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aw=qf(lw);function Xm(t){return!!t||t===""}const Zm=t=>!!(t&&t.__v_isRef===!0),Rr=t=>Rt(t)?t:t==null?"":Ve(t)||xt(t)&&(t.toString===Jm||!We(t.toString))?Zm(t)?Rr(t.value):JSON.stringify(t,Qm,2):String(t),Qm=(t,e)=>Zm(e)?Qm(t,e.value):Po(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],o)=>(n[zc(r,o)+" =>"]=i,n),{})}:Wm(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>zc(n))}:ki(e)?zc(e):xt(e)&&!Ve(e)&&!Ym(e)?String(e):e,zc=(t,e="")=>{var n;return ki(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bn;class cw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bn,!e&&bn&&(this.index=(bn.scopes||(bn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=bn;try{return bn=this,e()}finally{bn=n}}}on(){bn=this}off(){bn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function eg(){return bn}function uw(t,e=!1){bn&&bn.cleanups.push(t)}let bt;const Kc=new WeakSet;class tg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bn&&bn.active&&bn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Kc.has(this)&&(Kc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Eh(this),ig(this);const e=bt,n=ar;bt=this,ar=!0;try{return this.fn()}finally{og(this),bt=e,ar=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Qf(e);this.deps=this.depsTail=void 0,Eh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Kc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ru(this)&&this.run()}get dirty(){return Ru(this)}}let ng=0,ks,Cs;function rg(t,e=!1){if(t.flags|=8,e){t.next=Cs,Cs=t;return}t.next=ks,ks=t}function Xf(){ng++}function Zf(){if(--ng>0)return;if(Cs){let e=Cs;for(Cs=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ks;){let e=ks;for(ks=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ig(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function og(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Qf(r),fw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Ru(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(sg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function sg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Hs))return;t.globalVersion=Hs;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Ru(t)){t.flags&=-3;return}const n=bt,r=ar;bt=t,ar=!0;try{ig(t);const i=t.fn(t._value);(e.version===0||fi(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{bt=n,ar=r,og(t),t.flags&=-3}}function Qf(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Qf(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function fw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ar=!0;const lg=[];function Ci(){lg.push(ar),ar=!1}function Oi(){const t=lg.pop();ar=t===void 0?!0:t}function Eh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=bt;bt=void 0;try{e()}finally{bt=n}}}let Hs=0;class dw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class lc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!bt||!ar||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new dw(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,ag(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=r)}return n}trigger(e){this.version++,Hs++,this.notify(e)}notify(e){Xf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Zf()}}}function ag(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)ag(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ya=new WeakMap,zi=Symbol(""),Bu=Symbol(""),zs=Symbol("");function on(t,e,n){if(ar&&bt){let r=ya.get(t);r||ya.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new lc),i.map=r,i.key=n),i.track()}}function Ir(t,e,n,r,i,o){const s=ya.get(t);if(!s){Hs++;return}const l=a=>{a&&a.trigger()};if(Xf(),e==="clear")s.forEach(l);else{const a=Ve(t),c=a&&Gf(n);if(a&&n==="length"){const u=Number(r);s.forEach((f,h)=>{(h==="length"||h===zs||!ki(h)&&h>=u)&&l(f)})}else switch((n!==void 0||s.has(void 0))&&l(s.get(n)),c&&l(s.get(zs)),e){case"add":a?c&&l(s.get("length")):(l(s.get(zi)),Po(t)&&l(s.get(Bu)));break;case"delete":a||(l(s.get(zi)),Po(t)&&l(s.get(Bu)));break;case"set":Po(t)&&l(s.get(zi));break}}Zf()}function hw(t,e){const n=ya.get(t);return n&&n.get(e)}function ho(t){const e=st(t);return e===t?e:(on(e,"iterate",zs),Zn(t)?e:e.map(sn))}function ac(t){return on(t=st(t),"iterate",zs),t}const pw={__proto__:null,[Symbol.iterator](){return Uc(this,Symbol.iterator,sn)},concat(...t){return ho(this).concat(...t.map(e=>Ve(e)?ho(e):e))},entries(){return Uc(this,"entries",t=>(t[1]=sn(t[1]),t))},every(t,e){return Tr(this,"every",t,e,void 0,arguments)},filter(t,e){return Tr(this,"filter",t,e,n=>n.map(sn),arguments)},find(t,e){return Tr(this,"find",t,e,sn,arguments)},findIndex(t,e){return Tr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Tr(this,"findLast",t,e,sn,arguments)},findLastIndex(t,e){return Tr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Tr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wc(this,"includes",t)},indexOf(...t){return Wc(this,"indexOf",t)},join(t){return ho(this).join(t)},lastIndexOf(...t){return Wc(this,"lastIndexOf",t)},map(t,e){return Tr(this,"map",t,e,void 0,arguments)},pop(){return as(this,"pop")},push(...t){return as(this,"push",t)},reduce(t,...e){return Th(this,"reduce",t,e)},reduceRight(t,...e){return Th(this,"reduceRight",t,e)},shift(){return as(this,"shift")},some(t,e){return Tr(this,"some",t,e,void 0,arguments)},splice(...t){return as(this,"splice",t)},toReversed(){return ho(this).toReversed()},toSorted(t){return ho(this).toSorted(t)},toSpliced(...t){return ho(this).toSpliced(...t)},unshift(...t){return as(this,"unshift",t)},values(){return Uc(this,"values",sn)}};function Uc(t,e,n){const r=ac(t),i=r[e]();return r!==t&&!Zn(t)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const mw=Array.prototype;function Tr(t,e,n,r,i,o){const s=ac(t),l=s!==t&&!Zn(t),a=s[e];if(a!==mw[e]){const f=a.apply(t,o);return l?sn(f):f}let c=n;s!==t&&(l?c=function(f,h){return n.call(this,sn(f),h,t)}:n.length>2&&(c=function(f,h){return n.call(this,f,h,t)}));const u=a.call(s,c,r);return l&&i?i(u):u}function Th(t,e,n,r){const i=ac(t);let o=n;return i!==t&&(Zn(t)?n.length>3&&(o=function(s,l,a){return n.call(this,s,l,a,t)}):o=function(s,l,a){return n.call(this,s,sn(l),a,t)}),i[e](o,...r)}function Wc(t,e,n){const r=st(t);on(r,"iterate",zs);const i=r[e](...n);return(i===-1||i===!1)&&nd(n[0])?(n[0]=st(n[0]),r[e](...n)):i}function as(t,e,n=[]){Ci(),Xf();const r=st(t)[e].apply(t,n);return Zf(),Oi(),r}const gw=qf("__proto__,__v_isRef,__isVue"),cg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ki));function yw(t){ki(t)||(t=String(t));const e=st(this);return on(e,"has",t),e.hasOwnProperty(t)}class ug{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?Tw:pg:o?hg:dg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Ve(e);if(!i){let a;if(s&&(a=pw[n]))return a;if(n==="hasOwnProperty")return yw}const l=Reflect.get(e,n,Dt(e)?e:r);return(ki(n)?cg.has(n):gw(n))||(i||on(e,"get",n),o)?l:Dt(l)?s&&Gf(n)?l:l.value:xt(l)?i?mg(l):cc(l):l}}class fg extends ug{constructor(e=!1){super(!1,e)}set(e,n,r,i){let o=e[n];if(!this._isShallow){const a=Xi(o);if(!Zn(r)&&!Xi(r)&&(o=st(o),r=st(r)),!Ve(e)&&Dt(o)&&!Dt(r))return a?!1:(o.value=r,!0)}const s=Ve(e)&&Gf(n)?Number(n)<e.length:at(e,n),l=Reflect.set(e,n,r,Dt(e)?e:i);return e===st(i)&&(s?fi(r,o)&&Ir(e,"set",n,r):Ir(e,"add",n,r)),l}deleteProperty(e,n){const r=at(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ir(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!ki(n)||!cg.has(n))&&on(e,"has",n),r}ownKeys(e){return on(e,"iterate",Ve(e)?"length":zi),Reflect.ownKeys(e)}}class bw extends ug{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const vw=new fg,ww=new bw,Sw=new fg(!0);const Lu=t=>t,xl=t=>Reflect.getPrototypeOf(t);function xw(t,e,n){return function(...r){const i=this.__v_raw,o=st(i),s=Po(o),l=t==="entries"||t===Symbol.iterator&&s,a=t==="keys"&&s,c=i[t](...r),u=n?Lu:e?Fu:sn;return!e&&on(o,"iterate",a?Bu:zi),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function kl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function kw(t,e){const n={get(i){const o=this.__v_raw,s=st(o),l=st(i);t||(fi(i,l)&&on(s,"get",i),on(s,"get",l));const{has:a}=xl(s),c=e?Lu:t?Fu:sn;if(a.call(s,i))return c(o.get(i));if(a.call(s,l))return c(o.get(l));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!t&&on(st(i),"iterate",zi),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,s=st(o),l=st(i);return t||(fi(i,l)&&on(s,"has",i),on(s,"has",l)),i===l?o.has(i):o.has(i)||o.has(l)},forEach(i,o){const s=this,l=s.__v_raw,a=st(l),c=e?Lu:t?Fu:sn;return!t&&on(a,"iterate",zi),l.forEach((u,f)=>i.call(o,c(u),c(f),s))}};return un(n,t?{add:kl("add"),set:kl("set"),delete:kl("delete"),clear:kl("clear")}:{add(i){!e&&!Zn(i)&&!Xi(i)&&(i=st(i));const o=st(this);return xl(o).has.call(o,i)||(o.add(i),Ir(o,"add",i,i)),this},set(i,o){!e&&!Zn(o)&&!Xi(o)&&(o=st(o));const s=st(this),{has:l,get:a}=xl(s);let c=l.call(s,i);c||(i=st(i),c=l.call(s,i));const u=a.call(s,i);return s.set(i,o),c?fi(o,u)&&Ir(s,"set",i,o):Ir(s,"add",i,o),this},delete(i){const o=st(this),{has:s,get:l}=xl(o);let a=s.call(o,i);a||(i=st(i),a=s.call(o,i)),l&&l.call(o,i);const c=o.delete(i);return a&&Ir(o,"delete",i,void 0),c},clear(){const i=st(this),o=i.size!==0,s=i.clear();return o&&Ir(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=xw(i,t,e)}),n}function ed(t,e){const n=kw(t,e);return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(at(n,i)&&i in r?n:r,i,o)}const Cw={get:ed(!1,!1)},Ow={get:ed(!1,!0)},Ew={get:ed(!0,!1)};const dg=new WeakMap,hg=new WeakMap,pg=new WeakMap,Tw=new WeakMap;function Aw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _w(t){return t.__v_skip||!Object.isExtensible(t)?0:Aw(ew(t))}function cc(t){return Xi(t)?t:td(t,!1,vw,Cw,dg)}function Mw(t){return td(t,!1,Sw,Ow,hg)}function mg(t){return td(t,!0,ww,Ew,pg)}function td(t,e,n,r,i){if(!xt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=_w(t);if(s===0)return t;const l=new Proxy(t,s===2?r:n);return i.set(t,l),l}function Do(t){return Xi(t)?Do(t.__v_raw):!!(t&&t.__v_isReactive)}function Xi(t){return!!(t&&t.__v_isReadonly)}function Zn(t){return!!(t&&t.__v_isShallow)}function nd(t){return t?!!t.__v_raw:!1}function st(t){const e=t&&t.__v_raw;return e?st(e):t}function gg(t){return!at(t,"__v_skip")&&Object.isExtensible(t)&&Gm(t,"__v_skip",!0),t}const sn=t=>xt(t)?cc(t):t,Fu=t=>xt(t)?mg(t):t;function Dt(t){return t?t.__v_isRef===!0:!1}function rd(t){return Nw(t,!1)}function Nw(t,e){return Dt(t)?t:new Pw(t,e)}class Pw{constructor(e,n){this.dep=new lc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:st(e),this._value=n?e:sn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Zn(e)||Xi(e);e=r?e:st(e),fi(e,n)&&(this._rawValue=e,this._value=r?e:sn(e),this.dep.trigger())}}function yn(t){return Dt(t)?t.value:t}const Iw={get:(t,e,n)=>e==="__v_raw"?t:yn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Dt(i)&&!Dt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function yg(t){return Do(t)?t:new Proxy(t,Iw)}class Dw{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new lc,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function $w(t){return new Dw(t)}function Rw(t){const e=Ve(t)?new Array(t.length):{};for(const n in t)e[n]=Lw(t,n);return e}class Bw{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return hw(st(this._object),this._key)}}function Lw(t,e,n){const r=t[e];return Dt(r)?r:new Bw(t,e,n)}class Fw{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new lc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return rg(this,!0),!0}get value(){const e=this.dep.track();return sg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Vw(t,e,n=!1){let r,i;return We(t)?r=t:(r=t.get,i=t.set),new Fw(r,i,n)}const Cl={},ba=new WeakMap;let $i;function jw(t,e=!1,n=$i){if(n){let r=ba.get(n);r||ba.set(n,r=[]),r.push(t)}}function Hw(t,e,n=mt){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:l,call:a}=n,c=$=>i?$:Zn($)||i===!1||i===0?Dr($,1):Dr($);let u,f,h,m,g=!1,b=!1;if(Dt(t)?(f=()=>t.value,g=Zn(t)):Do(t)?(f=()=>c(t),g=!0):Ve(t)?(b=!0,g=t.some($=>Do($)||Zn($)),f=()=>t.map($=>{if(Dt($))return $.value;if(Do($))return c($);if(We($))return a?a($,2):$()})):We(t)?e?f=a?()=>a(t,2):t:f=()=>{if(h){Ci();try{h()}finally{Oi()}}const $=$i;$i=u;try{return a?a(t,3,[m]):t(m)}finally{$i=$}}:f=vr,e&&i){const $=f,I=i===!0?1/0:i;f=()=>Dr($(),I)}const x=eg(),O=()=>{u.stop(),x&&x.active&&Yf(x.effects,u)};if(o&&e){const $=e;e=(...I)=>{$(...I),O()}}let A=b?new Array(t.length).fill(Cl):Cl;const N=$=>{if(!(!(u.flags&1)||!u.dirty&&!$))if(e){const I=u.run();if(i||g||(b?I.some((L,V)=>fi(L,A[V])):fi(I,A))){h&&h();const L=$i;$i=u;try{const V=[I,A===Cl?void 0:b&&A[0]===Cl?[]:A,m];a?a(e,3,V):e(...V),A=I}finally{$i=L}}}else u.run()};return l&&l(N),u=new tg(f),u.scheduler=s?()=>s(N,!1):N,m=$=>jw($,!1,u),h=u.onStop=()=>{const $=ba.get(u);if($){if(a)a($,4);else for(const I of $)I();ba.delete(u)}},e?r?N(!0):A=u.run():s?s(N.bind(null,!0),!0):u.run(),O.pause=u.pause.bind(u),O.resume=u.resume.bind(u),O.stop=O,O}function Dr(t,e=1/0,n){if(e<=0||!xt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Dt(t))Dr(t.value,e,n);else if(Ve(t))for(let r=0;r<t.length;r++)Dr(t[r],e,n);else if(Wm(t)||Po(t))t.forEach(r=>{Dr(r,e,n)});else if(Ym(t)){for(const r in t)Dr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Dr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cl(t,e,n,r){try{return r?t(...r):t()}catch(i){uc(i,e,n)}}function Sr(t,e,n,r){if(We(t)){const i=cl(t,e,n,r);return i&&qm(i)&&i.catch(o=>{uc(o,e,n)}),i}if(Ve(t)){const i=[];for(let o=0;o<t.length;o++)i.push(Sr(t[o],e,n,r));return i}}function uc(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||mt;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,a,c)===!1)return}l=l.parent}if(o){Ci(),cl(o,null,10,[t,a,c]),Oi();return}}zw(t,n,i,r,s)}function zw(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const vn=[];let pr=-1;const $o=[];let Zr=null,wo=0;const bg=Promise.resolve();let va=null;function fc(t){const e=va||bg;return t?e.then(this?t.bind(this):t):e}function Kw(t){let e=pr+1,n=vn.length;for(;e<n;){const r=e+n>>>1,i=vn[r],o=Ks(i);o<t||o===t&&i.flags&2?e=r+1:n=r}return e}function id(t){if(!(t.flags&1)){const e=Ks(t),n=vn[vn.length-1];!n||!(t.flags&2)&&e>=Ks(n)?vn.push(t):vn.splice(Kw(e),0,t),t.flags|=1,vg()}}function vg(){va||(va=bg.then(Sg))}function Uw(t){Ve(t)?$o.push(...t):Zr&&t.id===-1?Zr.splice(wo+1,0,t):t.flags&1||($o.push(t),t.flags|=1),vg()}function Ah(t,e,n=pr+1){for(;n<vn.length;n++){const r=vn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;vn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function wg(t){if($o.length){const e=[...new Set($o)].sort((n,r)=>Ks(n)-Ks(r));if($o.length=0,Zr){Zr.push(...e);return}for(Zr=e,wo=0;wo<Zr.length;wo++){const n=Zr[wo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Zr=null,wo=0}}const Ks=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Sg(t){try{for(pr=0;pr<vn.length;pr++){const e=vn[pr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),cl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;pr<vn.length;pr++){const e=vn[pr];e&&(e.flags&=-2)}pr=-1,vn.length=0,wg(),va=null,(vn.length||$o.length)&&Sg()}}let Nn=null,xg=null;function wa(t){const e=Nn;return Nn=t,xg=t&&t.type.__scopeId||null,e}function kg(t,e=Nn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Lh(-1);const o=wa(e);let s;try{s=t(...i)}finally{wa(o),r._d&&Lh(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Ro(t,e){if(Nn===null)return t;const n=gc(Nn),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,l,a=mt]=e[i];o&&(We(o)&&(o={mounted:o,updated:o}),o.deep&&Dr(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:l,modifiers:a}))}return t}function Mi(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const l=i[s];o&&(l.oldValue=o[s].value);let a=l.dir[r];a&&(Ci(),Sr(a,n,8,[t.el,l,t,e]),Oi())}}const Ww=Symbol("_vte"),qw=t=>t.__isTeleport;function od(t,e){t.shapeFlag&6&&t.component?(t.transition=e,od(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Cg(t,e){return We(t)?un({name:t.name},e,{setup:t}):t}function Og(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Sa(t,e,n,r,i=!1){if(Ve(t)){t.forEach((g,b)=>Sa(g,e&&(Ve(e)?e[b]:e),n,r,i));return}if(Os(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Sa(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?gc(r.component):r.el,s=i?null:o,{i:l,r:a}=t,c=e&&e.r,u=l.refs===mt?l.refs={}:l.refs,f=l.setupState,h=st(f),m=f===mt?()=>!1:g=>at(h,g);if(c!=null&&c!==a&&(Rt(c)?(u[c]=null,m(c)&&(f[c]=null)):Dt(c)&&(c.value=null)),We(a))cl(a,l,12,[s,u]);else{const g=Rt(a),b=Dt(a);if(g||b){const x=()=>{if(t.f){const O=g?m(a)?f[a]:u[a]:a.value;i?Ve(O)&&Yf(O,o):Ve(O)?O.includes(o)||O.push(o):g?(u[a]=[o],m(a)&&(f[a]=u[a])):(a.value=[o],t.k&&(u[t.k]=a.value))}else g?(u[a]=s,m(a)&&(f[a]=s)):b&&(a.value=s,t.k&&(u[t.k]=s))};s?(x.id=-1,Vn(x,n)):x()}}}sc().requestIdleCallback;sc().cancelIdleCallback;const Os=t=>!!t.type.__asyncLoader,Eg=t=>t.type.__isKeepAlive;function Jw(t,e){Tg(t,"a",e)}function Yw(t,e){Tg(t,"da",e)}function Tg(t,e,n=en){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(dc(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Eg(i.parent.vnode)&&Gw(r,e,n,i),i=i.parent}}function Gw(t,e,n,r){const i=dc(e,t,r,!0);sd(()=>{Yf(r[e],i)},n)}function dc(t,e,n=en,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...s)=>{Ci();const l=ul(n),a=Sr(e,n,t,s);return l(),Oi(),a});return r?i.unshift(o):i.push(o),o}}const Wr=t=>(e,n=en)=>{(!Ws||t==="sp")&&dc(t,(...r)=>e(...r),n)},Xw=Wr("bm"),Ag=Wr("m"),Zw=Wr("bu"),Qw=Wr("u"),_g=Wr("bum"),sd=Wr("um"),eS=Wr("sp"),tS=Wr("rtg"),nS=Wr("rtc");function rS(t,e=en){dc("ec",t,e)}const Mg="components",iS="directives";function ut(t,e){return Ng(Mg,t,!0,e)||t}const oS=Symbol.for("v-ndc");function sS(t){return Ng(iS,t)}function Ng(t,e,n=!0,r=!1){const i=Nn||en;if(i){const o=i.type;if(t===Mg){const l=YS(o,!1);if(l&&(l===e||l===er(e)||l===oc(er(e))))return o}const s=_h(i[t]||o[t],e)||_h(i.appContext[t],e);return!s&&r?o:s}}function _h(t,e){return t&&(t[e]||t[er(e)]||t[oc(er(e))])}function xa(t,e,n,r){let i;const o=n,s=Ve(t);if(s||Rt(t)){const l=s&&Do(t);let a=!1;l&&(a=!Zn(t),t=ac(t)),i=new Array(t.length);for(let c=0,u=t.length;c<u;c++)i[c]=e(a?sn(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,o)}else if(xt(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,o));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];i[a]=e(t[u],u,a,o)}}else i=[];return i}const Vu=t=>t?Xg(t)?gc(t):Vu(t.parent):null,Es=un(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vu(t.parent),$root:t=>Vu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ig(t),$forceUpdate:t=>t.f||(t.f=()=>{id(t.update)}),$nextTick:t=>t.n||(t.n=fc.bind(t.proxy)),$watch:t=>_S.bind(t)}),qc=(t,e)=>t!==mt&&!t.__isScriptSetup&&at(t,e),lS={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const m=s[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(qc(r,e))return s[e]=1,r[e];if(i!==mt&&at(i,e))return s[e]=2,i[e];if((c=t.propsOptions[0])&&at(c,e))return s[e]=3,o[e];if(n!==mt&&at(n,e))return s[e]=4,n[e];ju&&(s[e]=0)}}const u=Es[e];let f,h;if(u)return e==="$attrs"&&on(t.attrs,"get",""),u(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==mt&&at(n,e))return s[e]=4,n[e];if(h=a.config.globalProperties,at(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return qc(i,e)?(i[e]=n,!0):r!==mt&&at(r,e)?(r[e]=n,!0):at(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let l;return!!n[s]||t!==mt&&at(t,s)||qc(e,s)||(l=o[0])&&at(l,s)||at(r,s)||at(Es,s)||at(i.config.globalProperties,s)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:at(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Mh(t){return Ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ju=!0;function aS(t){const e=Ig(t),n=t.proxy,r=t.ctx;ju=!1,e.beforeCreate&&Nh(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:l,provide:a,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:g,activated:b,deactivated:x,beforeDestroy:O,beforeUnmount:A,destroyed:N,unmounted:$,render:I,renderTracked:L,renderTriggered:V,errorCaptured:K,serverPrefetch:E,expose:S,inheritAttrs:F,components:C,directives:ce,filters:Z}=e;if(c&&cS(c,r,null),s)for(const Q in s){const Te=s[Q];We(Te)&&(r[Q]=Te.bind(n))}if(i){const Q=i.call(n,n);xt(Q)&&(t.data=cc(Q))}if(ju=!0,o)for(const Q in o){const Te=o[Q],Ze=We(Te)?Te.bind(n,n):We(Te.get)?Te.get.bind(n,n):vr,Ke=!We(Te)&&We(Te.set)?Te.set.bind(n):vr,tt=Uu({get:Ze,set:Ke});Object.defineProperty(r,Q,{enumerable:!0,configurable:!0,get:()=>tt.value,set:ft=>tt.value=ft})}if(l)for(const Q in l)Pg(l[Q],r,n,Q);if(a){const Q=We(a)?a.call(n):a;Reflect.ownKeys(Q).forEach(Te=>{mS(Te,Q[Te])})}u&&Nh(u,t,"c");function ge(Q,Te){Ve(Te)?Te.forEach(Ze=>Q(Ze.bind(n))):Te&&Q(Te.bind(n))}if(ge(Xw,f),ge(Ag,h),ge(Zw,m),ge(Qw,g),ge(Jw,b),ge(Yw,x),ge(rS,K),ge(nS,L),ge(tS,V),ge(_g,A),ge(sd,$),ge(eS,E),Ve(S))if(S.length){const Q=t.exposed||(t.exposed={});S.forEach(Te=>{Object.defineProperty(Q,Te,{get:()=>n[Te],set:Ze=>n[Te]=Ze})})}else t.exposed||(t.exposed={});I&&t.render===vr&&(t.render=I),F!=null&&(t.inheritAttrs=F),C&&(t.components=C),ce&&(t.directives=ce),E&&Og(t)}function cS(t,e,n=vr){Ve(t)&&(t=Hu(t));for(const r in t){const i=t[r];let o;xt(i)?"default"in i?o=ql(i.from||r,i.default,!0):o=ql(i.from||r):o=ql(i),Dt(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function Nh(t,e,n){Sr(Ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Pg(t,e,n,r){let i=r.includes(".")?Wg(n,r):()=>n[r];if(Rt(t)){const o=e[t];We(o)&&Jl(i,o)}else if(We(t))Jl(i,t.bind(n));else if(xt(t))if(Ve(t))t.forEach(o=>Pg(o,e,n,r));else{const o=We(t.handler)?t.handler.bind(n):e[t.handler];We(o)&&Jl(i,o,t)}}function Ig(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,l=o.get(e);let a;return l?a=l:!i.length&&!n&&!r?a=e:(a={},i.length&&i.forEach(c=>ka(a,c,s,!0)),ka(a,e,s)),xt(e)&&o.set(e,a),a}function ka(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&ka(t,o,n,!0),i&&i.forEach(s=>ka(t,s,n,!0));for(const s in e)if(!(r&&s==="expose")){const l=uS[s]||n&&n[s];t[s]=l?l(t[s],e[s]):e[s]}return t}const uS={data:Ph,props:Ih,emits:Ih,methods:ds,computed:ds,beforeCreate:mn,created:mn,beforeMount:mn,mounted:mn,beforeUpdate:mn,updated:mn,beforeDestroy:mn,beforeUnmount:mn,destroyed:mn,unmounted:mn,activated:mn,deactivated:mn,errorCaptured:mn,serverPrefetch:mn,components:ds,directives:ds,watch:dS,provide:Ph,inject:fS};function Ph(t,e){return e?t?function(){return un(We(t)?t.call(this,this):t,We(e)?e.call(this,this):e)}:e:t}function fS(t,e){return ds(Hu(t),Hu(e))}function Hu(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mn(t,e){return t?[...new Set([].concat(t,e))]:e}function ds(t,e){return t?un(Object.create(null),t,e):e}function Ih(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:un(Object.create(null),Mh(t),Mh(e??{})):e}function dS(t,e){if(!t)return e;if(!e)return t;const n=un(Object.create(null),t);for(const r in e)n[r]=mn(t[r],e[r]);return n}function Dg(){return{app:null,config:{isNativeTag:Z1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hS=0;function pS(t,e){return function(r,i=null){We(r)||(r=un({},r)),i!=null&&!xt(i)&&(i=null);const o=Dg(),s=new WeakSet,l=[];let a=!1;const c=o.app={_uid:hS++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:XS,get config(){return o.config},set config(u){},use(u,...f){return s.has(u)||(u&&We(u.install)?(s.add(u),u.install(c,...f)):We(u)&&(s.add(u),u(c,...f))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,f){return f?(o.components[u]=f,c):o.components[u]},directive(u,f){return f?(o.directives[u]=f,c):o.directives[u]},mount(u,f,h){if(!a){const m=c._ceVNode||Ct(r,i);return m.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),t(m,u,h),a=!0,c._container=u,u.__vue_app__=c,gc(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Sr(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return o.provides[u]=f,c},runWithContext(u){const f=Bo;Bo=c;try{return u()}finally{Bo=f}}};return c}}let Bo=null;function mS(t,e){if(en){let n=en.provides;const r=en.parent&&en.parent.provides;r===n&&(n=en.provides=Object.create(r)),n[t]=e}}function ql(t,e,n=!1){const r=en||Nn;if(r||Bo){const i=Bo?Bo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&We(e)?e.call(r&&r.proxy):e}}const $g={},Rg=()=>Object.create($g),Bg=t=>Object.getPrototypeOf(t)===$g;function gS(t,e,n,r=!1){const i={},o=Rg();t.propsDefaults=Object.create(null),Lg(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Mw(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function yS(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,l=st(i),[a]=t.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(hc(t.emitsOptions,h))continue;const m=e[h];if(a)if(at(o,h))m!==o[h]&&(o[h]=m,c=!0);else{const g=er(h);i[g]=zu(a,l,g,m,t,!1)}else m!==o[h]&&(o[h]=m,c=!0)}}}else{Lg(t,e,i,o)&&(c=!0);let u;for(const f in l)(!e||!at(e,f)&&((u=io(f))===f||!at(e,u)))&&(a?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=zu(a,l,f,void 0,t,!0)):delete i[f]);if(o!==l)for(const f in o)(!e||!at(e,f))&&(delete o[f],c=!0)}c&&Ir(t.attrs,"set","")}function Lg(t,e,n,r){const[i,o]=t.propsOptions;let s=!1,l;if(e)for(let a in e){if(xs(a))continue;const c=e[a];let u;i&&at(i,u=er(a))?!o||!o.includes(u)?n[u]=c:(l||(l={}))[u]=c:hc(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=st(n),c=l||mt;for(let u=0;u<o.length;u++){const f=o[u];n[f]=zu(i,a,f,c[f],t,!at(c,f))}}return s}function zu(t,e,n,r,i,o){const s=t[n];if(s!=null){const l=at(s,"default");if(l&&r===void 0){const a=s.default;if(s.type!==Function&&!s.skipFactory&&We(a)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=ul(i);r=c[n]=a.call(null,e),u()}}else r=a;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!l?r=!1:s[1]&&(r===""||r===io(n))&&(r=!0))}return r}const bS=new WeakMap;function Fg(t,e,n=!1){const r=n?bS:e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},l=[];let a=!1;if(!We(t)){const u=f=>{a=!0;const[h,m]=Fg(f,e,!0);un(s,h),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!a)return xt(t)&&r.set(t,No),No;if(Ve(o))for(let u=0;u<o.length;u++){const f=er(o[u]);Dh(f)&&(s[f]=mt)}else if(o)for(const u in o){const f=er(u);if(Dh(f)){const h=o[u],m=s[f]=Ve(h)||We(h)?{type:h}:un({},h),g=m.type;let b=!1,x=!0;if(Ve(g))for(let O=0;O<g.length;++O){const A=g[O],N=We(A)&&A.name;if(N==="Boolean"){b=!0;break}else N==="String"&&(x=!1)}else b=We(g)&&g.name==="Boolean";m[0]=b,m[1]=x,(b||at(m,"default"))&&l.push(f)}}const c=[s,l];return xt(t)&&r.set(t,c),c}function Dh(t){return t[0]!=="$"&&!xs(t)}const Vg=t=>t[0]==="_"||t==="$stable",ld=t=>Ve(t)?t.map(yr):[yr(t)],vS=(t,e,n)=>{if(e._n)return e;const r=kg((...i)=>ld(e(...i)),n);return r._c=!1,r},jg=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Vg(i))continue;const o=t[i];if(We(o))e[i]=vS(i,o,r);else if(o!=null){const s=ld(o);e[i]=()=>s}}},Hg=(t,e)=>{const n=ld(e);t.slots.default=()=>n},zg=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},wS=(t,e,n)=>{const r=t.slots=Rg();if(t.vnode.shapeFlag&32){const i=e._;i?(zg(r,e,n),n&&Gm(r,"_",i,!0)):jg(e,r)}else e&&Hg(t,e)},SS=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=mt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?o=!1:zg(i,e,n):(o=!e.$stable,jg(e,i)),s=e}else e&&(Hg(t,e),s={default:1});if(o)for(const l in i)!Vg(l)&&s[l]==null&&delete i[l]},Vn=RS;function xS(t){return kS(t)}function kS(t,e){const n=sc();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:l,createComment:a,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=vr,insertStaticContent:g}=t,b=(T,M,R,B=null,U=null,J=null,re=void 0,Y=null,X=!!M.dynamicChildren)=>{if(T===M)return;T&&!cs(T,M)&&(B=H(T),ft(T,U,J,!0),T=null),M.patchFlag===-2&&(X=!1,M.dynamicChildren=null);const{type:G,ref:pe,shapeFlag:se}=M;switch(G){case pc:x(T,M,R,B);break;case Zi:O(T,M,R,B);break;case Yl:T==null&&A(M,R,B,re);break;case Xt:C(T,M,R,B,U,J,re,Y,X);break;default:se&1?I(T,M,R,B,U,J,re,Y,X):se&6?ce(T,M,R,B,U,J,re,Y,X):(se&64||se&128)&&G.process(T,M,R,B,U,J,re,Y,X,W)}pe!=null&&U&&Sa(pe,T&&T.ref,J,M||T,!M)},x=(T,M,R,B)=>{if(T==null)r(M.el=l(M.children),R,B);else{const U=M.el=T.el;M.children!==T.children&&c(U,M.children)}},O=(T,M,R,B)=>{T==null?r(M.el=a(M.children||""),R,B):M.el=T.el},A=(T,M,R,B)=>{[T.el,T.anchor]=g(T.children,M,R,B,T.el,T.anchor)},N=({el:T,anchor:M},R,B)=>{let U;for(;T&&T!==M;)U=h(T),r(T,R,B),T=U;r(M,R,B)},$=({el:T,anchor:M})=>{let R;for(;T&&T!==M;)R=h(T),i(T),T=R;i(M)},I=(T,M,R,B,U,J,re,Y,X)=>{M.type==="svg"?re="svg":M.type==="math"&&(re="mathml"),T==null?L(M,R,B,U,J,re,Y,X):E(T,M,U,J,re,Y,X)},L=(T,M,R,B,U,J,re,Y)=>{let X,G;const{props:pe,shapeFlag:se,transition:fe,dirs:de}=T;if(X=T.el=s(T.type,J,pe&&pe.is,pe),se&8?u(X,T.children):se&16&&K(T.children,X,null,B,U,Jc(T,J),re,Y),de&&Mi(T,null,B,"created"),V(X,T,T.scopeId,re,B),pe){for(const we in pe)we!=="value"&&!xs(we)&&o(X,we,null,pe[we],J,B);"value"in pe&&o(X,"value",null,pe.value,J),(G=pe.onVnodeBeforeMount)&&hr(G,B,T)}de&&Mi(T,null,B,"beforeMount");const ee=CS(U,fe);ee&&fe.beforeEnter(X),r(X,M,R),((G=pe&&pe.onVnodeMounted)||ee||de)&&Vn(()=>{G&&hr(G,B,T),ee&&fe.enter(X),de&&Mi(T,null,B,"mounted")},U)},V=(T,M,R,B,U)=>{if(R&&m(T,R),B)for(let J=0;J<B.length;J++)m(T,B[J]);if(U){let J=U.subTree;if(M===J||Jg(J.type)&&(J.ssContent===M||J.ssFallback===M)){const re=U.vnode;V(T,re,re.scopeId,re.slotScopeIds,U.parent)}}},K=(T,M,R,B,U,J,re,Y,X=0)=>{for(let G=X;G<T.length;G++){const pe=T[G]=Y?Qr(T[G]):yr(T[G]);b(null,pe,M,R,B,U,J,re,Y)}},E=(T,M,R,B,U,J,re)=>{const Y=M.el=T.el;let{patchFlag:X,dynamicChildren:G,dirs:pe}=M;X|=T.patchFlag&16;const se=T.props||mt,fe=M.props||mt;let de;if(R&&Ni(R,!1),(de=fe.onVnodeBeforeUpdate)&&hr(de,R,M,T),pe&&Mi(M,T,R,"beforeUpdate"),R&&Ni(R,!0),(se.innerHTML&&fe.innerHTML==null||se.textContent&&fe.textContent==null)&&u(Y,""),G?S(T.dynamicChildren,G,Y,R,B,Jc(M,U),J):re||Te(T,M,Y,null,R,B,Jc(M,U),J,!1),X>0){if(X&16)F(Y,se,fe,R,U);else if(X&2&&se.class!==fe.class&&o(Y,"class",null,fe.class,U),X&4&&o(Y,"style",se.style,fe.style,U),X&8){const ee=M.dynamicProps;for(let we=0;we<ee.length;we++){const Ee=ee[we],he=se[Ee],w=fe[Ee];(w!==he||Ee==="value")&&o(Y,Ee,he,w,U,R)}}X&1&&T.children!==M.children&&u(Y,M.children)}else!re&&G==null&&F(Y,se,fe,R,U);((de=fe.onVnodeUpdated)||pe)&&Vn(()=>{de&&hr(de,R,M,T),pe&&Mi(M,T,R,"updated")},B)},S=(T,M,R,B,U,J,re)=>{for(let Y=0;Y<M.length;Y++){const X=T[Y],G=M[Y],pe=X.el&&(X.type===Xt||!cs(X,G)||X.shapeFlag&70)?f(X.el):R;b(X,G,pe,null,B,U,J,re,!0)}},F=(T,M,R,B,U)=>{if(M!==R){if(M!==mt)for(const J in M)!xs(J)&&!(J in R)&&o(T,J,M[J],null,U,B);for(const J in R){if(xs(J))continue;const re=R[J],Y=M[J];re!==Y&&J!=="value"&&o(T,J,Y,re,U,B)}"value"in R&&o(T,"value",M.value,R.value,U)}},C=(T,M,R,B,U,J,re,Y,X)=>{const G=M.el=T?T.el:l(""),pe=M.anchor=T?T.anchor:l("");let{patchFlag:se,dynamicChildren:fe,slotScopeIds:de}=M;de&&(Y=Y?Y.concat(de):de),T==null?(r(G,R,B),r(pe,R,B),K(M.children||[],R,pe,U,J,re,Y,X)):se>0&&se&64&&fe&&T.dynamicChildren?(S(T.dynamicChildren,fe,R,U,J,re,Y),(M.key!=null||U&&M===U.subTree)&&Kg(T,M,!0)):Te(T,M,R,pe,U,J,re,Y,X)},ce=(T,M,R,B,U,J,re,Y,X)=>{M.slotScopeIds=Y,T==null?M.shapeFlag&512?U.ctx.activate(M,R,B,re,X):Z(M,R,B,U,J,re,X):Se(T,M,X)},Z=(T,M,R,B,U,J,re)=>{const Y=T.component=KS(T,B,U);if(Eg(T)&&(Y.ctx.renderer=W),US(Y,!1,re),Y.asyncDep){if(U&&U.registerDep(Y,ge,re),!T.el){const X=Y.subTree=Ct(Zi);O(null,X,M,R)}}else ge(Y,T,M,R,U,J,re)},Se=(T,M,R)=>{const B=M.component=T.component;if(DS(T,M,R))if(B.asyncDep&&!B.asyncResolved){Q(B,M,R);return}else B.next=M,B.update();else M.el=T.el,B.vnode=M},ge=(T,M,R,B,U,J,re)=>{const Y=()=>{if(T.isMounted){let{next:se,bu:fe,u:de,parent:ee,vnode:we}=T;{const k=Ug(T);if(k){se&&(se.el=we.el,Q(T,se,re)),k.asyncDep.then(()=>{T.isUnmounted||Y()});return}}let Ee=se,he;Ni(T,!1),se?(se.el=we.el,Q(T,se,re)):se=we,fe&&Wl(fe),(he=se.props&&se.props.onVnodeBeforeUpdate)&&hr(he,ee,se,we),Ni(T,!0);const w=Rh(T),y=T.subTree;T.subTree=w,b(y,w,f(y.el),H(y),T,U,J),se.el=w.el,Ee===null&&$S(T,w.el),de&&Vn(de,U),(he=se.props&&se.props.onVnodeUpdated)&&Vn(()=>hr(he,ee,se,we),U)}else{let se;const{el:fe,props:de}=M,{bm:ee,m:we,parent:Ee,root:he,type:w}=T,y=Os(M);Ni(T,!1),ee&&Wl(ee),!y&&(se=de&&de.onVnodeBeforeMount)&&hr(se,Ee,M),Ni(T,!0);{he.ce&&he.ce._injectChildStyle(w);const k=T.subTree=Rh(T);b(null,k,R,B,T,U,J),M.el=k.el}if(we&&Vn(we,U),!y&&(se=de&&de.onVnodeMounted)){const k=M;Vn(()=>hr(se,Ee,k),U)}(M.shapeFlag&256||Ee&&Os(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&T.a&&Vn(T.a,U),T.isMounted=!0,M=R=B=null}};T.scope.on();const X=T.effect=new tg(Y);T.scope.off();const G=T.update=X.run.bind(X),pe=T.job=X.runIfDirty.bind(X);pe.i=T,pe.id=T.uid,X.scheduler=()=>id(pe),Ni(T,!0),G()},Q=(T,M,R)=>{M.component=T;const B=T.vnode.props;T.vnode=M,T.next=null,yS(T,M.props,B,R),SS(T,M.children,R),Ci(),Ah(T),Oi()},Te=(T,M,R,B,U,J,re,Y,X=!1)=>{const G=T&&T.children,pe=T?T.shapeFlag:0,se=M.children,{patchFlag:fe,shapeFlag:de}=M;if(fe>0){if(fe&128){Ke(G,se,R,B,U,J,re,Y,X);return}else if(fe&256){Ze(G,se,R,B,U,J,re,Y,X);return}}de&8?(pe&16&&Et(G,U,J),se!==G&&u(R,se)):pe&16?de&16?Ke(G,se,R,B,U,J,re,Y,X):Et(G,U,J,!0):(pe&8&&u(R,""),de&16&&K(se,R,B,U,J,re,Y,X))},Ze=(T,M,R,B,U,J,re,Y,X)=>{T=T||No,M=M||No;const G=T.length,pe=M.length,se=Math.min(G,pe);let fe;for(fe=0;fe<se;fe++){const de=M[fe]=X?Qr(M[fe]):yr(M[fe]);b(T[fe],de,R,null,U,J,re,Y,X)}G>pe?Et(T,U,J,!0,!1,se):K(M,R,B,U,J,re,Y,X,se)},Ke=(T,M,R,B,U,J,re,Y,X)=>{let G=0;const pe=M.length;let se=T.length-1,fe=pe-1;for(;G<=se&&G<=fe;){const de=T[G],ee=M[G]=X?Qr(M[G]):yr(M[G]);if(cs(de,ee))b(de,ee,R,null,U,J,re,Y,X);else break;G++}for(;G<=se&&G<=fe;){const de=T[se],ee=M[fe]=X?Qr(M[fe]):yr(M[fe]);if(cs(de,ee))b(de,ee,R,null,U,J,re,Y,X);else break;se--,fe--}if(G>se){if(G<=fe){const de=fe+1,ee=de<pe?M[de].el:B;for(;G<=fe;)b(null,M[G]=X?Qr(M[G]):yr(M[G]),R,ee,U,J,re,Y,X),G++}}else if(G>fe)for(;G<=se;)ft(T[G],U,J,!0),G++;else{const de=G,ee=G,we=new Map;for(G=ee;G<=fe;G++){const ne=M[G]=X?Qr(M[G]):yr(M[G]);ne.key!=null&&we.set(ne.key,G)}let Ee,he=0;const w=fe-ee+1;let y=!1,k=0;const P=new Array(w);for(G=0;G<w;G++)P[G]=0;for(G=de;G<=se;G++){const ne=T[G];if(he>=w){ft(ne,U,J,!0);continue}let ie;if(ne.key!=null)ie=we.get(ne.key);else for(Ee=ee;Ee<=fe;Ee++)if(P[Ee-ee]===0&&cs(ne,M[Ee])){ie=Ee;break}ie===void 0?ft(ne,U,J,!0):(P[ie-ee]=G+1,ie>=k?k=ie:y=!0,b(ne,M[ie],R,null,U,J,re,Y,X),he++)}const D=y?OS(P):No;for(Ee=D.length-1,G=w-1;G>=0;G--){const ne=ee+G,ie=M[ne],Ce=ne+1<pe?M[ne+1].el:B;P[G]===0?b(null,ie,R,Ce,U,J,re,Y,X):y&&(Ee<0||G!==D[Ee]?tt(ie,R,Ce,2):Ee--)}}},tt=(T,M,R,B,U=null)=>{const{el:J,type:re,transition:Y,children:X,shapeFlag:G}=T;if(G&6){tt(T.component.subTree,M,R,B);return}if(G&128){T.suspense.move(M,R,B);return}if(G&64){re.move(T,M,R,W);return}if(re===Xt){r(J,M,R);for(let se=0;se<X.length;se++)tt(X[se],M,R,B);r(T.anchor,M,R);return}if(re===Yl){N(T,M,R);return}if(B!==2&&G&1&&Y)if(B===0)Y.beforeEnter(J),r(J,M,R),Vn(()=>Y.enter(J),U);else{const{leave:se,delayLeave:fe,afterLeave:de}=Y,ee=()=>r(J,M,R),we=()=>{se(J,()=>{ee(),de&&de()})};fe?fe(J,ee,we):we()}else r(J,M,R)},ft=(T,M,R,B=!1,U=!1)=>{const{type:J,props:re,ref:Y,children:X,dynamicChildren:G,shapeFlag:pe,patchFlag:se,dirs:fe,cacheIndex:de}=T;if(se===-2&&(U=!1),Y!=null&&Sa(Y,null,R,T,!0),de!=null&&(M.renderCache[de]=void 0),pe&256){M.ctx.deactivate(T);return}const ee=pe&1&&fe,we=!Os(T);let Ee;if(we&&(Ee=re&&re.onVnodeBeforeUnmount)&&hr(Ee,M,T),pe&6)Qe(T.component,R,B);else{if(pe&128){T.suspense.unmount(R,B);return}ee&&Mi(T,null,M,"beforeUnmount"),pe&64?T.type.remove(T,M,R,W,B):G&&!G.hasOnce&&(J!==Xt||se>0&&se&64)?Et(G,M,R,!1,!0):(J===Xt&&se&384||!U&&pe&16)&&Et(X,M,R),B&&Bt(T)}(we&&(Ee=re&&re.onVnodeUnmounted)||ee)&&Vn(()=>{Ee&&hr(Ee,M,T),ee&&Mi(T,null,M,"unmounted")},R)},Bt=T=>{const{type:M,el:R,anchor:B,transition:U}=T;if(M===Xt){Ae(R,B);return}if(M===Yl){$(T);return}const J=()=>{i(R),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(T.shapeFlag&1&&U&&!U.persisted){const{leave:re,delayLeave:Y}=U,X=()=>re(R,J);Y?Y(T.el,J,X):X()}else J()},Ae=(T,M)=>{let R;for(;T!==M;)R=h(T),i(T),T=R;i(M)},Qe=(T,M,R)=>{const{bum:B,scope:U,job:J,subTree:re,um:Y,m:X,a:G}=T;$h(X),$h(G),B&&Wl(B),U.stop(),J&&(J.flags|=8,ft(re,T,M,R)),Y&&Vn(Y,M),Vn(()=>{T.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Et=(T,M,R,B=!1,U=!1,J=0)=>{for(let re=J;re<T.length;re++)ft(T[re],M,R,B,U)},H=T=>{if(T.shapeFlag&6)return H(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const M=h(T.anchor||T.el),R=M&&M[Ww];return R?h(R):M};let z=!1;const q=(T,M,R)=>{T==null?M._vnode&&ft(M._vnode,null,null,!0):b(M._vnode||null,T,M,null,null,null,R),M._vnode=T,z||(z=!0,Ah(),wg(),z=!1)},W={p:b,um:ft,m:tt,r:Bt,mt:Z,mc:K,pc:Te,pbc:S,n:H,o:t};return{render:q,hydrate:void 0,createApp:pS(q)}}function Jc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ni({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function CS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Kg(t,e,n=!1){const r=t.children,i=e.children;if(Ve(r)&&Ve(i))for(let o=0;o<r.length;o++){const s=r[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=Qr(i[o]),l.el=s.el),!n&&l.patchFlag!==-2&&Kg(s,l)),l.type===pc&&(l.el=s.el)}}function OS(t){const e=t.slice(),n=[0];let r,i,o,s,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)l=o+s>>1,t[n[l]]<c?o=l+1:s=l;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=e[s];return n}function Ug(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ug(e)}function $h(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ES=Symbol.for("v-scx"),TS=()=>ql(ES);function AS(t,e){return ad(t,null,e)}function Jl(t,e,n){return ad(t,e,n)}function ad(t,e,n=mt){const{immediate:r,deep:i,flush:o,once:s}=n,l=un({},n),a=e&&r||!e&&o!=="post";let c;if(Ws){if(o==="sync"){const m=TS();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=vr,m.resume=vr,m.pause=vr,m}}const u=en;l.call=(m,g,b)=>Sr(m,u,g,b);let f=!1;o==="post"?l.scheduler=m=>{Vn(m,u&&u.suspense)}:o!=="sync"&&(f=!0,l.scheduler=(m,g)=>{g?m():id(m)}),l.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=Hw(t,e,l);return Ws&&(c?c.push(h):a&&h()),h}function _S(t,e,n){const r=this.proxy,i=Rt(t)?t.includes(".")?Wg(r,t):()=>r[t]:t.bind(r,r);let o;We(e)?o=e:(o=e.handler,n=e);const s=ul(this),l=ad(i,o.bind(r),n);return s(),l}function Wg(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const MS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${er(e)}Modifiers`]||t[`${io(e)}Modifiers`];function NS(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||mt;let i=n;const o=e.startsWith("update:"),s=o&&MS(r,e.slice(7));s&&(s.trim&&(i=n.map(u=>Rt(u)?u.trim():u)),s.number&&(i=n.map($u)));let l,a=r[l=Hc(e)]||r[l=Hc(er(e))];!a&&o&&(a=r[l=Hc(io(e))]),a&&Sr(a,t,6,i);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Sr(c,t,6,i)}}function qg(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let s={},l=!1;if(!We(t)){const a=c=>{const u=qg(c,e,!0);u&&(l=!0,un(s,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!l?(xt(t)&&r.set(t,null),null):(Ve(o)?o.forEach(a=>s[a]=null):un(s,o),xt(t)&&r.set(t,s),s)}function hc(t,e){return!t||!nc(e)?!1:(e=e.slice(2).replace(/Once$/,""),at(t,e[0].toLowerCase()+e.slice(1))||at(t,io(e))||at(t,e))}function Rh(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:l,emit:a,render:c,renderCache:u,props:f,data:h,setupState:m,ctx:g,inheritAttrs:b}=t,x=wa(t);let O,A;try{if(n.shapeFlag&4){const $=i||r,I=$;O=yr(c.call(I,$,u,f,m,h,g)),A=l}else{const $=e;O=yr($.length>1?$(f,{attrs:l,slots:s,emit:a}):$(f,null)),A=e.props?l:PS(l)}}catch($){Ts.length=0,uc($,t,1),O=Ct(Zi)}let N=O;if(A&&b!==!1){const $=Object.keys(A),{shapeFlag:I}=N;$.length&&I&7&&(o&&$.some(Jf)&&(A=IS(A,o)),N=Uo(N,A,!1,!0))}return n.dirs&&(N=Uo(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&od(N,n.transition),O=N,wa(x),O}const PS=t=>{let e;for(const n in t)(n==="class"||n==="style"||nc(n))&&((e||(e={}))[n]=t[n]);return e},IS=(t,e)=>{const n={};for(const r in t)(!Jf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function DS(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:l,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?Bh(r,s,c):!!s;if(a&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(s[h]!==r[h]&&!hc(c,h))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===s?!1:r?s?Bh(r,s,c):!0:!!s;return!1}function Bh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!hc(n,o))return!0}return!1}function $S({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Jg=t=>t.__isSuspense;function RS(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):Uw(t)}const Xt=Symbol.for("v-fgt"),pc=Symbol.for("v-txt"),Zi=Symbol.for("v-cmt"),Yl=Symbol.for("v-stc"),Ts=[];let Kn=null;function xe(t=!1){Ts.push(Kn=t?null:[])}function BS(){Ts.pop(),Kn=Ts[Ts.length-1]||null}let Us=1;function Lh(t,e=!1){Us+=t,t<0&&Kn&&e&&(Kn.hasOnce=!0)}function Yg(t){return t.dynamicChildren=Us>0?Kn||No:null,BS(),Us>0&&Kn&&Kn.push(t),t}function ze(t,e,n,r,i,o){return Yg(j(t,e,n,r,i,o,!0))}function Mt(t,e,n,r,i){return Yg(Ct(t,e,n,r,i,!0))}function Ca(t){return t?t.__v_isVNode===!0:!1}function cs(t,e){return t.type===e.type&&t.key===e.key}const Gg=({key:t})=>t??null,Gl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Rt(t)||Dt(t)||We(t)?{i:Nn,r:t,k:e,f:!!n}:t:null);function j(t,e=null,n=null,r=0,i=null,o=t===Xt?0:1,s=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Gg(e),ref:e&&Gl(e),scopeId:xg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Nn};return l?(cd(a,n),o&128&&t.normalize(a)):n&&(a.shapeFlag|=Rt(n)?8:16),Us>0&&!s&&Kn&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Kn.push(a),a}const Ct=LS;function LS(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===oS)&&(t=Zi),Ca(t)){const l=Uo(t,e,!0);return n&&cd(l,n),Us>0&&!o&&Kn&&(l.shapeFlag&6?Kn[Kn.indexOf(t)]=l:Kn.push(l)),l.patchFlag=-2,l}if(GS(t)&&(t=t.__vccOpts),e){e=FS(e);let{class:l,style:a}=e;l&&!Rt(l)&&(e.class=di(l)),xt(a)&&(nd(a)&&!Ve(a)&&(a=un({},a)),e.style=Io(a))}const s=Rt(t)?1:Jg(t)?128:qw(t)?64:xt(t)?4:We(t)?2:0;return j(t,e,n,r,i,s,o,!0)}function FS(t){return t?nd(t)||Bg(t)?un({},t):t:null}function Uo(t,e,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:l,transition:a}=t,c=e?jS(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Gg(c),ref:e&&e.ref?n&&o?Ve(o)?o.concat(Gl(e)):[o,Gl(e)]:Gl(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Xt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Uo(t.ssContent),ssFallback:t.ssFallback&&Uo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&od(u,a.clone(u)),u}function or(t=" ",e=0){return Ct(pc,null,t,e)}function VS(t,e){const n=Ct(Yl,null,t);return n.staticCount=e,n}function it(t="",e=!1){return e?(xe(),Mt(Zi,null,t)):Ct(Zi,null,t)}function yr(t){return t==null||typeof t=="boolean"?Ct(Zi):Ve(t)?Ct(Xt,null,t.slice()):Ca(t)?Qr(t):Ct(pc,null,String(t))}function Qr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Uo(t)}function cd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ve(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),cd(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!Bg(e)?e._ctx=Nn:i===3&&Nn&&(Nn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else We(e)?(e={default:e,_ctx:Nn},n=32):(e=String(e),r&64?(n=16,e=[or(e)]):n=8);t.children=e,t.shapeFlag|=n}function jS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=di([e.class,r.class]));else if(i==="style")e.style=Io([e.style,r.style]);else if(nc(i)){const o=e[i],s=r[i];s&&o!==s&&!(Ve(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function hr(t,e,n,r=null){Sr(t,e,7,[n,r])}const HS=Dg();let zS=0;function KS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||HS,o={uid:zS++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fg(r,i),emitsOptions:qg(r,i),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:r.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=NS.bind(null,o),t.ce&&t.ce(o),o}let en=null;const mc=()=>en||Nn;let Oa,Ku;{const t=sc(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};Oa=e("__VUE_INSTANCE_SETTERS__",n=>en=n),Ku=e("__VUE_SSR_SETTERS__",n=>Ws=n)}const ul=t=>{const e=en;return Oa(t),t.scope.on(),()=>{t.scope.off(),Oa(e)}},Fh=()=>{en&&en.scope.off(),Oa(null)};function Xg(t){return t.vnode.shapeFlag&4}let Ws=!1;function US(t,e=!1,n=!1){e&&Ku(e);const{props:r,children:i}=t.vnode,o=Xg(t);gS(t,r,o,e),wS(t,i,n);const s=o?WS(t,e):void 0;return e&&Ku(!1),s}function WS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,lS);const{setup:r}=n;if(r){Ci();const i=t.setupContext=r.length>1?JS(t):null,o=ul(t),s=cl(r,t,0,[t.props,i]),l=qm(s);if(Oi(),o(),(l||t.sp)&&!Os(t)&&Og(t),l){if(s.then(Fh,Fh),e)return s.then(a=>{Vh(t,a)}).catch(a=>{uc(a,t,0)});t.asyncDep=s}else Vh(t,s)}else Zg(t)}function Vh(t,e,n){We(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xt(e)&&(t.setupState=yg(e)),Zg(t)}function Zg(t,e,n){const r=t.type;t.render||(t.render=r.render||vr);{const i=ul(t);Ci();try{aS(t)}finally{Oi(),i()}}}const qS={get(t,e){return on(t,"get",""),t[e]}};function JS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,qS),slots:t.slots,emit:t.emit,expose:e}}function gc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(yg(gg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Es)return Es[n](t)},has(e,n){return n in e||n in Es}})):t.proxy}function YS(t,e=!0){return We(t)?t.displayName||t.name:t.name||e&&t.__name}function GS(t){return We(t)&&"__vccOpts"in t}const Uu=(t,e)=>Vw(t,e,Ws);function Qg(t,e,n){const r=arguments.length;return r===2?xt(e)&&!Ve(e)?Ca(e)?Ct(t,null,[e]):Ct(t,e):Ct(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ca(n)&&(n=[n]),Ct(t,e,n))}const XS="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wu;const jh=typeof window<"u"&&window.trustedTypes;if(jh)try{Wu=jh.createPolicy("vue",{createHTML:t=>t})}catch{}const ey=Wu?t=>Wu.createHTML(t):t=>t,ZS="http://www.w3.org/2000/svg",QS="http://www.w3.org/1998/Math/MathML",Mr=typeof document<"u"?document:null,Hh=Mr&&Mr.createElement("template"),ex={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Mr.createElementNS(ZS,t):e==="mathml"?Mr.createElementNS(QS,t):n?Mr.createElement(t,{is:n}):Mr.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Mr.createTextNode(t),createComment:t=>Mr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Hh.innerHTML=ey(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Hh.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},tx=Symbol("_vtc");function nx(t,e,n){const r=t[tx];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const zh=Symbol("_vod"),rx=Symbol("_vsh"),ix=Symbol(""),ox=/(^|;)\s*display\s*:/;function sx(t,e,n){const r=t.style,i=Rt(n);let o=!1;if(n&&!i){if(e)if(Rt(e))for(const s of e.split(";")){const l=s.slice(0,s.indexOf(":")).trim();n[l]==null&&Xl(r,l,"")}else for(const s in e)n[s]==null&&Xl(r,s,"");for(const s in n)s==="display"&&(o=!0),Xl(r,s,n[s])}else if(i){if(e!==n){const s=r[ix];s&&(n+=";"+s),r.cssText=n,o=ox.test(n)}}else e&&t.removeAttribute("style");zh in t&&(t[zh]=o?r.display:"",t[rx]&&(r.display="none"))}const Kh=/\s*!important$/;function Xl(t,e,n){if(Ve(n))n.forEach(r=>Xl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=lx(t,e);Kh.test(n)?t.setProperty(io(r),n.replace(Kh,""),"important"):t[r]=n}}const Uh=["Webkit","Moz","ms"],Yc={};function lx(t,e){const n=Yc[e];if(n)return n;let r=er(e);if(r!=="filter"&&r in t)return Yc[e]=r;r=oc(r);for(let i=0;i<Uh.length;i++){const o=Uh[i]+r;if(o in t)return Yc[e]=o}return e}const Wh="http://www.w3.org/1999/xlink";function qh(t,e,n,r,i,o=aw(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Wh,e.slice(6,e.length)):t.setAttributeNS(Wh,e,n):n==null||o&&!Xm(n)?t.removeAttribute(e):t.setAttribute(e,o?"":ki(n)?String(n):n)}function Jh(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?ey(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let s=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Xm(n):n==null&&l==="string"?(n="",s=!0):l==="number"&&(n=0,s=!0)}try{t[e]=n}catch{}s&&t.removeAttribute(i||e)}function So(t,e,n,r){t.addEventListener(e,n,r)}function ax(t,e,n,r){t.removeEventListener(e,n,r)}const Yh=Symbol("_vei");function cx(t,e,n,r,i=null){const o=t[Yh]||(t[Yh]={}),s=o[e];if(r&&s)s.value=r;else{const[l,a]=ux(e);if(r){const c=o[e]=hx(r,i);So(t,l,c,a)}else s&&(ax(t,l,s,a),o[e]=void 0)}}const Gh=/(?:Once|Passive|Capture)$/;function ux(t){let e;if(Gh.test(t)){e={};let r;for(;r=t.match(Gh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):io(t.slice(2)),e]}let Gc=0;const fx=Promise.resolve(),dx=()=>Gc||(fx.then(()=>Gc=0),Gc=Date.now());function hx(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Sr(px(r,n.value),e,5,[r])};return n.value=t,n.attached=dx(),n}function px(t,e){if(Ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Xh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,mx=(t,e,n,r,i,o)=>{const s=i==="svg";e==="class"?nx(t,r,s):e==="style"?sx(t,n,r):nc(e)?Jf(e)||cx(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):gx(t,e,r,s))?(Jh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&qh(t,e,r,s,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Rt(r))?Jh(t,er(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),qh(t,e,r,s))};function gx(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Xh(e)&&We(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Xh(e)&&Rt(n)?!1:e in t}const Zh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ve(e)?n=>Wl(e,n):e};function yx(t){t.target.composing=!0}function Qh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Xc=Symbol("_assign"),Lo={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Xc]=Zh(i);const o=r||i.props&&i.props.type==="number";So(t,e?"change":"input",s=>{if(s.target.composing)return;let l=t.value;n&&(l=l.trim()),o&&(l=$u(l)),t[Xc](l)}),n&&So(t,"change",()=>{t.value=t.value.trim()}),e||(So(t,"compositionstart",yx),So(t,"compositionend",Qh),So(t,"change",Qh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(t[Xc]=Zh(s),t.composing)return;const l=(o||t.type==="number")&&!/^0\d/.test(t.value)?$u(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===a)||(t.value=a))}},bx=un({patchProp:mx},ex);let ep;function vx(){return ep||(ep=xS(bx))}const wx=(...t)=>{const e=vx().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=xx(r);if(!i)return;const o=e._component;!We(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,Sx(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function Sx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xx(t){return Rt(t)?document.querySelector(t):t}const vt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$t=Object.keys,an=Array.isArray;function Sn(t,e){return typeof e!="object"||$t(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||vt.Promise||(vt.Promise=Promise);const qs=Object.getPrototypeOf,kx={}.hasOwnProperty;function Wn(t,e){return kx.call(t,e)}function Wo(t,e){typeof e=="function"&&(e=e(qs(t))),(typeof Reflect>"u"?$t:Reflect.ownKeys)(e).forEach(n=>{Fr(t,n,e[n])})}const ty=Object.defineProperty;function Fr(t,e,n,r){ty(t,e,Sn(n&&Wn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Fo(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Fr(t.prototype,"constructor",t),{extend:Wo.bind(null,t.prototype)}}}}const Cx=Object.getOwnPropertyDescriptor;function ud(t,e){let n;return Cx(t,e)||(n=qs(t))&&ud(n,e)}const Ox=[].slice;function Ea(t,e,n){return Ox.call(t,e,n)}function ny(t,e){return e(t)}function hs(t){if(!t)throw new Error("Assertion Failed")}function ry(t){vt.setImmediate?setImmediate(t):setTimeout(t,0)}function iy(t,e){return t.reduce((n,r,i)=>{var o=e(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Vr(t,e){if(typeof e=="string"&&Wn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var o=Vr(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(s!==-1){var l=t[e.substr(0,s)];return l==null?void 0:Vr(l,e.substr(s+1))}}function cr(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){hs(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)cr(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var s=e.substr(0,o),l=e.substr(o+1);if(l==="")n===void 0?an(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var a=t[s];a&&Wn(t,s)||(a=t[s]={}),cr(a,l,n)}}else n===void 0?an(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function oy(t){var e={};for(var n in t)Wn(t,n)&&(e[n]=t[n]);return e}const Ex=[].concat;function sy(t){return Ex.apply([],t)}const ly="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(sy([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>vt[t]),Tx=ly.map(t=>vt[t]);iy(ly,t=>[t,!0]);let ei=null;function fl(t){ei=typeof WeakMap<"u"&&new WeakMap;const e=qu(t);return ei=null,e}function qu(t){if(!t||typeof t!="object")return t;let e=ei&&ei.get(t);if(e)return e;if(an(t)){e=[],ei&&ei.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(qu(t[n]))}else if(Tx.indexOf(t.constructor)>=0)e=t;else{const o=qs(t);for(var i in e=o===Object.prototype?{}:Object.create(o),ei&&ei.set(t,e),t)Wn(t,i)&&(e[i]=qu(t[i]))}return e}const{toString:Ax}={};function Ju(t){return Ax.call(t).slice(8,-1)}const Yu=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_x=typeof Yu=="symbol"?function(t){var e;return t!=null&&(e=t[Yu])&&e.apply(t)}:function(){return null},xo={};function $r(t){var e,n,r,i;if(arguments.length===1){if(an(t))return t.slice();if(this===xo&&typeof t=="string")return[t];if(i=_x(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const fd=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Or=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ay(t,e){Or=t,cy=e}var cy=()=>!0;const Mx=!new Error("").stack;function oo(){if(Mx)try{throw oo.arguments,new Error}catch(t){return t}return new Error}function Gu(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(cy).map(r=>`
`+r).join("")):""}var uy=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],dd=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(uy),Nx={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Vo(t,e){this._e=oo(),this.name=t,this.message=e}function fy(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Ta(t,e,n,r){this._e=oo(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=fy(t,e)}function As(t,e){this._e=oo(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=fy(t,e)}Fo(Vo).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Gu(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Fo(Ta).from(Vo),Fo(As).from(Vo);var hd=dd.reduce((t,e)=>(t[e]=e+"Error",t),{});const Px=Vo;var Fe=dd.reduce((t,e)=>{var n=e+"Error";function r(i,o){this._e=oo(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Nx[e]||n,this.inner=null)}return Fo(r).from(Px),t[e]=r,t},{});Fe.Syntax=SyntaxError,Fe.Type=TypeError,Fe.Range=RangeError;var tp=uy.reduce((t,e)=>(t[e+"Error"]=Fe[e],t),{}),Zl=dd.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=Fe[e]),t),{});function gt(){}function Js(t){return t}function Ix(t,e){return t==null||t===Js?e:function(n){return e(t(n))}}function Qi(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Dx(t,e){return t===gt?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Qi(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Qi(i,this.onerror):i),o!==void 0?o:n}}function $x(t,e){return t===gt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Qi(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Qi(r,this.onerror):r)}}function Rx(t,e){return t===gt?e:function(n){var r=t.apply(this,arguments);Sn(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Qi(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Qi(o,this.onerror):o),r===void 0?s===void 0?void 0:s:Sn(r,s)}}function Bx(t,e){return t===gt?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function pd(t,e){return t===gt?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}Zl.ModifyError=Ta,Zl.DexieError=Vo,Zl.BulkError=As;var Ys={};const dy=100,[Xu,Aa,Zu]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,qs(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,qs(e),t]})(),hy=Aa&&Aa.then,Ql=Xu&&Xu.constructor,md=!!Zu;var Qu=!1,Lx=Zu?()=>{Zu.then(Ol)}:vt.setImmediate?setImmediate.bind(null,Ol):vt.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Ol(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Ol,0)},_s=function(t,e){ps.push([t,e]),_a&&(Lx(),_a=!1)},ef=!0,_a=!0,Ki=[],ea=[],tf=null,nf=Js,jo={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ip,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{ip(t[0],t[1])}catch{}})}},Pe=jo,ps=[],Ui=0,ta=[];function ve(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=gt,this._lib=!1;var e=this._PSD=Pe;if(Or&&(this._stackHolder=oo(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ys)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&of(this,this._value))}this._state=null,this._value=null,++e.ref,my(this,t)}const rf={get:function(){var t=Pe,e=Ma;function n(r,i){var o=!t.global&&(t!==Pe||e!==Ma);const s=o&&!Kr();var l=new ve((a,c)=>{gd(this,new py(Na(r,t,o,s),Na(i,t,o,s),a,c,t))});return Or&&by(l,this),l}return n.prototype=Ys,n},set:function(t){Fr(this,"then",t&&t.prototype===Ys?rf:{get:function(){return t},set:rf.set})}};function py(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function my(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&dl();n&&typeof n.then=="function"?my(t,(i,o)=>{n instanceof ve?n._then(i,o):n.then(i,o)}):(t._state=!0,t._value=n,gy(t)),r&&hl()}},of.bind(null,t))}catch(n){of(t,n)}}function of(t,e){if(ea.push(e),t._state===null){var n=t._lib&&dl();e=nf(e),t._state=!1,t._value=e,Or&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,o){try{r.apply(null,o)}catch{}}(()=>{var r=ud(e,"stack");e._promise=t,Fr(e,"stack",{get:()=>Qu?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Ki.some(i=>i._value===r._value)||Ki.push(r)}(t),gy(t),n&&hl()}}function gy(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)gd(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ui===0&&(++Ui,_s(()=>{--Ui==0&&yd()},[]))}function gd(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ui,_s(Fx,[n,t,e])}else t._listeners.push(e)}function Fx(t,e,n){try{tf=e;var r,i=e._value;e._state?r=t(i):(ea.length&&(ea=[]),r=t(i),ea.indexOf(i)===-1&&function(o){for(var s=Ki.length;s;)if(Ki[--s]._value===o._value)return void Ki.splice(s,1)}(e)),n.resolve(r)}catch(o){n.reject(o)}finally{tf=null,--Ui==0&&yd(),--n.psd.ref||n.psd.finalize()}}function yy(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,o,s=t._value;s!=null?(i=s.name||"Error",o=s.message||s,r=Gu(s,0)):(i=s,o=""),e.push(i+(o?": "+o:"")+r)}return Or&&((r=Gu(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&yy(t._prev,e,n)),e}function by(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Ol(){dl()&&hl()}function dl(){var t=ef;return ef=!1,_a=!1,t}function hl(){var t,e,n;do for(;ps.length>0;)for(t=ps,ps=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(ps.length>0);ef=!0,_a=!0}function yd(){var t=Ki;Ki=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=ta.slice(0),n=e.length;n;)e[--n]()}function El(t){return new ve(Ys,!1,t)}function St(t,e){var n=Pe;return function(){var r=dl(),i=Pe;try{return bi(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{bi(i,!1),r&&hl()}}}Wo(ve.prototype,{then:rf,_then:function(t,e){gd(this,new py(null,null,t,e,Pe))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):El(r)):this.then(null,r=>r&&r.name===e?n(r):El(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),El(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Qu=!0;var t=yy(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Qu=!1}}},timeout:function(t,e){return t<1/0?new ve((n,r)=>{var i=setTimeout(()=>r(new Fe.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Fr(ve.prototype,Symbol.toStringTag,"Dexie.Promise"),jo.env=vy(),Wo(ve,{all:function(){var t=$r.apply(null,arguments).map(Tl);return new ve(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,o)=>ve.resolve(i).then(s=>{t[o]=s,--r||e(t)},n))})},resolve:t=>{if(t instanceof ve)return t;if(t&&typeof t.then=="function")return new ve((n,r)=>{t.then(n,r)});var e=new ve(Ys,!0,t);return by(e,tf),e},reject:El,race:function(){var t=$r.apply(null,arguments).map(Tl);return new ve((e,n)=>{t.map(r=>ve.resolve(r).then(e,n))})},PSD:{get:()=>Pe,set:t=>Pe=t},totalEchoes:{get:()=>Ma},newPSD:yi,usePSD:ns,scheduler:{get:()=>_s,set:t=>{_s=t}},rejectionMapper:{get:()=>nf,set:t=>{nf=t}},follow:(t,e)=>new ve((n,r)=>yi((i,o)=>{var s=Pe;s.unhandleds=[],s.onunhandled=o,s.finalize=Qi(function(){(function(l){function a(){l(),ta.splice(ta.indexOf(a),1)}ta.push(a),++Ui,_s(()=>{--Ui==0&&yd()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),t()},e,n,r))}),Ql&&(Ql.allSettled&&Fr(ve,"allSettled",function(){const t=$r.apply(null,arguments).map(Tl);return new ve(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,o)=>ve.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||e(r)))})}),Ql.any&&typeof AggregateError<"u"&&Fr(ve,"any",function(){const t=$r.apply(null,arguments).map(Tl);return new ve((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((o,s)=>ve.resolve(o).then(l=>e(l),l=>{i[s]=l,--r||n(new AggregateError(i))}))})}));const ln={awaits:0,echoes:0,id:0};var Vx=0,na=[],Zc=0,Ma=0,jx=0;function yi(t,e,n,r){var i=Pe,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++jx;var s=jo.env;o.env=md?{Promise:ve,PromiseProp:{value:ve,configurable:!0,writable:!0},all:ve.all,race:ve.race,allSettled:ve.allSettled,any:ve.any,resolve:ve.resolve,reject:ve.reject,nthen:np(s.nthen,o),gthen:np(s.gthen,o)}:{},e&&Sn(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=ns(o,t,n,r);return o.ref===0&&o.finalize(),l}function ts(){return ln.id||(ln.id=++Vx),++ln.awaits,ln.echoes+=dy,ln.id}function Kr(){return!!ln.awaits&&(--ln.awaits==0&&(ln.id=0),ln.echoes=ln.awaits*dy,!0)}function Tl(t){return ln.echoes&&t&&t.constructor===Ql?(ts(),t.then(e=>(Kr(),e),e=>(Kr(),jt(e)))):t}function Hx(t){++Ma,ln.echoes&&--ln.echoes!=0||(ln.echoes=ln.id=0),na.push(Pe),bi(t,!0)}function zx(){var t=na[na.length-1];na.pop(),bi(t,!1)}function bi(t,e){var n=Pe;if((e?!ln.echoes||Zc++&&t===Pe:!Zc||--Zc&&t===Pe)||wy(e?Hx.bind(null,t):zx),t!==Pe&&(Pe=t,n===jo&&(jo.env=vy()),md)){var r=jo.env.Promise,i=t.env;Aa.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(vt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function vy(){var t=vt.Promise;return md?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(vt,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Aa.then,gthen:t.prototype.then}:{}}function ns(t,e,n,r,i){var o=Pe;try{return bi(t,!0),e(n,r,i)}finally{bi(o,!1)}}function wy(t){hy.call(Xu,t)}function Na(t,e,n,r){return typeof t!="function"?t:function(){var i=Pe;n&&ts(),bi(e,!0);try{return t.apply(this,arguments)}finally{bi(i,!1),r&&wy(Kr)}}}function np(t,e){return function(n,r){return t.call(this,Na(n,e),Na(r,e))}}(""+hy).indexOf("[native code]")===-1&&(ts=Kr=gt);const rp="unhandledrejection";function ip(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(vt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(rp,!0,!0),Sn(r,i)):vt.CustomEvent&&Sn(r=new CustomEvent(rp,{detail:i}),i),r&&vt.dispatchEvent&&(dispatchEvent(r),!vt.PromiseRejectionEvent&&vt.onunhandledrejection))try{vt.onunhandledrejection(r)}catch{}Or&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var jt=ve.reject;function sf(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Pe.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===hd.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>sf(t,e,n,r))):jt(o)}return i._promise(e,(o,s)=>yi(()=>(Pe.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(t._state.openComplete)return jt(new Fe.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return jt(new Fe.DatabaseClosed);t.open().catch(gt)}return t._state.dbReadyPromise.then(()=>sf(t,e,n,r))}const op="3.2.7",Fi="",lf=-1/0,Ar="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Sy="String expected.",Ms=[],yc=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Kx=yc,Ux=yc,xy=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),bc="__dbnames",Qc="readonly",eu="readwrite";function eo(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const ky={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Al(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=fl(e))[t],e)}let Wx=class{_trans(e,n,r){const i=this._tx||Pe.trans,o=this.name;function s(a,c,u){if(!u.schema[o])throw new Fe.NotFound("Table "+o+" not part of transaction");return n(u.idbtrans,u)}const l=dl();try{return i&&i.db===this.db?i===Pe.trans?i._promise(e,s,r):yi(()=>i._promise(e,s,r),{trans:i,transless:Pe.transless||Pe}):sf(this.db,e,[this.name],s)}finally{l&&hl()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(an(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=$t(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==Fi){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!r&&Or&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(c,u){try{return o.cmp(c,u)===0}catch{return!1}}const[l,a]=n.reduce(([c,u],f)=>{const h=i[f],m=e[f];return[c||h,c||!h?eo(u,h&&h.multi?g=>{const b=Vr(g,f);return an(b)&&b.some(x=>s(m,x))}:g=>s(m,Vr(g,f))):u]},[null,null]);return l?this.where(l.name).equals(e[l.keyPath]).filter(a):r?this.filter(a):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,an(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var o in r)if(Wn(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Sn(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=Al(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?ve.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{cr(e,i,s)}catch{}return s})}update(e,n){if(typeof e!="object"||an(e))return this.where(":id").equals(e).modify(n);{const r=Vr(e,this.schema.primKey.keyPath);if(r===void 0)return jt(new Fe.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?$t(n).forEach(i=>{cr(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=e;return i&&r&&(o=Al(i)(e)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?ve.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{cr(e,i,s)}catch{}return s})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?ve.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:ky})).then(e=>e.numFailures?ve.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new Fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Al(a)):e;return this.core.mutate({trans:s,type:"add",keys:i,values:u,wantResults:o}).then(({numFailures:f,results:h,lastResult:m,failures:g})=>{if(f===0)return o?h:m;throw new As(`${this.name}.bulkAdd(): ${f} of ${c} operations failed`,g)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:l,keyPath:a}=this.schema.primKey;if(a&&i)throw new Fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=a&&l?e.map(Al(a)):e;return this.core.mutate({trans:s,type:"put",keys:i,values:u,wantResults:o}).then(({numFailures:f,results:h,lastResult:m,failures:g})=>{if(f===0)return o?h:m;throw new As(`${this.name}.bulkPut(): ${f} of ${c} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new As(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}};function Ns(t){var e={},n=function(s,l){if(l){for(var a=arguments.length,c=new Array(a-1);--a;)c[a-1]=arguments[a];return e[s].subscribe.apply(null,c),t}if(typeof s=="string")return e[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,l,a){if(typeof s!="object"){var c;l||(l=Bx),a||(a=gt);var u={subscribers:[],fire:a,subscribe:function(f){u.subscribers.indexOf(f)===-1&&(u.subscribers.push(f),u.fire=l(u.fire,f))},unsubscribe:function(f){u.subscribers=u.subscribers.filter(function(h){return h!==f}),u.fire=u.subscribers.reduce(l,a)}};return e[s]=n[s]=u,u}$t(c=s).forEach(function(f){var h=c[f];if(an(h))o(f,c[f][0],c[f][1]);else{if(h!=="asap")throw new Fe.InvalidArgument("Invalid event config");var m=o(f,Js,function(){for(var g=arguments.length,b=new Array(g);g--;)b[g]=arguments[g];m.subscribers.forEach(function(x){ry(function(){x.apply(null,b)})})})}})}}function us(t,e){return Fo(e).from({prototype:t}),e}function po(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function tu(t,e){t.filter=eo(t.filter,e)}function nu(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>eo(r(),e()):e,t.justLimit=n&&!r}function ra(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new Fe.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function sp(t,e,n){const r=ra(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function _l(t,e,n,r){const i=t.replayFilter?eo(t.filter,t.replayFilter()):t.filter;if(t.or){const o={},s=(l,a,c)=>{if(!i||i(a,c,h=>a.stop(h),h=>a.fail(h))){var u=a.primaryKey,f=""+u;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(u)),Wn(o,f)||(o[f]=!0,e(l,a,c))}};return Promise.all([t.or._iterate(s,n),lp(sp(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return lp(sp(t,r,n),eo(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function lp(t,e,n,r){var i=St(r?(o,s,l)=>n(r(o),s,l):n);return t.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();e&&!e(o,l=>s=l,l=>{o.stop(l),s=gt},l=>{o.fail(l),s=gt})||i(o.value,o,l=>s=l),s()})})}function wn(t,e){try{const n=ap(t),r=ap(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c)if(i[c]!==o[c])return i[c]<o[c]?-1:1;return s===l?0:s<l?-1:1}(cp(t),cp(e));case"Array":return function(i,o){const s=i.length,l=o.length,a=s<l?s:l;for(let c=0;c<a;++c){const u=wn(i[c],o[c]);if(u!==0)return u}return s===l?0:s<l?-1:1}(t,e)}}catch{}return NaN}function ap(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Ju(t);return n==="ArrayBuffer"?"binary":n}function cp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}let qx=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,jt.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,jt.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=eo(n.algorithm,e)}_iterate(e,n){return _l(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Sn(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>_l(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(po(r,!0))return i.count({trans:n,query:{index:ra(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return _l(r,()=>(++o,!1),n,i).then(()=>o)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],o=r.length-1;function s(c,u){return u?s(c[r[u]],u-1):c[i]}var l=this._ctx.dir==="next"?1:-1;function a(c,u){var f=s(c,o),h=s(u,o);return f<h?-l:f>h?l:0}return this.toArray(function(c){return c.sort(a)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&po(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=ra(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return _l(r,o=>i.push(o),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,po(n)?nu(n,()=>{var r=e;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):nu(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),nu(this._ctx,()=>{var n=e;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(e,n){return tu(this._ctx,function(r,i,o){return!e(r.value)||(i(o),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return tu(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=eo(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&po(n,!0)&&n.limit>0)return this._read(i=>{var o=ra(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return tu(this._ctx,function(i){var o=i.primaryKey.toString(),s=Wn(r,o);return r[o]=!0,!s}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var o=$t(e),s=o.length;i=function(b){for(var x=!1,O=0;O<s;++O){var A=o[O],N=e[A];Vr(b,A)!==N&&(cr(b,A,N),x=!0)}return x}}const l=n.table.core,{outbound:a,extractKey:c}=l.schema.primaryKey,u=this.db._options.modifyChunkSize||200,f=[];let h=0;const m=[],g=(b,x)=>{const{failures:O,numFailures:A}=x;h+=b-A;for(let N of $t(O))f.push(O[N])};return this.clone().primaryKeys().then(b=>{const x=O=>{const A=Math.min(u,b.length-O);return l.getMany({trans:r,keys:b.slice(O,O+A),cache:"immutable"}).then(N=>{const $=[],I=[],L=a?[]:null,V=[];for(let E=0;E<A;++E){const S=N[E],F={value:fl(S),primKey:b[O+E]};i.call(F,F.value,F)!==!1&&(F.value==null?V.push(b[O+E]):a||wn(c(S),c(F.value))===0?(I.push(F.value),a&&L.push(b[O+E])):(V.push(b[O+E]),$.push(F.value)))}const K=po(n)&&n.limit===1/0&&(typeof e!="function"||e===ru)&&{index:n.index,range:n.range};return Promise.resolve($.length>0&&l.mutate({trans:r,type:"add",values:$}).then(E=>{for(let S in E.failures)V.splice(parseInt(S),1);g($.length,E)})).then(()=>(I.length>0||K&&typeof e=="object")&&l.mutate({trans:r,type:"put",keys:L,values:I,criteria:K,changeSpec:typeof e!="function"&&e}).then(E=>g(I.length,E))).then(()=>(V.length>0||K&&e===ru)&&l.mutate({trans:r,type:"delete",keys:V,criteria:K}).then(E=>g(V.length,E))).then(()=>b.length>O+A&&x(O+u))})};return x(0).then(()=>{if(f.length>0)throw new Ta("Error modifying one or more objects",f,h,m);return b.length})})})}delete(){var e=this._ctx,n=e.range;return po(e)&&(e.isPrimKey&&!Ux||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,o=n;return e.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:l,lastResult:a,results:c,numFailures:u})=>{if(u)throw new Ta("Could not delete some values",Object.keys(l).map(f=>l[f]),s-u);return s-u}))}):this.modify(ru)}};const ru=(t,e)=>e.value=null;function Jx(t,e){return t<e?-1:t===e?0:1}function Yx(t,e){return t>e?-1:t===e?0:1}function Ln(t,e,n){var r=t instanceof Oy?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function mo(t){return new t.Collection(t,()=>Cy("")).limit(0)}function Gx(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),l=-1,a=0;a<s;++a){var c=e[a];if(c!==r[a])return i(t[a],n[a])<0?t.substr(0,a)+n[a]+n.substr(a+1):i(t[a],r[a])<0?t.substr(0,a)+r[a]+n.substr(a+1):l>=0?t.substr(0,l)+e[l]+n.substr(l+1):null;i(t[a],c)<0&&(l=a)}return s<r.length&&o==="next"?t+n.substr(t.length):s<t.length&&o==="prev"?t.substr(0,n.length):l<0?null:t.substr(0,l)+r[l]+n.substr(l+1)}function Ml(t,e,n,r){var i,o,s,l,a,c,u,f=n.length;if(!n.every(b=>typeof b=="string"))return Ln(t,Sy);function h(b){i=function(O){return O==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),o=function(O){return O==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),s=b==="next"?Jx:Yx;var x=n.map(function(O){return{lower:o(O),upper:i(O)}}).sort(function(O,A){return s(O.lower,A.lower)});l=x.map(function(O){return O.upper}),a=x.map(function(O){return O.lower}),c=b,u=b==="next"?"":r}h("next");var m=new t.Collection(t,()=>Gr(l[0],a[f-1]+r));m._ondirectionchange=function(b){h(b)};var g=0;return m._addAlgorithm(function(b,x,O){var A=b.key;if(typeof A!="string")return!1;var N=o(A);if(e(N,a,g))return!0;for(var $=null,I=g;I<f;++I){var L=Gx(A,N,l[I],a[I],s,c);L===null&&$===null?g=I+1:($===null||s($,L)>0)&&($=L)}return x($!==null?function(){b.continue($+u)}:O),!1}),m}function Gr(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Cy(t){return{type:1,lower:t,upper:t}}let Oy=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?mo(this):new this.Collection(this,()=>Gr(e,n,!r,!i))}catch{return Ln(this,Ar)}}equals(e){return e==null?Ln(this,Ar):new this.Collection(this,()=>Cy(e))}above(e){return e==null?Ln(this,Ar):new this.Collection(this,()=>Gr(e,void 0,!0))}aboveOrEqual(e){return e==null?Ln(this,Ar):new this.Collection(this,()=>Gr(e,void 0,!1))}below(e){return e==null?Ln(this,Ar):new this.Collection(this,()=>Gr(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Ln(this,Ar):new this.Collection(this,()=>Gr(void 0,e))}startsWith(e){return typeof e!="string"?Ln(this,Sy):this.between(e,e+Fi,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Ml(this,(n,r)=>n.indexOf(r[0])===0,[e],Fi)}equalsIgnoreCase(e){return Ml(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=$r.apply(xo,arguments);return e.length===0?mo(this):Ml(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=$r.apply(xo,arguments);return e.length===0?mo(this):Ml(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,Fi)}anyOf(){const e=$r.apply(xo,arguments);let n=this._cmp;try{e.sort(n)}catch{return Ln(this,Ar)}if(e.length===0)return mo(this);const r=new this.Collection(this,()=>Gr(e[0],e[e.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((o,s,l)=>{const a=o.key;for(;n(a,e[i])>0;)if(++i,i===e.length)return s(l),!1;return n(a,e[i])===0||(s(()=>{o.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[lf,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=$r.apply(xo,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ln(this,Ar)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[lf,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,l=this._max;if(e.length===0)return mo(this);if(!e.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return Ln(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Fe.InvalidArgument);const a=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,f=i;function h(A,N){return f(A[0],N[0])}try{u=e.reduce(function(A,N){let $=0,I=A.length;for(;$<I;++$){const L=A[$];if(r(N[0],L[1])<0&&r(N[1],L[0])>0){L[0]=s(L[0],N[0]),L[1]=l(L[1],N[1]);break}}return $===I&&A.push(N),A},[]),u.sort(h)}catch{return Ln(this,Ar)}let m=0;const g=c?A=>i(A,u[m][1])>0:A=>i(A,u[m][1])>=0,b=a?A=>o(A,u[m][0])>0:A=>o(A,u[m][0])>=0;let x=g;const O=new this.Collection(this,()=>Gr(u[0][0],u[u.length-1][1],!a,!c));return O._ondirectionchange=A=>{A==="next"?(x=g,f=i):(x=b,f=o),u.sort(h)},O._addAlgorithm((A,N,$)=>{for(var I=A.key;x(I);)if(++m,m===u.length)return N($),!1;return!!function(L){return!g(L)&&!b(L)}(I)||(this._cmp(I,u[m][1])===0||this._cmp(I,u[m][0])===0||N(()=>{f===i?A.continue(u[m][0]):A.continue(u[m][1])}),!1)}),O}startsWithAnyOf(){const e=$r.apply(xo,arguments);return e.every(n=>typeof n=="string")?e.length===0?mo(this):this.inAnyRange(e.map(n=>[n,n+Fi])):Ln(this,"startsWithAnyOf() only works with strings")}};function gr(t){return St(function(e){return Gs(e),t(e.target.error),!1})}function Gs(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Xs="storagemutated",ii="x-storagemutated-1",vi=Ns(null,Xs);class Xx{_lock(){return hs(!Pe.global),++this._reculock,this._reculock!==1||Pe.global||(Pe.lockOwnerFor=this),this}_unlock(){if(hs(!Pe.global),--this._reculock==0)for(Pe.global||(Pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ns(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&Pe.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(hs(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Fe.DatabaseClosed(r);case"MissingAPIError":throw new Fe.MissingAPI(r.message,r);default:throw new Fe.OpenFailed(r)}if(!this.active)throw new Fe.TransactionInactive;return hs(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=St(i=>{Gs(i),this._reject(e.error)}),e.onabort=St(i=>{Gs(i),this.active&&this._reject(new Fe.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=St(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&vi.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return jt(new Fe.ReadOnly("Transaction is readonly"));if(!this.active)return jt(new Fe.TransactionInactive);if(this._locked())return new ve((o,s)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(o,s)},Pe])});if(r)return yi(()=>{var o=new ve((s,l)=>{this._lock();const a=n(s,l,this);a&&a.then&&a.then(s,l)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new ve((o,s)=>{var l=n(o,s,this);l&&l.then&&l.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=ve.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new ve((s,l)=>{r.then(a=>n._waitingQueue.push(St(s.bind(null,a))),a=>n._waitingQueue.push(St(l.bind(null,a)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Fe.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Wn(n,e))return n[e];const r=this.schema[e];if(!r)throw new Fe.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function af(t,e,n,r,i,o,s){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Ey(e)}}function Ey(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Ty(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:iy(n,r=>[r.name,r])}}let Zs=t=>{try{return t.only([[]]),Zs=()=>[[]],[[]]}catch{return Zs=()=>Fi,Fi}};function cf(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Vr(r,e)}(t):e=>Vr(e,t)}function up(t){return[].slice.call(t)}let Zx=0;function Ps(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Qx(t,e,n){function r(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:f,upperOpen:h}=a;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!f):e.bound(c,u,!!f,!!h)}const{schema:i,hasGetAll:o}=function(a,c){const u=up(a.objectStoreNames);return{schema:{name:a.name,tables:u.map(f=>c.objectStore(f)).map(f=>{const{keyPath:h,autoIncrement:m}=f,g=an(h),b=h==null,x={},O={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:g,keyPath:h,autoIncrement:m,unique:!0,extractKey:cf(h)},indexes:up(f.indexNames).map(A=>f.index(A)).map(A=>{const{name:N,unique:$,multiEntry:I,keyPath:L}=A,V={name:N,compound:an(L),keyPath:L,unique:$,multiEntry:I,extractKey:cf(L)};return x[Ps(L)]=V,V}),getIndexByKeyPath:A=>x[Ps(A)]};return x[":id"]=O.primaryKey,h!=null&&(x[Ps(h)]=O.primaryKey),O})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),s=i.tables.map(a=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:f,type:h,keys:m,values:g,range:b}){return new Promise((x,O)=>{x=St(x);const A=f.objectStore(u),N=A.keyPath==null,$=h==="put"||h==="add";if(!$&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:I}=m||g||{length:1};if(m&&g&&m.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(I===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});let L;const V=[],K=[];let E=0;const S=C=>{++E,Gs(C)};if(h==="deleteRange"){if(b.type===4)return x({numFailures:E,failures:K,results:[],lastResult:void 0});b.type===3?V.push(L=A.clear()):V.push(L=A.delete(r(b)))}else{const[C,ce]=$?N?[g,m]:[g,null]:[m,null];if($)for(let Z=0;Z<I;++Z)V.push(L=ce&&ce[Z]!==void 0?A[h](C[Z],ce[Z]):A[h](C[Z])),L.onerror=S;else for(let Z=0;Z<I;++Z)V.push(L=A[h](C[Z])),L.onerror=S}const F=C=>{const ce=C.target.result;V.forEach((Z,Se)=>Z.error!=null&&(K[Se]=Z.error)),x({numFailures:E,failures:K,results:h==="delete"?m:V.map(Z=>Z.result),lastResult:ce})};L.onerror=C=>{S(C),F(C)},L.onsuccess=F})},getMany:({trans:f,keys:h})=>new Promise((m,g)=>{m=St(m);const b=f.objectStore(u),x=h.length,O=new Array(x);let A,N=0,$=0;const I=V=>{const K=V.target;O[K._pos]=K.result,++$===N&&m(O)},L=gr(g);for(let V=0;V<x;++V)h[V]!=null&&(A=b.get(h[V]),A._pos=V,A.onsuccess=I,A.onerror=L,++N);N===0&&m(O)}),get:({trans:f,key:h})=>new Promise((m,g)=>{m=St(m);const b=f.objectStore(u).get(h);b.onsuccess=x=>m(x.target.result),b.onerror=gr(g)}),query:function(f){return h=>new Promise((m,g)=>{m=St(m);const{trans:b,values:x,limit:O,query:A}=h,N=O===1/0?void 0:O,{index:$,range:I}=A,L=b.objectStore(u),V=$.isPrimaryKey?L:L.index($.name),K=r(I);if(O===0)return m({result:[]});if(f){const E=x?V.getAll(K,N):V.getAllKeys(K,N);E.onsuccess=S=>m({result:S.target.result}),E.onerror=gr(g)}else{let E=0;const S=x||!("openKeyCursor"in V)?V.openCursor(K):V.openKeyCursor(K),F=[];S.onsuccess=C=>{const ce=S.result;return ce?(F.push(x?ce.value:ce.primaryKey),++E===O?m({result:F}):void ce.continue()):m({result:F})},S.onerror=gr(g)}})}(o),openCursor:function({trans:f,values:h,query:m,reverse:g,unique:b}){return new Promise((x,O)=>{x=St(x);const{index:A,range:N}=m,$=f.objectStore(u),I=A.isPrimaryKey?$:$.index(A.name),L=g?b?"prevunique":"prev":b?"nextunique":"next",V=h||!("openKeyCursor"in I)?I.openCursor(r(N),L):I.openKeyCursor(r(N),L);V.onerror=gr(O),V.onsuccess=St(K=>{const E=V.result;if(!E)return void x(null);E.___id=++Zx,E.done=!1;const S=E.continue.bind(E);let F=E.continuePrimaryKey;F&&(F=F.bind(E));const C=E.advance.bind(E),ce=()=>{throw new Error("Cursor not stopped")};E.trans=f,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=St(O),E.next=function(){let Z=1;return this.start(()=>Z--?this.continue():this.stop()).then(()=>this)},E.start=Z=>{const Se=new Promise((Q,Te)=>{Q=St(Q),V.onerror=gr(Te),E.fail=Te,E.stop=Ze=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=ce,Q(Ze)}}),ge=()=>{if(V.result)try{Z()}catch(Q){E.fail(Q)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return V.onsuccess=St(Q=>{V.onsuccess=ge,ge()}),E.continue=S,E.continuePrimaryKey=F,E.advance=C,ge(),Se},x(E)},O)})},count({query:f,trans:h}){const{index:m,range:g}=f;return new Promise((b,x)=>{const O=h.objectStore(u),A=m.isPrimaryKey?O:O.index(m.name),N=r(g),$=N?A.count(N):A.count();$.onsuccess=St(I=>b(I.target.result)),$.onerror=gr(x)})}}}(a)),l={};return s.forEach(a=>l[a.name]=a),{stack:"dbcore",transaction:t.transaction.bind(t),table(a){if(!l[a])throw new Error(`Table '${a}' not found`);return l[a]},MIN_KEY:-1/0,MAX_KEY:Zs(e),schema:i}}function uf({_novip:t},e){const n=e.db,r=function(i,o,{IDBKeyRange:s,indexedDB:l},a){return{dbcore:function(u,f){return f.reduce((h,{create:m})=>({...h,...m(h)}),u)}(Qx(o,s,a),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const o=i.name;t.core.schema.tables.some(s=>s.name===o)&&(i.core=t.core.table(o),t[o]instanceof t.Table&&(t[o].core=i.core))})}function Pa({_novip:t},e,n,r){n.forEach(i=>{const o=r[i];e.forEach(s=>{const l=ud(s,i);(!l||"value"in l&&l.value===void 0)&&(s===t.Transaction.prototype||s instanceof t.Transaction?Fr(s,i,{get(){return this.table(i)},set(a){ty(this,i,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new t.Table(i,o))})})}function ff({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function ek(t,e){return t._cfg.version-e._cfg.version}function tk(t,e,n,r){const i=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),l=Pe.transless||Pe;yi(()=>{Pe.trans=o,Pe.transless=l,e===0?($t(i).forEach(a=>{iu(n,a,i[a].primKey,i[a].indexes)}),uf(t,n),ve.follow(()=>t.on.populate.fire(o)).catch(s)):function({_novip:a},c,u,f){const h=[],m=a._versions;let g=a._dbSchema=hf(a,a.idbdb,f),b=!1;const x=m.filter(A=>A._cfg.version>=c);function O(){return h.length?ve.resolve(h.shift()(u.idbtrans)).then(O):ve.resolve()}return x.forEach(A=>{h.push(()=>{const N=g,$=A._cfg.dbschema;pf(a,N,f),pf(a,$,f),g=a._dbSchema=$;const I=Ay(N,$);I.add.forEach(V=>{iu(f,V[0],V[1].primKey,V[1].indexes)}),I.change.forEach(V=>{if(V.recreate)throw new Fe.Upgrade("Not yet support for changing primary key");{const K=f.objectStore(V.name);V.add.forEach(E=>df(K,E)),V.change.forEach(E=>{K.deleteIndex(E.name),df(K,E)}),V.del.forEach(E=>K.deleteIndex(E))}});const L=A._cfg.contentUpgrade;if(L&&A._cfg.version>c){uf(a,f),u._memoizedTables={},b=!0;let V=oy($);I.del.forEach(F=>{V[F]=N[F]}),ff(a,[a.Transaction.prototype]),Pa(a,[a.Transaction.prototype],$t(V),V),u.schema=V;const K=fd(L);let E;K&&ts();const S=ve.follow(()=>{if(E=L(u),E&&K){var F=Kr.bind(null,null);E.then(F,F)}});return E&&typeof E.then=="function"?ve.resolve(E):S.then(()=>E)}}),h.push(N=>{(!b||!Kx)&&function($,I){[].slice.call(I.db.objectStoreNames).forEach(L=>$[L]==null&&I.db.deleteObjectStore(L))}(A._cfg.dbschema,N),ff(a,[a.Transaction.prototype]),Pa(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),u.schema=a._dbSchema})}),O().then(()=>{var A,N;N=f,$t(A=g).forEach($=>{N.db.objectStoreNames.contains($)||iu(N,$,A[$].primKey,A[$].indexes)})})}(t,e,o,n).catch(s)})}function Ay(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],o=e[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!yc)s.recreate=!0,n.change.push(s);else{const l=i.idxByName,a=o.idxByName;let c;for(c in l)a[c]||s.del.push(c);for(c in a){const u=l[c],f=a[c];u?u.src!==f.src&&s.change.push(f):s.add.push(f)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function iu(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>df(i,o)),i}function df(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function hf(t,e,n){const r={};return Ea(e.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const l=af(Ey(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),a=[];for(let u=0;u<o.indexNames.length;++u){const f=o.index(o.indexNames[u]);s=f.keyPath;var c=af(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);a.push(c)}r[i]=Ty(i,l,a)}),r}function pf({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);t._hasGetAll="getAll"in s;for(let l=0;l<s.indexNames.length;++l){const a=s.indexNames[l],c=s.index(a).keyPath,u=typeof c=="string"?c:"["+Ea(c).join("+")+"]";if(e[o]){const f=e[o].idxByName[u];f&&(f.name=a,delete e[o].idxByName[u],e[o].idxByName[a]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&vt.WorkerGlobalScope&&vt instanceof vt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let nk=class{_parseStoresSpec(e,n){$t(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((s,l)=>{const a=(s=s.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return af(a,c||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),an(c),l===0)}),o=i.shift();if(o.multi)throw new Fe.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new Fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new Fe.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ty(r,o,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Sn(this._cfg.storesSource,e):e;const r=n._versions,i={};let o={};return r.forEach(s=>{Sn(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,ff(n,[n._allTables,n,n.Transaction.prototype]),Pa(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],$t(o),o),n._storeNames=$t(o),this}upgrade(e){return this._cfg.contentUpgrade=pd(this._cfg.contentUpgrade||gt,e),this}};function bd(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Vt(bc,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function vd(t){return t&&typeof t.databases=="function"}function mf(t){return yi(function(){return Pe.letThrough=!0,t()})}function rk(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function ik(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?jt(e.dbOpenError):t);Or&&(e.openCanceller._stackHolder=oo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new Fe.DatabaseClosed("db.open() was cancelled")}let o=e.dbReadyResolve,s=null,l=!1;const a=()=>new ve((c,u)=>{if(i(),!n)throw new Fe.MissingAPI;const f=t.name,h=e.autoSchema?n.open(f):n.open(f,Math.round(10*t.verno));if(!h)throw new Fe.MissingAPI;h.onerror=gr(u),h.onblocked=St(t._fireOnBlocked),h.onupgradeneeded=St(m=>{if(s=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=Gs,s.abort(),h.result.close();const b=n.deleteDatabase(f);b.onsuccess=b.onerror=St(()=>{u(new Fe.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{s.onerror=gr(u);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=g<1,t._novip.idbdb=h.result,tk(t,g/10,s,u)}},u),h.onsuccess=St(()=>{s=null;const m=t._novip.idbdb=h.result,g=Ea(m.objectStoreNames);if(g.length>0)try{const x=m.transaction((b=g).length===1?b[0]:b,"readonly");e.autoSchema?function({_novip:O},A,N){O.verno=A.version/10;const $=O._dbSchema=hf(0,A,N);O._storeNames=Ea(A.objectStoreNames,0),Pa(O,[O._allTables],$t($),$)}(t,m,x):(pf(t,t._dbSchema,x),function(O,A){const N=Ay(hf(0,O.idbdb,A),O._dbSchema);return!(N.add.length||N.change.some($=>$.add.length||$.change.length))}(t,x)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),uf(t,x)}catch{}var b;Ms.push(t),m.onversionchange=St(x=>{e.vcFired=!0,t.on("versionchange").fire(x)}),m.onclose=St(x=>{t.on("close").fire(x)}),l&&function({indexedDB:x,IDBKeyRange:O},A){!vd(x)&&A!==bc&&bd(x,O).put({name:A}).catch(gt)}(t._deps,f),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),a()):ve.reject(c));return ve.race([r,(typeof navigator>"u"?ve.resolve():rk()).then(a)]).then(()=>(i(),e.onReadyBeingFired=[],ve.resolve(mf(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(pd,gt);return e.onReadyBeingFired=[],ve.resolve(mf(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),jt(c)}).finally(()=>{e.openComplete=!0,o()})}function gf(t){var e=o=>t.next(o),n=i(e),r=i(o=>t.throw(o));function i(o){return s=>{var l=o(s),a=l.value;return l.done?a:a&&typeof a.then=="function"?a.then(n,r):an(a)?Promise.all(a).then(n,r):n(a)}}return i(e)()}function ok(t,e,n){var r=arguments.length;if(r<2)throw new Fe.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,sy(i),n]}function _y(t,e,n,r,i){return ve.resolve().then(()=>{const o=Pe.transless||Pe,s=t._createTransaction(e,n,t._dbSchema,r),l={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===hd.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>_y(t,e,n,null,i))):jt(f)}const a=fd(i);let c;a&&ts();const u=ve.follow(()=>{if(c=i.call(s,s),c)if(a){var f=Kr.bind(null,null);c.then(f,f)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=gf(c))},l);return(c&&typeof c.then=="function"?ve.resolve(c).then(f=>s.active?f:jt(new Fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(f=>(r&&s._resolve(),s._completion.then(()=>f))).catch(f=>(s._reject(f),jt(f)))})}function Nl(t,e,n){const r=an(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const sk={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},o=[];function s(u,f,h){const m=Ps(u),g=i[m]=i[m]||[],b=u==null?0:typeof u=="string"?1:u.length,x=f>0,O={...h,isVirtual:x,keyTail:f,keyLength:b,extractKey:cf(u),unique:!x&&h.unique};return g.push(O),O.isPrimaryKey||o.push(O),b>1&&s(b===2?u[0]:u.slice(0,b-1),f+1,h),g.sort((A,N)=>A.keyTail-N.keyTail),O}const l=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[l];for(const u of r.indexes)s(u.keyPath,0,u);function a(u){const f=u.query.index;return f.isVirtual?{...u,query:{index:f,range:(h=u.query.range,m=f.keyTail,{type:h.type===1?2:h.type,lower:Nl(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:Nl(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}:u;var h,m}return{...n,schema:{...r,primaryKey:l,indexes:o,getIndexByKeyPath:function(u){const f=i[Ps(u)];return f&&f[0]}},count:u=>n.count(a(u)),query:u=>n.query(a(u)),openCursor(u){const{keyTail:f,isVirtual:h,keyLength:m}=u.query.index;return h?n.openCursor(a(u)).then(g=>g&&function(b){return Object.create(b,{continue:{value:function(O){O!=null?b.continue(Nl(O,u.reverse?t.MAX_KEY:t.MIN_KEY,f)):u.unique?b.continue(b.key.slice(0,m).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,f)):b.continue()}},continuePrimaryKey:{value(O,A){b.continuePrimaryKey(Nl(O,t.MAX_KEY,f),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const O=b.key;return m===1?O[0]:O.slice(0,m)}},value:{get:()=>b.value}})}(g)):n.openCursor(u)}}}}}};function wd(t,e,n,r){return n=n||{},r=r||"",$t(t).forEach(i=>{if(Wn(e,i)){var o=t[i],s=e[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const l=Ju(o);l!==Ju(s)?n[r+i]=e[i]:l==="Object"?wd(o,s,n,r+i+"."):o!==s&&(n[r+i]=e[i])}else o!==s&&(n[r+i]=e[i])}else n[r+i]=void 0}),$t(e).forEach(i=>{Wn(t,i)||(n[r+i]=e[i])}),n}const lk={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=Pe.trans,{deleting:l,creating:a,updating:c}=s.table(e).hook;switch(o.type){case"add":if(a.fire===gt)break;return s._promise("readwrite",()=>u(o),!0);case"put":if(a.fire===gt&&c.fire===gt)break;return s._promise("readwrite",()=>u(o),!0);case"delete":if(l.fire===gt)break;return s._promise("readwrite",()=>u(o),!0);case"deleteRange":if(l.fire===gt)break;return s._promise("readwrite",()=>function(h){return f(h.trans,h.range,1e4)}(o),!0)}return n.mutate(o);function u(h){const m=Pe.trans,g=h.keys||function(b,x){return x.type==="delete"?x.keys:x.keys||x.values.map(b.extractKey)}(r,h);if(!g)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:g}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(b,x,O){return x.type==="add"?Promise.resolve([]):b.getMany({trans:x.trans,keys:O,cache:"immutable"})}(n,h,g).then(b=>{const x=g.map((O,A)=>{const N=b[A],$={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call($,O,N,m);else if(h.type==="add"||N===void 0){const I=a.fire.call($,O,h.values[A],m);O==null&&I!=null&&(O=I,h.keys[A]=O,r.outbound||cr(h.values[A],r.keyPath,O))}else{const I=wd(N,h.values[A]),L=c.fire.call($,I,O,N,m);if(L){const V=h.values[A];Object.keys(L).forEach(K=>{Wn(V,K)?V[K]=L[K]:cr(V,K,L[K])})}}return $});return n.mutate(h).then(({failures:O,results:A,numFailures:N,lastResult:$})=>{for(let I=0;I<g.length;++I){const L=A?A[I]:g[I],V=x[I];L==null?V.onerror&&V.onerror(O[I]):V.onsuccess&&V.onsuccess(h.type==="put"&&b[I]?h.values[I]:L)}return{failures:O,results:A,numFailures:N,lastResult:$}}).catch(O=>(x.forEach(A=>A.onerror&&A.onerror(O)),Promise.reject(O)))})}function f(h,m,g){return n.query({trans:h,values:!1,query:{index:r,range:m},limit:g}).then(({result:b})=>u({type:"delete",keys:b,trans:h}).then(x=>x.numFailures>0?Promise.reject(x.failures[0]):b.length<g?{failures:[],numFailures:0,lastResult:void 0}:f(h,{...m,lower:b[b.length-1],lowerOpen:!0},g)))}}}}})};function My(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,o=0;i<e.keys.length&&o<t.length;++i)wn(e.keys[i],t[o])===0&&(r.push(n?fl(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch{return null}}const ak={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=My(r.keys,r.trans._cache,r.cache==="clone");return i?ve.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?fl(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Sd(t){return!("from"in t)}const Pr=function(t,e){if(!this){const n=new Pr;return t&&"d"in t&&Sn(n,t),n}Sn(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Qs(t,e,n){const r=wn(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Sd(t))return Sn(t,{from:e,to:n,d:1});const i=t.l,o=t.r;if(wn(n,t.from)<0)return i?Qs(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},fp(t);if(wn(e,t.to)>0)return o?Qs(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},fp(t);wn(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),wn(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const s=!t.r;i&&!t.l&&Ia(t,i),o&&s&&Ia(t,o)}function Ia(t,e){Sd(e)||function n(r,{from:i,to:o,l:s,r:l}){Qs(r,i,o),s&&n(r,s),l&&n(r,l)}(t,e)}function ck(t,e){const n=yf(e);let r=n.next();if(r.done)return!1;let i=r.value;const o=yf(t);let s=o.next(i.from),l=s.value;for(;!r.done&&!s.done;){if(wn(l.from,i.to)<=0&&wn(l.to,i.from)>=0)return!0;wn(i.from,l.from)<0?i=(r=n.next(l.from)).value:l=(s=o.next(i.from)).value}return!1}function yf(t){let e=Sd(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&wn(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||wn(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function fp(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...t},l=t[i];t.from=l.from,t.to=l.to,t[i]=l[i],s[i]=l[o],t[o]=s,s.d=dp(s)}t.d=dp(t)}function dp({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Wo(Pr.prototype,{add(t){return Ia(this,t),this},addKey(t){return Qs(this,t,t),this},addKeys(t){return t.forEach(e=>Qs(this,e,e)),this},[Yu](){return yf(this)}});const uk={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Pr(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:l,outbound:a}=s,c={...i,mutate:h=>{const m=h.trans,g=m.mutatedParts||(m.mutatedParts={}),b=L=>{const V=`idb://${e}/${r}/${L}`;return g[V]||(g[V]=new Pr)},x=b(""),O=b(":dels"),{type:A}=h;let[N,$]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const I=h.trans._cache;return i.mutate(h).then(L=>{if(an(N)){A!=="delete"&&(N=L.results),x.addKeys(N);const V=My(N,I);V||A==="add"||O.addKeys(N),(V||$)&&function(K,E,S,F){function C(ce){const Z=K(ce.name||"");function Se(Q){return Q!=null?ce.extractKey(Q):null}const ge=Q=>ce.multiEntry&&an(Q)?Q.forEach(Te=>Z.addKey(Te)):Z.addKey(Q);(S||F).forEach((Q,Te)=>{const Ze=S&&Se(S[Te]),Ke=F&&Se(F[Te]);wn(Ze,Ke)!==0&&(Ze!=null&&ge(Ze),Ke!=null&&ge(Ke))})}E.indexes.forEach(C)}(b,o,V,$)}else if(N){const V={from:N.lower,to:N.upper};O.add(V),x.add(V)}else x.add(n),O.add(n),o.indexes.forEach(V=>b(V.name).add(n));return L})}},u=({query:{index:h,range:m}})=>{var g,b;return[h,new Pr((g=m.lower)!==null&&g!==void 0?g:t.MIN_KEY,(b=m.upper)!==null&&b!==void 0?b:t.MAX_KEY)]},f={get:h=>[s,new Pr(h.key)],getMany:h=>[s,new Pr().addKeys(h.keys)],count:u,query:u,openCursor:u};return $t(f).forEach(h=>{c[h]=function(m){const{subscr:g}=Pe;if(g){const b=$=>{const I=`idb://${e}/${r}/${$}`;return g[I]||(g[I]=new Pr)},x=b(""),O=b(":dels"),[A,N]=f[h](m);if(b(A.name||"").add(N),!A.isPrimaryKey){if(h!=="count"){const $=h==="query"&&a&&m.values&&i.query({...m,values:!1});return i[h].apply(this,arguments).then(I=>{if(h==="query"){if(a&&m.values)return $.then(({result:V})=>(x.addKeys(V),I));const L=m.values?I.result.map(l):I.result;m.values?x.addKeys(L):O.addKeys(L)}else if(h==="openCursor"){const L=I,V=m.values;return L&&Object.create(L,{key:{get:()=>(O.addKey(L.primaryKey),L.key)},primaryKey:{get(){const K=L.primaryKey;return O.addKey(K),K}},value:{get:()=>(V&&x.addKey(L.primaryKey),L.value)}})}return I})}O.add(n)}}return i[h].apply(this,arguments)}}),c}}}};let Vt=class ia{constructor(e,n){this._middlewares={},this.verno=0;const r=ia.dependencies;this._options=n={addons:ia.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:gt,dbReadyPromise:null,cancelOpen:gt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new ve(l=>{o.dbReadyResolve=l}),o.openCanceller=new ve((l,a)=>{o.cancelOpen=a}),this._state=o,this.name=e,this.on=Ns(this,"populate","blocked","versionchange","close",{ready:[pd,gt]}),this.on.ready.subscribe=ny(this.on.ready.subscribe,l=>(a,c)=>{ia.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||ve.resolve().then(a),c&&l(a);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(a),c&&l(a);else{l(a);const f=this;c||l(function h(){f.on.ready.unsubscribe(a),f.on.ready.unsubscribe(h)})}})}),this.Collection=(s=this,us(qx.prototype,function(l,a){this.db=s;let c=ky,u=null;if(a)try{c=a()}catch(g){u=g}const f=l._ctx,h=f.table,m=h.hook.reading.fire;this._ctx={table:h,index:f.index,isPrimKey:!f.index||h.schema.primKey.keyPath&&f.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:f.or,valueMapper:m!==Js?m:null}})),this.Table=function(l){return us(Wx.prototype,function(a,c,u){this.db=l,this._tx=u,this.name=a,this.schema=c,this.hook=l._allTables[a]?l._allTables[a].hook:Ns(null,{creating:[Dx,gt],reading:[Ix,Js],updating:[Rx,gt],deleting:[$x,gt]})})}(this),this.Transaction=function(l){return us(Xx.prototype,function(a,c,u,f,h){this.db=l,this.mode=a,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Ns(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ve((m,g)=>{this._resolve=m,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var g=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):g&&this.idbtrans&&this.idbtrans.abort(),jt(m)})})}(this),this.Version=function(l){return us(nk.prototype,function(a){this.db=l,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return us(Oy.prototype,function(a,c,u){this.db=l,this._ctx={table:a,index:c===":id"?null:c,or:u};const f=l._deps.indexedDB;if(!f)throw new Fe.MissingAPI;this._cmp=this._ascending=f.cmp.bind(f),this._descending=(h,m)=>f.cmp(m,h),this._max=(h,m)=>f.cmp(h,m)>0?h:m,this._min=(h,m)=>f.cmp(h,m)<0?h:m,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=Zs(n.IDBKeyRange),this._createTransaction=(l,a,c,u)=>new this.Transaction(l,a,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Ms.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(l))},this.use(sk),this.use(lk),this.use(uk),this.use(ak),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(l=>l(this))}version(e){if(isNaN(e)||e<.1)throw new Fe.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(ek),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Pe.letThrough||this._vip)?e():new ve((n,r)=>{if(this._state.openComplete)return r(new Fe.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Fe.DatabaseClosed);this.open().catch(gt)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:r??10,name:i}),o.sort((s,l)=>s.level-l.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return ik(this)}_close(){const e=this._state,n=Ms.indexOf(this);if(n>=0&&Ms.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new ve(r=>{e.dbReadyResolve=r}),e.openCanceller=new ve((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Fe.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new ve((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=St(()=>{(function({indexedDB:l,IDBKeyRange:a},c){!vd(l)&&c!==bc&&bd(l,a).delete(c).catch(gt)})(this._deps,this.name),r()}),s.onerror=gr(i),s.onblocked=this._fireOnBlocked};if(e)throw new Fe.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return $t(this._allTables).map(e=>this._allTables[e])}transaction(){const e=ok.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=Pe.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const o=e.indexOf("?")!==-1;let s,l;e=e.replace("!","").replace("?","");try{if(l=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===Qc)s=Qc;else{if(e!="rw"&&e!=eu)throw new Fe.InvalidArgument("Invalid transaction mode: "+e);s=eu}if(i){if(i.mode===Qc&&s===eu){if(!o)throw new Fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!o)throw new Fe.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(u,f)=>{f(c)}):jt(c)}const a=_y.bind(null,this,s,l,i,r);return i?i._promise(s,a,"lock"):Pe.trans?ns(Pe.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!Wn(this._allTables,e))throw new Fe.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}};const fk=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";let dk=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[fk](){return this}};function Ny(t,e){return $t(e).forEach(n=>{Ia(t[n]||(t[n]=new Pr),e[n])}),t}function Py(t){let e,n=!1;const r=new dk(i=>{const o=fd(t);let s=!1,l={},a={};const c={get closed(){return s},unsubscribe:()=>{s=!0,vi.storagemutated.unsubscribe(m)}};i.start&&i.start(c);let u=!1,f=!1;function h(){return $t(a).some(b=>l[b]&&ck(l[b],a[b]))}const m=b=>{Ny(l,b),h()&&g()},g=()=>{if(u||s)return;l={};const b={},x=function(O){o&&ts();const A=()=>yi(t,{subscr:O,trans:null}),N=Pe.trans?ns(Pe.transless,A):A();return o&&N.then(Kr,Kr),N}(b);f||(vi(Xs,m),f=!0),u=!0,Promise.resolve(x).then(O=>{n=!0,e=O,u=!1,s||(h()?g():(l={},a=b,i.next&&i.next(O)))},O=>{u=!1,n=!1,i.error&&i.error(O),c.unsubscribe()})};return g(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let bf;try{bf={indexedDB:vt.indexedDB||vt.mozIndexedDB||vt.webkitIndexedDB||vt.msIndexedDB,IDBKeyRange:vt.IDBKeyRange||vt.webkitIDBKeyRange}}catch{bf={indexedDB:null,IDBKeyRange:null}}const Pi=Vt;function oa(t){let e=Br;try{Br=!0,vi.storagemutated.fire(t)}finally{Br=e}}Wo(Pi,{...Zl,delete:t=>new Pi(t,{addons:[]}).delete(),exists:t=>new Pi(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return vd(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==bc)):bd(e,n).toCollection().primaryKeys()}(Pi.dependencies).then(t)}catch{return jt(new Fe.MissingAPI)}},defineClass:()=>function(t){Sn(this,t)},ignoreTransaction:t=>Pe.trans?ns(Pe.transless,t):t(),vip:mf,async:function(t){return function(){try{var e=gf(t.apply(this,arguments));return e&&typeof e.then=="function"?e:ve.resolve(e)}catch(n){return jt(n)}}},spawn:function(t,e,n){try{var r=gf(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:ve.resolve(r)}catch(i){return jt(i)}},currentTransaction:{get:()=>Pe.trans||null},waitFor:function(t,e){const n=ve.resolve(typeof t=="function"?Pi.ignoreTransaction(t):t).timeout(e||6e4);return Pe.trans?Pe.trans.waitFor(n):n},Promise:ve,debug:{get:()=>Or,set:t=>{ay(t,t==="dexie"?()=>!0:xy)}},derive:Fo,extend:Sn,props:Wo,override:ny,Events:Ns,on:vi,liveQuery:Py,extendObservabilitySet:Ny,getByKeyPath:Vr,setByKeyPath:cr,delByKeyPath:function(t,e){typeof e=="string"?cr(t,e,void 0):"length"in e&&[].map.call(e,function(n){cr(t,n,void 0)})},shallowClone:oy,deepClone:fl,getObjectDiff:wd,cmp:wn,asap:ry,minKey:lf,addons:[],connections:Ms,errnames:hd,dependencies:bf,semVer:op,version:op.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Pi.maxKey=Zs(Pi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(vi(Xs,t=>{if(!Br){let e;yc?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ii,!0,!0,t)):e=new CustomEvent(ii,{detail:t}),Br=!0,dispatchEvent(e),Br=!1}}),addEventListener(ii,({detail:t})=>{Br||oa(t)}));let Br=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(ii);typeof t.unref=="function"&&t.unref(),vi(Xs,e=>{Br||t.postMessage(e)}),t.onmessage=e=>{e.data&&oa(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){vi(Xs,e=>{try{Br||(typeof localStorage<"u"&&localStorage.setItem(ii,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:ii,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===ii){const n=JSON.parse(e.newValue);n&&oa(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===ii&&oa(e.changedParts)})}ve.rejectionMapper=function(t,e){if(!t||t instanceof Vo||t instanceof TypeError||t instanceof SyntaxError||!t.name||!tp[t.name])return t;var n=new tp[t.name](e||t.message,t);return"stack"in t&&Fr(n,"stack",{get:function(){return this.inner.stack}}),n},ay(Or,xy);var hp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Da=function(){return Da=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Da.apply(this,arguments)};function wi(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(f){s(f)}}function a(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(t,[])).next())})}function lr(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function hk(t){var e=[t.schema.primKey].concat(t.schema.indexes);return e.map(function(n){return n.src}).join(",")}function pk(t){for(var e={},n=0,r=t.tables;n<r.length;n++){var i=r[n];e[i.name]=i.schema}return e}function Iy(t,e){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},e==="binary"?i.readAsArrayBuffer(t):i.readAsText(t)})}function Dy(t,e){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=e==="binary"?n.readAsArrayBuffer(t):n.readAsText(t);return r}var vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xd(t,e){return e={exports:{}},t(e,e.exports),e.exports}var vc=xd(function(t,e){(function(n,r){t.exports=r()})(vf,function(){function n(H){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(z){return typeof z}:n=function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n(H)}function r(H,z,q,W,le,T,M){try{var R=H[T](M),B=R.value}catch(U){q(U);return}R.done?z(B):Promise.resolve(B).then(W,le)}function i(H){return function(){var z=this,q=arguments;return new Promise(function(W,le){var T=H.apply(z,q);function M(B){r(T,W,le,M,R,"next",B)}function R(B){r(T,W,le,M,R,"throw",B)}M(void 0)})}}function o(H,z){if(!(H instanceof z))throw new TypeError("Cannot call a class as a function")}function s(H,z){for(var q=0;q<z.length;q++){var W=z[q];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(H,W.key,W)}}function l(H,z,q){return z&&s(H.prototype,z),H}function a(H,z,q){return z in H?Object.defineProperty(H,z,{value:q,enumerable:!0,configurable:!0,writable:!0}):H[z]=q,H}function c(H,z){var q=Object.keys(H);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(H);z&&(W=W.filter(function(le){return Object.getOwnPropertyDescriptor(H,le).enumerable})),q.push.apply(q,W)}return q}function u(H){for(var z=1;z<arguments.length;z++){var q=arguments[z]!=null?arguments[z]:{};z%2?c(Object(q),!0).forEach(function(W){a(H,W,q[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(q)):c(Object(q)).forEach(function(W){Object.defineProperty(H,W,Object.getOwnPropertyDescriptor(q,W))})}return H}function f(H,z){return g(H)||x(H,z)||A()}function h(H){return m(H)||b(H)||O()}function m(H){if(Array.isArray(H)){for(var z=0,q=new Array(H.length);z<H.length;z++)q[z]=H[z];return q}}function g(H){if(Array.isArray(H))return H}function b(H){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]")return Array.from(H)}function x(H,z){if(Symbol.iterator in Object(H)||Object.prototype.toString.call(H)==="[object Arguments]"){var q=[],W=!0,le=!1,T=void 0;try{for(var M=H[Symbol.iterator](),R;!(W=(R=M.next()).done)&&(q.push(R.value),!(z&&q.length===z));W=!0);}catch(B){le=!0,T=B}finally{try{!W&&M.return!=null&&M.return()}finally{if(le)throw T}}return q}}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var N=function H(z){o(this,H),this.p=new Promise(z)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(H,z){var q=this;return new N(function(W,le){q.p.then(function(T){W(H?H(T):T)}).catch(function(T){return z?z(T):Promise.reject(T)}).then(W,le)})},N.prototype.catch=function(H){return this.then(null,H)},N.resolve=function(H){return new N(function(z){z(H)})},N.reject=function(H){return new N(function(z,q){q(H)})},["all","race"].forEach(function(H){N[H]=function(z){return new N(function(q,W){Promise[H](z.map(function(le){return le&&le.constructor&&le.constructor.__typeson__type__==="TypesonPromise"?le.p:le})).then(q,W)})}});var $={},I=$.toString,L={}.hasOwnProperty,V=Object.getPrototypeOf,K=L.toString;function E(H,z){return Z(H)&&typeof H.then=="function"&&(!z||typeof H.catch=="function")}function S(H){return I.call(H).slice(8,-1)}function F(H,z){if(!H||n(H)!=="object")return!1;var q=V(H);if(!q)return z===null;var W=L.call(q,"constructor")&&q.constructor;return typeof W!="function"?z===null:z===W||z!==null&&K.call(W)===K.call(z)||typeof z=="function"&&typeof W.__typeson__type__=="string"&&W.__typeson__type__===z.__typeson__type__}function C(H){if(!H||S(H)!=="Object")return!1;var z=V(H);return z?F(H,Object):!0}function ce(H){if(!H||S(H)!=="Object")return!1;var z=V(H);return z?F(H,Object)||ce(z):!0}function Z(H){return H&&n(H)==="object"}function Se(H){return H.replace(/~/g,"~0").replace(/\./g,"~1")}function ge(H){return H.replace(/~1/g,".").replace(/~0/g,"~")}function Q(H,z){if(z==="")return H;var q=z.indexOf(".");if(q>-1){var W=H[ge(z.slice(0,q))];return W===void 0?void 0:Q(W,z.slice(q+1))}return H[ge(z)]}function Te(H,z,q){if(z==="")return q;var W=z.indexOf(".");if(W>-1){var le=H[ge(z.slice(0,W))];return Te(le,z.slice(W+1),q)}return H[ge(z)]=q,H}function Ze(H){return H===null?"null":Array.isArray(H)?"array":n(H)}var Ke=Object.keys,tt=Array.isArray,ft={}.hasOwnProperty,Bt=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ae(H,z){if(H.keypath==="")return-1;var q=H.keypath.match(/\./g)||0,W=z.keypath.match(/\./g)||0;return q&&(q=q.length),W&&(W=W.length),q>W?-1:q<W?1:H.keypath<z.keypath?-1:H.keypath>z.keypath}var Qe=function(){function H(z){o(this,H),this.options=z,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return l(H,[{key:"stringify",value:function(q,W,le,T){T=u({},this.options,{},T,{stringification:!0});var M=this.encapsulate(q,null,T);return tt(M)?JSON.stringify(M[0],W,le):M.then(function(R){return JSON.stringify(R,W,le)})}},{key:"stringifySync",value:function(q,W,le,T){return this.stringify(q,W,le,u({throwOnBadSyncType:!0},T,{sync:!0}))}},{key:"stringifyAsync",value:function(q,W,le,T){return this.stringify(q,W,le,u({throwOnBadSyncType:!0},T,{sync:!1}))}},{key:"parse",value:function(q,W,le){return le=u({},this.options,{},le,{parse:!0}),this.revive(JSON.parse(q,W),le)}},{key:"parseSync",value:function(q,W,le){return this.parse(q,W,u({throwOnBadSyncType:!0},le,{sync:!0}))}},{key:"parseAsync",value:function(q,W,le){return this.parse(q,W,u({throwOnBadSyncType:!0},le,{sync:!1}))}},{key:"specialTypeNames",value:function(q,W){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return le.returnTypeNames=!0,this.encapsulate(q,W,le)}},{key:"rootTypeName",value:function(q,W){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return le.iterateNone=!0,this.encapsulate(q,W,le)}},{key:"encapsulate",value:function(q,W,le){le=u({sync:!0},this.options,{},le);var T=le,M=T.sync,R=this,B={},U=[],J=[],re=[],Y="cyclic"in le?le.cyclic:!0,X=le,G=X.encapsulateObserver,pe=we("",q,Y,W||{},re);function se(he){var w=Object.values(B);if(le.iterateNone)return w.length?w[0]:H.getJSONType(he);if(w.length){if(le.returnTypeNames)return h(new Set(w));!he||!C(he)||ft.call(he,"$types")?he={$:he,$types:{$:B}}:he.$types=B}else Z(he)&&ft.call(he,"$types")&&(he={$:he,$types:!0});return le.returnTypeNames?!1:he}function fe(he,w){return de.apply(this,arguments)}function de(){return de=i(regeneratorRuntime.mark(function he(w,y){var k;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Promise.all(y.map(function(ne){return ne[1].p}));case 2:return k=D.sent,D.next=5,Promise.all(k.map(function(){var ne=i(regeneratorRuntime.mark(function ie(Ce){var ye,De,Je,Ge,me,nt,et,dt,ht,Re,Lt,Oe,ue,Ne;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(ye=[],De=y.splice(0,1),Je=f(De,1),Ge=Je[0],me=f(Ge,7),nt=me[0],et=me[2],dt=me[3],ht=me[4],Re=me[5],Lt=me[6],Oe=we(nt,Ce,et,dt,ye,!0,Lt),ue=F(Oe,N),!(nt&&ue)){$e.next=11;break}return $e.next=8,Oe.p;case 8:return Ne=$e.sent,ht[Re]=Ne,$e.abrupt("return",fe(w,ye));case 11:return nt?ht[Re]=Oe:ue?w=Oe.p:w=Oe,$e.abrupt("return",fe(w,ye));case 13:case"end":return $e.stop()}},ie)}));return function(ie){return ne.apply(this,arguments)}}()));case 5:return D.abrupt("return",w);case 6:case"end":return D.stop()}},he)})),de.apply(this,arguments)}function ee(he,w,y){Object.assign(he,w);var k=Bt.map(function(P){var D=he[P];return delete he[P],D});y(),Bt.forEach(function(P,D){he[P]=k[D]})}function we(he,w,y,k,P,D,ne){var ie,Ce={},ye=n(w),De=G?function(ue){var Ne=ne||k.type||H.getJSONType(w);G(Object.assign(ue||Ce,{keypath:he,value:w,cyclic:y,stateObj:k,promisesData:P,resolvingTypesonPromise:D,awaitingTypesonPromise:F(w,N)},{type:Ne}))}:null;if(["string","boolean","number","undefined"].includes(ye))return w===void 0||ye==="number"&&(isNaN(w)||w===-1/0||w===1/0)?(k.replaced?ie=w:ie=Ee(he,w,k,P,!1,D,De),ie!==w&&(Ce={replaced:ie})):ie=w,De&&De(),ie;if(w===null)return De&&De(),w;if(y&&!k.iterateIn&&!k.iterateUnsetNumeric&&w&&n(w)==="object"){var Je=U.indexOf(w);if(Je<0)y===!0&&(U.push(w),J.push(he));else return B[he]="#",De&&De({cyclicKeypath:J[Je]}),"#"+J[Je]}var Ge=C(w),me=tt(w),nt=(Ge||me)&&(!R.plainObjectReplacers.length||k.replaced)||k.iterateIn?w:Ee(he,w,k,P,Ge||me,null,De),et;if(nt!==w?(ie=nt,Ce={replaced:nt}):he===""&&F(w,N)?(P.push([he,w,y,k,void 0,void 0,k.type]),ie=w):me&&k.iterateIn!=="object"||k.iterateIn==="array"?(et=new Array(w.length),Ce={clone:et}):!["function","symbol"].includes(n(w))&&!("toJSON"in w)&&!F(w,N)&&!F(w,Promise)&&!F(w,ArrayBuffer)||Ge||k.iterateIn==="object"?(et={},k.addLength&&(et.length=w.length),Ce={clone:et}):ie=w,De&&De(),le.iterateNone)return et||ie;if(!et)return ie;if(k.iterateIn){var dt=function(Ne){var _e={ownKeys:ft.call(w,Ne)};ee(k,_e,function(){var $e=he+(he?".":"")+Se(Ne),Xe=we($e,w[Ne],!!y,k,P,D);F(Xe,N)?P.push([$e,Xe,!!y,k,et,Ne,k.type]):Xe!==void 0&&(et[Ne]=Xe)})};for(var ht in w)dt(ht);De&&De({endIterateIn:!0,end:!0})}else Ke(w).forEach(function(ue){var Ne=he+(he?".":"")+Se(ue),_e={ownKeys:!0};ee(k,_e,function(){var $e=we(Ne,w[ue],!!y,k,P,D);F($e,N)?P.push([Ne,$e,!!y,k,et,ue,k.type]):$e!==void 0&&(et[ue]=$e)})}),De&&De({endIterateOwn:!0,end:!0});if(k.iterateUnsetNumeric){for(var Re=w.length,Lt=function(Ne){if(!(Ne in w)){var _e=he+(he?".":"")+Ne,$e={ownKeys:!1};ee(k,$e,function(){var Xe=we(_e,void 0,!!y,k,P,D);F(Xe,N)?P.push([_e,Xe,!!y,k,et,Ne,k.type]):Xe!==void 0&&(et[Ne]=Xe)})}},Oe=0;Oe<Re;Oe++)Lt(Oe);De&&De({endIterateUnsetNumeric:!0,end:!0})}return et}function Ee(he,w,y,k,P,D,ne){for(var ie=P?R.plainObjectReplacers:R.nonplainObjectReplacers,Ce=ie.length;Ce--;){var ye=ie[Ce];if(ye.test(w,y)){var De=ye.type;if(R.revivers[De]){var Je=B[he];B[he]=Je?[De].concat(Je):De}if(Object.assign(y,{type:De,replaced:!0}),(M||!ye.replaceAsync)&&!ye.replace)return ne&&ne({typeDetected:!0}),we(he,w,Y&&"readonly",y,k,D,De);ne&&ne({replacing:!0});var Ge=M||!ye.replaceAsync?"replace":"replaceAsync";return we(he,ye[Ge](w,y),Y&&"readonly",y,k,D,De)}}return w}return re.length?M&&le.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(fe(pe,re)).then(se):!M&&le.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():le.stringification&&M?[se(pe)]:M?se(pe):Promise.resolve(se(pe))}},{key:"encapsulateSync",value:function(q,W,le){return this.encapsulate(q,W,u({throwOnBadSyncType:!0},le,{sync:!0}))}},{key:"encapsulateAsync",value:function(q,W,le){return this.encapsulate(q,W,u({throwOnBadSyncType:!0},le,{sync:!1}))}},{key:"revive",value:function(q,W){var le=q&&q.$types;if(!le)return q;if(le===!0)return q.$;W=u({sync:!0},this.options,{},W);var T=W,M=T.sync,R=[],B={},U=!0;le.$&&C(le.$)&&(q=q.$,le=le.$,U=!1);var J=this;function re(de,ee){var we=J.revivers[de]||[],Ee=f(we,1),he=Ee[0];if(!he)throw new Error("Unregistered type: "+de);return M&&!("revive"in he)?ee:he[M&&he.revive?"revive":!M&&he.reviveAsync?"reviveAsync":"revive"](ee,B)}function Y(){var de=[];if(Object.entries(le).forEach(function(ee){var we=f(ee,2),Ee=we[0],he=we[1];he!=="#"&&[].concat(he).forEach(function(w){var y=J.revivers[w]||[null,{}],k=f(y,2),P=k[1].plain;P&&(de.push({keypath:Ee,type:w}),delete le[Ee])})}),!!de.length)return de.sort(Ae).reduce(function ee(we,Ee){var he=Ee.keypath,w=Ee.type;if(E(we))return we.then(function(P){return ee(P,{keypath:he,type:w})});var y=Q(q,he);if(y=re(w,y),F(y,N))return y.then(function(P){var D=Te(q,he,P);D===P&&(q=D)});var k=Te(q,he,y);k===y&&(q=k)},void 0)}var X=[];function G(de,ee,we,Ee,he){if(!(U&&de==="$types")){var w=le[de],y=tt(ee);if(y||C(ee)){var k=y?new Array(ee.length):{};for(Ke(ee).forEach(function(Je){var Ge=G(de+(de?".":"")+Se(Je),ee[Je],we||k,k,Je),me=function(et){return F(et,Et)?k[Je]=void 0:et!==void 0&&(k[Je]=et),et};F(Ge,N)?X.push(Ge.then(function(nt){return me(nt)})):me(Ge)}),ee=k;R.length;){var P=f(R[0],4),D=P[0],ne=P[1],ie=P[2],Ce=P[3],ye=Q(D,ne);if(ye!==void 0)ie[Ce]=ye;else break;R.splice(0,1)}}if(!w)return ee;if(w==="#"){var De=Q(we,ee.slice(1));return De===void 0&&R.push([we,ee.slice(1),Ee,he]),De}return[].concat(w).reduce(function Je(Ge,me){return F(Ge,N)?Ge.then(function(nt){return Je(nt,me)}):re(me,Ge)},ee)}}function pe(de){return F(de,Et)?void 0:de}var se=Y(),fe;return F(se,N)?fe=se.then(function(){return q}):(fe=G("",q,null),X.length&&(fe=N.resolve(fe).then(function(de){return N.all([de].concat(X))}).then(function(de){var ee=f(de,1),we=ee[0];return we}))),E(fe)?M&&W.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():F(fe,N)?fe.p.then(pe):fe:!M&&W.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():M?pe(fe):Promise.resolve(pe(fe))}},{key:"reviveSync",value:function(q,W){return this.revive(q,u({throwOnBadSyncType:!0},W,{sync:!0}))}},{key:"reviveAsync",value:function(q,W){return this.revive(q,u({throwOnBadSyncType:!0},W,{sync:!1}))}},{key:"register",value:function(q,W){return W=W||{},[].concat(q).forEach(function le(T){var M=this;if(tt(T))return T.map(function(R){return le.call(M,R)});T&&Ke(T).forEach(function(R){if(R==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(H.JSON_TYPES.includes(R))throw new TypeError("Plain JSON object types are reserved as type names");var B=T[R],U=B&&B.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,J=U.filter(function(we){return we.type===R});if(J.length&&(U.splice(U.indexOf(J[0]),1),delete this.revivers[R],delete this.types[R]),typeof B=="function"){var re=B;B={test:function(Ee){return Ee&&Ee.constructor===re},replace:function(Ee){return u({},Ee)},revive:function(Ee){return Object.assign(Object.create(re.prototype),Ee)}}}else if(tt(B)){var Y=B,X=f(Y,3),G=X[0],pe=X[1],se=X[2];B={test:G,replace:pe,revive:se}}if(!(!B||!B.test)){var fe={type:R,test:B.test.bind(B)};B.replace&&(fe.replace=B.replace.bind(B)),B.replaceAsync&&(fe.replaceAsync=B.replaceAsync.bind(B));var de=typeof W.fallback=="number"?W.fallback:W.fallback?0:1/0;if(B.testPlainObjects?this.plainObjectReplacers.splice(de,0,fe):this.nonplainObjectReplacers.splice(de,0,fe),B.revive||B.reviveAsync){var ee={};B.revive&&(ee.revive=B.revive.bind(B)),B.reviveAsync&&(ee.reviveAsync=B.reviveAsync.bind(B)),this.revivers[R]=[ee,{plain:B.testPlainObjects}]}this.types[R]=B}},this)},this),this}}]),H}(),Et=function H(){o(this,H)};return Et.__typeson__type__="TypesonUndefined",Qe.Undefined=Et,Qe.Promise=N,Qe.isThenable=E,Qe.toStringTag=S,Qe.hasConstructorOf=F,Qe.isObject=Z,Qe.isPlainObject=C,Qe.isUserObject=ce,Qe.escapeKeyPathComponent=Se,Qe.unescapeKeyPathComponent=ge,Qe.getByKeyPath=Q,Qe.getJSONType=Ze,Qe.JSON_TYPES=["null","boolean","number","string","array","object"],Qe})}),mk=xd(function(t,e){(function(n,r){t.exports=r()})(vf,function(){function n(w){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(w)}function r(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function i(w,y){for(var k=0;k<y.length;k++){var P=y[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function o(w,y,k){return y in w?Object.defineProperty(w,y,{value:k,enumerable:!0,configurable:!0,writable:!0}):w[y]=k,w}function s(w,y){var k=Object.keys(w);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(w);y&&(P=P.filter(function(D){return Object.getOwnPropertyDescriptor(w,D).enumerable})),k.push.apply(k,P)}return k}function l(w){return function(k){if(Array.isArray(k))return a(k)}(w)||function(k){if(typeof Symbol<"u"&&Symbol.iterator in Object(k))return Array.from(k)}(w)||function(k,P){if(k){if(typeof k=="string")return a(k,P);var D=Object.prototype.toString.call(k).slice(8,-1);if(D==="Object"&&k.constructor&&(D=k.constructor.name),D==="Map"||D==="Set")return Array.from(k);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return a(k,P)}}(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(w,y){(y==null||y>w.length)&&(y=w.length);for(var k=0,P=new Array(y);k<y;k++)P[k]=w[k];return P}function c(w){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(w)}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function f(w,y){for(var k=0;k<y.length;k++){var P=y[k];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function h(w,y,k){return y in w?Object.defineProperty(w,y,{value:k,enumerable:!0,configurable:!0,writable:!0}):w[y]=k,w}function m(w,y){var k=Object.keys(w);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(w);y&&(P=P.filter(function(D){return Object.getOwnPropertyDescriptor(w,D).enumerable})),k.push.apply(k,P)}return k}function g(w){for(var y=1;y<arguments.length;y++){var k=arguments[y]!=null?arguments[y]:{};y%2?m(Object(k),!0).forEach(function(P){h(w,P,k[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(k)):m(Object(k)).forEach(function(P){Object.defineProperty(w,P,Object.getOwnPropertyDescriptor(k,P))})}return w}function b(w,y){return function(P){if(Array.isArray(P))return P}(w)||function(P,D){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(P)))){var ne=[],ie=!0,Ce=!1,ye=void 0;try{for(var De,Je=P[Symbol.iterator]();!(ie=(De=Je.next()).done)&&(ne.push(De.value),!D||ne.length!==D);ie=!0);}catch(Ge){Ce=!0,ye=Ge}finally{try{ie||Je.return==null||Je.return()}finally{if(Ce)throw ye}}return ne}}(w,y)||O(w,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x(w){return function(k){if(Array.isArray(k))return A(k)}(w)||function(k){if(typeof Symbol<"u"&&Symbol.iterator in Object(k))return Array.from(k)}(w)||O(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(w,y){if(w){if(typeof w=="string")return A(w,y);var k=Object.prototype.toString.call(w).slice(8,-1);return k==="Object"&&w.constructor&&(k=w.constructor.name),k==="Map"||k==="Set"?Array.from(w):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?A(w,y):void 0}}function A(w,y){(y==null||y>w.length)&&(y=w.length);for(var k=0,P=new Array(y);k<y;k++)P[k]=w[k];return P}var N=function w(y){u(this,w),this.p=new Promise(y)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(w,y){var k=this;return new N(function(P,D){k.p.then(function(ne){P(w?w(ne):ne)}).catch(function(ne){return y?y(ne):Promise.reject(ne)}).then(P,D)})},N.prototype.catch=function(w){return this.then(null,w)},N.resolve=function(w){return new N(function(y){y(w)})},N.reject=function(w){return new N(function(y,k){k(w)})},["all","race"].forEach(function(w){N[w]=function(y){return new N(function(k,P){Promise[w](y.map(function(D){return D&&D.constructor&&D.constructor.__typeson__type__==="TypesonPromise"?D.p:D})).then(k,P)})}});var $={}.toString,I={}.hasOwnProperty,L=Object.getPrototypeOf,V=I.toString;function K(w,y){return C(w)&&typeof w.then=="function"&&(!y||typeof w.catch=="function")}function E(w){return $.call(w).slice(8,-1)}function S(w,y){if(!w||c(w)!=="object")return!1;var k=L(w);if(!k)return y===null;var P=I.call(k,"constructor")&&k.constructor;return typeof P!="function"?y===null:y===P||y!==null&&V.call(P)===V.call(y)||typeof y=="function"&&typeof P.__typeson__type__=="string"&&P.__typeson__type__===y.__typeson__type__}function F(w){return!(!w||E(w)!=="Object")&&(!L(w)||S(w,Object))}function C(w){return w&&c(w)==="object"}function ce(w){return w.replace(/~/g,"~0").replace(/\./g,"~1")}function Z(w){return w.replace(/~1/g,".").replace(/~0/g,"~")}function Se(w,y){if(y==="")return w;var k=y.indexOf(".");if(k>-1){var P=w[Z(y.slice(0,k))];return P===void 0?void 0:Se(P,y.slice(k+1))}return w[Z(y)]}function ge(w,y,k){if(y==="")return k;var P=y.indexOf(".");return P>-1?ge(w[Z(y.slice(0,P))],y.slice(P+1),k):(w[Z(y)]=k,w)}function Q(w,y,k){return k?y?y(w):w:(w&&w.then||(w=Promise.resolve(w)),y?w.then(y):w)}var Te=Object.keys,Ze=Array.isArray,Ke={}.hasOwnProperty,tt=["type","replaced","iterateIn","iterateUnsetNumeric"];function ft(w){return function(){for(var y=[],k=0;k<arguments.length;k++)y[k]=arguments[k];try{return Promise.resolve(w.apply(this,y))}catch(P){return Promise.reject(P)}}}function Bt(w,y){if(w.keypath==="")return-1;var k=w.keypath.match(/\./g)||0,P=y.keypath.match(/\./g)||0;return k&&(k=k.length),P&&(P=P.length),k>P?-1:k<P?1:w.keypath<y.keypath?-1:w.keypath>y.keypath}var Ae=function(){function w(y){u(this,w),this.options=y,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(k,P,D){return P&&f(k.prototype,P),k}(w,[{key:"stringify",value:function(k,P,D,ne){ne=g(g(g({},this.options),ne),{},{stringification:!0});var ie=this.encapsulate(k,null,ne);return Ze(ie)?JSON.stringify(ie[0],P,D):ie.then(function(Ce){return JSON.stringify(Ce,P,D)})}},{key:"stringifySync",value:function(k,P,D,ne){return this.stringify(k,P,D,g(g({throwOnBadSyncType:!0},ne),{},{sync:!0}))}},{key:"stringifyAsync",value:function(k,P,D,ne){return this.stringify(k,P,D,g(g({throwOnBadSyncType:!0},ne),{},{sync:!1}))}},{key:"parse",value:function(k,P,D){return D=g(g(g({},this.options),D),{},{parse:!0}),this.revive(JSON.parse(k,P),D)}},{key:"parseSync",value:function(k,P,D){return this.parse(k,P,g(g({throwOnBadSyncType:!0},D),{},{sync:!0}))}},{key:"parseAsync",value:function(k,P,D){return this.parse(k,P,g(g({throwOnBadSyncType:!0},D),{},{sync:!1}))}},{key:"specialTypeNames",value:function(k,P){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.returnTypeNames=!0,this.encapsulate(k,P,D)}},{key:"rootTypeName",value:function(k,P){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.iterateNone=!0,this.encapsulate(k,P,D)}},{key:"encapsulate",value:function(k,P,D){var ne=ft(function(Oe,ue){return Q(Promise.all(ue.map(function(Ne){return Ne[1].p})),function(Ne){return Q(Promise.all(Ne.map(ft(function(_e){var $e=!1,Xe=[],dn=b(ue.splice(0,1),1),pt=b(dn[0],7),tn=pt[0],Tn=pt[2],lt=pt[3],An=pt[4],ct=pt[5],hn=pt[6],Wt=Re(tn,_e,Tn,lt,Xe,!0,hn),$n=S(Wt,N);return function(Ue,lo){var Jr=Ue();return Jr&&Jr.then?Jr.then(lo):lo(Jr)}(function(){if(tn&&$n)return Q(Wt.p,function(Rn){return An[ct]=Rn,$e=!0,ne(Oe,Xe)})},function(Rn){return $e?Rn:(tn?An[ct]=Wt:Oe=$n?Wt.p:Wt,ne(Oe,Xe))})}))),function(){return Oe})})}),ie=(D=g(g({sync:!0},this.options),D)).sync,Ce=this,ye={},De=[],Je=[],Ge=[],me=!("cyclic"in D)||D.cyclic,nt=D.encapsulateObserver,et=Re("",k,me,P||{},Ge);function dt(Oe){var ue=Object.values(ye);if(D.iterateNone)return ue.length?ue[0]:w.getJSONType(Oe);if(ue.length){if(D.returnTypeNames)return x(new Set(ue));Oe&&F(Oe)&&!Ke.call(Oe,"$types")?Oe.$types=ye:Oe={$:Oe,$types:{$:ye}}}else C(Oe)&&Ke.call(Oe,"$types")&&(Oe={$:Oe,$types:!0});return!D.returnTypeNames&&Oe}function ht(Oe,ue,Ne){Object.assign(Oe,ue);var _e=tt.map(function($e){var Xe=Oe[$e];return delete Oe[$e],Xe});Ne(),tt.forEach(function($e,Xe){Oe[$e]=_e[Xe]})}function Re(Oe,ue,Ne,_e,$e,Xe,dn){var pt,tn={},Tn=c(ue),lt=nt?function(fr){var qt=dn||_e.type||w.getJSONType(ue);nt(Object.assign(fr||tn,{keypath:Oe,value:ue,cyclic:Ne,stateObj:_e,promisesData:$e,resolvingTypesonPromise:Xe,awaitingTypesonPromise:S(ue,N)},{type:qt}))}:null;if(["string","boolean","number","undefined"].includes(Tn))return ue===void 0||Number.isNaN(ue)||ue===Number.NEGATIVE_INFINITY||ue===Number.POSITIVE_INFINITY?(pt=_e.replaced?ue:Lt(Oe,ue,_e,$e,!1,Xe,lt))!==ue&&(tn={replaced:pt}):pt=ue,lt&&lt(),pt;if(ue===null)return lt&&lt(),ue;if(Ne&&!_e.iterateIn&&!_e.iterateUnsetNumeric&&ue&&c(ue)==="object"){var An=De.indexOf(ue);if(!(An<0))return ye[Oe]="#",lt&&lt({cyclicKeypath:Je[An]}),"#"+Je[An];Ne===!0&&(De.push(ue),Je.push(Oe))}var ct,hn=F(ue),Wt=Ze(ue),$n=(hn||Wt)&&(!Ce.plainObjectReplacers.length||_e.replaced)||_e.iterateIn?ue:Lt(Oe,ue,_e,$e,hn||Wt,null,lt);if($n!==ue?(pt=$n,tn={replaced:$n}):Oe===""&&S(ue,N)?($e.push([Oe,ue,Ne,_e,void 0,void 0,_e.type]),pt=ue):Wt&&_e.iterateIn!=="object"||_e.iterateIn==="array"?(ct=new Array(ue.length),tn={clone:ct}):(["function","symbol"].includes(c(ue))||"toJSON"in ue||S(ue,N)||S(ue,Promise)||S(ue,ArrayBuffer))&&!hn&&_e.iterateIn!=="object"?pt=ue:(ct={},_e.addLength&&(ct.length=ue.length),tn={clone:ct}),lt&&lt(),D.iterateNone)return ct||pt;if(!ct)return pt;if(_e.iterateIn){var Rn=function(qt){var tr={ownKeys:Ke.call(ue,qt)};ht(_e,tr,function(){var nr=Oe+(Oe?".":"")+ce(qt),dr=Re(nr,ue[qt],!!Ne,_e,$e,Xe);S(dr,N)?$e.push([nr,dr,!!Ne,_e,ct,qt,_e.type]):dr!==void 0&&(ct[qt]=dr)})};for(var Ue in ue)Rn(Ue);lt&&lt({endIterateIn:!0,end:!0})}else Te(ue).forEach(function(fr){var qt=Oe+(Oe?".":"")+ce(fr);ht(_e,{ownKeys:!0},function(){var tr=Re(qt,ue[fr],!!Ne,_e,$e,Xe);S(tr,N)?$e.push([qt,tr,!!Ne,_e,ct,fr,_e.type]):tr!==void 0&&(ct[fr]=tr)})}),lt&&lt({endIterateOwn:!0,end:!0});if(_e.iterateUnsetNumeric){for(var lo=ue.length,Jr=function(qt){if(!(qt in ue)){var tr=Oe+(Oe?".":"")+qt;ht(_e,{ownKeys:!1},function(){var nr=Re(tr,void 0,!!Ne,_e,$e,Xe);S(nr,N)?$e.push([tr,nr,!!Ne,_e,ct,qt,_e.type]):nr!==void 0&&(ct[qt]=nr)})}},is=0;is<lo;is++)Jr(is);lt&&lt({endIterateUnsetNumeric:!0,end:!0})}return ct}function Lt(Oe,ue,Ne,_e,$e,Xe,dn){for(var pt=$e?Ce.plainObjectReplacers:Ce.nonplainObjectReplacers,tn=pt.length;tn--;){var Tn=pt[tn];if(Tn.test(ue,Ne)){var lt=Tn.type;if(Ce.revivers[lt]){var An=ye[Oe];ye[Oe]=An?[lt].concat(An):lt}return Object.assign(Ne,{type:lt,replaced:!0}),!ie&&Tn.replaceAsync||Tn.replace?(dn&&dn({replacing:!0}),Re(Oe,Tn[ie||!Tn.replaceAsync?"replace":"replaceAsync"](ue,Ne),me&&"readonly",Ne,_e,Xe,lt)):(dn&&dn({typeDetected:!0}),Re(Oe,ue,me&&"readonly",Ne,_e,Xe,lt))}}return ue}return Ge.length?ie&&D.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(ne(et,Ge)).then(dt):!ie&&D.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():D.stringification&&ie?[dt(et)]:ie?dt(et):Promise.resolve(dt(et))}},{key:"encapsulateSync",value:function(k,P,D){return this.encapsulate(k,P,g(g({throwOnBadSyncType:!0},D),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(k,P,D){return this.encapsulate(k,P,g(g({throwOnBadSyncType:!0},D),{},{sync:!1}))}},{key:"revive",value:function(k,P){var D=k&&k.$types;if(!D)return k;if(D===!0)return k.$;var ne=(P=g(g({sync:!0},this.options),P)).sync,ie=[],Ce={},ye=!0;D.$&&F(D.$)&&(k=k.$,D=D.$,ye=!1);var De=this;function Je(dt,ht){var Re=b(De.revivers[dt]||[],1)[0];if(!Re)throw new Error("Unregistered type: "+dt);return ne&&!("revive"in Re)?ht:Re[ne&&Re.revive?"revive":!ne&&Re.reviveAsync?"reviveAsync":"revive"](ht,Ce)}var Ge=[];function me(dt){return S(dt,Qe)?void 0:dt}var nt,et=function(){var ht=[];if(Object.entries(D).forEach(function(Re){var Lt=b(Re,2),Oe=Lt[0],ue=Lt[1];ue!=="#"&&[].concat(ue).forEach(function(Ne){b(De.revivers[Ne]||[null,{}],2)[1].plain&&(ht.push({keypath:Oe,type:Ne}),delete D[Oe])})}),ht.length)return ht.sort(Bt).reduce(function Re(Lt,Oe){var ue=Oe.keypath,Ne=Oe.type;if(K(Lt))return Lt.then(function(Xe){return Re(Xe,{keypath:ue,type:Ne})});var _e=Se(k,ue);if(S(_e=Je(Ne,_e),N))return _e.then(function(Xe){var dn=ge(k,ue,Xe);dn===Xe&&(k=dn)});var $e=ge(k,ue,_e);$e===_e&&(k=$e)},void 0)}();return S(et,N)?nt=et.then(function(){return k}):(nt=function dt(ht,Re,Lt,Oe,ue){if(!ye||ht!=="$types"){var Ne=D[ht],_e=Ze(Re);if(_e||F(Re)){var $e=_e?new Array(Re.length):{};for(Te(Re).forEach(function(ct){var hn=dt(ht+(ht?".":"")+ce(ct),Re[ct],Lt||$e,$e,ct),Wt=function(Rn){return S(Rn,Qe)?$e[ct]=void 0:Rn!==void 0&&($e[ct]=Rn),Rn};S(hn,N)?Ge.push(hn.then(function($n){return Wt($n)})):Wt(hn)}),Re=$e;ie.length;){var Xe=b(ie[0],4),dn=Xe[0],pt=Xe[1],tn=Xe[2],Tn=Xe[3],lt=Se(dn,pt);if(lt===void 0)break;tn[Tn]=lt,ie.splice(0,1)}}if(!Ne)return Re;if(Ne==="#"){var An=Se(Lt,Re.slice(1));return An===void 0&&ie.push([Lt,Re.slice(1),Oe,ue]),An}return[].concat(Ne).reduce(function ct(hn,Wt){return S(hn,N)?hn.then(function($n){return ct($n,Wt)}):Je(Wt,hn)},Re)}}("",k,null),Ge.length&&(nt=N.resolve(nt).then(function(dt){return N.all([dt].concat(Ge))}).then(function(dt){return b(dt,1)[0]}))),K(nt)?ne&&P.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():S(nt,N)?nt.p.then(me):nt:!ne&&P.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ne?me(nt):Promise.resolve(me(nt))}},{key:"reviveSync",value:function(k,P){return this.revive(k,g(g({throwOnBadSyncType:!0},P),{},{sync:!0}))}},{key:"reviveAsync",value:function(k,P){return this.revive(k,g(g({throwOnBadSyncType:!0},P),{},{sync:!1}))}},{key:"register",value:function(k,P){return P=P||{},[].concat(k).forEach(function D(ne){var ie=this;if(Ze(ne))return ne.map(function(Ce){return D.call(ie,Ce)});ne&&Te(ne).forEach(function(Ce){if(Ce==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(w.JSON_TYPES.includes(Ce))throw new TypeError("Plain JSON object types are reserved as type names");var ye=ne[Ce],De=ye&&ye.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Je=De.filter(function(ht){return ht.type===Ce});if(Je.length&&(De.splice(De.indexOf(Je[0]),1),delete this.revivers[Ce],delete this.types[Ce]),typeof ye=="function"){var Ge=ye;ye={test:function(Re){return Re&&Re.constructor===Ge},replace:function(Re){return g({},Re)},revive:function(Re){return Object.assign(Object.create(Ge.prototype),Re)}}}else if(Ze(ye)){var me=b(ye,3);ye={test:me[0],replace:me[1],revive:me[2]}}if(ye&&ye.test){var nt={type:Ce,test:ye.test.bind(ye)};ye.replace&&(nt.replace=ye.replace.bind(ye)),ye.replaceAsync&&(nt.replaceAsync=ye.replaceAsync.bind(ye));var et=typeof P.fallback=="number"?P.fallback:P.fallback?0:Number.POSITIVE_INFINITY;if(ye.testPlainObjects?this.plainObjectReplacers.splice(et,0,nt):this.nonplainObjectReplacers.splice(et,0,nt),ye.revive||ye.reviveAsync){var dt={};ye.revive&&(dt.revive=ye.revive.bind(ye)),ye.reviveAsync&&(dt.reviveAsync=ye.reviveAsync.bind(ye)),this.revivers[Ce]=[dt,{plain:ye.testPlainObjects}]}this.types[Ce]=ye}},this)},this),this}}]),w}(),Qe=function w(){u(this,w)};Qe.__typeson__type__="TypesonUndefined",Ae.Undefined=Qe,Ae.Promise=N,Ae.isThenable=K,Ae.toStringTag=E,Ae.hasConstructorOf=S,Ae.isObject=C,Ae.isPlainObject=F,Ae.isUserObject=function w(y){if(!y||E(y)!=="Object")return!1;var k=L(y);return!k||S(y,Object)||w(k)},Ae.escapeKeyPathComponent=ce,Ae.unescapeKeyPathComponent=Z,Ae.getByKeyPath=Se,Ae.getJSONType=function(y){return y===null?"null":Array.isArray(y)?"array":c(y)},Ae.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Et={userObject:{test:function(y,k){return Ae.isUserObject(y)},replace:function(y){return function(P){for(var D=1;D<arguments.length;D++){var ne=arguments[D]!=null?arguments[D]:{};D%2?s(Object(ne),!0).forEach(function(ie){o(P,ie,ne[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(ne)):s(Object(ne)).forEach(function(ie){Object.defineProperty(P,ie,Object.getOwnPropertyDescriptor(ne,ie))})}return P}({},y)},revive:function(y){return y}}},H=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(y,k){return!!Array.isArray(y)&&(Object.keys(y).some(function(P){return String(Number.parseInt(P))!==P})&&(k.iterateIn="object",k.addLength=!0),!0)},replace:function(y,k){return k.iterateUnsetNumeric=!0,y},revive:function(y){if(Array.isArray(y))return y;var k=[];return Object.keys(y).forEach(function(P){var D=y[P];k[P]=D}),k}}},{sparseUndefined:{test:function(y,k){return y===void 0&&k.ownKeys===!1},replace:function(y){return 0},revive:function(y){}}}],z={undef:{test:function(y,k){return y===void 0&&(k.ownKeys||!("ownKeys"in k))},replace:function(y){return 0},revive:function(y){return new Ae.Undefined}}},q={StringObject:{test:function(y){return Ae.toStringTag(y)==="String"&&n(y)==="object"},replace:function(y){return String(y)},revive:function(y){return new String(y)}},BooleanObject:{test:function(y){return Ae.toStringTag(y)==="Boolean"&&n(y)==="object"},replace:function(y){return!!y},revive:function(y){return new Boolean(y)}},NumberObject:{test:function(y){return Ae.toStringTag(y)==="Number"&&n(y)==="object"},replace:function(y){return Number(y)},revive:function(y){return new Number(y)}}},W=[{nan:{test:function(y){return Number.isNaN(y)},replace:function(y){return"NaN"},revive:function(y){return Number.NaN}}},{infinity:{test:function(y){return y===Number.POSITIVE_INFINITY},replace:function(y){return"Infinity"},revive:function(y){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(y){return y===Number.NEGATIVE_INFINITY},replace:function(y){return"-Infinity"},revive:function(y){return Number.NEGATIVE_INFINITY}}}],le={date:{test:function(y){return Ae.toStringTag(y)==="Date"},replace:function(y){var k=y.getTime();return Number.isNaN(k)?"NaN":k},revive:function(y){return y==="NaN"?new Date(Number.NaN):new Date(y)}}},T={regexp:{test:function(y){return Ae.toStringTag(y)==="RegExp"},replace:function(y){return{source:y.source,flags:(y.global?"g":"")+(y.ignoreCase?"i":"")+(y.multiline?"m":"")+(y.sticky?"y":"")+(y.unicode?"u":"")}},revive:function(y){var k=y.source,P=y.flags;return new RegExp(k,P)}}},M={map:{test:function(y){return Ae.toStringTag(y)==="Map"},replace:function(y){return l(y.entries())},revive:function(y){return new Map(y)}}},R={set:{test:function(y){return Ae.toStringTag(y)==="Set"},replace:function(y){return l(y.values())},revive:function(y){return new Set(y)}}},B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=new Uint8Array(256),J=0;J<B.length;J++)U[B.charCodeAt(J)]=J;var re=function(y,k,P){P==null&&(P=y.byteLength);for(var D=new Uint8Array(y,0,P),ne=D.length,ie="",Ce=0;Ce<ne;Ce+=3)ie+=B[D[Ce]>>2],ie+=B[(3&D[Ce])<<4|D[Ce+1]>>4],ie+=B[(15&D[Ce+1])<<2|D[Ce+2]>>6],ie+=B[63&D[Ce+2]];return ne%3==2?ie=ie.slice(0,-1)+"=":ne%3==1&&(ie=ie.slice(0,-2)+"=="),ie},Y=function(y){var k,P,D,ne,ie=y.length,Ce=.75*y.length,ye=0;y[y.length-1]==="="&&(Ce--,y[y.length-2]==="="&&Ce--);for(var De=new ArrayBuffer(Ce),Je=new Uint8Array(De),Ge=0;Ge<ie;Ge+=4)k=U[y.charCodeAt(Ge)],P=U[y.charCodeAt(Ge+1)],D=U[y.charCodeAt(Ge+2)],ne=U[y.charCodeAt(Ge+3)],Je[ye++]=k<<2|P>>4,Je[ye++]=(15&P)<<4|D>>2,Je[ye++]=(3&D)<<6|63&ne;return De},X={arraybuffer:{test:function(y){return Ae.toStringTag(y)==="ArrayBuffer"},replace:function(y,k){k.buffers||(k.buffers=[]);var P=k.buffers.indexOf(y);return P>-1?{index:P}:(k.buffers.push(y),re(y))},revive:function(y,k){if(k.buffers||(k.buffers=[]),n(y)==="object")return k.buffers[y.index];var P=Y(y);return k.buffers.push(P),P}}},G=typeof self>"u"?vf:self,pe={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(w){var y=w,k=G[y];k&&(pe[w.toLowerCase()]={test:function(D){return Ae.toStringTag(D)===y},replace:function(D,ne){var ie=D.buffer,Ce=D.byteOffset,ye=D.length;ne.buffers||(ne.buffers=[]);var De=ne.buffers.indexOf(ie);return De>-1?{index:De,byteOffset:Ce,length:ye}:(ne.buffers.push(ie),{encoded:re(ie),byteOffset:Ce,length:ye})},revive:function(D,ne){ne.buffers||(ne.buffers=[]);var ie,Ce=D.byteOffset,ye=D.length,De=D.encoded,Je=D.index;return"index"in D?ie=ne.buffers[Je]:(ie=Y(De),ne.buffers.push(ie)),new k(ie,Ce,ye)}})});var se={dataview:{test:function(y){return Ae.toStringTag(y)==="DataView"},replace:function(y,k){var P=y.buffer,D=y.byteOffset,ne=y.byteLength;k.buffers||(k.buffers=[]);var ie=k.buffers.indexOf(P);return ie>-1?{index:ie,byteOffset:D,byteLength:ne}:(k.buffers.push(P),{encoded:re(P),byteOffset:D,byteLength:ne})},revive:function(y,k){k.buffers||(k.buffers=[]);var P,D=y.byteOffset,ne=y.byteLength,ie=y.encoded,Ce=y.index;return"index"in y?P=k.buffers[Ce]:(P=Y(ie),k.buffers.push(P)),new DataView(P,D,ne)}}},fe={IntlCollator:{test:function(y){return Ae.hasConstructorOf(y,Intl.Collator)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.Collator(y.locale,y)}},IntlDateTimeFormat:{test:function(y){return Ae.hasConstructorOf(y,Intl.DateTimeFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.DateTimeFormat(y.locale,y)}},IntlNumberFormat:{test:function(y){return Ae.hasConstructorOf(y,Intl.NumberFormat)},replace:function(y){return y.resolvedOptions()},revive:function(y){return new Intl.NumberFormat(y.locale,y)}}};function de(w){for(var y=new Uint8Array(w.length),k=0;k<w.length;k++)y[k]=w.charCodeAt(k);return y.buffer}var ee={file:{test:function(y){return Ae.toStringTag(y)==="File"},replace:function(y){var k=new XMLHttpRequest;if(k.overrideMimeType("text/plain; charset=x-user-defined"),k.open("GET",URL.createObjectURL(y),!1),k.send(),k.status!==200&&k.status!==0)throw new Error("Bad File access: "+k.status);return{type:y.type,stringContents:k.responseText,name:y.name,lastModified:y.lastModified}},revive:function(y){var k=y.name,P=y.type,D=y.stringContents,ne=y.lastModified;return new File([de(D)],k,{type:P,lastModified:ne})},replaceAsync:function(y){return new Ae.Promise(function(k,P){var D=new FileReader;D.addEventListener("load",function(){k({type:y.type,stringContents:D.result,name:y.name,lastModified:y.lastModified})}),D.addEventListener("error",function(){P(D.error)}),D.readAsBinaryString(y)})}}},we={bigint:{test:function(y){return typeof y=="bigint"},replace:function(y){return String(y)},revive:function(y){return BigInt(y)}}},Ee={bigintObject:{test:function(y){return n(y)==="object"&&Ae.hasConstructorOf(y,BigInt)},replace:function(y){return String(y)},revive:function(y){return new Object(BigInt(y))}}},he={cryptokey:{test:function(y){return Ae.toStringTag(y)==="CryptoKey"&&y.extractable},replaceAsync:function(y){return new Ae.Promise(function(k,P){crypto.subtle.exportKey("jwk",y).catch(function(D){P(D)}).then(function(D){k({jwk:D,algorithm:y.algorithm,usages:y.usages})})})},revive:function(y){var k=y.jwk,P=y.algorithm,D=y.usages;return crypto.subtle.importKey("jwk",k,P,!0,D)}}};return[Et,z,H,q,W,le,T,{imagedata:{test:function(y){return Ae.toStringTag(y)==="ImageData"},replace:function(y){return{array:l(y.data),width:y.width,height:y.height}},revive:function(y){return new ImageData(new Uint8ClampedArray(y.array),y.width,y.height)}}},{imagebitmap:{test:function(y){return Ae.toStringTag(y)==="ImageBitmap"||y&&y.dataset&&y.dataset.toStringTag==="ImageBitmap"},replace:function(y){var k=document.createElement("canvas");return k.getContext("2d").drawImage(y,0,0),k.toDataURL()},revive:function(y){var k=document.createElement("canvas"),P=k.getContext("2d"),D=document.createElement("img");return D.addEventListener("load",function(){P.drawImage(D,0,0)}),D.src=y,k},reviveAsync:function(y){var k=document.createElement("canvas"),P=k.getContext("2d"),D=document.createElement("img");return D.addEventListener("load",function(){P.drawImage(D,0,0)}),D.src=y,createImageBitmap(k)}}},ee,{file:ee.file,filelist:{test:function(y){return Ae.toStringTag(y)==="FileList"},replace:function(y){for(var k=[],P=0;P<y.length;P++)k[P]=y.item(P);return k},revive:function(y){return new(function(){function k(){r(this,k),this._files=arguments[0],this.length=this._files.length}return function(D,ne,ie){return ne&&i(D.prototype,ne),D}(k,[{key:"item",value:function(D){return this._files[D]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),k}())(y)}}},{blob:{test:function(y){return Ae.toStringTag(y)==="Blob"},replace:function(y){var k=new XMLHttpRequest;if(k.overrideMimeType("text/plain; charset=x-user-defined"),k.open("GET",URL.createObjectURL(y),!1),k.send(),k.status!==200&&k.status!==0)throw new Error("Bad Blob access: "+k.status);return{type:y.type,stringContents:k.responseText}},revive:function(y){var k=y.type,P=y.stringContents;return new Blob([de(P)],{type:k})},replaceAsync:function(y){return new Ae.Promise(function(k,P){var D=new FileReader;D.addEventListener("load",function(){k({type:y.type,stringContents:D.result})}),D.addEventListener("error",function(){P(D.error)}),D.readAsBinaryString(y)})}}}].concat(typeof Map=="function"?M:[],typeof Set=="function"?R:[],typeof ArrayBuffer=="function"?X:[],typeof Uint8Array=="function"?pe:[],typeof DataView=="function"?se:[],typeof Intl<"u"?fe:[],typeof crypto<"u"?he:[],typeof BigInt<"u"?[we,Ee]:[])})}),Eo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ms=new Uint8Array(256);for(var Pl=0;Pl<Eo.length;Pl++)ms[Eo.codePointAt(Pl)]=Pl;var wf=function(e,n,r){r==null&&(r=e.byteLength);for(var i=new Uint8Array(e,0,r),o=i.length,s="",l=0;l<o;l+=3)s+=Eo[i[l]>>2],s+=Eo[(i[l]&3)<<4|i[l+1]>>4],s+=Eo[(i[l+1]&15)<<2|i[l+2]>>6],s+=Eo[i[l+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},$y=function(e){var n=e.length,r=e.length*.75,i=0,o,s,l,a;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);for(var c=new ArrayBuffer(r),u=new Uint8Array(c),f=0;f<n;f+=4)o=ms[e.codePointAt(f)],s=ms[e.codePointAt(f+1)],l=ms[e.codePointAt(f+2)],a=ms[e.codePointAt(f+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|l>>2,u[i++]=(l&3)<<6|a&63;return c},gk=typeof self>"u"?global:self,Ry={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){var e=t,n=gk[e];n&&(Ry[t.toLowerCase()+"2"]={test:function(r){return vc.toStringTag(r)===e},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var yk={arraybuffer:{test:function(t){return vc.toStringTag(t)==="ArrayBuffer"},replace:function(t){return wf(t,0,t.byteLength)},revive:function(t){var e=$y(t);return e}}},Jn=new vc().register(mk),bk="FileReaderSync"in self,$a=[],sa=0;Jn.register([yk,Ry,{blob2:{test:function(t){return vc.toStringTag(t)==="Blob"},replace:function(t){if(t.isClosed)throw new Error("The Blob is closed");if(bk){var e=Dy(t,"binary"),n=wf(e,0,e.byteLength);return{type:t.type,data:n}}else{$a.push(t);var r={type:t.type,data:{start:sa,end:sa+t.size}};return sa+=t.size,r}},finalize:function(t,e){t.data=wf(e,0,e.byteLength)},revive:function(t){var e=t.type,n=t.data;return new Blob([$y(n)],{type:e})}}}]);Jn.mustFinalize=function(){return $a.length>0};Jn.finalize=function(t){return wi(void 0,void 0,void 0,function(){var e,n,r,i,o,s,l,a,c,u,f,h;return lr(this,function(m){switch(m.label){case 0:return[4,Iy(new Blob($a),"binary")];case 1:if(e=m.sent(),t){for(n=0,r=t;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(l in o)a=o[l],c=Jn.types[a],c&&c.finalize&&(u=Vt.getByKeyPath(i,s?"$."+l:l),c.finalize(u,e.slice((f=u.data)===null||f===void 0?void 0:f.start,(h=u.data)===null||h===void 0?void 0:h.end)))}}return $a=[],sa=0,[2]}})})};var vk=2e3;function wk(t,e){return wi(this,void 0,void 0,function(){function n(){return wi(this,void 0,void 0,function(){var f,h,m,g,b,x,O,A,N,$;return lr(this,function(I){switch(I.label){case 0:return[4,Promise.all(i.map(function(L){return L.count()}))];case 1:f=I.sent(),f.forEach(function(L,V){return s[V].rowCount=L}),u.totalRows=f.reduce(function(L,V){return L+V}),h=JSON.stringify(a,void 0,l?2:void 0),m=h.lastIndexOf("]"),g=h.substring(0,m),o.push(g),b=e.filter,x=e.transform,O=function(L){var V,K,E,S,F,C,ce,Z,Se,ge,Q,Te;return lr(this,function(Ze){switch(Ze.label){case 0:V=t.table(L),K=V.schema.primKey,E=!!K.keyPath,S=e.numRowsPerChunk||vk,F=E?{tableName:V.name,inbound:!0,rows:[]}:{tableName:V.name,inbound:!1,rows:[]},C=JSON.stringify(F,void 0,l?2:void 0),l&&(C=C.split(`
`).join(`
    `)),ce=C.lastIndexOf("]"),o.push(C.substring(0,ce)),Z=null,Se=0,ge=!0,Q=function(){var Ke,tt,ft,Bt,Ae,z,Qe,Et,H,z;return lr(this,function(q){switch(q.label){case 0:return c&&Vt.ignoreTransaction(function(){return c(u)}),Ke=Z==null?V.limit(S):V.where(":id").above(Z).limit(S),[4,Ke.toArray()];case 1:return tt=q.sent(),tt.length===0?[2,"break"]:(Z!=null&&Se>0&&(o.push(","),l&&o.push(`
      `)),ge=tt.length===S,E?(ft=b?tt.filter(function(W){return b(L,W)}):tt,Bt=x?ft.map(function(W){return x(L,W).value}):ft,Ae=Bt.map(function(W){return Jn.encapsulate(W)}),Jn.mustFinalize()?[4,Vt.waitFor(Jn.finalize(Ae))]:[3,3]):[3,4]);case 2:q.sent(),q.label=3;case 3:return z=JSON.stringify(Ae,void 0,l?2:void 0),l&&(z=z.split(`
`).join(`
      `)),o.push(new Blob([z.substring(1,z.length-1)])),Se=Bt.length,Z=tt.length>0?Vt.getByKeyPath(tt[tt.length-1],K.keyPath):null,[3,8];case 4:return[4,Ke.primaryKeys()];case 5:return Qe=q.sent(),Et=Qe.map(function(W,le){return[W,tt[le]]}),b&&(Et=Et.filter(function(W){var le=W[0],T=W[1];return b(L,T,le)})),x&&(Et=Et.map(function(W){var le=W[0],T=W[1],M=x(L,T,le);return[M.key,M.value]})),H=Et.map(function(W){return Jn.encapsulate(W)}),Jn.mustFinalize()?[4,Vt.waitFor(Jn.finalize(H))]:[3,7];case 6:q.sent(),q.label=7;case 7:z=JSON.stringify(H,void 0,l?2:void 0),l&&(z=z.split(`
`).join(`
      `)),o.push(new Blob([z.substring(1,z.length-1)])),Se=Et.length,Z=Qe.length>0?Qe[Qe.length-1]:null,q.label=8;case 8:return u.completedRows+=tt.length,[2]}})},Ze.label=1;case 1:return ge?[5,Q()]:[3,3];case 2:return Te=Ze.sent(),Te==="break"?[3,3]:[3,1];case 3:return o.push(C.substr(ce)),u.completedTables+=1,u.completedTables<u.totalTables&&o.push(","),[2]}})},A=0,N=s,I.label=2;case 2:return A<N.length?($=N[A].name,[5,O($)]):[3,5];case 3:I.sent(),I.label=4;case 4:return A++,[3,2];case 5:return o.push(h.substr(m)),u.done=!0,c&&Vt.ignoreTransaction(function(){return c(u)}),[2]}})})}var r,i,o,s,l,a,c,u;return lr(this,function(f){switch(f.label){case 0:e=e||{},r=e.skipTables?e.skipTables:[],i=t.tables.filter(function(h){return!r.includes(h.name)}),o=[],s=i.map(function(h){return{name:h.name,schema:hk(h),rowCount:0}}),l=e.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:t.name,databaseVersion:t.verno,tables:s,data:[]}},c=e.progressCallback,u={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:s.length},f.label=1;case 1:return f.trys.push([1,,6,7]),e.noTransaction?[4,n()]:[3,3];case 2:return f.sent(),[3,5];case 3:return[4,t.transaction("r",t.tables,n)];case 4:f.sent(),f.label=5;case 5:return[3,7];case 6:return Jn.finalize(),[7];case 7:return[2,new Blob(o,{type:"text/json"})]}})})}var Sk=1,xk={Stream:function(){}},kk=xd(function(t,e){(function(n){var r=typeof process=="object"&&hp?hp:self;n.parser=function(E){return new m(E)},n.CParser=m,n.CStream=b,n.createStream=g,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(E){return E!=="error"&&E!=="end"}),s=0,l;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var a in n.STATE)n.STATE[n.STATE[a]]=a;s=n.STATE;const c={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(E){function S(){this.__proto__=E}return S.prototype=E,new S}),Object.getPrototypeOf||(Object.getPrototypeOf=function(E){return E.__proto__}),Object.keys||(Object.keys=function(E){var S=[];for(var F in E)E.hasOwnProperty(F)&&S.push(F);return S});function u(E){var S=Math.max(n.MAX_BUFFER_LENGTH,10),F=0;for(var C in i){var ce=E[C]===void 0?0:E[C].length;if(ce>S)switch(C){case"text":closeText(E);break;default:I(E,"Max buffer length exceeded: "+C)}F=Math.max(F,ce)}E.bufferCheckPosition=n.MAX_BUFFER_LENGTH-F+E.position}function f(E){for(var S in i)E[S]=i[S]}var h=/[\\"\n]/g;function m(E){if(!(this instanceof m))return new m(E);var S=this;f(S),S.bufferCheckPosition=n.MAX_BUFFER_LENGTH,S.q=S.c=S.p="",S.opt=E||{},S.closed=S.closedRoot=S.sawRoot=!1,S.tag=S.error=null,S.state=s.BEGIN,S.stack=new Array,S.position=S.column=0,S.line=1,S.slashed=!1,S.unicodeI=0,S.unicodeS=null,S.depth=0,x(S,"onready")}m.prototype={end:function(){L(this)},write:K,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{l=xk.Stream}catch{l=function(){}}function g(E){return new b(E)}function b(E){if(!(this instanceof b))return new b(E);this._parser=new m(E),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var S=this;l.apply(S),this._parser.onend=function(){S.emit("end")},this._parser.onerror=function(F){S.emit("error",F),S._parser.error=null},o.forEach(function(F){Object.defineProperty(S,"on"+F,{get:function(){return S._parser["on"+F]},set:function(C){if(!C)return S.removeAllListeners(F),S._parser["on"+F]=C,C;S.on(F,C)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(l.prototype,{constructor:{value:b}}),b.prototype.write=function(E){E=new Buffer(E);for(var S=0;S<E.length;S++){var F=E[S];if(this.bytes_remaining>0){for(var C=0;C<this.bytes_remaining;C++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+C]=E[C];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,S=S+C-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&F>=128)if(F>=194&&F<=223&&(this.bytes_in_sequence=2),F>=224&&F<=239&&(this.bytes_in_sequence=3),F>=240&&F<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+S>E.length){for(var ce=0;ce<=E.length-1-S;ce++)this.temp_buffs[this.bytes_in_sequence][ce]=E[S+ce];return this.bytes_remaining=S+this.bytes_in_sequence-E.length,!0}else{this.string=E.slice(S,S+this.bytes_in_sequence).toString(),S=S+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var Z=S;Z<E.length&&!(E[Z]>=128);Z++);this.string=E.slice(S,Z).toString(),this._parser.write(this.string),this.emit("data",this.string),S=Z-1}},b.prototype.end=function(E){return E&&E.length&&this._parser.write(E.toString()),this._parser.end(),!0},b.prototype.on=function(E,S){var F=this;return!F._parser["on"+E]&&o.indexOf(E)!==-1&&(F._parser["on"+E]=function(){var C=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);C.splice(0,0,E),F.emit.apply(F,C)}),l.prototype.on.call(F,E,S)},b.prototype.destroy=function(){f(this._parser),this.emit("close")};function x(E,S,F){n.INFO&&console.log("-- emit",S,F),E[S]&&E[S](F)}function O(E,S,F){A(E),x(E,S,F)}function A(E,S){E.textNode=$(E.opt,E.textNode),E.textNode!==void 0&&x(E,S||"onvalue",E.textNode),E.textNode=void 0}function N(E){E.numberNode&&x(E,"onvalue",parseFloat(E.numberNode)),E.numberNode=""}function $(E,S){return S===void 0||(E.trim&&(S=S.trim()),E.normalize&&(S=S.replace(/\s+/g," "))),S}function I(E,S){return A(E),S+=`
Line: `+E.line+`
Column: `+E.column+`
Char: `+E.c,S=new Error(S),E.error=S,x(E,"onerror",S),E}function L(E){return(E.state!==s.VALUE||E.depth!==0)&&I(E,"Unexpected end"),A(E),E.c="",E.closed=!0,x(E,"onend"),m.call(E,E.opt),E}function V(E){return E===c.carriageReturn||E===c.lineFeed||E===c.space||E===c.tab}function K(E){var S=this;if(this.error)throw this.error;if(S.closed)return I(S,"Cannot write after close. Assign an onready handler.");if(E===null)return L(S);var F=0,C=E.charCodeAt(0),ce=S.p;for(n.DEBUG&&console.log("write -> ["+E+"]");C&&(ce=C,S.c=C=E.charCodeAt(F++),ce!==C?S.p=ce:ce=S.p,!!C);)switch(n.DEBUG&&console.log(F,C,n.STATE[S.state]),S.position++,C===c.lineFeed?(S.line++,S.column=0):S.column++,S.state){case s.BEGIN:C===c.openBrace?S.state=s.OPEN_OBJECT:C===c.openBracket?S.state=s.OPEN_ARRAY:V(C)||I(S,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(V(C))continue;if(S.state===s.OPEN_KEY)S.stack.push(s.CLOSE_KEY);else if(C===c.closeBrace){x(S,"onopenobject"),this.depth++,x(S,"oncloseobject"),this.depth--,S.state=S.stack.pop()||s.VALUE;continue}else S.stack.push(s.CLOSE_OBJECT);C===c.doubleQuote?S.state=s.STRING:I(S,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(V(C))continue;S.state,s.CLOSE_KEY,C===c.colon?(S.state===s.CLOSE_OBJECT?(S.stack.push(s.CLOSE_OBJECT),A(S,"onopenobject"),this.depth++):A(S,"onkey"),S.state=s.VALUE):C===c.closeBrace?(O(S,"oncloseobject"),this.depth--,S.state=S.stack.pop()||s.VALUE):C===c.comma?(S.state===s.CLOSE_OBJECT&&S.stack.push(s.CLOSE_OBJECT),A(S),S.state=s.OPEN_KEY):I(S,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(V(C))continue;if(S.state===s.OPEN_ARRAY)if(x(S,"onopenarray"),this.depth++,S.state=s.VALUE,C===c.closeBracket){x(S,"onclosearray"),this.depth--,S.state=S.stack.pop()||s.VALUE;continue}else S.stack.push(s.CLOSE_ARRAY);C===c.doubleQuote?S.state=s.STRING:C===c.openBrace?S.state=s.OPEN_OBJECT:C===c.openBracket?S.state=s.OPEN_ARRAY:C===c.t?S.state=s.TRUE:C===c.f?S.state=s.FALSE:C===c.n?S.state=s.NULL:C===c.minus?S.numberNode+="-":c._0<=C&&C<=c._9?(S.numberNode+=String.fromCharCode(C),S.state=s.NUMBER_DIGIT):I(S,"Bad value");continue;case s.CLOSE_ARRAY:if(C===c.comma)S.stack.push(s.CLOSE_ARRAY),A(S,"onvalue"),S.state=s.VALUE;else if(C===c.closeBracket)O(S,"onclosearray"),this.depth--,S.state=S.stack.pop()||s.VALUE;else{if(V(C))continue;I(S,"Bad array")}continue;case s.STRING:S.textNode===void 0&&(S.textNode="");var Z=F-1,Se=S.slashed,ge=S.unicodeI;e:for(;;){for(n.DEBUG&&console.log(F,C,n.STATE[S.state],Se);ge>0;)if(S.unicodeS+=String.fromCharCode(C),C=E.charCodeAt(F++),S.position++,ge===4?(S.textNode+=String.fromCharCode(parseInt(S.unicodeS,16)),ge=0,Z=F-1):ge++,!C)break e;if(C===c.doubleQuote&&!Se){S.state=S.stack.pop()||s.VALUE,S.textNode+=E.substring(Z,F-1),S.position+=F-1-Z;break}if(C===c.backslash&&!Se&&(Se=!0,S.textNode+=E.substring(Z,F-1),S.position+=F-1-Z,C=E.charCodeAt(F++),S.position++,!C))break;if(Se){if(Se=!1,C===c.n?S.textNode+=`
`:C===c.r?S.textNode+="\r":C===c.t?S.textNode+="	":C===c.f?S.textNode+="\f":C===c.b?S.textNode+="\b":C===c.u?(ge=1,S.unicodeS=""):S.textNode+=String.fromCharCode(C),C=E.charCodeAt(F++),S.position++,Z=F-1,C)continue;break}h.lastIndex=F;var Q=h.exec(E);if(Q===null){F=E.length+1,S.textNode+=E.substring(Z,F-1),S.position+=F-1-Z;break}if(F=Q.index+1,C=E.charCodeAt(Q.index),!C){S.textNode+=E.substring(Z,F-1),S.position+=F-1-Z;break}}S.slashed=Se,S.unicodeI=ge;continue;case s.TRUE:C===c.r?S.state=s.TRUE2:I(S,"Invalid true started with t"+C);continue;case s.TRUE2:C===c.u?S.state=s.TRUE3:I(S,"Invalid true started with tr"+C);continue;case s.TRUE3:C===c.e?(x(S,"onvalue",!0),S.state=S.stack.pop()||s.VALUE):I(S,"Invalid true started with tru"+C);continue;case s.FALSE:C===c.a?S.state=s.FALSE2:I(S,"Invalid false started with f"+C);continue;case s.FALSE2:C===c.l?S.state=s.FALSE3:I(S,"Invalid false started with fa"+C);continue;case s.FALSE3:C===c.s?S.state=s.FALSE4:I(S,"Invalid false started with fal"+C);continue;case s.FALSE4:C===c.e?(x(S,"onvalue",!1),S.state=S.stack.pop()||s.VALUE):I(S,"Invalid false started with fals"+C);continue;case s.NULL:C===c.u?S.state=s.NULL2:I(S,"Invalid null started with n"+C);continue;case s.NULL2:C===c.l?S.state=s.NULL3:I(S,"Invalid null started with nu"+C);continue;case s.NULL3:C===c.l?(x(S,"onvalue",null),S.state=S.stack.pop()||s.VALUE):I(S,"Invalid null started with nul"+C);continue;case s.NUMBER_DECIMAL_POINT:C===c.period?(S.numberNode+=".",S.state=s.NUMBER_DIGIT):I(S,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:c._0<=C&&C<=c._9?S.numberNode+=String.fromCharCode(C):C===c.period?(S.numberNode.indexOf(".")!==-1&&I(S,"Invalid number has two dots"),S.numberNode+="."):C===c.e||C===c.E?((S.numberNode.indexOf("e")!==-1||S.numberNode.indexOf("E")!==-1)&&I(S,"Invalid number has two exponential"),S.numberNode+="e"):C===c.plus||C===c.minus?(ce===c.e||ce===c.E||I(S,"Invalid symbol in number"),S.numberNode+=String.fromCharCode(C)):(N(S),F--,S.state=S.stack.pop()||s.VALUE);continue;default:I(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&u(S),S}})(e)});function Ck(t){var e=0,n=Ok(),r={pullAsync:function(i){return wi(this,void 0,void 0,function(){var o,s,l;return lr(this,function(a){switch(a.label){case 0:return o=t.slice(e,e+i),e+=i,[4,Iy(o,"text")];case 1:return s=a.sent(),l=n.write(s),r.result=l||{},[2,l]}})})},pullSync:function(i){var o=t.slice(e,e+i);e+=i;var s=Dy(o,"text"),l=n.write(s);return r.result=l||{},l},done:function(){return n.done()},eof:function(){return e>=t.size},result:{}};return r}function Ok(t){var e=kk.parser(),n=0,r,i=[],o,s,l=!1,a=!1;return e.onopenobject=function(c){var u={};u.incomplete=!0,r||(r=u),o&&(i.push([s,o,a]),a?o.push(u):o[s]=u),o=u,s=c,a=!1,++n},e.onkey=function(c){return s=c},e.onvalue=function(c){return a?o.push(c):o[s]=c},e.oncloseobject=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},e.onopenarray=function(){var c=[];c.incomplete=!0,r||(r=c),o&&(i.push([s,o,a]),a?o.push(c):o[s]=c),o=c,a=!0,s=null,++n},e.onclosearray=function(){var c;delete o.incomplete,s=null,--n===0?l=!0:(c=i.pop(),s=c[0],o=c[1],a=c[2])},{write:function(c){return e.write(c),r},done:function(){return l}}}var By=1024;function Ly(t,e){return wi(this,void 0,void 0,function(){var n,r,i,o;return lr(this,function(s){switch(s.label){case 0:return e=e||{},n=e.chunkSizeBytes||By*1024,[4,Vy(t,n)];case 1:return r=s.sent(),i=r.result.data,o=new Vt(e.name!==void 0?e.name:i.databaseName),o.version(i.databaseVersion).stores(pk(i)),[4,Fy(o,r,e.name!==void 0?Da(Da({},e),{acceptNameDiff:!0}):e)];case 2:return s.sent(),[2,o]}})})}function Fy(t,e,n){return wi(this,void 0,void 0,function(){function r(){return wi(this,void 0,void 0,function(){var b,x,O,A,N;return lr(this,function($){switch($.label){case 0:b=function(I){var L,V,K,E,S,F,C,ce,Z,Se,ge,Q,Te;return lr(this,function(Ze){switch(Ze.label){case 0:if(c.includes(I.tableName))return[2,"continue"];if(!I.rows)return[2,"break"];if(!I.rows.incomplete&&I.rows.length===0)return[2,"continue"];if(u&&Vt.ignoreTransaction(function(){return u(f)}),L=I.tableName,V=t.table(L),K=a.tables.filter(function(Ke){return Ke.name===L})[0].schema,!V){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(I.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&K.split(",")[0]!=V.schema.primKey.src)throw new Error("Primary key differs for table ".concat(I.tableName,". "));for(E=I.rows,S=[],F=0;F<E.length&&(C=E[F],!C.incomplete);F++)S.push(Jn.revive(C));return ce=n.filter,Z=n.transform,Se=ce?I.inbound?S.filter(function(Ke){return ce(L,Ke)}):S.filter(function(Ke){var tt=Ke[0],ft=Ke[1];return ce(L,ft,tt)}):S,Z&&(Se=Se.map(I.inbound?function(Ke){return Z(L,Ke).value}:function(Ke){var tt=Ke[0],ft=Ke[1],Bt=Z(L,ft,tt);return[Bt.key,Bt.value]})),ge=I.inbound?[void 0,Se]:[Se.map(function(Ke){return Ke[0]}),S.map(function(Ke){return Ke[1]})],Q=ge[0],Te=ge[1],n.overwriteValues?[4,V.bulkPut(Te,Q)]:[3,2];case 1:return Ze.sent(),[3,4];case 2:return[4,V.bulkAdd(Te,Q)];case 3:Ze.sent(),Ze.label=4;case 4:return f.completedRows+=S.length,S.incomplete||(f.completedTables+=1),E.splice(0,S.length),[2]}})},x=0,O=a.data,$.label=1;case 1:return x<O.length?(A=O[x],[5,b(A)]):[3,4];case 2:if(N=$.sent(),N==="break")return[3,4];$.label=3;case 3:return x++,[3,1];case 4:for(;a.data.length>0&&a.data[0].rows&&!a.data[0].rows.incomplete;)a.data.splice(0,1);return!o.done()&&!o.eof()?l?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,Vt.waitFor(o.pullAsync(i))];case 6:$.sent(),$.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,l,a,c,u,f,h,m,g;return lr(this,function(b){switch(b.label){case 0:return n=n||{},i=n.chunkSizeBytes||By*1024,[4,Vy(e,i)];case 1:if(o=b.sent(),s=o.result,l="FileReaderSync"in self,a=s.data,c=n.skipTables?n.skipTables:[],!n.acceptNameDiff&&t.name!==a.databaseName)throw new Error("Name differs. Current database name is ".concat(t.name," but export is ").concat(a.databaseName));if(!n.acceptVersionDiff&&t.verno!==a.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(t.verno," but export is ").concat(a.databaseVersion));if(u=n.progressCallback,f={done:!1,completedRows:0,completedTables:0,totalRows:a.tables.reduce(function(x,O){return x+O.rowCount},0),totalTables:a.tables.length},u&&Vt.ignoreTransaction(function(){return u(f)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=t.tables,b.label=2;case 2:return h<m.length?(g=m[h],c.includes(g.name)?[3,4]:[4,g.clear()]):[3,5];case 3:b.sent(),b.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return b.sent(),[3,9];case 7:return[4,t.transaction("rw",t.tables,r)];case 8:b.sent(),b.label=9;case 9:return f.done=!0,u&&Vt.ignoreTransaction(function(){return u(f)}),[2]}})})}function Vy(t,e){return wi(this,void 0,void 0,function(){var n,r;return lr(this,function(i){switch(i.label){case 0:n="slice"in t?Ck(t):t,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(e)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Sk)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}Vt.prototype.export=function(t){return wk(this,t)};Vt.prototype.import=function(t,e){return Fy(this,t,e)};Vt.import=function(t,e){return Ly(t,e)};function Ek(t){return eg()?(uw(t),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Tk(t,e){const n=rd(e==null?void 0:e.initialValue),r=t.subscribe({next:i=>n.value=i,error:e==null?void 0:e.onError});return Ek(()=>{r.unsubscribe()}),n}let Il;const Ak=new Uint8Array(16);function _k(){if(!Il&&(Il=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Il))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Il(Ak)}const Jt=[];for(let t=0;t<256;++t)Jt.push((t+256).toString(16).slice(1));function Mk(t,e=0){return Jt[t[e+0]]+Jt[t[e+1]]+Jt[t[e+2]]+Jt[t[e+3]]+"-"+Jt[t[e+4]]+Jt[t[e+5]]+"-"+Jt[t[e+6]]+Jt[t[e+7]]+"-"+Jt[t[e+8]]+Jt[t[e+9]]+"-"+Jt[t[e+10]]+Jt[t[e+11]]+Jt[t[e+12]]+Jt[t[e+13]]+Jt[t[e+14]]+Jt[t[e+15]]}const Nk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),pp={randomUUID:Nk};function Pk(t,e,n){if(pp.randomUUID&&!e&&!t)return pp.randomUUID();t=t||{};const r=t.random||(t.rng||_k)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Mk(r)}const Ik=async t=>await t.export(),Dk={data(){return{dbRef:null,db:null,databaseName:null,dblist:[],useObservable:Tk,liveQuery:Py,uuid:Pk,syncdb:{},DBstores:{Settings:"uuid, settings, lastupdated",Writer:"uuid, title, description, files, lastupdated",Cards:"uuid, title,description,content,style,labels,options,lastupdated",Files:"uuid, writerid, title, content, lastupdated",Snowflake:"uuid, title, description,content,lastupdated",Timeline:"uuid, title, description,content,lastupdated",Gridplanner:"uuid, title, description,content,lastupdated",Mindmap:"uuid, title, description,content,lastupdated",ImageLibrary:"uuid, title, base64"}}},methods:{async getDatabases(){},async initDatabase(){console.log(this.databaseName),this.databaseName||(console.log("New Db Created"),this.databaseName=this.uuid()),this.db||(console.log("Creating new database"),this.db=await new Vt(this.databaseName),console.log("Creating new stores"),this.db.version(1).stores(this.DBstores));let t=await this.db.Settings.toArray(),e={};if(t){if(t.length)e=t[0],this.dbRef=e.uuid;else{let n=JSON.parse(JSON.stringify(this.$root.SettingsTemplate));n.uuid=this.$root.uuid(),n.ProjectName="New Project",await this.$root.AddRecord("Settings",n),this.dbRef=n.uuid}this.syncdb.Settings=await this.useObservable(this.liveQuery(async()=>await this.db.Settings.get(this.dbRef))),this.syncdb.Cards=await this.useObservable(this.liveQuery(async()=>await this.db.Cards.toArray())),this.syncdb.Files=await this.useObservable(this.liveQuery(async()=>await this.db.Files.toArray())),this.syncdb.Gridplanner=await this.useObservable(this.liveQuery(async()=>await this.db.Gridplanner.toArray())),this.syncdb.ImageLibrary=await this.useObservable(this.liveQuery(async()=>await this.db.ImageLibrary.toArray())),this.syncdb.Mindmap=await this.useObservable(this.liveQuery(async()=>await this.db.Mindmap.toArray())),this.syncdb.Snowflake=await this.useObservable(this.liveQuery(async()=>await this.db.Snowflake.toArray())),this.syncdb.Timeline=await this.useObservable(this.liveQuery(async()=>await this.db.Timeline.toArray())),this.syncdb.Writer=await this.useObservable(this.liveQuery(async()=>await this.db.Writer.toArray()))}},async dbImport(t){this.databaseName=t.data.databaseName;const e=new Blob([JSON.stringify(t)],{type:"text/json;charset=utf-8"});this.db=await Ly(e,{clearTablesBeforeImport:!0}),await this.initDatabase()},async dbExport(){const t=await new Vt(this.databaseName).open(),e=await Ik(t);return t.close(),e},async getImage(t){return await this.$root.db.ImageLibrary.get(t)},async AddRecord(t,e){return e.lastupdated=Date.now(),await this.db[t].add(e)},async UpdateRecord(t,e,n){return n.uuid=e,n.lastupdated=Date.now(),await this.db[t].put(JSON.parse(JSON.stringify(n)))},async DeleteRecord(t,e){return await this.db[t].delete(e)},clearDatabase(){this.$root.db.Settings.clear(),this.$root.db.Writer.clear(),this.$root.db.Cards.clear(),this.$root.db.Files.clear(),this.$root.db.Mindmap.clear(),this.$root.db.ImageLibrary.clear(),this.$root.db.Gridplanner.clear(),this.$root.db.Snowflake.clear(),this.$root.db.Timeline.clear()},async closeProject(){this.$swal({title:"Are you sure?",text:"This will close the project any unsaved changes will be lost!",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, close it!"}).then(async t=>{t.isConfirmed&&(window.removeEventListener("beforeunload",this.$root.unloadEvent),this.dbRef=null,this.$root.clearDatabase(),await this.$root.db.delete(),location.reload())})},async closeAndDeleteDatabase(){this.db&&(await this.db.close(),await Vt.delete(this.databaseName),console.log(`Database ${this.databaseName} closed and deleted.`))}},async mounted(){this.databaseName?this.initDatabase():this.getDatabases(),console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))},beforeDestroy(){console.log("closing db",this.$root.mainwindow),this.$root.mainwindow&&(console.log("closing db"),window.addEventListener("beforeunload",this.closeAndDeleteDatabase))}},$k={data(){return{SettingsTemplate:{documentprefs:{align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-align")),fontsize:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-fontsize")),lspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-lspacing")),indentation:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-indentation")),pspacing:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-pspacing")),page:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-page")),font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-font")),color:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-color")),bgcolor:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-bgcolor")),h1align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h1align")),h2align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h2align")),h3align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h3align")),h4align:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--pageEditor-h4align")),distractionfree_font:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-font")),distractionfree_bg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-bg")),distractionfree_fg:this.dotrim(getComputedStyle(document.documentElement).getPropertyValue("--distractionfree-fg")),typesound:!1,caretfocus:!1}},writerTemplate:{title:"Another Great Novel",author:"A.N. Author",description:" ... ",files:[]},fileTemplate:{title:"New Section",content:"",notes:[]}}},methods:{dotrim(t){return t[0]===" "&&(t=t.substring(1)),t},makeNewCard(t){let e=this.$root.uuid();t&&(e=t);let n={};n.uuid=e,n.projectID=this.$root.$data.session.selectedProject,n.title="",n.description="",n.showdesc=!1,n.content="",n.labels=[],n.images=[],n.style="",n.options={},n.color="--card1",this.$root.AddRecord("Cards",n),this.$root.$data.session.EditCard=n.uuid}}},Rk={data(){return{}},methods:{handleKeyPress(t){this.$root.databaseName&&t.keyCode==83&&(navigator.userAgent.includes("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),this.saveFile())},async openFile(){try{[this.$root.fileHandle]=await window.showOpenFilePicker({types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]},extensions:["wmc"]}]});const e=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(e),this.$root.dbImport(this.$root.jsonData)}catch(t){console.error("Error opening file:",t)}},async snapShot(){let t=this.sanitizeFilename(this.$root.syncdb.Settings.ProjectName);const n=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(n);const r=new Blob([JSON.stringify(this.$root.jsonData,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},sanitizeFilename(t){const e=new Date,n=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}`;return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")+`-${n}.wmc`},async saveFile(){const e=await(await this.$root.dbExport()).text();this.$root.jsonData=JSON.parse(e);try{this.$root.fileHandle||(this.$root.fileHandle=await window.showSaveFilePicker({suggestedName:"untitled.wmc",types:[{description:"Wavemaker Cards File",accept:{"application/json":[".wmc"]}}]}));const n=await this.$root.fileHandle.createWritable();await n.write(JSON.stringify(this.$root.jsonData,null,2)),await n.close(),this.$swal({title:"Your File Was saved",text:"The file was saved successfully",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}catch{this.$swal({title:"Your file was not saved",text:"Please try again, or use other export tools to make a backup.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}},async clearFile(){this.$root.closeProject()}},created(){"launchQueue"in window&&"files"in window.LaunchParams.prototype&&window.launchQueue.setConsumer(async t=>{if(!t.files.length)return;this.$root.fileHandle=t.files[0];const n=await(await this.$root.fileHandle.getFile()).text();this.$root.jsonData=JSON.parse(n),await this.$root.dbImport(this.$root.jsonData)})},mounted(){window.addEventListener("keydown",this.handleKeyPress)},beforeDestroy(){window.removeEventListener("keydown",this.handleKeyPress)}},Bk={data(){return{windowID:null,parentID:null,mainwindow:!0,childWindows:[]}},methods:{openNewWindow(t,e){let n=window.location.href;n=n+"?parentid="+this.windowID,n=n+"&dbname="+this.$root.databaseName,n=n+"&tool="+t,n=n+"&selected="+e;const r=window.open(n,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=800,height=600");this.childWindows.push(r),r.onload=function(){const i=new URL(r.location);i.search="",r.history.replaceState(null,"",i)}},closeChildWindows(){this.childWindows.forEach(t=>{t&&!t.closed&&t.close()}),this.childWindows=[]}},created(){const t=new URLSearchParams(window.location.search);this.parentID=t.get("parentid"),this.$root.databaseName=t.get("dbname"),this.$root.currentTool=t.get("tool"),this.$root.selected=t.get("selected"),this.parentID&&(this.mainwindow=!1),this.windowID=this.uuid(),window.addEventListener("beforeunload",this.closeChildWindows)},beforeDestroy(){window.removeEventListener("beforeunload",this.closeChildWindows)}},Ot=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},Lk={},Fk={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 453.543 453.543","xml:space":"preserve",class:"logo"};function Vk(t,e){return xe(),ze("svg",Fk,e[0]||(e[0]=[j("path",{d:"M464.632 212.901 337.566 83.292a55.653 55.653 0 0 0-79.771 0l-126.63 129.386a19.322 19.322 0 0 0 0 27.122l38.359 39.127 25.5 24.232c7.628 7.114 19.18 7.114 26.808 0l51.219-48.242c14.167-13.338 35.744-13.338 49.693 0l51.219 48.242c7.629 7.114 19.18 7.114 26.809 0l25.501-24.232 38.359-38.904c7.193-7.337 7.193-19.563 0-27.122z",class:"logotop",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1),j("path",{d:"m58.804 367.853 198.991 202.973a55.657 55.657 0 0 0 79.771 0l198.991-202.973c34.437-35.125 10.244-45.574-15.039-70.029L490.35 267.59c-7.409-7.336-19.18-7.113-26.808 0l-51.218 48.242c-14.169 13.339-35.744 13.339-49.694 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-51.219 48.242c-14.167 13.339-35.744 13.339-49.693 0l-51.219-48.242a19.508 19.508 0 0 0-26.809 0l-28.77 27.123c-26.37 24.899-54.05 36.236-18.088 73.14z",class:"logobtm",transform:"matrix(.6795 0 0 .6795 21.648 1.33)"},null,-1)]))}const kd=Ot(Lk,[["render",Vk],["__scopeId","data-v-c0fdd851"]]),jk={methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)}}},Hk={key:0};function zk(t,e,n,r,i,o){return this.$root.syncdb.Settings?(xe(),ze("span",Hk,[Ro(j("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>this.$root.syncdb.Settings.ProjectName=s),placeholder:"Project Name",onBlur:e[1]||(e[1]=s=>o.update())},null,544),[[Lo,this.$root.syncdb.Settings.ProjectName]])])):it("",!0)}const jy=Ot(jk,[["render",zk]]),Kk={components:{Logo:kd,ProjectName:jy},methods:{}},Uk={class:"toptoolbar"},Wk={class:"floatRight"},qk={key:3};function Jk(t,e,n,r,i,o){const s=ut("Logo"),l=ut("ProjectName");return xe(),ze("div",Uk,[j("button",{onClick:e[0]||(e[0]=a=>t.$root.currentTool=null),class:"titlebtn"},[Ct(s,{style:{width:"30px",height:"30px"}})]),Ct(l,{class:"projectname"}),j("span",Wk,[t.$root.dbRef?it("",!0):(xe(),ze("button",{key:0,onClick:e[1]||(e[1]=(...a)=>t.$root.openFileFromGoogleDrive&&t.$root.openFileFromGoogleDrive(...a))},e[7]||(e[7]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"google-drive"),j("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})],-1)]))),t.$root.dbRef?it("",!0):(xe(),ze("button",{key:1,onClick:e[2]||(e[2]=(...a)=>t.$root.openFileFromDropBox&&t.$root.openFileFromDropBox(...a))},e[8]||(e[8]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"dropbox"),j("path",{d:"M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z"})],-1)]))),t.$root.dbRef?it("",!0):(xe(),ze("button",{key:2,onClick:e[3]||(e[3]=a=>t.$root.openFile())},e[9]||(e[9]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"upload-box-outline"),j("path",{d:"M8 17V15H16V17H8M16 11L12 7L8 11H10.5V14H13.5V11H16M5 3H19C20.11 3 21 3.9 21 5V19C21 20.11 20.11 21 19 21H5C3.9 21 3 20.11 3 19V5C3 3.9 3.9 3 5 3M5 5V19H19V5H5Z"})],-1)]))),t.$root.dbRef?(xe(),ze("span",qk,[j("button",{onClick:e[4]||(e[4]=a=>t.$root.snapShot())},e[10]||(e[10]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"camera-outline"),j("path",{d:"M20,4H16.83L15,2H9L7.17,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,18H4V6H8.05L9.88,4H14.12L15.95,6H20V18M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15Z"})],-1)])),j("button",{onClick:e[5]||(e[5]=a=>t.$root.saveFile())},e[11]||(e[11]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"content-save-outline"),j("path",{d:"M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z"})],-1)])),j("button",{onClick:e[6]||(e[6]=a=>t.$root.clearFile())},e[12]||(e[12]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"close-box-outline"),j("path",{d:"M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,8.4L13.4,12L17,15.6L15.6,17L12,13.4L8.4,17L7,15.6L10.6,12L7,8.4L8.4,7L12,10.6L15.6,7L17,8.4Z"})],-1)]))])):it("",!0)])])}const Yk=Ot(Kk,[["render",Jk],["__scopeId","data-v-65848017"]]),Gk={},Xk={class:"footerbar"};function Zk(t,e){return xe(),ze("div",Xk," Wavemaker Cards v5  2021 ")}const Qk=Ot(Gk,[["render",Zk]]),eC={data(){return{deferredPrompt:null,showInstallBanner:!1}},mounted(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showInstallBanner=!0})},methods:{async installApp(){this.showInstallBanner=!1,this.deferredPrompt.prompt();const{outcome:t}=await this.deferredPrompt.userChoice;console.log(t==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),this.deferredPrompt=null}}},tC={key:0,class:"install-banner"};function nC(t,e,n,r,i,o){return i.showInstallBanner?(xe(),ze("div",tC,[e[1]||(e[1]=j("p",null,"Install our app for a better experience!",-1)),j("button",{onClick:e[0]||(e[0]=(...s)=>o.installApp&&o.installApp(...s))},"Install")])):it("",!0)}const rC=Ot(eC,[["render",nC],["__scopeId","data-v-7d957fbf"]]),iC={name:"About",components:{Logo:kd},data(){return{}},methods:{async newProject(){this.$root.initDatabase()}}},oC={class:"center-box"},sC={class:"hero"},lC={style:{display:"flex","justify-content":"center","align-items":"center"}},aC={style:{display:"block"}};function cC(t,e,n,r,i,o){const s=ut("Logo");return xe(),ze("div",oC,[j("div",sC,[j("div",lC,[Ct(s,{style:{width:"50px"}}),e[2]||(e[2]=j("h1",null,"Wavemaker Cards",-1))]),e[5]||(e[5]=j("p",null,[j("strong",null,"Version 5")],-1)),e[6]||(e[6]=j("p",{style:{padding:"10px","font-size":"1rem"}},"Start Writing",-1)),j("div",aC,[j("button",{class:"btn",onClick:e[0]||(e[0]=l=>o.newProject())},e[3]||(e[3]=[j("svg",{viewBox:"0 0 24 24"},[j("path",{d:"M10,16.5V7.5L16,12M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})],-1),or(" Create a new project")])),j("button",{class:"btn",onClick:e[1]||(e[1]=l=>t.$root.openFile())},e[4]||(e[4]=[j("svg",{viewBox:"0 0 24 24"},[j("path",{d:"M19,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10L12,6H19A2,2 0 0,1 21,8H21L4,8V18L6.14,10H23.21L20.93,18.5C20.7,19.37 19.92,20 19,20Z"})],-1),j("span",null," Load a project (.wmc file) ",-1)]))])])])}const uC=Ot(iC,[["render",cC],["__scopeId","data-v-dd1bbe74"]]),fC={data(){return{currentdate:new Date,wordcountprogress:33,month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},computed:{monthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n+1,0).getDate()},prevMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n,0).getDate()},nextMonthDays(){const t=new Date(this.currentdate),e=t.getFullYear(),n=t.getMonth();return new Date(e,n-1,0).getDate()}},mounted(){this.$root.syncdb.Settings.tracker||(this.$root.syncdb.Settings.tracker={wordcount:0,target:2500,log:{"2025-02-01":123,"2025-02-02":432,"2025-02-03":234,"2025-02-04":345,"2025-02-05":456,"2025-02-06":567,"2025-02-07":678,"2025-02-08":789,"2025-02-09":890,"2025-02-10":901,"2025-02-11":123,"2025-02-12":234,"2025-02-13":345,"2025-02-14":456,"2025-02-15":567,"2025-02-16":678,"2025-02-17":789,"2025-02-18":890,"2025-02-19":901,"2025-02-20":123,"2025-02-21":234,"2025-02-22":345,"2025-02-23":456,"2025-02-24":567,"2025-02-25":678,"2025-02-26":789,"2025-02-27":890,"2025-02-28":901,"2025-03-01":123,"2025-03-02":234,"2025-03-03":345,"2025-03-04":456,"2025-03-05":567,"2025-03-06":678,"2025-03-07":789,"2025-03-08":890,"2025-03-09":901,"2025-03-10":123,"2025-03-11":234,"2025-03-12":345,"2025-03-13":456,"2025-03-14":567,"2025-03-15":678,"2025-03-16":789,"2025-03-17":890,"2025-03-18":901,"2025-03-19":123,"2025-03-20":234,"2025-03-21":345}})},methods:{update(){this.$root.UpdateRecord("Settings",this.$root.syncdb.Settings.uuid,this.$root.syncdb.Settings)},monthName(t=0){let e=this.currentdate.getMonth()+t;return e===-1&&(e=11),e===12&&(e=0),this.month[e]},getLogValue(t,e){const n=this.currentdate.getFullYear(),r=this.currentdate.getMonth()+e,i=String(t).padStart(2,"0"),o=`${n}-${String(r).padStart(2,"0")}-${i}`,s=this.$root.syncdb.Settings.tracker.log[o]||0,l=this.$root.syncdb.Settings.tracker.target||1,a=s/l;return{count:s,percent:a}},advanceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()+1),this.currentdate=t},reduceMonth(){const t=new Date(this.currentdate);t.setMonth(t.getMonth()-1),this.currentdate=t}}},dC={key:0},hC={class:"calendars"},pC={class:"month"},mC={class:"calendar"},gC=["title"],yC={class:"month"},bC={class:"calendar"},vC=["title"],wC={class:"progress-container"},SC={class:"progress-circle",viewBox:"0 0 36 36"};function xC(t,e,n,r,i,o){return this.$root.syncdb.Settings.tracker?(xe(),ze("div",dC,[j("h3",null,Rr(t.$root.syncdb.Settings.tracker.wordcount)+" Words",1),j("label",null,[e[3]||(e[3]=or("Daily Wordcount Target ")),Ro(j("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>t.$root.syncdb.Settings.tracker.target=s)},null,512),[[Lo,t.$root.syncdb.Settings.tracker.target]])]),e[5]||(e[5]=j("p",{style:{"text-align":"center"}},"Your Goals",-1)),j("div",null,[j("button",{onClick:e[1]||(e[1]=(...s)=>o.reduceMonth&&o.reduceMonth(...s))},"Previous Month"),j("button",{onClick:e[2]||(e[2]=(...s)=>o.advanceMonth&&o.advanceMonth(...s))},"Next Month")]),j("div",hC,[j("div",null,[j("div",pC,Rr(o.monthName(-1)),1),j("div",mC,[(xe(!0),ze(Xt,null,xa(o.prevMonthDays,s=>(xe(),ze("div",{class:"day",title:o.getLogValue(s,0).count+" Words"},[j("div",{class:"block",style:Io(`opacity:${o.getLogValue(s,0).percent}`)},null,4)],8,gC))),256))])]),j("div",null,[j("div",yC,Rr(o.monthName()),1),j("div",bC,[(xe(!0),ze(Xt,null,xa(o.monthDays,s=>(xe(),ze("div",{class:"day",title:o.getLogValue(s,1).count+" Words"},[j("div",{class:"block",style:Io(`opacity:${o.getLogValue(s,1).percent}`)},null,4)],8,vC))),256))])]),j("div",wC,[(xe(),ze("svg",SC,[e[4]||(e[4]=j("path",{class:"circle-bg",d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,-1)),j("path",{class:"circle",style:Io(`stroke-dasharray: ${i.wordcountprogress}, 100`),d:`M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831`},null,4)]))])])])):it("",!0)}const kC=Ot(fC,[["render",xC]]),CC={name:"ProjectHome",components:{Logo:kd,ProjectName:jy,GridLogger:kC},mounted(){this.$root.tools.writer.selected=null,this.$root.tools.gridplanner.selected=null,this.$root.tools.timeline.selected=null,this.$root.tools.mindmap.selected=null,this.$root.tools.snowflake.selected=null,this.$root.tools.planningboard.selected=null},methods:{}},OC={key:0,class:"project-home"},EC={style:{"text-align":"center"}},TC={open:""},AC={class:"inputstyle"},_C={class:"mainnav"};function MC(t,e,n,r,i,o){const s=ut("Logo"),l=ut("ProjectName"),a=ut("GridLogger");return this.$root.syncdb.Settings?(xe(),ze("div",OC,[j("div",EC,[Ct(s,{style:{width:"150px",height:"150px"}})]),j("details",TC,[e[6]||(e[6]=j("summary",null,"Project Settings",-1)),e[7]||(e[7]=j("p",{style:{"text-align":"center"}},"What is this project called?",-1)),j("h2",AC,[Ct(l)]),Ct(a)]),j("div",_C,[j("button",{onClick:e[0]||(e[0]=c=>t.$root.currentTool="writer")},e[8]||(e[8]=[j("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[j("path",{"data-v-92328502":"",d:"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"})],-1),or(" Your Books")])),j("button",{onClick:e[1]||(e[1]=c=>t.$root.currentTool="gridplanner")},e[9]||(e[9]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"view-grid"),j("path",{d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"})],-1),or(" Grid Planner ")])),j("button",{onClick:e[2]||(e[2]=c=>t.$root.currentTool="mindmap")},e[10]||(e[10]=[j("svg",{"data-v-92328502":"",version:"1.1",viewBox:"0 0 24 24"},[j("path",{"data-v-92328502":"",d:"M21 16V13C21 11.89 20.11 11 19 11H13V8H15V2H9V8H11V11H5C3.89 11 3 11.89 3 13V16H1V22H7V16H5V13H11V16H9V22H15V16H13V13H19V16H17V22H23V16H21M11 4H13V6H11V4M5 20H3V18H5V20M13 20H11V18H13V20M21 20H19V18H21V20Z"})],-1),or(" Mindmap Builder")])),j("button",{onClick:e[3]||(e[3]=c=>t.$root.currentTool="timeline")},e[11]||(e[11]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"timeline-outline"),j("path",{d:"M4 2V8H2V2H4M2 22V16H4V22H2M5 12C5 13.11 4.11 14 3 14C1.9 14 1 13.11 1 12C1 10.9 1.9 10 3 10C4.11 10 5 10.9 5 12M24 6V18C24 19.11 23.11 20 22 20H10C8.9 20 8 19.11 8 18V14L6 12L8 10V6C8 4.89 8.9 4 10 4H22C23.11 4 24 4.89 24 6M10 6V18H22V6H10Z"})],-1),or(" Timeline Creator")])),j("button",{onClick:e[4]||(e[4]=c=>t.$root.currentTool="snowflake")},e[12]||(e[12]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"snowflake"),j("path",{d:"M20.79,13.95L18.46,14.57L16.46,13.44V10.56L18.46,9.43L20.79,10.05L21.31,8.12L19.54,7.65L20,5.88L18.07,5.36L17.45,7.69L15.45,8.82L13,7.38V5.12L14.71,3.41L13.29,2L12,3.29L10.71,2L9.29,3.41L11,5.12V7.38L8.5,8.82L6.5,7.69L5.92,5.36L4,5.88L4.47,7.65L2.7,8.12L3.22,10.05L5.55,9.43L7.55,10.56V13.45L5.55,14.58L3.22,13.96L2.7,15.89L4.47,16.36L4,18.12L5.93,18.64L6.55,16.31L8.55,15.18L11,16.62V18.88L9.29,20.59L10.71,22L12,20.71L13.29,22L14.7,20.59L13,18.88V16.62L15.5,15.17L17.5,16.3L18.12,18.63L20,18.12L19.53,16.35L21.3,15.88L20.79,13.95M9.5,10.56L12,9.11L14.5,10.56V13.44L12,14.89L9.5,13.44V10.56Z"})],-1),or(" Snowflake Tool")])),j("button",{onClick:e[5]||(e[5]=c=>t.$root.currentTool="cardsdatabase")},e[13]||(e[13]=[j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"cards-outline"),j("path",{d:"M11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,7.04 1.97,8.05L6.93,20C7.24,20.77 7.97,21.23 8.74,21.25C9,21.25 9.27,21.22 9.53,21.1L16.9,18.05C17.65,17.74 18.11,17 18.13,16.25C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,2.73 11.97,2.26 11.19,2.25M14.67,2.25L18.12,10.6V4.25A2,2 0 0,0 16.12,2.25M20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.78 21.47,4.36M11.19,4.22L16.17,16.24L8.78,19.3L3.8,7.29"})],-1),or(" Cards Database")]))])])):it("",!0)}const NC=Ot(CC,[["render",MC],["__scopeId","data-v-d1a7a50f"]]);var PC=Object.defineProperty,Ra=Object.getOwnPropertySymbols,Hy=Object.prototype.hasOwnProperty,zy=Object.prototype.propertyIsEnumerable,mp=(t,e,n)=>e in t?PC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,To=(t,e)=>{for(var n in e||(e={}))Hy.call(e,n)&&mp(t,n,e[n]);if(Ra)for(var n of Ra(e))zy.call(e,n)&&mp(t,n,e[n]);return t},Ky=(t,e)=>{var n={};for(var r in t)Hy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ra)for(var r of Ra(t))e.indexOf(r)<0&&zy.call(t,r)&&(n[r]=t[r]);return n};const Uy="[vue-draggable-plus]: ";function IC(t){console.warn(Uy+t)}function DC(t){console.error(Uy+t)}function gp(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function $C(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function RC(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[$C(n)]=t[n]),e),{})}function yp(t,e){return Array.isArray(t)&&t.splice(e,1),t}function bp(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function BC(t){return typeof t>"u"}function LC(t){return typeof t=="string"}function vp(t,e,n){const r=t.children[n];t.insertBefore(e,r)}function ou(t){t.parentNode&&t.parentNode.removeChild(t)}function FC(t,e=document){var n;let r=null;return typeof(e==null?void 0:e.querySelector)=="function"?r=(n=e==null?void 0:e.querySelector)==null?void 0:n.call(e,t):r=document.querySelector(t),r||IC(`Element not found: ${t}`),r}function VC(t,e,n=null){return function(...r){return t.apply(n,r),e.apply(n,r)}}function jC(t,e){const n=To({},t);return Object.keys(e).forEach(r=>{n[r]?n[r]=VC(t[r],e[r]):n[r]=e[r]}),n}function HC(t){return t instanceof HTMLElement}function wp(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function zC(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const KC=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Sp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sp(Object(n),!0).forEach(function(r){UC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function la(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?la=function(e){return typeof e}:la=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},la(t)}function UC(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ur(){return Ur=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ur.apply(this,arguments)}function WC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function qC(t,e){if(t==null)return{};var n=WC(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var JC="1.15.2";function jr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var qr=jr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),pl=jr(/Edge/i),xp=jr(/firefox/i),Is=jr(/safari/i)&&!jr(/chrome/i)&&!jr(/android/i),Wy=jr(/iP(ad|od|hone)/i),qy=jr(/chrome/i)&&jr(/android/i),Jy={capture:!1,passive:!1};function ot(t,e,n){t.addEventListener(e,n,!qr&&Jy)}function rt(t,e,n){t.removeEventListener(e,n,!qr&&Jy)}function Ba(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function YC(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ir(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Ba(t,e):Ba(t,e))||r&&t===n)return t;if(t===n)break}while(t=YC(t))}return null}var kp=/\s+/g;function Fn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(kp," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(kp," ")}}function Be(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Ho(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Be(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Yy(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function wr(){var t=document.scrollingElement;return t||document.documentElement}function Pt(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var o,s,l,a,c,u,f;if(t!==window&&t.parentNode&&t!==wr()?(o=t.getBoundingClientRect(),s=o.top,l=o.left,a=o.bottom,c=o.right,u=o.height,f=o.width):(s=0,l=0,a=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!qr))do if(i&&i.getBoundingClientRect&&(Be(i,"transform")!=="none"||n&&Be(i,"position")!=="static")){var h=i.getBoundingClientRect();s-=h.top+parseInt(Be(i,"border-top-width")),l-=h.left+parseInt(Be(i,"border-left-width")),a=s+o.height,c=l+o.width;break}while(i=i.parentNode);if(r&&t!==window){var m=Ho(i||t),g=m&&m.a,b=m&&m.d;m&&(s/=b,l/=g,f/=g,u/=b,a=s+u,c=l+f)}return{top:s,left:l,bottom:a,right:c,width:f,height:u}}}function Cp(t,e,n){for(var r=li(t,!0),i=Pt(t)[e];r;){var o=Pt(r)[n],s=void 0;if(s=i>=o,!s)return r;if(r===wr())break;r=li(r,!1)}return!1}function qo(t,e,n,r){for(var i=0,o=0,s=t.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==Le.ghost&&(r||s[o]!==Le.dragged)&&ir(s[o],n.draggable,t,!1)){if(i===e)return s[o];i++}o++}return null}function Cd(t,e){for(var n=t.lastElementChild;n&&(n===Le.ghost||Be(n,"display")==="none"||e&&!Ba(n,e));)n=n.previousElementSibling;return n||null}function qn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Le.clone&&(!e||Ba(t,e))&&n++;return n}function Op(t){var e=0,n=0,r=wr();if(t)do{var i=Ho(t),o=i.a,s=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*s}while(t!==r&&(t=t.parentNode));return[e,n]}function GC(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function li(t,e){if(!t||!t.getBoundingClientRect)return wr();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Be(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return wr();if(r||e)return n;r=!0}}while(n=n.parentNode);return wr()}function XC(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function su(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ds;function Gy(t,e){return function(){if(!Ds){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Ds=setTimeout(function(){Ds=void 0},e)}}}function ZC(){clearTimeout(Ds),Ds=void 0}function Xy(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Zy(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Qy(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var o,s,l,a;if(!(!ir(i,e.draggable,t,!1)||i.animated||i===n)){var c=Pt(i);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,c.right),r.bottom=Math.max((a=r.bottom)!==null&&a!==void 0?a:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Hn="Sortable"+new Date().getTime();function QC(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Be(r,"display")==="none"||r===Le.ghost)){t.push({target:r,rect:Pt(r)});var i=xr({},t[t.length-1].rect);if(r.thisAnimationDuration){var o=Ho(r,!0);o&&(i.top-=o.f,i.left-=o.e)}r.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(GC(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,o=0;t.forEach(function(s){var l=0,a=s.target,c=a.fromRect,u=Pt(a),f=a.prevFromRect,h=a.prevToRect,m=s.rect,g=Ho(a,!0);g&&(u.top-=g.f,u.left-=g.e),a.toRect=u,a.thisAnimationDuration&&su(f,u)&&!su(c,u)&&(m.top-u.top)/(m.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(l=tO(m,f,h,r.options)),su(u,c)||(a.prevFromRect=c,a.prevToRect=u,l||(l=r.options.animation),r.animate(a,m,u,l)),l&&(i=!0,o=Math.max(o,l),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},l),a.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),t=[]},animate:function(n,r,i,o){if(o){Be(n,"transition",""),Be(n,"transform","");var s=Ho(this.el),l=s&&s.a,a=s&&s.d,c=(r.left-i.left)/(l||1),u=(r.top-i.top)/(a||1);n.animatingX=!!c,n.animatingY=!!u,Be(n,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=eO(n),Be(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Be(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Be(n,"transition",""),Be(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function eO(t){return t.offsetWidth}function tO(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var go=[],lu={initializeByDefault:!0},ml={mount:function(t){for(var e in lu)lu.hasOwnProperty(e)&&!(e in t)&&(t[e]=lu[e]);go.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),go.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=t+"Global";go.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][i]&&e[o.pluginName][i](xr({sortable:e},n)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](xr({sortable:e},n)))})},initializePlugins:function(t,e,n,r){go.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var a=new s(t,e,t.options);a.sortable=t,a.options=t.options,t[l]=a,Ur(n,a.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var o=this.modifyOption(t,i,t.options[i]);typeof o<"u"&&(t.options[i]=o)}},getEventProperties:function(t,e){var n={};return go.forEach(function(r){typeof r.eventProperties=="function"&&Ur(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return go.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[e]=="function"&&(r=i.optionListeners[e].call(t[i.pluginName],n))}),r}};function nO(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,s=t.toEl,l=t.fromEl,a=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[Hn],!!e){var b,x=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!qr&&!pl?b=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(r,!0,!0)),b.to=s||n,b.from=l||n,b.item=i||n,b.clone=o,b.oldIndex=a,b.newIndex=c,b.oldDraggableIndex=u,b.newDraggableIndex=f,b.originalEvent=h,b.pullMode=m?m.lastPutMode:void 0;var A=xr(xr({},g),ml.getEventProperties(r,e));for(var N in A)b[N]=A[N];n&&n.dispatchEvent(b),x[O]&&x[O].call(e,b)}}var rO=["evt"],Mn=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=qC(n,rO);ml.pluginEvent.bind(Le)(t,e,xr({dragEl:ae,parentEl:Tt,ghostEl:He,rootEl:wt,nextEl:Ri,lastDownEl:aa,cloneEl:kt,cloneHidden:oi,dragStarted:gs,putSortable:Yt,activeSortable:Le.active,originalEvent:r,oldIndex:Ao,oldDraggableIndex:$s,newIndex:jn,newDraggableIndex:ti,hideGhostForTarget:rb,unhideGhostForTarget:ib,cloneNowHidden:function(){oi=!0},cloneNowShown:function(){oi=!1},dispatchSortableEvent:function(o){gn({sortable:e,name:o,originalEvent:r})}},i))};function gn(t){nO(xr({putSortable:Yt,cloneEl:kt,targetEl:ae,rootEl:wt,oldIndex:Ao,oldDraggableIndex:$s,newIndex:jn,newDraggableIndex:ti},t))}var ae,Tt,He,wt,Ri,aa,kt,oi,Ao,jn,$s,ti,Dl,Yt,ko=!1,La=!1,Fa=[],Ii,rr,au,cu,Ep,Tp,gs,yo,Rs,Bs=!1,$l=!1,ca,nn,uu=[],Sf=!1,Va=[],wc=typeof document<"u",Rl=Wy,Ap=pl||qr?"cssFloat":"float",iO=wc&&!qy&&!Wy&&"draggable"in document.createElement("div"),eb=function(){if(wc){if(qr)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),tb=function(t,e){var n=Be(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=qo(t,0,e),o=qo(t,1,e),s=i&&Be(i),l=o&&Be(o),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Pt(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Pt(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||a>=r&&n[Ap]==="none"||o&&n[Ap]==="none"&&a+c>r)?"vertical":"horizontal"},oO=function(t,e,n){var r=n?t.left:t.top,i=n?t.right:t.bottom,o=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,a=n?e.width:e.height;return r===s||i===l||r+o/2===s+a/2},sO=function(t,e){var n;return Fa.some(function(r){var i=r[Hn].options.emptyInsertThreshold;if(!(!i||Cd(r))){var o=Pt(r),s=t>=o.left-i&&t<=o.right+i,l=e>=o.top-i&&e<=o.bottom+i;if(s&&l)return n=r}}),n},nb=function(t){function e(i,o){return function(s,l,a,c){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(o||u))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return e(i(s,l,a,c),o)(s,l,a,c);var f=(o?s:l).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var n={},r=t.group;(!r||la(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},rb=function(){!eb&&He&&Be(He,"display","none")},ib=function(){!eb&&He&&Be(He,"display","")};wc&&!qy&&document.addEventListener("click",function(t){if(La)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),La=!1,!1},!0);var Di=function(t){if(ae){t=t.touches?t.touches[0]:t;var e=sO(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Hn]._onDragOver(n)}}},lO=function(t){ae&&ae.parentNode[Hn]._isOutsideThisEl(t.target)};function Le(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ur({},e),t[Hn]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return tb(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Le.supportPointer!==!1&&"PointerEvent"in window&&!Is,emptyInsertThreshold:5};ml.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);nb(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:iO,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ot(t,"pointerdown",this._onTapStart):(ot(t,"mousedown",this._onTapStart),ot(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ot(t,"dragover",this),ot(t,"dragenter",this)),Fa.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ur(this,QC())}Le.prototype={constructor:Le,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(yo=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,ae):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,i=r.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=r.filter;if(mO(n),!ae&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||r.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&Is&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ir(l,r.draggable,n,!1),!(l&&l.animated)&&aa!==l)){if(Ao=qn(l),$s=qn(l,r.draggable),typeof c=="function"){if(c.call(this,t,l,this)){gn({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:n,fromEl:n}),Mn("filter",e,{evt:t}),i&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=ir(a,u.trim(),n,!1),u)return gn({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:n,toEl:n}),Mn("filter",e,{evt:t}),!0}),c)){i&&t.cancelable&&t.preventDefault();return}r.handle&&!ir(a,r.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var r=this,i=r.el,o=r.options,s=i.ownerDocument,l;if(n&&!ae&&n.parentNode===i){var a=Pt(n);if(wt=i,ae=n,Tt=ae.parentNode,Ri=ae.nextSibling,aa=n,Dl=o.group,Le.dragged=ae,Ii={target:ae,clientX:(e||t).clientX,clientY:(e||t).clientY},Ep=Ii.clientX-a.left,Tp=Ii.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,ae.style["will-change"]="all",l=function(){if(Mn("delayEnded",r,{evt:t}),Le.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!xp&&r.nativeDraggable&&(ae.draggable=!0),r._triggerDragStart(t,e),gn({sortable:r,name:"choose",originalEvent:t}),Fn(ae,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){Yy(ae,c.trim(),fu)}),ot(s,"dragover",Di),ot(s,"mousemove",Di),ot(s,"touchmove",Di),ot(s,"mouseup",r._onDrop),ot(s,"touchend",r._onDrop),ot(s,"touchcancel",r._onDrop),xp&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ae.draggable=!0),Mn("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(pl||qr))){if(Le.eventCanceled){this._onDrop();return}ot(s,"mouseup",r._disableDelayedDrag),ot(s,"touchend",r._disableDelayedDrag),ot(s,"touchcancel",r._disableDelayedDrag),ot(s,"mousemove",r._delayedDragTouchMoveHandler),ot(s,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&ot(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ae&&fu(ae),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;rt(t,"mouseup",this._disableDelayedDrag),rt(t,"touchend",this._disableDelayedDrag),rt(t,"touchcancel",this._disableDelayedDrag),rt(t,"mousemove",this._delayedDragTouchMoveHandler),rt(t,"touchmove",this._delayedDragTouchMoveHandler),rt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?ot(document,"pointermove",this._onTouchMove):e?ot(document,"touchmove",this._onTouchMove):ot(document,"mousemove",this._onTouchMove):(ot(ae,"dragend",this),ot(wt,"dragstart",this._onDragStart));try{document.selection?ua(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(ko=!1,wt&&ae){Mn("dragStarted",this,{evt:e}),this.nativeDraggable&&ot(document,"dragover",lO);var n=this.options;!t&&Fn(ae,n.dragClass,!1),Fn(ae,n.ghostClass,!0),Le.active=this,t&&this._appendGhost(),gn({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(rr){this._lastX=rr.clientX,this._lastY=rr.clientY,rb();for(var t=document.elementFromPoint(rr.clientX,rr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(rr.clientX,rr.clientY),t!==e);)e=t;if(ae.parentNode[Hn]._isOutsideThisEl(t),e)do{if(e[Hn]){var n=void 0;if(n=e[Hn]._onDragOver({clientX:rr.clientX,clientY:rr.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);ib()}},_onTouchMove:function(t){if(Ii){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=He&&Ho(He,!0),s=He&&o&&o.a,l=He&&o&&o.d,a=Rl&&nn&&Op(nn),c=(i.clientX-Ii.clientX+r.x)/(s||1)+(a?a[0]-uu[0]:0)/(s||1),u=(i.clientY-Ii.clientY+r.y)/(l||1)+(a?a[1]-uu[1]:0)/(l||1);if(!Le.active&&!ko){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(He){o?(o.e+=c-(au||0),o.f+=u-(cu||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Be(He,"webkitTransform",f),Be(He,"mozTransform",f),Be(He,"msTransform",f),Be(He,"transform",f),au=c,cu=u,rr=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!He){var t=this.options.fallbackOnBody?document.body:wt,e=Pt(ae,!0,Rl,!0,t),n=this.options;if(Rl){for(nn=t;Be(nn,"position")==="static"&&Be(nn,"transform")==="none"&&nn!==document;)nn=nn.parentNode;nn!==document.body&&nn!==document.documentElement?(nn===document&&(nn=wr()),e.top+=nn.scrollTop,e.left+=nn.scrollLeft):nn=wr(),uu=Op(nn)}He=ae.cloneNode(!0),Fn(He,n.ghostClass,!1),Fn(He,n.fallbackClass,!0),Fn(He,n.dragClass,!0),Be(He,"transition",""),Be(He,"transform",""),Be(He,"box-sizing","border-box"),Be(He,"margin",0),Be(He,"top",e.top),Be(He,"left",e.left),Be(He,"width",e.width),Be(He,"height",e.height),Be(He,"opacity","0.8"),Be(He,"position",Rl?"absolute":"fixed"),Be(He,"zIndex","100000"),Be(He,"pointerEvents","none"),Le.ghost=He,t.appendChild(He),Be(He,"transform-origin",Ep/parseInt(He.style.width)*100+"% "+Tp/parseInt(He.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,i=n.options;if(Mn("dragStart",this,{evt:t}),Le.eventCanceled){this._onDrop();return}Mn("setupClone",this),Le.eventCanceled||(kt=Zy(ae),kt.removeAttribute("id"),kt.draggable=!1,kt.style["will-change"]="",this._hideClone(),Fn(kt,this.options.chosenClass,!1),Le.clone=kt),n.cloneId=ua(function(){Mn("clone",n),!Le.eventCanceled&&(n.options.removeCloneOnHide||wt.insertBefore(kt,ae),n._hideClone(),gn({sortable:n,name:"clone"}))}),!e&&Fn(ae,i.dragClass,!0),e?(La=!0,n._loopId=setInterval(n._emulateDragOver,50)):(rt(document,"mouseup",n._onDrop),rt(document,"touchend",n._onDrop),rt(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,ae)),ot(document,"drop",n),Be(ae,"transform","translateZ(0)")),ko=!0,n._dragStartId=ua(n._dragStarted.bind(n,e,t)),ot(document,"selectstart",n),gs=!0,Is&&Be(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,i,o,s=this.options,l=s.group,a=Le.active,c=Dl===l,u=s.sort,f=Yt||a,h,m=this,g=!1;if(Sf)return;function b(Q,Te){Mn(Q,m,xr({evt:t,isOwner:c,axis:h?"vertical":"horizontal",revert:o,dragRect:r,targetRect:i,canSort:u,fromSortable:f,target:n,completed:O,onMove:function(Ze,Ke){return Bl(wt,e,ae,r,Ze,Pt(Ze),t,Ke)},changed:A},Te))}function x(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==f&&f.captureAnimationState()}function O(Q){return b("dragOverCompleted",{insertion:Q}),Q&&(c?a._hideClone():a._showClone(m),m!==f&&(Fn(ae,Yt?Yt.options.ghostClass:a.options.ghostClass,!1),Fn(ae,s.ghostClass,!0)),Yt!==m&&m!==Le.active?Yt=m:m===Le.active&&Yt&&(Yt=null),f===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===ae&&!ae.animated||n===e&&!n.animated)&&(yo=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(ae.parentNode[Hn]._isOutsideThisEl(t.target),!Q&&Di(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function A(){jn=qn(ae),ti=qn(ae,s.draggable),gn({sortable:m,name:"change",toEl:e,newIndex:jn,newDraggableIndex:ti,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=ir(n,s.draggable,e,!0),b("dragOver"),Le.eventCanceled)return g;if(ae.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return O(!1);if(La=!1,a&&!s.disabled&&(c?u||(o=Tt!==wt):Yt===this||(this.lastPutMode=Dl.checkPull(this,a,ae,t))&&l.checkPut(this,a,ae,t))){if(h=this._getDirection(t,n)==="vertical",r=Pt(ae),b("dragOverValid"),Le.eventCanceled)return g;if(o)return Tt=wt,x(),this._hideClone(),b("revert"),Le.eventCanceled||(Ri?wt.insertBefore(ae,Ri):wt.appendChild(ae)),O(!0);var N=Cd(e,s.draggable);if(!N||fO(t,h,this)&&!N.animated){if(N===ae)return O(!1);if(N&&e===t.target&&(n=N),n&&(i=Pt(n)),Bl(wt,e,ae,r,n,i,t,!!n)!==!1)return x(),N&&N.nextSibling?e.insertBefore(ae,N.nextSibling):e.appendChild(ae),Tt=e,A(),O(!0)}else if(N&&uO(t,h,this)){var $=qo(e,0,s,!0);if($===ae)return O(!1);if(n=$,i=Pt(n),Bl(wt,e,ae,r,n,i,t,!1)!==!1)return x(),e.insertBefore(ae,$),Tt=e,A(),O(!0)}else if(n.parentNode===e){i=Pt(n);var I=0,L,V=ae.parentNode!==e,K=!oO(ae.animated&&ae.toRect||r,n.animated&&n.toRect||i,h),E=h?"top":"left",S=Cp(n,"top","top")||Cp(ae,"top","top"),F=S?S.scrollTop:void 0;yo!==n&&(L=i[E],Bs=!1,$l=!K&&s.invertSwap||V),I=dO(t,n,i,h,K?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,$l,yo===n);var C;if(I!==0){var ce=qn(ae);do ce-=I,C=Tt.children[ce];while(C&&(Be(C,"display")==="none"||C===He))}if(I===0||C===n)return O(!1);yo=n,Rs=I;var Z=n.nextElementSibling,Se=!1;Se=I===1;var ge=Bl(wt,e,ae,r,n,i,t,Se);if(ge!==!1)return(ge===1||ge===-1)&&(Se=ge===1),Sf=!0,setTimeout(cO,30),x(),Se&&!Z?e.appendChild(ae):n.parentNode.insertBefore(ae,Se?Z:n),S&&Xy(S,0,F-S.scrollTop),Tt=ae.parentNode,L!==void 0&&!$l&&(ca=Math.abs(L-Pt(n)[E])),A(),O(!0)}if(e.contains(ae))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){rt(document,"mousemove",this._onTouchMove),rt(document,"touchmove",this._onTouchMove),rt(document,"pointermove",this._onTouchMove),rt(document,"dragover",Di),rt(document,"mousemove",Di),rt(document,"touchmove",Di)},_offUpEvents:function(){var t=this.el.ownerDocument;rt(t,"mouseup",this._onDrop),rt(t,"touchend",this._onDrop),rt(t,"pointerup",this._onDrop),rt(t,"touchcancel",this._onDrop),rt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(jn=qn(ae),ti=qn(ae,n.draggable),Mn("drop",this,{evt:t}),Tt=ae&&ae.parentNode,jn=qn(ae),ti=qn(ae,n.draggable),Le.eventCanceled){this._nulling();return}ko=!1,$l=!1,Bs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xf(this.cloneId),xf(this._dragStartId),this.nativeDraggable&&(rt(document,"drop",this),rt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Is&&Be(document.body,"user-select",""),Be(ae,"transform",""),t&&(gs&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),He&&He.parentNode&&He.parentNode.removeChild(He),(wt===Tt||Yt&&Yt.lastPutMode!=="clone")&&kt&&kt.parentNode&&kt.parentNode.removeChild(kt),ae&&(this.nativeDraggable&&rt(ae,"dragend",this),fu(ae),ae.style["will-change"]="",gs&&!ko&&Fn(ae,Yt?Yt.options.ghostClass:this.options.ghostClass,!1),Fn(ae,this.options.chosenClass,!1),gn({sortable:this,name:"unchoose",toEl:Tt,newIndex:null,newDraggableIndex:null,originalEvent:t}),wt!==Tt?(jn>=0&&(gn({rootEl:Tt,name:"add",toEl:Tt,fromEl:wt,originalEvent:t}),gn({sortable:this,name:"remove",toEl:Tt,originalEvent:t}),gn({rootEl:Tt,name:"sort",toEl:Tt,fromEl:wt,originalEvent:t}),gn({sortable:this,name:"sort",toEl:Tt,originalEvent:t})),Yt&&Yt.save()):jn!==Ao&&jn>=0&&(gn({sortable:this,name:"update",toEl:Tt,originalEvent:t}),gn({sortable:this,name:"sort",toEl:Tt,originalEvent:t})),Le.active&&((jn==null||jn===-1)&&(jn=Ao,ti=$s),gn({sortable:this,name:"end",toEl:Tt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Mn("nulling",this),wt=ae=Tt=He=Ri=kt=aa=oi=Ii=rr=gs=jn=ti=Ao=$s=yo=Rs=Yt=Dl=Le.dragged=Le.ghost=Le.clone=Le.active=null,Va.forEach(function(t){t.checked=!0}),Va.length=au=cu=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ae&&(this._onDragOver(t),aO(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)e=n[r],ir(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||pO(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(i,o){var s=r.children[o];ir(s,this.options.draggable,r,!1)&&(n[i]=s)},this),e&&this.captureAnimationState(),t.forEach(function(i){n[i]&&(r.removeChild(n[i]),r.appendChild(n[i]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return ir(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=ml.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&nb(n)},destroy:function(){Mn("destroy",this);var t=this.el;t[Hn]=null,rt(t,"mousedown",this._onTapStart),rt(t,"touchstart",this._onTapStart),rt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(rt(t,"dragover",this),rt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Fa.splice(Fa.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!oi){if(Mn("hideClone",this),Le.eventCanceled)return;Be(kt,"display","none"),this.options.removeCloneOnHide&&kt.parentNode&&kt.parentNode.removeChild(kt),oi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(oi){if(Mn("showClone",this),Le.eventCanceled)return;ae.parentNode==wt&&!this.options.group.revertClone?wt.insertBefore(kt,ae):Ri?wt.insertBefore(kt,Ri):wt.appendChild(kt),this.options.group.revertClone&&this.animate(ae,kt),Be(kt,"display",""),oi=!1}}};function aO(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Bl(t,e,n,r,i,o,s,l){var a,c=t[Hn],u=c.options.onMove,f;return window.CustomEvent&&!qr&&!pl?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=r,a.related=i||e,a.relatedRect=o||Pt(e),a.willInsertAfter=l,a.originalEvent=s,t.dispatchEvent(a),u&&(f=u.call(c,a,s)),f}function fu(t){t.draggable=!1}function cO(){Sf=!1}function uO(t,e,n){var r=Pt(qo(n.el,0,n.options,!0)),i=Qy(n.el,n.options,He),o=10;return e?t.clientX<i.left-o||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-o||t.clientY<r.bottom&&t.clientX<r.left}function fO(t,e,n){var r=Pt(Cd(n.el,n.options.draggable)),i=Qy(n.el,n.options,He),o=10;return e?t.clientX>i.right+o||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+o||t.clientX>r.right&&t.clientY>r.top}function dO(t,e,n,r,i,o,s,l){var a=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,f=r?n.bottom:n.right,h=!1;if(!s){if(l&&ca<c*i){if(!Bs&&(Rs===1?a>u+c*o/2:a<f-c*o/2)&&(Bs=!0),Bs)h=!0;else if(Rs===1?a<u+ca:a>f-ca)return-Rs}else if(a>u+c*(1-i)/2&&a<f-c*(1-i)/2)return hO(e)}return h=h||s,h&&(a<u+c*o/2||a>f-c*o/2)?a>u+c/2?1:-1:0}function hO(t){return qn(ae)<qn(t)?1:-1}function pO(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function mO(t){Va.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Va.push(r)}}function ua(t){return setTimeout(t,0)}function xf(t){return clearTimeout(t)}wc&&ot(document,"touchmove",function(t){(Le.active||ko)&&t.cancelable&&t.preventDefault()});Le.utils={on:ot,off:rt,css:Be,find:Yy,is:function(t,e){return!!ir(t,e,t,!1)},extend:XC,throttle:Gy,closest:ir,toggleClass:Fn,clone:Zy,index:qn,nextTick:ua,cancelNextTick:xf,detectDirection:tb,getChild:qo};Le.get=function(t){return t[Hn]};Le.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Le.utils=xr(xr({},Le.utils),r.utils)),ml.mount(r)})};Le.create=function(t,e){return new Le(t,e)};Le.version=JC;var Nt=[],ys,kf,Cf=!1,du,hu,ja,bs;function gO(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?ot(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ot(document,"pointermove",this._handleFallbackAutoScroll):n.touches?ot(document,"touchmove",this._handleFallbackAutoScroll):ot(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?rt(document,"dragover",this._handleAutoScroll):(rt(document,"pointermove",this._handleFallbackAutoScroll),rt(document,"touchmove",this._handleFallbackAutoScroll),rt(document,"mousemove",this._handleFallbackAutoScroll)),_p(),fa(),ZC()},nulling:function(){ja=kf=ys=Cf=bs=du=hu=null,Nt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(i,o);if(ja=e,n||this.options.forceAutoScrollFallback||pl||qr||Is){pu(e,this.options,s,n);var l=li(s,!0);Cf&&(!bs||i!==du||o!==hu)&&(bs&&_p(),bs=setInterval(function(){var a=li(document.elementFromPoint(i,o),!0);a!==l&&(l=a,fa()),pu(e,r.options,a,n)},10),du=i,hu=o)}else{if(!this.options.bubbleScroll||li(s,!0)===wr()){fa();return}pu(e,this.options,li(s,!1),!1)}}},Ur(t,{pluginName:"scroll",initializeByDefault:!0})}function fa(){Nt.forEach(function(t){clearInterval(t.pid)}),Nt=[]}function _p(){clearInterval(bs)}var pu=Gy(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,a=wr(),c=!1,u;kf!==n&&(kf=n,fa(),ys=e.scroll,u=e.scrollFn,ys===!0&&(ys=li(n,!0)));var f=0,h=ys;do{var m=h,g=Pt(m),b=g.top,x=g.bottom,O=g.left,A=g.right,N=g.width,$=g.height,I=void 0,L=void 0,V=m.scrollWidth,K=m.scrollHeight,E=Be(m),S=m.scrollLeft,F=m.scrollTop;m===a?(I=N<V&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),L=$<K&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(I=N<V&&(E.overflowX==="auto"||E.overflowX==="scroll"),L=$<K&&(E.overflowY==="auto"||E.overflowY==="scroll"));var C=I&&(Math.abs(A-i)<=s&&S+N<V)-(Math.abs(O-i)<=s&&!!S),ce=L&&(Math.abs(x-o)<=s&&F+$<K)-(Math.abs(b-o)<=s&&!!F);if(!Nt[f])for(var Z=0;Z<=f;Z++)Nt[Z]||(Nt[Z]={});(Nt[f].vx!=C||Nt[f].vy!=ce||Nt[f].el!==m)&&(Nt[f].el=m,Nt[f].vx=C,Nt[f].vy=ce,clearInterval(Nt[f].pid),(C!=0||ce!=0)&&(c=!0,Nt[f].pid=setInterval((function(){r&&this.layer===0&&Le.active._onTouchMove(ja);var Se=Nt[this.layer].vy?Nt[this.layer].vy*l:0,ge=Nt[this.layer].vx?Nt[this.layer].vx*l:0;typeof u=="function"&&u.call(Le.dragged.parentNode[Hn],ge,Se,t,ja,Nt[this.layer].el)!=="continue"||Xy(Nt[this.layer].el,ge,Se)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==a&&(h=li(h,!1)));Cf=c}},30),ob=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=n||i;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);l(),a&&!a.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Od(){}Od.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=qo(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ob};Ur(Od,{pluginName:"revertOnSpill"});function Ed(){}Ed.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:ob};Ur(Ed,{pluginName:"removeOnSpill"});Le.mount(new gO);Le.mount(Ed,Od);function yO(t){return t==null?t:JSON.parse(JSON.stringify(t))}function bO(t){mc()&&sd(t)}function vO(t){mc()?Ag(t):fc(t)}let sb=null,lb=null;function Mp(t=null,e=null){sb=t,lb=e}function wO(){return{data:sb,clonedData:lb}}const Np=Symbol("cloneElement");function SO(...t){var e,n;const r=(e=mc())==null?void 0:e.proxy;let i=null;const o=t[0];let[,s,l]=t;Array.isArray(yn(s))||(l=s,s=null);let a=null;const{immediate:c=!0,clone:u=yO,customUpdate:f}=(n=yn(l))!=null?n:{};function h(K){var E;const{from:S,oldIndex:F,item:C}=K;i=Array.from(S.childNodes);const ce=yn((E=yn(s))==null?void 0:E[F]),Z=u(ce);Mp(ce,Z),C[Np]=Z}function m(K){const E=K.item[Np];if(!BC(E)){if(ou(K.item),Dt(s)){const S=[...yn(s)];s.value=bp(S,K.newDraggableIndex,E);return}bp(yn(s),K.newDraggableIndex,E)}}function g(K){const{from:E,item:S,oldIndex:F,oldDraggableIndex:C,pullMode:ce,clone:Z}=K;if(vp(E,S,F),ce==="clone"){ou(Z);return}if(Dt(s)){const Se=[...yn(s)];s.value=yp(Se,C);return}yp(yn(s),C)}function b(K){if(f){f(K);return}const{from:E,item:S,oldIndex:F,oldDraggableIndex:C,newDraggableIndex:ce}=K;if(ou(S),vp(E,S,F),Dt(s)){const Z=[...yn(s)];s.value=gp(Z,C,ce);return}gp(yn(s),C,ce)}function x(K){const{newIndex:E,oldIndex:S,from:F,to:C}=K;let ce=null;const Z=E===S&&F===C;try{if(Z){let Se=null;i==null||i.some((ge,Q)=>{if(Se&&(i==null?void 0:i.length)!==C.childNodes.length)return F.insertBefore(Se,ge.nextSibling),!0;const Te=C.childNodes[Q];Se=C==null?void 0:C.replaceChild(ge,Te)})}}catch(Se){ce=Se}finally{i=null}fc(()=>{if(Mp(),ce)throw ce})}const O={onUpdate:b,onStart:h,onAdd:m,onRemove:g,onEnd:x};function A(K){const E=yn(o);return K||(K=LC(E)?FC(E,r==null?void 0:r.$el):E),K&&!HC(K)&&(K=K.$el),K||DC("Root element not found"),K}function N(){var K;const E=(K=yn(l))!=null?K:{},{immediate:S,clone:F}=E,C=Ky(E,["immediate","clone"]);return wp(C,(ce,Z)=>{zC(ce)&&(C[ce]=(Se,...ge)=>{const Q=wO();return KC(Se,Q),Z(Se,...ge)})}),jC(s===null?{}:O,C)}const $=K=>{K=A(K),a&&I.destroy(),a=new Le(K,N())};Jl(()=>l,()=>{a&&wp(N(),(K,E)=>{a==null||a.option(K,E)})},{deep:!0});const I={option:(K,E)=>a==null?void 0:a.option(K,E),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...K)=>a==null?void 0:a.closest(...K)},L=()=>I==null?void 0:I.option("disabled",!0),V=()=>I==null?void 0:I.option("disabled",!1);return vO(()=>{c&&$()}),bO(I.destroy),To({start:$,pause:L,resume:V},I)}const Of=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],xO=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Of.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],kO=Cg({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:xO,emits:["update:modelValue",...Of],setup(t,{slots:e,emit:n,expose:r,attrs:i}){const o=Of.reduce((u,f)=>{const h=`on${f.replace(/^\S/,m=>m.toUpperCase())}`;return u[h]=(...m)=>n(f,...m),u},{}),s=Uu(()=>{const u=Rw(t),{modelValue:f}=u,h=Ky(u,["modelValue"]),m=Object.entries(h).reduce((g,[b,x])=>{const O=yn(x);return O!==void 0&&(g[b]=O),g},{});return To(To({},o),RC(To(To({},i),m)))}),l=Uu({get:()=>t.modelValue,set:u=>n("update:modelValue",u)}),a=rd(),c=cc(SO(t.target||a,l,s));return r(c),()=>{var u;return Qg(t.tag||"div",{ref:a},(u=e==null?void 0:e.default)==null?void 0:u.call(e,c))}}}),CO={props:["myuuid","formmode"],data(){return{myfile:null,editme:!1}},async mounted(){this.formmode&&(this.editme=!0),this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.myuuid)))},methods:{update(){this.myfile.title==""&&(this.myfile.title="...."),console.log(this.myfile),this.$root.UpdateRecord("Files",this.myuuid,this.myfile),this.formmode||(this.editme=!1)}}},OO={key:0};function EO(t,e,n,r,i,o){return i.myfile?(xe(),ze("span",OO,[i.editme?it("",!0):(xe(),ze("div",{key:0,onDblclick:e[0]||(e[0]=s=>i.editme=!0)},Rr(i.myfile.title),33)),i.editme?Ro((xe(),ze("input",{key:1,type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>i.myfile.title=s),placeholder:"......",onBlur:e[2]||(e[2]=s=>o.update())},null,544)),[[Lo,i.myfile.title]]):it("",!0)])):it("",!0)}const ab=Ot(CO,[["render",EO]]),TO={props:{modelValue:{required:!0,type:Array}},components:{VueDraggable:kO,FileName:ab},computed:{list:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{handleChange(t){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.$root.tools.writer.mybook)}},name:"DocStructureNode"},AO={class:"btn"},_O=["onClick"],MO={key:0,viewBox:"0 0 24 24"},NO={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},PO=["onClick"];function IO(t,e,n,r,i,o){const s=ut("FileName"),l=ut("DocStructureNode",!0),a=ut("VueDraggable");return xe(),Mt(a,{class:"dragArea",tag:"ul",modelValue:o.list,"onUpdate:modelValue":e[0]||(e[0]=c=>o.list=c),group:"files","item-key":"name",onEnd:o.handleChange},{default:kg(()=>[(xe(!0),ze(Xt,null,xa(n.modelValue,(c,u)=>(xe(),ze("li",{class:"node",key:u},[j("div",AO,[j("button",{onClick:f=>c.open=!c.open,class:"toggle"},[c.open?it("",!0):(xe(),ze("svg",MO,e[1]||(e[1]=[j("title",null,"chevron-right",-1),j("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},null,-1)]))),c.open?(xe(),ze("svg",NO,e[2]||(e[2]=[j("title",null,"chevron-down-box",-1),j("path",{d:"M19,3H5A2,2 0 0,0 3,5V19C3,20.11 3.9,21 5,21H19C20.11,21 21,20.11 21,19V5A2,2 0 0,0 19,3M12,15.71L6,9.71L7.41,8.29L12,12.88L16.59,8.29L18,9.71L12,15.71Z"},null,-1)]))):it("",!0)],8,_O),j("button",{class:di(["labelbtn",{selected:t.$root.tools.writer.selectednode===c.uuid}]),onClick:f=>t.$root.tools.writer.selectednode=c.uuid},[(xe(),Mt(s,{myuuid:c.uuid,key:c.uuid},null,8,["myuuid"]))],10,PO)]),c.open?(xe(),Mt(l,{key:0,modelValue:c.files,"onUpdate:modelValue":f=>c.files=f},null,8,["modelValue","onUpdate:modelValue"])):it("",!0)]))),128))]),_:1},8,["modelValue","onEnd"])}const DO=Ot(TO,[["render",IO],["__scopeId","data-v-b839ba46"]]),$O={name:"DocStructure",components:{DocStructureNode:DO},data(){return{bookwatch:null}},async mounted(){this.bookwatch=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected))),this.$watch("bookwatch",(t,e)=>{this.$root.tools.writer.mybook=JSON.parse(JSON.stringify(t))})},methods:{async addNode(){let t=JSON.parse(JSON.stringify(this.$root.fileTemplate));t.writerid=this.$root.tools.writer.selected,t.uuid=this.$root.uuid(),await this.$root.AddRecord("Files",t);let e={};e.open=!1,e.uuid=t.uuid,e.files=[];let n=null;this.$root.tools.writer.selectednode?n=this.findNodeByUUID(this.$root.tools.writer.selectednode,this.$root.tools.writer.mybook):n=this.$root.tools.writer.mybook,n.files.push(e),n.open=!0,this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.$root.tools.writer.mybook)},findNodeByUUID(t,e){if(e.uuid===t)return e;for(let n of e.files){let r=this.findNodeByUUID(t,n);if(r)return r}return null}}},RO={key:0,class:"documentStructure"},BO={class:"lhstools"},LO={class:"docsettings"},FO={style:{padding:"10px"}},VO={class:"lhsscrollcontainer"};function jO(t,e,n,r,i,o){const s=ut("DocStructureNode");return this.$root.tools.writer.mybook?(xe(),ze("div",RO,[j("div",BO,[j("button",{onClick:e[0]||(e[0]=(...l)=>o.addNode&&o.addNode(...l)),class:"btn"},e[3]||(e[3]=[j("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"Add File"),j("path",{d:"M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H13.81C13.28 21.09 13 20.05 13 19C13 15.69 15.69 13 19 13C19.34 13 19.67 13.03 20 13.08V8L14 2M13 9V3.5L18.5 9H13M23 20H20V23H18V20H15V18H18V15H20V18H23V20Z"})],-1),or(" Add ")]))]),j("div",null,[j("div",LO,[j("button",{class:"btn",onClick:e[1]||(e[1]=l=>t.$root.tools.writer.selectednode=null)},e[4]||(e[4]=[j("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"book-open-page-variant-outline"),j("path",{d:"M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z"})],-1),or(" Document Settings ")]))]),j("div",FO,[j("div",VO,[this.$root.tools.writer.mybook.files.length?(xe(),Mt(s,{key:0,modelValue:this.$root.tools.writer.mybook.files,"onUpdate:modelValue":e[2]||(e[2]=l=>this.$root.tools.writer.mybook.files=l)},null,8,["modelValue"])):it("",!0)])])])])):it("",!0)}const HO=Ot($O,[["render",jO],["__scopeId","data-v-24c67ba8"]]);function Gt(t){this.content=t}Gt.prototype={constructor:Gt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Gt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Gt(n)},addToStart:function(t,e){return new Gt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Gt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Gt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Gt.from(t),t.size?new Gt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Gt.from(t),t.size?new Gt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Gt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Gt.from=function(t){if(t instanceof Gt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Gt(e)};function cb(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=cb(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function ub(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=ub(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class te{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new te(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new te(r,i)}cutByIndex(e,n){return e==n?te.empty:e==0&&n==this.content.length?this:new te(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new te(i,o)}addToStart(e){return new te([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new te(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return cb(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return ub(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ll(0,e);if(e==this.size)return Ll(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Ll(r+1,s):Ll(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return te.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new te(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return te.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new te(n||e,r)}static from(e){if(!e)return te.empty;if(e instanceof te)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new te([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}te.empty=new te([],0);const mu={index:0,offset:0};function Ll(t,e){return mu.index=t,mu.offset=e,mu}function Ha(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ha(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ha(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let yt=class Ef{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ha(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ef.none;if(e instanceof Ef)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};yt.none=[];class za extends Error{}class be{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=db(this.content,e+this.openStart,n);return r&&new be(r,this.openStart,this.openEnd)}removeBetween(e,n){return new be(fb(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return be.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new be(te.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new be(e,r,i)}}be.empty=new be(te.empty,0,0);function fb(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(fb(o.content,e-i-1,n-i-1)))}function db(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=db(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function zO(t,e,n){if(n.openStart>t.depth)throw new za("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new za("Inconsistent open depths");return hb(t,e,n,0)}function hb(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=hb(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return qi(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=KO(n,t);return qi(o,mb(t,s,l,e,r))}else return qi(o,Ka(t,e,r))}function pb(t,e){if(!e.type.compatibleContent(t.type))throw new za("Cannot join "+e.type.name+" onto "+t.type.name)}function Tf(t,e,n){let r=t.node(n);return pb(r,e.node(n)),r}function Wi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ls(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Wi(t.nodeAfter,r),o++));for(let l=o;l<s;l++)Wi(i.child(l),r);e&&e.depth==n&&e.textOffset&&Wi(e.nodeBefore,r)}function qi(t,e){return t.type.checkContent(e),t.copy(e)}function mb(t,e,n,r,i){let o=t.depth>i&&Tf(t,e,i+1),s=r.depth>i&&Tf(n,r,i+1),l=[];return Ls(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(pb(o,s),Wi(qi(o,mb(t,e,n,r,i+1)),l)):(o&&Wi(qi(o,Ka(t,e,i+1)),l),Ls(e,n,i,l),s&&Wi(qi(s,Ka(n,r,i+1)),l)),Ls(r,null,i,l),new te(l)}function Ka(t,e,n){let r=[];if(Ls(null,t,n,r),t.depth>n){let i=Tf(t,e,n+1);Wi(qi(i,Ka(t,e,n+1)),r)}return Ls(e,null,n,r),new te(r)}function KO(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(te.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class el{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return yt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ua(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(r.push(s,l,i+a),!c||(s=s.child(l),s.isText))break;o=c-1,i+=a+1}return new el(n,r,o)}static resolveCached(e,n){let r=Pp.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else Pp.set(e,r=new UO);let i=r.elts[r.i]=el.resolve(e,n);return r.i=(r.i+1)%WO,i}}class UO{constructor(){this.elts=[],this.i=0}}const WO=12,Pp=new WeakMap;class Ua{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qO=Object.create(null);let hi=class Af{constructor(e,n,r,i=yt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||te.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ha(this.attrs,n||e.defaultAttrs||qO)&&yt.sameSet(this.marks,r||yt.none)}copy(e=null){return e==this.content?this:new Af(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Af(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return be.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),c=i.node(s).content.cut(i.pos-l,o.pos-l);return new be(c,i.depth-s,o.depth-s)}replace(e,n,r){return zO(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return el.resolveCached(this,e)}resolveNoCache(e){return el.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),gb(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=te.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=yt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!yt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=te.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};hi.prototype.text=void 0;class Wa extends hi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gb(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Wa(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Wa(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function gb(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class to{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new JO(e,n);if(r.next==null)return to.empty;let i=yb(r);r.next&&r.err("Unexpected trailing text");let o=tE(eE(i));return nE(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return te.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:f}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let h=o(f,l.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}to.empty=new to(!0);class JO{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function yb(t){let e=[];do e.push(YO(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function YO(t){let e=[];do e.push(GO(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function GO(t){let e=QO(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=XO(t,e);else break;return e}function Ip(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function XO(t,e){let n=Ip(t),r=n;return t.eat(",")&&(t.next!="}"?r=Ip(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ZO(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function QO(t){if(t.eat("(")){let e=yb(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ZO(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function eE(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;i(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,a),u),a=u}if(s.max==-1)i(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=n();r(a,u),i(o(s.expr,a),u),a=u}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function bb(t,e){return e-t}function Dp(t,e){let n=[];return r(e),n.sort(bb);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function tE(t){let e=Object.create(null);return n(Dp(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Dp(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new to(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(bb);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function nE(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function vb(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function wb(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Sb(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function xb(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new iE(t,r,e[r]);return n}let $p=class kb{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=xb(e,r.attrs),this.defaultAttrs=vb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==to.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:wb(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new hi(this,this.computeAttrs(e),te.from(n),yt.setFrom(r))}createChecked(e=null,n,r){return n=te.from(n),this.checkContent(n),new hi(this,this.computeAttrs(e),n,yt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=te.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(te.empty,!0);return o?new hi(this,e,n.append(o),yt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Sb(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:yt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new kb(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function rE(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class iE{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?rE(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Sc{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=xb(e,i.attrs),this.excluded=null;let o=vb(this.attrs);this.instance=o?new yt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new yt(this,wb(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Sc(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Sb(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Cb{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Gt.from(e.nodes),n.marks=Gt.from(e.marks||{}),this.nodes=$p.compile(this.spec.nodes,this),this.marks=Sc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=to.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Rp(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Rp(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof $p){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Wa(r,r.defaultAttrs,e,yt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return hi.fromJSON(this,e)}markFromJSON(e){return yt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Rp(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function oE(t){return t.tag!=null}function sE(t){return t.style!=null}let Fs=class _f{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(oE(i))this.tags.push(i);else if(sE(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Lp(this,n,!1);return r.addAll(e,yt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Lp(this,n,!0);return r.addAll(e,yt.none,n.from,n.to),be.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(cE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Fp(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Fp(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new _f(e,_f.schemaRules(e)))}};const Ob={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Eb={ol:!0,ul:!0},tl=1,Mf=2,da=4;function Bp(t,e,n){return e!=null?(e?tl:0)|(e==="full"?Mf:0):t&&t.whitespace=="pre"?tl|Mf:n&-5}class Fl{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=yt.none,this.match=o||(s&da?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(te.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&tl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=te.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(te.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ob.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Lp{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=Bp(null,n.preserveWhitespace,0)|(r?da:0);i?o=new Fl(i.type,i.attrs,yt.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Fl(null,null,yt.none,!0,null,s):o=new Fl(e.schema.topNodeType,null,yt.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Mf?"full":this.localPreserveWS||(i.options&tl)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;Eb.hasOwnProperty(s)&&this.parser.normalizeLists&&aE(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:lE.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(Ob.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=a&&a.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=yt.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Vp(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Bp(e,o,s.options);s.options&da&&s.content.length==0&&(l|=da);let a=yt.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Vp(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new Fl(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=tl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function aE(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Eb.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function cE(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Fp(t){let e={};for(let n in t)e[n]=t[n];return e}function Vp(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class so{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=gu(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(o[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ha(gu(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ha(gu(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ha(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new so(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=jp(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return jp(e.marks)}}function jp(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function gu(t){return t.document||window.document}const Hp=new WeakMap;function uE(t){let e=Hp.get(t);return e===void 0&&Hp.set(t,e=fE(t)),e}function fE(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ha(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=uE(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let h=f.indexOf(" ");h>0?a.setAttributeNS(f.slice(0,h),f.slice(h+1),c[f]):a.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:m,contentDOM:g}=ha(t,h,n,r);if(a.appendChild(m),g){if(l)throw new RangeError("Multiple content holes");l=g}}}return{dom:a,contentDOM:l}}const Tb=65535,Ab=Math.pow(2,16);function dE(t,e){return t+e*Ab}function zp(t){return t&Tb}function hE(t){return(t-(t&Tb))/Ab}const _b=1,Mb=2,pa=4,Nb=8;class Nf{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Nb)>0}get deletedBefore(){return(this.delInfo&(_b|pa))>0}get deletedAfter(){return(this.delInfo&(Mb|pa))>0}get deletedAcross(){return(this.delInfo&pa)>0}}class zn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&zn.empty)return zn.empty}recover(e){let n=0,r=zp(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+hE(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+o],u=this.ranges[l+s],f=a+c;if(e<=f){let h=c?e==a?-1:e==f?1:n:n,m=a+i+(h<0?0:u);if(r)return m;let g=e==(n<0?a:f)?null:dE(l/3,e-a),b=e==a?Mb:e==f?_b:pa;return(n<0?e!=a:e!=f)&&(b|=Nb),new Nf(m,b,g)}i+=u-c}return r?e+i:new Nf(e+i,0,null)}touches(e,n){let r=0,i=zp(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),o+=u-c}}invert(){return new zn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?zn.empty:new zn(e<0?[0,-e,0]:[0,0,e])}}zn.empty=new zn([]);class nl{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new nl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new nl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Nf(e,i,null)}}const yu=Object.create(null);class fn{getMap(){return zn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=yu[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in yu)throw new RangeError("Duplicate use of step JSON ID "+e);return yu[e]=n,n.prototype.jsonID=e,n}}class It{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new It(e,null)}static fail(e){return new It(null,e)}static fromReplace(e,n,r,i){try{return It.ok(e.replace(n,r,i))}catch(o){if(o instanceof za)return It.fail(o.message);throw o}}}function Td(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Td(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return te.fromArray(r)}class ai extends fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new be(Td(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return It.fromReplace(e,this.from,this.to,o)}invert(){return new br(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ai(n.pos,r.pos,this.mark)}merge(e){return e instanceof ai&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ai(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ai(n.from,n.to,e.markFromJSON(n.mark))}}fn.jsonID("addMark",ai);class br extends fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new be(Td(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return It.fromReplace(e,this.from,this.to,r)}invert(){return new ai(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new br(n.pos,r.pos,this.mark)}merge(e){return e instanceof br&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new br(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new br(n.from,n.to,e.markFromJSON(n.mark))}}fn.jsonID("removeMark",br);class ci extends fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return It.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return It.fromReplace(e,this.pos,this.pos+1,new be(te.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ci(this.pos,n.marks[i]);return new ci(this.pos,this.mark)}}return new Jo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ci(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ci(n.pos,e.markFromJSON(n.mark))}}fn.jsonID("addNodeMark",ci);class Jo extends fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return It.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return It.fromReplace(e,this.pos,this.pos+1,new be(te.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ci(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Jo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Jo(n.pos,e.markFromJSON(n.mark))}}fn.jsonID("removeNodeMark",Jo);class Ht extends fn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Pf(e,this.from,this.to)?It.fail("Structure replace would overwrite content"):It.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ht(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ht(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ht)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?be.empty:new be(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ht(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?be.empty:new be(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ht(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ht(n.from,n.to,be.fromJSON(e,n.slice),!!n.structure)}}fn.jsonID("replace",Ht);class zt extends fn{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Pf(e,this.from,this.gapFrom)||Pf(e,this.gapTo,this.to)))return It.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return It.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?It.fromReplace(e,this.from,this.to,r):It.fail("Content does not fit in gap")}getMap(){return new zn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new zt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new zt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zt(n.from,n.to,n.gapFrom,n.gapTo,be.fromJSON(e,n.slice),n.insert,!!n.structure)}}fn.jsonID("replaceAround",zt);function Pf(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function pE(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),m=Math.min(c+a.nodeSize,n),g=r.addToSet(f);for(let b=0;b<f.length;b++)f[b].isInSet(g)||(s&&s.to==h&&s.mark.eq(f[b])?s.to=m:i.push(s=new br(h,m,f[b])));l&&l.to==h?l.to=m:o.push(l=new ai(h,m,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function mE(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Sc){let c=s.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let u=0;u<a.length;u++){let f=a[u],h;for(let m=0;m<i.length;m++){let g=i[m];g.step==o-1&&f.eq(i[m].style)&&(h=g)}h?(h.to=c,h.step=o):i.push({style:f,from:Math.max(l,e),to:c,step:o})}}}),i.forEach(s=>t.step(new br(s.from,s.to,s.style)))}function Ad(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let c=o.child(a),u=l+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new Ht(l,u,be.empty));else{r=f;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new br(l,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(c.text);)g||(g=new be(te.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ht(l+h.index,l+h.index+h[0].length,g))}}l=u}if(!r.validEnd){let a=r.fillBefore(te.empty,!0);t.replace(l,l,new be(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function gE(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function rs(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!gE(i,o,s))break}return null}function yE(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,c=l,u=te.empty,f=0;for(let g=o,b=!1;g>n;g--)b||r.index(g)>0?(b=!0,u=te.from(r.node(g).copy(u)),f++):a--;let h=te.empty,m=0;for(let g=o,b=!1;g>n;g--)b||i.after(g+1)<i.end(g)?(b=!0,h=te.from(i.node(g).copy(h)),m++):c++;t.step(new zt(a,c,s,l,new be(u.append(h),f,m),u.size-f,!0))}function _d(t,e,n=null,r=t){let i=bE(t,e),o=i&&vE(r,e);return o?i.map(Kp).concat({type:e,attrs:n}).concat(o.map(Kp)):null}function Kp(t){return{type:t,attrs:null}}function bE(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function vE(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function wE(t,e,n){let r=te.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=te.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new zt(i,o,i,o,new be(r,0,0),n.length,!0))}function SE(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&xE(t.doc,t.mapping.slice(o).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?c=!1:!m&&g&&(c=!0)}c===!1&&Ib(t,s,l,o),Ad(t,t.mapping.slice(o).map(l,1),r,void 0,c===null);let u=t.mapping.slice(o),f=u.map(l,1),h=u.map(l+s.nodeSize,1);return t.step(new zt(f,h,f+1,h-1,new be(te.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&Pb(t,s,l,o),!1}})}function Pb(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Ib(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function xE(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function kE(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new zt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new be(te.from(s),0,0),1,!0))}function Hr(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let f=i.node(c),h=i.index(c);if(f.type.spec.isolating)return!1;let m=f.content.cutByIndex(h,f.childCount),g=r&&r[u+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let b=r&&r[u]||f;if(!f.canReplace(h+1,f.childCount)||!b.type.validContent(m))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function CE(t,e,n=1,r){let i=t.doc.resolve(e),o=te.empty,s=te.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){o=te.from(i.node(l).copy(o));let u=r&&r[c];s=te.from(u?u.type.create(u.attrs,s):i.node(l).copy(s))}t.step(new Ht(e,e,new be(o.append(s),n,n),!0))}function Ei(t,e){let n=t.resolve(e),r=n.index();return Db(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function OE(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function Db(t,e){return!!(t&&e&&!t.isLeaf&&OE(t,e))}function xc(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&Db(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function EE(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);u&&!f?r=!1:!u&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Ib(t,u.node(),u.before(),l)}s.inlineContent&&Ad(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Ht(c,a.map(e+n,-1),be.empty,!0)),r===!0){let u=t.doc.resolve(c);Pb(t,u.node(),u.before(),t.steps.length)}return t}function TE(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function $b(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(a,a,f[0])}if(u)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function kc(t,e,n=e,r=be.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Rb(i,o,r)?new Ht(e,n,r):new AE(i,o,r).fit()}function Rb(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class AE{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=te.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=te.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new be(o,s,l);return e>-1?new zt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Ht(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=bu(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(te.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=bu(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new be(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=bu(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new be(vs(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new be(vs(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let b=0;b<o.length;b++)this.openFrontierNode(o[b]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,u=[],{match:f,type:h}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)u.push(i.child(b));f=f.matchFragment(i)}let m=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let b=l.child(c),x=f.matchType(b.type);if(!x)break;c++,(c>1||a==0||b.content.size)&&(f=x,u.push(Bb(b.mark(h.allowedMarks(b.marks)),c==1?a:0,c==l.childCount?m:-1)))}let g=c==l.childCount;g||(m=-1),this.placed=ws(this.placed,n,te.from(u)),this.frontier[n].match=f,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,x=l;b<m;b++){let O=x.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),x=O.content}this.unplaced=g?e==0?be.empty:new be(vs(s.content,e-1,1),e-1,m<0?s.openEnd:e-1):new be(vs(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!vu(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=vu(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=vu(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ws(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ws(this.placed,this.depth,te.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(te.empty,!0);n.childCount&&(this.placed=ws(this.placed,this.frontier.length,n))}}function vs(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(vs(t.firstChild.content,e-1,n)))}function ws(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ws(t.lastChild.content,e-1,n)))}function bu(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Bb(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Bb(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(te.empty,!0)))),t.copy(r)}function vu(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!_E(n,o.content,s)?l:null}function _E(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function ME(t){return t.spec.defining||t.spec.definingForContent}function NE(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(Rb(i,o,r))return t.step(new Ht(e,n,r));let s=Fb(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let h=i.depth,m=i.pos-1;h>0;h--,m--){let g=i.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;s.indexOf(h)>-1?l=h:i.before(h)==m&&s.splice(1,0,-h)}let a=s.indexOf(l),c=[],u=r.openStart;for(let h=r.content,m=0;;m++){let g=h.firstChild;if(c.push(g),m==r.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let m=c[h],g=ME(m.type);if(g&&!m.sameMarkup(i.node(Math.abs(l)-1)))u=h;else if(g||!m.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let m=(h+u+1)%(r.openStart+1),g=c[m];if(g)for(let b=0;b<s.length;b++){let x=s[(b+a)%s.length],O=!0;x<0&&(O=!1,x=-x);let A=i.node(x-1),N=i.index(x-1);if(A.canReplaceWith(N,N,g.type,g.marks))return t.replace(i.before(x),O?o.after(x):n,new be(Lb(r.content,0,r.openStart,m),m,r.openEnd))}}let f=t.steps.length;for(let h=s.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>f));h--){let m=s[h];m<0||(e=i.before(m),n=o.after(m))}}function Lb(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Lb(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(te.empty,!0))}return t}function PE(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=TE(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new be(te.from(r),0,0))}function IE(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=Fb(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function Fb(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class zo extends fn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return It.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return It.fromReplace(e,this.pos,this.pos+1,new be(te.from(i),0,n.isLeaf?0:1))}getMap(){return zn.empty}invert(e){return new zo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new zo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new zo(n.pos,n.attr,n.value)}}fn.jsonID("attr",zo);class rl extends fn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return It.ok(r)}getMap(){return zn.empty}invert(e){return new rl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new rl(n.attr,n.value)}}fn.jsonID("docAttr",rl);let Yo=class extends Error{};Yo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Yo.prototype=Object.create(Error.prototype);Yo.prototype.constructor=Yo;Yo.prototype.name="TransformError";class DE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new nl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Yo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=be.empty){let i=kc(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new be(te.from(r),0,0))}delete(e,n){return this.replace(e,n,be.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return NE(this,e,n,r),this}replaceRangeWith(e,n,r){return PE(this,e,n,r),this}deleteRange(e,n){return IE(this,e,n),this}lift(e,n){return yE(this,e,n),this}join(e,n=1){return EE(this,e,n),this}wrap(e,n){return wE(this,e,n),this}setBlockType(e,n=e,r,i=null){return SE(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return kE(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new zo(e,n,r)),this}setDocAttribute(e,n){return this.step(new rl(e,n)),this}addNodeMark(e,n){return this.step(new ci(e,n)),this}removeNodeMark(e,n){if(!(n instanceof yt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Jo(e,n)),this}split(e,n=1,r){return CE(this,e,n,r),this}addMark(e,n,r){return pE(this,e,n,r),this}removeMark(e,n,r){return mE(this,e,n,r),this}clearIncompatible(e,n,r){return Ad(this,e,n,r),this}}const wu=Object.create(null);class qe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new $E(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=be.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(o);e.replaceRange(u.map(a.pos),u.map(c.pos),l?be.empty:n),l==0&&qp(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),c=a.map(s.pos),u=a.map(l.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),qp(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new je(e):Co(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Co(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Co(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Un(e.node(0))}static atStart(e){return Co(e,e,0,0,1)||new Un(e)}static atEnd(e){return Co(e,e,e.content.size,e.childCount,-1)||new Un(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=wu[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in wu)throw new RangeError("Duplicate use of selection JSON ID "+e);return wu[e]=n,n.prototype.jsonID=e,n}getBookmark(){return je.between(this.$anchor,this.$head).getBookmark()}}qe.prototype.visible=!0;class $E{constructor(e,n){this.$from=e,this.$to=n}}let Up=!1;function Wp(t){!Up&&!t.parent.inlineContent&&(Up=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class je extends qe{constructor(e,n=e){Wp(e),Wp(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return qe.near(r);let i=e.resolve(n.map(this.anchor));return new je(i.parent.inlineContent?i:r,r)}replace(e,n=be.empty){if(super.replace(e,n),n==be.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Cc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new je(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=qe.findFrom(n,r,!0)||qe.findFrom(n,-r,!0);if(o)n=o.$head;else return qe.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(qe.findFrom(e,-r,!0)||qe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new je(e,n)}}qe.jsonID("text",je);class Cc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Cc(e.map(this.anchor),e.map(this.head))}resolve(e){return je.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ie extends qe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?qe.near(o):new Ie(o)}content(){return new be(te.from(this.node),0,0)}eq(e){return e instanceof Ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Md(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ie(e.resolve(n.anchor))}static create(e,n){return new Ie(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ie.prototype.visible=!1;qe.jsonID("node",Ie);class Md{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Cc(r,r):new Md(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ie.isSelectable(r)?new Ie(n):qe.near(n)}}class Un extends qe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=be.empty){if(n==be.empty){e.delete(0,e.doc.content.size);let r=qe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Un(e)}map(e){return new Un(e)}eq(e){return e instanceof Un}getBookmark(){return RE}}qe.jsonID("all",Un);const RE={map(){return this},resolve(t){return new Un(t)}};function Co(t,e,n,r,i,o=!1){if(e.inlineContent)return je.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&Ie.isSelectable(l))return Ie.create(t,n-(i<0?l.nodeSize:0))}else{let a=Co(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function qp(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ht||i instanceof zt))return;let o=t.mapping.maps[r],s;o.forEach((l,a,c,u)=>{s==null&&(s=u)}),t.setSelection(qe.near(t.doc.resolve(s),n))}const Jp=1,Yp=2,Gp=4;class BE extends DE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Jp)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Jp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Yp,this}ensureMarks(e){return yt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Yp)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||yt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(qe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Gp,this}get scrolledIntoView(){return(this.updated&Gp)>0}}function Xp(t,e){return!e||!t?t:t.bind(e)}class Ss{constructor(e,n,r){this.name=e,this.init=Xp(n.init,r),this.apply=Xp(n.apply,r)}}const LE=[new Ss("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ss("selection",{init(t,e){return t.selection||qe.atStart(e.doc)},apply(t){return t.selection}}),new Ss("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ss("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Su{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=LE.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ss(r.key,r.spec.state,r))})}}class _o{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,c=i?i[s].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new _o(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new BE(this)}static create(e){let n=new Su(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new _o(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Su(this.schema,e.plugins),r=n.fields,i=new _o(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Su(e.schema,e.plugins),o=new _o(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=hi.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=qe.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function Vb(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Vb(i,e,{})),n[r]=i}return n}class Dn{constructor(e){this.spec=e,this.props={},e.props&&Vb(e.props,this,this.props),this.key=e.key?e.key.key:jb("plugin")}getState(e){return e[this.key]}}const xu=Object.create(null);function jb(t){return t in xu?t+"$"+ ++xu[t]:(xu[t]=0,t+"$")}class Er{constructor(e="key"){this.key=jb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Zt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Go=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let If=null;const Nr=function(t,e,n){let r=If||(If=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},FE=function(){If=null},no=function(t,e,n,r){return n&&(Zp(t,e,n,r,-1)||Zp(t,e,n,r,1))},VE=/^(img|br|input|textarea|hr)$/i;function Zp(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Gn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||gl(t)||VE.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zt(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Gn(t):0}else return!1}}function Gn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function jE(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Gn(t)}else if(t.parentNode&&!gl(t))e=Zt(t),t=t.parentNode;else return null}}function HE(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!gl(t))e=Zt(t)+1,t=t.parentNode;else return null}}function zE(t,e,n){for(let r=e==0,i=e==Gn(t);r||i;){if(t==n)return!0;let o=Zt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Gn(t)}}function gl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Oc=function(t){return t.focusNode&&no(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Bi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function KE(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function UE(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Gn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Gn(r.startContainer),r.startOffset)}}}const kr=typeof navigator<"u"?navigator:null,Qp=typeof document<"u"?document:null,Ti=kr&&kr.userAgent||"",Df=/Edge\/(\d+)/.exec(Ti),Hb=/MSIE \d/.exec(Ti),$f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ti),Pn=!!(Hb||$f||Df),pi=Hb?document.documentMode:$f?+$f[1]:Df?+Df[1]:0,ur=!Pn&&/gecko\/(\d+)/i.test(Ti);ur&&+(/Firefox\/(\d+)/.exec(Ti)||[0,0])[1];const Rf=!Pn&&/Chrome\/(\d+)/.exec(Ti),cn=!!Rf,zb=Rf?+Rf[1]:0,xn=!Pn&&!!kr&&/Apple Computer/.test(kr.vendor),Xo=xn&&(/Mobile\/\w+/.test(Ti)||!!kr&&kr.maxTouchPoints>2),Yn=Xo||(kr?/Mac/.test(kr.platform):!1),WE=kr?/Win/.test(kr.platform):!1,Lr=/Android \d/.test(Ti),yl=!!Qp&&"webkitFontSmoothing"in Qp.documentElement.style,qE=yl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function JE(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function _r(t,e){return typeof t=="number"?t:t[e]}function YE(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function em(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Go(s);continue}let l=s,a=l==o.body,c=a?JE(o):YE(l),u=0,f=0;if(e.top<c.top+_r(r,"top")?f=-(c.top-e.top+_r(i,"top")):e.bottom>c.bottom-_r(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+_r(i,"top")-c.top:e.bottom-c.bottom+_r(i,"bottom")),e.left<c.left+_r(r,"left")?u=-(c.left-e.left+_r(i,"left")):e.right>c.right-_r(r,"right")&&(u=e.right-c.right+_r(i,"right")),u||f)if(a)o.defaultView.scrollBy(u,f);else{let m=l.scrollLeft,g=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let b=l.scrollLeft-m,x=l.scrollTop-g;e={left:e.left-b,top:e.top-x,right:e.right-b,bottom:e.bottom-x}}let h=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:Go(s)}}function GE(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Kb(t.dom)}}function Kb(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Go(r));return e}function XE({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Ub(n,r==0?0:r-e)}function Ub(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let bo=null;function ZE(t){if(t.setActive)return t.setActive();if(bo)return t.focus(bo);let e=Kb(t);t.focus(bo==null?{get preventScroll(){return bo={preventScroll:!0},!0}}:void 0),bo||(bo=!1,Ub(e,0))}function Wb(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,c;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Nr(u).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.top<=s&&g.bottom>=l){s=Math.max(g.bottom,s),l=Math.min(g.top,l);let b=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(b<r){n=u,r=b,i=b&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&b&&(o=f+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!a&&g.left<=e.left&&g.right>=e.left&&(a=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(o=f+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?QE(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Wb(n,i)}function QE(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=Xr(r,1);if(o.top!=o.bottom&&Nd(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Nd(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eT(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tT(t,e,n){let{node:r,offset:i}=Wb(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function nT(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function qb(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Nd(e,c))return qb(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function rT(t,e){let n=t.dom.ownerDocument,r,i=0,o=UE(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Nd(e,c)||(s=qb(t.dom,e,c),!s))return null}if(xn)for(let c=s;r&&c;c=Go(c))c.draggable&&(r=void 0);if(s=eT(s,e),r){if(ur&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;yl&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=nT(t,r,i,e))}l==null&&(l=tT(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function tm(t){return t.top<t.bottom||t.left<t.right}function Xr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(tm(r))return r}return Array.prototype.find.call(n,tm)||t.getBoundingClientRect()}const iT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Jb(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=yl||ur;if(r.nodeType==3)if(s&&(iT.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=Xr(Nr(r,i,i),n);if(ur&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Xr(Nr(r,i-1,i-1),-1);if(c.top==a.top){let u=Xr(Nr(r,i,i+1),-1);if(u.top!=a.top)return fs(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,fs(Xr(Nr(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Gn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return ku(a.getBoundingClientRect(),!1)}if(o==null&&i<Gn(r)){let a=r.childNodes[i];if(a.nodeType==1)return ku(a.getBoundingClientRect(),!0)}return ku(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Gn(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Nr(a,Gn(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return fs(Xr(c,1),!1)}if(o==null&&i<Gn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Nr(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return fs(Xr(c,-1),!0)}return fs(Xr(r.nodeType==3?Nr(r):r,-n),n>=0)}function fs(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ku(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Yb(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function oT(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Yb(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=Jb(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Nr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const sT=/[\u0590-\u08ac]/;function lT(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!sT.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:Yb(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),h=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:b}=t.domSelectionRange(),x=g&&!m.contains(g.nodeType==1?g:g.parentNode)||a==g&&c==b;try{l.collapse(u,f),a&&(a!=u||c!=f)&&l.extend&&l.extend(a,c)}catch{}return h!=null&&(l.caretBidiLevel=h),x}):r.pos==r.start()||r.pos==r.end()}let nm=null,rm=null,im=!1;function aT(t,e,n){return nm==e&&rm==n?im:(nm=e,rm=n,im=n=="up"||n=="down"?oT(t,e,n):lT(t,e,n))}const Qn=0,om=1,Vi=2,Cr=3;class bl{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Qn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Zt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof Xb){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Gb&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Zt(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Zt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(i==-1&&e<=c){let u=s+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=s;for(let f=l;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Zt(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Zt(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let m=0,g=0;m<this.children.length;m++){let b=this.children[m],x=g+b.size;if(o>g&&s<x)return b.setSelection(e-g-b.border,n-g-b.border,r,i);g=x}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((ur||xn)&&e==n){let{node:m,offset:g}=l;if(m.nodeType==3){if(f=!!(g&&m.nodeValue[g-1]==`
`),f&&g==m.nodeValue.length)for(let b=m,x;b;b=b.parentNode){if(x=b.nextSibling){x.nodeName=="BR"&&(l=a={node:x.parentNode,offset:Zt(x)+1});break}let O=b.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let b=m.childNodes[g-1];f=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(ur&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||f&&xn)&&no(l.node,l.offset,u.anchorNode,u.anchorOffset)&&no(a.node,a.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!f){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),h=!0}catch{}}if(!h){if(e>n){let g=l;l=a,a=g}let m=document.createRange();m.setEnd(a.node,a.offset),m.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Vi:om,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Cr:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Vi:Cr}r=s}this.dirty=Vi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Vi:om;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Gb extends bl{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Qn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class cT extends bl{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ro extends bl{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=so.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ro(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Cr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Cr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Qn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qn}}slice(e,n,r){let i=ro.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Lf(o,n,s,r)),e>0&&(o=Lf(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class mi extends bl{constructor(e,n,r,i,o,s,l,a,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,c=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=so.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=ev(u,r,n),c?a=new uT(e,n,r,i,u,f||null,h,c,o,s+1):n.isText?new Ec(e,n,r,i,u,h,o):new mi(e,n,r,i,u,f||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>te.empty)}return e}matchesNode(e,n,r){return this.dirty==Qn&&e.eq(this.node)&&qa(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new dT(this,s&&s.node,e);mT(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&a.syncToMarks(u==this.node.childCount?yt.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,f,h)=>{a.syncToMarks(c.marks,r,e);let m;a.findNodeMatch(c,u,f,h)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(m=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(c,u,f,m,e)||a.updateNextNode(c,u,f,e,h,i)||a.addNode(c,u,f,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Vi)&&(s&&this.protectLocalComposition(e,s),Zb(this.contentDOM,this.children,e),Xo&&gT(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof je)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=yT(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new cT(this,o,n,i);e.input.compositionNodes.push(s),this.children=Lf(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Cr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Qn}updateOuterDeco(e){if(qa(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Qb(this.dom,this.nodeDOM,Bf(this.outerDeco,this.node,n),Bf(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function sm(t,e,n,r,i){ev(r,e,t);let o=new mi(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Ec extends mi{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Cr||this.dirty!=Qn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Qn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Qn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Ec(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Cr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Xb extends bl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uT extends mi{constructor(e,n,r,i,o,s,l,a,c,u){super(e,n,r,i,o,s,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==Cr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Zb(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=lm(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof ro){let a=r?r.previousSibling:t.lastChild;Zb(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=lm(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Vs=function(t){t&&(this.nodeName=t)};Vs.prototype=Object.create(null);const ji=[new Vs];function Bf(t,e,n){if(t.length==0)return ji;let r=n?ji[0]:new Vs,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Vs(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new Vs(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Qb(t,e,n,r){if(n==ji&&r==ji)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=ji[0]),i=a}fT(i,l||ji[0],s)}return i}function fT(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function ev(t,e,n){return Qb(t,t,ji,Bf(e,n,t.nodeType!=1))}function qa(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function lm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class dT{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hT(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Qn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=ro.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Cr&&s.dom==s.contentDOM&&(s.dirty=Vi),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof mi){let c=this.preMatch.matched.get(a);if(c!=null&&c!=o)return!1;let u=a.dom,f,h=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Cr&&qa(n,a.outerDeco));if(!h&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Vi,f.updateChildren(i,s+1),f.dirty=Qn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!qa(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=mi.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=mi.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Gb(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ro;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ec)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((xn||cn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Xb(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hT(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof ro)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function pT(t,e){return t.type.side-e.type.side}function mT(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,f;for(;s<i.length&&i[s].to==o;){let x=i[s++];x.widget&&(u?(f||(f=[u])).push(x):u=x)}if(u)if(f){f.sort(pT);for(let x=0;x<f.length;x++)n(f[x],c,!!a)}else n(u,c,!!a);let h,m;if(a)m=-1,h=a,a=null;else if(c<t.childCount)m=c,h=t.child(c++);else break;for(let x=0;x<l.length;x++)l[x].to<=o&&l.splice(x--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let g=o+h.nodeSize;if(h.isText){let x=g;s<i.length&&i[s].from<x&&(x=i[s].from);for(let O=0;O<l.length;O++)l[O].to<x&&(x=l[O].to);x<g&&(a=h.cut(x-o),h=h.cut(0,x-o),g=x,m=-1)}else for(;s<i.length&&i[s].to<g;)s++;let b=h.isInline&&!h.isLeaf?l.filter(x=>!x.inline):l.slice();r(h,b,e.forChild(o,h),m),o=g}}function gT(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function yT(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;a+=c.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Lf(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,u=l+=a.size;c>=n||u<=e?o.push(a):(c<e&&o.push(a.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(a.slice(n-c,a.size,r)))}return o}function Pd(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(Oc(n)){for(a=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Ie.isSelectable(f)&&i.parent&&!(f.isInline&&zE(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Ie(s==h?l:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,h=s;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);f=Math.min(f,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(f<0)return null;[a,s]=h==t.state.selection.anchor?[h,f]:[f,h],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let f=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;c=Id(t,u,l,f)}return c}function tv(t){return t.editable?t.hasFocus():rv(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function zr(t,e=!1){let n=t.state.selection;if(nv(t,n),!!tv(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&cn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&no(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)vT(t);else{let{anchor:r,head:i}=n,o,s;am&&!(n instanceof je)&&(n.$from.parent.inlineContent||(o=cm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=cm(t,n.to))),t.docView.setSelection(r,i,t,e),am&&(o&&um(o),s&&um(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&bT(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const am=xn||cn&&zb<63;function cm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(xn&&i&&i.contentEditable=="false")return Cu(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Cu(i);if(o)return Cu(o)}}function Cu(t){return t.contentEditable="true",xn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function um(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function bT(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!tv(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function vT(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Zt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Pn&&pi<=11&&(r.disabled=!0,r.disabled=!1)}function nv(t,e){if(e instanceof Ie){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(fm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else fm(t)}function fm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Id(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||je.between(e,n,r)}function dm(t){return t.editable&&!t.hasFocus()?!1:rv(t)}function rv(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function wT(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return no(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Ff(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&qe.findFrom(o,e)}function ni(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function hm(t,e,n){let r=t.state.selection;if(r instanceof je)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return ni(t,new je(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Ff(t.state,e);return i&&i instanceof Ie?ni(t,i):!1}else if(!(Yn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?Ie.isSelectable(o)?ni(t,new Ie(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):yl?ni(t,new je(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ie&&r.node.isInline)return ni(t,new je(e>0?r.$to:r.$from));{let i=Ff(t.state,e);return i?ni(t,i):!1}}}function Ja(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function js(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function vo(t,e){return e<0?ST(t):xT(t)}function ST(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(ur&&n.nodeType==1&&r<Ja(n)&&js(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(js(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(iv(n))break;{let l=n.previousSibling;for(;l&&js(l,-1);)i=n.parentNode,o=Zt(l),l=l.previousSibling;if(l)n=l,r=Ja(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Vf(t,n,r):i&&Vf(t,i,o)}function xT(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Ja(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(js(l,1))o=n,s=++r;else break}else{if(iv(n))break;{let l=n.nextSibling;for(;l&&js(l,1);)o=l.parentNode,s=Zt(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Ja(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Vf(t,o,s)}function iv(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function kT(t,e){for(;t&&e==t.childNodes.length&&!gl(t);)e=Zt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function CT(t,e){for(;t&&!e&&!gl(t);)e=Zt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Vf(t,e,n){if(e.nodeType!=3){let o,s;(s=kT(e,n))?(e=s,n=0):(o=CT(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Oc(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&zr(t)},50)}function pm(t,e){let n=t.state.doc.resolve(e);if(!(cn||WE)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function mm(t,e,n){let r=t.state.selection;if(r instanceof je&&!r.empty||n.indexOf("s")>-1||Yn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Ff(t.state,e);if(s&&s instanceof Ie)return ni(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof Un?qe.near(s,e):qe.findFrom(s,e);return l?ni(t,l):!1}return!1}function gm(t,e){if(!(t.state.selection instanceof je))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function ym(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function OT(t){if(!xn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ym(t,r,"true"),setTimeout(()=>ym(t,r,"false"),20)}return!1}function ET(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function TT(t,e){let n=e.keyCode,r=ET(e);if(n==8||Yn&&n==72&&r=="c")return gm(t,-1)||vo(t,-1);if(n==46&&!e.shiftKey||Yn&&n==68&&r=="c")return gm(t,1)||vo(t,1);if(n==13||n==27)return!0;if(n==37||Yn&&n==66&&r=="c"){let i=n==37?pm(t,t.state.selection.from)=="ltr"?-1:1:-1;return hm(t,i,r)||vo(t,i)}else if(n==39||Yn&&n==70&&r=="c"){let i=n==39?pm(t,t.state.selection.from)=="ltr"?1:-1:1;return hm(t,i,r)||vo(t,i)}else{if(n==38||Yn&&n==80&&r=="c")return mm(t,-1,r)||vo(t,-1);if(n==40||Yn&&n==78&&r=="c")return OT(t)||mm(t,1,r)||vo(t,1);if(r==(Yn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Dd(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let s=t.someProp("clipboardSerializer")||so.fromSchema(t.state.schema),l=uv(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=cv[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let g=l.createElement(u[m]);for(;a.firstChild;)g.appendChild(a.firstChild);a.appendChild(g),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:h,slice:e}}function ov(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",h=>{e=h(e,o||r,t)}),o)return e?new be(te.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):be.empty;let f=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(f)l=f;else{let h=i.marks(),{schema:m}=t.state,g=so.fromSchema(m);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let x=s.appendChild(document.createElement("p"));b&&x.appendChild(g.serializeNode(m.text(b,h)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=NT(n),yl&&PT(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Fs.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!AT.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)l=IT(bm(l,+u[1],+u[2]),u[4]);else if(l=be.maxOpen(_T(l.content,i),!0),l.openStart||l.openEnd){let f=0,h=0;for(let m=l.content.firstChild;f<l.openStart&&!m.type.spec.isolating;f++,m=m.firstChild);for(let m=l.content.lastChild;h<l.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);l=bm(l,f,h)}return t.someProp("transformPasted",f=>{l=f(l,t)}),l}const AT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _T(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&o.length&&lv(a,o,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=av(s[s.length-1],o.length));let u=sv(l,a);s.push(u),i=i.matchType(u.type),o=a}}),s)return te.from(s)}return t}function sv(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,te.from(t));return t}function lv(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=lv(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(te.from(sv(n,t,i+1))))}}function av(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,av(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(te.empty,!0);return t.copy(n.append(r))}function jf(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=jf(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(te.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function bm(t,e,n){return e<t.openStart&&(t=new be(jf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new be(jf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const cv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let vm=null;function uv(){return vm||(vm=document.implementation.createHTMLDocument("title"))}let Ou=null;function MT(t){let e=window.trustedTypes;return e?(Ou||(Ou=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Ou.createHTML(t)):t}function NT(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=uv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&cv[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=MT(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function PT(t){let e=t.querySelectorAll(cn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function IT(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=te.from(a.create(r[l+1],i)),o++,s++}return new be(i,o,s)}const kn={},Cn={},DT={touchstart:!0,touchmove:!0};class $T{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function RT(t){for(let e in kn){let n=kn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{LT(t,r)&&!$d(t,r)&&(t.editable||!(r.type in Cn))&&n(t,r)},DT[e]?{passive:!0}:void 0)}xn&&t.dom.addEventListener("input",()=>null),Hf(t)}function ui(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function BT(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Hf(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>$d(t,r))})}function $d(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function LT(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function FT(t,e){!$d(t,e)&&kn[e.type]&&(t.editable||!(e.type in Cn))&&kn[e.type](t,e)}Cn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!dv(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Lr&&cn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Xo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Bi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||TT(t,n)?n.preventDefault():ui(t,"key")};Cn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Cn.keypress=(t,e)=>{let n=e;if(dv(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Yn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof je)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Tc(t){return{left:t.clientX,top:t.clientY}}function VT(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Rd(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Ko(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function jT(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ie.isSelectable(r)?(Ko(t,new Ie(n)),!0):!1}function HT(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Ie&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(Ie.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Ko(t,Ie.create(t.state.doc,i)),!0):!1}function zT(t,e,n,r,i){return Rd(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?HT(t,n):jT(t,n))}function KT(t,e,n,r){return Rd(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function UT(t,e,n,r){return Rd(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||WT(t,n,r)}function WT(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ko(t,je.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Ko(t,je.create(r,l+1,l+1+s.content.size));else if(Ie.isSelectable(s))Ko(t,Ie.create(r,l));else continue;return!0}}function Bd(t){return Ya(t)}const fv=Yn?"metaKey":"ctrlKey";kn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Bd(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&VT(n,t.input.lastClick)&&!n[fv]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Tc(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new qT(t,s,n,!!r)):(o=="doubleClick"?KT:UT)(t,s.pos,s.inside,n)?n.preventDefault():ui(t,"pointer"))};class qT{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fv],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Ie&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ur&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ui(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>zr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Tc(e))),this.updateAllowDefault(e),this.allowDefault||!n?ui(this.view,"pointer"):zT(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||xn&&this.mightDrag&&!this.mightDrag.node.isAtom||cn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ko(this.view,qe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ui(this.view,"pointer")}move(e){this.updateAllowDefault(e),ui(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}kn.touchstart=t=>{t.input.lastTouch=Date.now(),Bd(t),ui(t,"pointer")};kn.touchmove=t=>{t.input.lastTouch=Date.now(),ui(t,"pointer")};kn.contextmenu=t=>Bd(t);function dv(t,e){return t.composing?!0:xn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const JT=Lr?5e3:-1;Cn.compositionstart=Cn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof je&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Ya(t,!0),t.markCursor=null;else if(Ya(t,!e.selection.empty),ur&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}hv(t,JT)};Cn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,hv(t,20))};function hv(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ya(t),e))}function pv(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=GT());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function YT(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=jE(e.focusNode,e.focusOffset),r=HE(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function GT(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ya(t,e=!1){if(!(Lr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),pv(t),e||t.docView&&t.docView.dirty){let n=Pd(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function XT(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const il=Pn&&pi<15||Xo&&qE<604;kn.copy=Cn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=il?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Dd(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):XT(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZT(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function QT(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ol(t,r.value,null,i,e):ol(t,r.textContent,r.innerHTML,i,e)},50)}function ol(t,e,n,r,i){let o=ov(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||be.empty)))return!0;if(!o)return!1;let s=ZT(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mv(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Cn.paste=(t,e)=>{let n=e;if(t.composing&&!Lr)return;let r=il?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ol(t,mv(r),r.getData("text/html"),i,n)?n.preventDefault():QT(t,n)};class gv{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const yv=Yn?"altKey":"ctrlKey";kn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Tc(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Ie?i.to-1:i.to))){if(r&&r.mightDrag)s=Ie.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=Ie.create(t.state.doc,f.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:u}=Dd(t,l);(!n.dataTransfer.files.length||!cn||zb>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(il?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",il||n.dataTransfer.setData("text/plain",c),t.dragging=new gv(u,!n[yv],s)};kn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Cn.dragover=Cn.dragenter=(t,e)=>e.preventDefault();Cn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Tc(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",g=>{s=g(s,t)}):s=ov(t,mv(n.dataTransfer),il?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[yv]);if(t.someProp("handleDrop",g=>g(t,n,s||be.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?$b(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let c=t.state.tr;if(l){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(a),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(f?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let m=c.doc.resolve(u);if(f&&Ie.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Ie(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((b,x,O,A)=>g=A),c.setSelection(Id(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};kn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&zr(t)},20))};kn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};kn.beforeinput=(t,e)=>{if(cn&&Lr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Bi(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Cn)kn[t]=Cn[t];function sl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ga{constructor(e,n){this.toDOM=e,this.spec=n||Ji,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Xn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ga&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&sl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class gi{constructor(e,n){this.attrs=e,this.spec=n||Ji}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Xn(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof gi&&sl(this.attrs,e.attrs)&&sl(this.spec,e.spec)}static is(e){return e.type instanceof gi}destroy(){}}class Ld{constructor(e,n){this.attrs=e,this.spec=n||Ji}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Xn(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Ld&&sl(this.attrs,e.attrs)&&sl(this.spec,e.spec)}destroy(){}}class Xn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Xn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Xn(e,e,new Ga(n,r))}static inline(e,n,r,i){return new Xn(e,n,new gi(r,i))}static node(e,n,r,i){return new Xn(e,n,new Ld(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof gi}get widget(){return this.type instanceof Ga}}const Oo=[],Ji={};class Ft{constructor(e,n){this.local=e.length?e:Oo,this.children=n.length?n:Oo}static create(e,n){return n.length?Xa(n,e,0,Ji):rn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==rn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ji)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?eA(this.children,s||[],e,n,r,i,o):s?new Ft(s.sort(Yi),Oo):rn}add(e,n){return n.length?this==rn?Ft.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let c=a+r,u;if(u=vv(n,l,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,u,c+1):i.splice(o,0,a,a+l.nodeSize,Xa(u,l,c+1,Ji)),o+=3}});let s=bv(o?wv(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Ft(s.length?this.local.concat(s).sort(Yi):this.local,i||this.children)}remove(e){return e.length==0||this==rn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>l&&f.to<a&&(e[u]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,l+1);c!=rn?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ft(i,r):rn}forChild(e,n){if(this==rn)return this;if(n.isLeaf)return Ft.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof gi){let c=Math.max(o,a.from)-o,u=Math.min(s,a.to)-o;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Ft(i.sort(Yi),Oo);return r?new si([l,r]):l}return r||rn}eq(e){if(this==e)return!0;if(!(e instanceof Ft)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Fd(this.localsInner(e))}localsInner(e){if(this==rn)return Oo;if(e.inlineContent||!this.local.some(gi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof gi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ft.empty=new Ft([],[]);Ft.removeOverlap=Fd;const rn=Ft.empty;class si{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ji));return si.from(r)}forChild(e,n){if(n.isLeaf)return Ft.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=rn&&(o instanceof si?r=r.concat(o.members):r.push(o))}return si.from(r)}eq(e){if(!(e instanceof si)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Fd(r?n:n.sort(Yi)):Oo}static from(e){switch(e.length){case 0:return rn;case 1:return e[0];default:return new si(e.every(n=>n instanceof Ft)?e:e.reduce((n,r)=>n.concat(r instanceof Ft?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function eA(t,e,n,r,i,o,s){let l=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((h,m,g,b)=>{let x=b-g-(m-h);for(let O=0;O<l.length;O+=3){let A=l[O+1];if(A<0||h>A+u-f)continue;let N=l[O]+u-f;m>=N?l[O+1]=h<=N?-2:-1:h>=u&&x&&(l[O]+=x,l[O+1]+=x)}f+=x}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+o),f=u-i;if(f<0||f>=r.content.size){a=!0;continue}let h=n.map(t[c+1]+o,-1),m=h-i,{index:g,offset:b}=r.content.findIndex(f),x=r.maybeChild(g);if(x&&b==f&&b+x.nodeSize==m){let O=l[c+2].mapInner(n,x,u+1,t[c]+o+1,s);O!=rn?(l[c]=f,l[c+1]=m,l[c+2]=O):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=tA(l,t,e,n,i,o,s),u=Xa(c,r,0,s);e=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,h=0;f<u.children.length;f+=3){let m=u.children[f];for(;h<l.length&&l[h]<m;)h+=3;l.splice(h,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Ft(e.sort(Yi),l)}function bv(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Xn(i.from+e,i.to+e,i.type))}return n}function tA(t,e,n,r,i,o,s){function l(a,c){for(let u=0;u<a.local.length;u++){let f=a.local[u].map(r,i,c);f?n.push(f):s.onRemove&&s.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function vv(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function wv(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Xa(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let c=vv(t,l,a+n);if(c){o=!0;let u=Xa(c,l,n+a+1,r);u!=rn&&i.push(a,a+l.nodeSize,u)}});let s=bv(o?wv(t):t,-n).sort(Yi);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new Ft(s,i):rn}function Yi(t,e){return t.from-e.from||t.to-e.to}function Fd(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),wm(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),wm(e,i,r.copy(o.from,r.to)));break}}}return e}function wm(t,e,n){for(;e<t.length&&Yi(n,t[e])>0;)e++;t.splice(e,0,n)}function Eu(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=rn&&e.push(r)}),t.cursorWrapper&&e.push(Ft.create(t.state.doc,[t.cursorWrapper.deco])),si.from(e)}const nA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},rA=Pn&&pi<=11;class iA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class oA{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Pn&&pi<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),rA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(dm(this.view)){if(this.suppressingSelectionUpdates)return zr(this.view);if(Pn&&pi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&no(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Go(o))n.add(o);for(let o=e.anchorNode;o;o=Go(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&dm(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],a);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(l=!0))}if(ur&&a.length){let u=a.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,h]=u;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of u){let m=h.parentNode;m&&m.nodeName=="LI"&&(!f||aA(e,f)!=m)&&h.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Oc(r)&&(c=Pd(e))&&c.eq(qe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,zr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),sA(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||zr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Pn&&pi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:h}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h)}let s=i&&i.parentNode==e.target?Zt(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Zt(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Sm=new WeakMap,xm=!1;function sA(t){if(!Sm.has(t)&&(Sm.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ur,xm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),xm=!0}}function km(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return no(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function lA(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return km(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?km(t,n):null}function aA(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function cA(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],Oc(a)||c.push({node:a.focusNode,offset:a.focusOffset})),cn&&t.input.lastKeyCode===8)for(let x=o;x>i;x--){let O=r.childNodes[x-1],A=O.pmViewDesc;if(O.nodeName=="BR"&&!A){o=x;break}if(!A||A.size)break}let f=t.state.doc,h=t.someProp("domParser")||Fs.fromSchema(t.state.schema),m=f.resolve(s),g=null,b=h.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:o,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:uA,context:m});if(c&&c[0].pos!=null){let x=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=x),g={anchor:x+s,head:O+s}}return{doc:b,sel:g,from:s,to:l}}function uA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(xn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||xn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const fA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function dA(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,S=Pd(t,E);if(S&&!t.state.selection.eq(S)){if(cn&&Lr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",C=>C(t,Bi(13,"Enter"))))return;let F=t.state.tr.setSelection(S);E=="pointer"?F.setMeta("pointer",!0):E=="key"&&F.scrollIntoView(),o&&F.setMeta("composition",o),t.dispatch(F)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=cA(t,e,n),u=t.state.doc,f=u.slice(c.from,c.to),h,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,m="end"):(h=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=mA(f.content,c.doc.content,c.from,h,m);if(g&&t.input.domChangeCount++,(Xo&&t.input.lastIOSEnter>Date.now()-225||Lr)&&i.some(E=>E.nodeType==1&&!fA.test(E.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",E=>E(t,Bi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&a instanceof je&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let E=Cm(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let S=t.state.tr.setSelection(E);o&&S.setMeta("composition",o),t.dispatch(S)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof je&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Pn&&pi<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let b=c.doc.resolveNoCache(g.start-c.from),x=c.doc.resolveNoCache(g.endB-c.from),O=u.resolve(g.start),A=b.sameParent(x)&&b.parent.inlineContent&&O.end()>=g.endA,N;if((Xo&&t.input.lastIOSEnter>Date.now()-225&&(!A||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!A&&b.pos<c.doc.content.size&&!b.sameParent(x)&&(N=qe.findFrom(c.doc.resolve(b.pos+1),1,!0))&&N.head==x.pos)&&t.someProp("handleKeyDown",E=>E(t,Bi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&pA(u,g.start,g.endA,b,x)&&t.someProp("handleKeyDown",E=>E(t,Bi(8,"Backspace")))){Lr&&cn&&t.domObserver.suppressSelectionUpdates();return}cn&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),Lr&&!A&&b.start()!=x.start()&&x.parentOffset==0&&b.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,x=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Bi(13,"Enter"))})},20));let $=g.start,I=g.endA,L,V,K;if(A){if(b.pos==x.pos)Pn&&pi<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>zr(t),20)),L=t.state.tr.delete($,I),V=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(K=hA(b.parent.content.cut(b.parentOffset,x.parentOffset),O.parent.content.cut(O.parentOffset,g.endA-O.start()))))L=t.state.tr,K.type=="add"?L.addMark($,I,K.mark):L.removeMark($,I,K.mark);else if(b.parent.child(b.index()).isText&&b.index()==x.index()-(x.textOffset?0:1)){let E=b.parent.textBetween(b.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",S=>S(t,$,I,E)))return;L=t.state.tr.insertText(E,$,I)}}if(L||(L=t.state.tr.replace($,I,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let E=Cm(t,L.doc,c.sel);E&&!(cn&&t.composing&&E.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(E.head==$||E.head==L.mapping.map(I)-1)||Pn&&E.empty&&E.head==$)&&L.setSelection(E)}V&&L.ensureMarks(V),o&&L.setMeta("composition",o),t.dispatch(L.scrollIntoView())}function Cm(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Id(t,e.resolve(n.anchor),e.resolve(n.head))}function hA(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(te.from(c).eq(t))return{mark:l,type:s}}function pA(t,e,n,r,i){if(n-e<=i.pos-r.pos||Tu(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Tu(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Tu(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Tu(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function mA(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&Om(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&Om(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function Om(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class gA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new $T,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Mm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Am(this),Tm(this),this.nodeViews=_m(this),this.docView=sm(this.state.doc,Em(this),Eu(this),this.dom,this),this.domObserver=new oA(this,(r,i,o,s)=>dA(this,r,i,o,s)),this.domObserver.start(),RT(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hf(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Mm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(pv(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=_m(this);bA(m,this.nodeViews)&&(this.nodeViews=m,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Hf(this),this.editable=Am(this),Tm(this);let a=Eu(this),c=Em(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,a);(f||!e.selection.eq(i.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&GE(this);if(s){this.domObserver.stop();let m=f&&(Pn||cn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&yA(i.selection,e.selection);if(f){let g=cn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=YT(this)),(o||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=sm(e.doc,c,a,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&wT(this))?zr(this,m):(nv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&XE(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ie){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&em(this,n.getBoundingClientRect(),e)}else em(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new gv(e.slice,e.move,i<0?void 0:Ie.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Pn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&ZE(this.dom),zr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rT(this,e)}coordsAtPos(e,n=1){return Jb(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return aT(this,n||this.state,e)}pasteHTML(e,n){return ol(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ol(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Dd(this,e)}destroy(){this.docView&&(BT(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Eu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,FE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return FT(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?xn&&this.root.nodeType===11&&KE(this.dom.ownerDocument)==this.dom&&lA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Em(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Xn.node(0,t.state.doc.content.size,e)]}function Tm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Xn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Am(t){return!t.someProp("editable",e=>e(t.state)===!1)}function yA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function _m(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function bA(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Mm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Si={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Za={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vA=typeof navigator<"u"&&/Mac/.test(navigator.platform),wA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qt=0;Qt<10;Qt++)Si[48+Qt]=Si[96+Qt]=String(Qt);for(var Qt=1;Qt<=24;Qt++)Si[Qt+111]="F"+Qt;for(var Qt=65;Qt<=90;Qt++)Si[Qt]=String.fromCharCode(Qt+32),Za[Qt]=String.fromCharCode(Qt);for(var Au in Si)Za.hasOwnProperty(Au)||(Za[Au]=Si[Au]);function SA(t){var e=vA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||wA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Za:Si)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const xA=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function kA(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))xA?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function CA(t){let e=Object.create(null);for(let n in t)e[kA(n)]=t[n];return e}function _u(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function OA(t){return new Dn({props:{handleKeyDown:Sv(t)}})}function Sv(t){let e=CA(t);return function(n,r){let i=SA(r),o,s=e[_u(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[_u(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Si[r.keyCode])&&o!=i){let l=e[_u(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Vd=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function xv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const kv=(t,e,n)=>{let r=xv(t,n);if(!r)return!1;let i=jd(r);if(!i){let s=r.blockRange(),l=s&&rs(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(Pv(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Zo(o,"end")||Ie.isSelectable(o)))for(let s=r.depth;;s--){let l=kc(t.doc,r.before(s),r.after(s),be.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(Zo(o,"end")?qe.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Ie.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},EA=(t,e,n)=>{let r=xv(t,n);if(!r)return!1;let i=jd(r);return i?Cv(t,i,e):!1},TA=(t,e,n)=>{let r=Ev(t,n);if(!r)return!1;let i=Hd(r);return i?Cv(t,i,e):!1};function Cv(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=kc(t.doc,o,a,be.empty);if(!c||c.from!=o||c instanceof Ht&&c.slice.size>=a-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(je.create(u.doc,o)),n(u.scrollIntoView())}return!0}function Zo(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Ov=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=jd(r)}let s=o&&o.nodeBefore;return!s||!Ie.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Ie.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function jd(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Ev(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Tv=(t,e,n)=>{let r=Ev(t,n);if(!r)return!1;let i=Hd(r);if(!i)return!1;let o=i.nodeAfter;if(Pv(t,i,e,1))return!0;if(r.parent.content.size==0&&(Zo(o,"start")||Ie.isSelectable(o))){let s=kc(t.doc,r.before(),r.after(),be.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(Zo(o,"start")?qe.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Ie.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Av=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Hd(r)}let s=o&&o.nodeAfter;return!s||!Ie.isSelectable(s)?!1:(e&&e(t.tr.setSelection(Ie.create(t.doc,o.pos)).scrollIntoView()),!0)};function Hd(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const AA=(t,e)=>{let n=t.selection,r=n instanceof Ie,i;if(r){if(n.node.isTextblock||!Ei(t.doc,n.from))return!1;i=n.from}else if(i=xc(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(Ie.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},_A=(t,e)=>{let n=t.selection,r;if(n instanceof Ie){if(n.node.isTextblock||!Ei(t.doc,n.to))return!1;r=n.to}else if(r=xc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},MA=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&rs(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},_v=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function zd(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const NA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=zd(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(qe.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Mv=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Un||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=zd(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(je.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},Nv=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Hr(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&rs(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function PA(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Ie&&e.selection.node.isBlock)return!r.parentOffset||!Hr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){a=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),l=zd(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),o.unshift(a&&l?{type:l}:null),s=m;break}else{if(m==1)return!1;o.unshift(null)}let u=e.tr;(e.selection instanceof je||e.selection instanceof Un)&&u.deleteSelection();let f=u.mapping.map(r.pos),h=Hr(u.doc,f,o.length,o);if(h||(o[0]=l?{type:l}:null,h=Hr(u.doc,f,o.length,o)),u.split(f,o.length,o),!a&&c&&r.node(s).type!=l){let m=u.mapping.map(r.before(s)),g=u.doc.resolve(m);l&&r.node(s-1).canReplaceWith(g.index(),g.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(s)),l)}return n&&n(u.scrollIntoView()),!0}}const IA=PA(),DA=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(Ie.create(t.doc,i))),!0)};function $A(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Ei(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Pv(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&$A(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let m=e.pos+o.nodeSize,g=te.empty;for(let O=s.length-1;O>=0;O--)g=te.from(s[O].create(null,g));g=te.from(i.copy(g));let b=t.tr.step(new zt(e.pos-1,m,e.pos,m,new be(g,1,0),s.length,!0)),x=b.doc.resolve(m+2*s.length);x.nodeAfter&&x.nodeAfter.type==i.type&&Ei(b.doc,x.pos)&&b.join(x.pos),n(b.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&a?null:qe.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),h=f&&rs(f);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(f,h).scrollIntoView()),!0;if(c&&Zo(o,"start",!0)&&Zo(i,"end")){let m=i,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let b=o,x=1;for(;!b.isTextblock;b=b.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,b.content)){if(n){let O=te.empty;for(let N=g.length-1;N>=0;N--)O=te.from(g[N].copy(O));let A=t.tr.step(new zt(e.pos-g.length,e.pos+o.nodeSize,e.pos+x,e.pos+o.nodeSize-x,new be(O,g.length,0),0,!0));n(A.scrollIntoView())}return!0}}return!1}function Iv(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(je.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const RA=Iv(-1),BA=Iv(1);function LA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&_d(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Nm(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}function Kd(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Kd(Vd,kv,Ov);Kd(Vd,Tv,Av);Kd(_v,Mv,Nv,IA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function FA(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return VA(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function VA(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Ua(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Ua(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=_d(o,n,r,e);return l?(t&&jA(t,e,l,i,n),!0):!1}function jA(t,e,n,r,i){let o=te.empty;for(let u=n.length-1;u>=0;u--)o=te.from(n[u].type.create(n[u].attrs,o));t.step(new zt(e.start-(r?2:0),e.end,e.start,e.end,new be(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,h=!0;u<f;u++,h=!1)!h&&Hr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function HA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?zA(e,n,t,o):KA(e,n,o):!0:!1}}function zA(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new zt(o-1,s,o,s,new be(te.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ua(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=rs(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return Ei(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function KA(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,g=n.endIndex-1,b=n.startIndex;g>b;g--)m-=i.child(g).nodeSize,r.delete(m-1,m+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?te.empty:te.from(i))))return!1;let f=o.pos,h=f+s.nodeSize;return r.step(new zt(f-(l?1:0),h+(a?1:0),f+1,h-1,new be((l?te.empty:te.from(i.copy(te.empty))).append(a?te.empty:te.from(i.copy(te.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function UA(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=te.from(c?t.create():null),f=new be(te.from(t.create(null,te.from(l.type.create(null,u)))),c?3:1,0),h=o.start,m=o.end;n(e.tr.step(new zt(h-(c?3:1),m,h,m,f,1,!0)).scrollIntoView())}return!0}}function Ac(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class _c{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const f=a(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,c=e||o.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(h=>h===!0)),f={...Object.fromEntries(Object.entries(r).map(([h,m])=>[h,(...b)=>{const x=this.buildProps(c,n),O=m(...b)(x);return l.push(O),f}])),run:u};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Ac({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class WA{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ke(t,e,n){return t.config[e]===void 0&&t.parent?ke(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ke(t.parent,e,n):null}):t.config[e]}function Mc(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Dv(t){const e=[],{nodeExtensions:n,markExtensions:r}=Mc(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=ke(s,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([h,m])=>{e.push({type:f,name:h,attribute:{...o,...m}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=ke(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,f])=>{const h={...o,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function Ut(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function On(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[f,h]=u.split(":").map(m=>m.trim());c.set(f,h)}),l.forEach(u=>{const[f,h]=u.split(":").map(m=>m.trim());c.set(f,h)}),r[i]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[i]=o}),r},{})}function zf(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>On(n,r),{})}function $v(t){return typeof t=="function"}function Ye(t,e=void 0,...n){return $v(t)?e?t.bind(e)(...n):t(...n):t}function qA(t={}){return Object.keys(t).length===0&&t.constructor===Object}function JA(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Pm(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):JA(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function Im(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&qA(n)?!1:n!=null))}function YA(t,e){var n;const r=Dv(t),{nodeExtensions:i,markExtensions:o}=Mc(t),s=(n=i.find(c=>ke(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(O=>O.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((O,A)=>{const N=ke(A,"extendNodeSchema",f);return{...O,...N?N(c):{}}},{}),m=Im({...h,content:Ye(ke(c,"content",f)),marks:Ye(ke(c,"marks",f)),group:Ye(ke(c,"group",f)),inline:Ye(ke(c,"inline",f)),atom:Ye(ke(c,"atom",f)),selectable:Ye(ke(c,"selectable",f)),draggable:Ye(ke(c,"draggable",f)),code:Ye(ke(c,"code",f)),whitespace:Ye(ke(c,"whitespace",f)),linebreakReplacement:Ye(ke(c,"linebreakReplacement",f)),defining:Ye(ke(c,"defining",f)),isolating:Ye(ke(c,"isolating",f)),attrs:Object.fromEntries(u.map(O=>{var A;return[O.name,{default:(A=O==null?void 0:O.attribute)===null||A===void 0?void 0:A.default}]}))}),g=Ye(ke(c,"parseHTML",f));g&&(m.parseDOM=g.map(O=>Pm(O,u)));const b=ke(c,"renderHTML",f);b&&(m.toDOM=O=>b({node:O,HTMLAttributes:zf(O,u)}));const x=ke(c,"renderText",f);return x&&(m.toText=x),[c.name,m]})),a=Object.fromEntries(o.map(c=>{const u=r.filter(x=>x.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((x,O)=>{const A=ke(O,"extendMarkSchema",f);return{...x,...A?A(c):{}}},{}),m=Im({...h,inclusive:Ye(ke(c,"inclusive",f)),excludes:Ye(ke(c,"excludes",f)),group:Ye(ke(c,"group",f)),spanning:Ye(ke(c,"spanning",f)),code:Ye(ke(c,"code",f)),attrs:Object.fromEntries(u.map(x=>{var O;return[x.name,{default:(O=x==null?void 0:x.attribute)===null||O===void 0?void 0:O.default}]}))}),g=Ye(ke(c,"parseHTML",f));g&&(m.parseDOM=g.map(x=>Pm(x,u)));const b=ke(c,"renderHTML",f);return b&&(m.toDOM=x=>b({mark:x,HTMLAttributes:zf(x,u)})),[c.name,m]}));return new Cb({topNode:s,nodes:l,marks:a})}function Mu(t,e){return e.nodes[t]||e.marks[t]||null}function Dm(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Ud(t,e){const n=so.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const GA=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function Wd(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Nc{constructor(e){this.find=e.find,this.handler=e.handler}}const XA=(t,e)=>{if(Wd(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Vl(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const f=GA(c)+o;return s.forEach(h=>{if(u)return;const m=XA(f,h.find);if(!m)return;const g=a.state.tr,b=Ac({state:a.state,transaction:g}),x={from:r-(m[0].length-o.length),to:i},{commands:O,chain:A,can:N}=new _c({editor:n,state:b});h.handler({state:b,range:x,match:m,commands:O,chain:A,can:N})===null||!g.steps.length||(g.setMeta(l,{transform:g,from:r,to:i,text:o}),a.dispatch(g),u=!0)}),u}function ZA(t){const{editor:e,rules:n}=t,r=new Dn({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=Ud(te.from(u),s.schema);const{from:f}=a,h=f+u.length;Vl({editor:e,from:f,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return Vl({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Vl({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Vl({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function QA(t){return Object.prototype.toString.call(t).slice(8,-1)}function jl(t){return QA(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Pc(t,e){const n={...t};return jl(t)&&jl(e)&&Object.keys(e).forEach(r=>{jl(e[r])&&jl(t[r])?n[r]=Pc(t[r],e[r]):n[r]=e[r]}),n}class xi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(ke(this,"addOptions",{name:this.name}))),this.storage=Ye(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new xi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Pc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new xi(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(ke(n,"addOptions",{name:n.name})),n.storage=Ye(ke(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function e_(t){return typeof t=="number"}class t_{constructor(e){this.find=e.find,this.handler=e.handler}}const n_=(t,e,n)=>{if(Wd(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function r_(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:u}=new _c({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const b=Math.max(r,g),x=Math.min(i,g+m.content.size),O=m.textBetween(b-g,x-g,void 0,"");n_(O,o.find,s).forEach(N=>{if(N.index===void 0)return;const $=b+N.index+1,I=$+N[0].length,L={from:n.tr.mapping.map($),to:n.tr.mapping.map(I)},V=o.handler({state:n,range:L,match:N,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});f.push(V)})}),f.every(m=>m!==null)}let Hl=null;const i_=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function o_(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:f,to:h,rule:m,pasteEvt:g})=>{const b=u.tr,x=Ac({state:u,transaction:b});if(!(!r_({editor:e,state:x,from:Math.max(f-1,0),to:h.b-1,rule:m,pasteEvent:g,dropEvent:l})||!b.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(u=>new Dn({view(f){const h=g=>{var b;r=!((b=f.dom.parentElement)===null||b===void 0)&&b.contains(g.target)?f.dom.parentElement:null,r&&(Hl=e)},m=()=>{Hl&&(Hl=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(o=r===f.dom.parentElement,l=h,!o){const m=Hl;m&&setTimeout(()=>{const g=m.state.selection;g&&m.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(f,h)=>{var m;const g=(m=h.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return s=h,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,m)=>{const g=f[0],b=g.getMeta("uiEvent")==="paste"&&!i,x=g.getMeta("uiEvent")==="drop"&&!o,O=g.getMeta("applyPasteRules"),A=!!O;if(!b&&!x&&!A)return;if(A){let{text:I}=O;typeof I=="string"?I=I:I=Ud(te.from(I),m.schema);const{from:L}=O,V=L+I.length,K=i_(I);return a({rule:u,state:m,from:L,to:{b:V},pasteEvt:K})}const N=h.doc.content.findDiffStart(m.doc.content),$=h.doc.content.findDiffEnd(m.doc.content);if(!(!e_(N)||!$||N===$.b))return a({rule:u,state:m,from:N,to:$,pasteEvt:s})}}))}function s_(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Mo{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Mo.resolve(e),this.schema=YA(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Mo.sort(Mo.flatten(e)),r=s_(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=ke(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=ke(r,"priority")||100,s=ke(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Mu(n.name,this.schema)},i=ke(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Mo.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Mu(s.name,this.schema)},a=[],c=ke(s,"addKeyboardShortcuts",l);let u={};if(s.type==="mark"&&ke(s,"exitable",l)&&(u.ArrowRight=()=>xi.handleExit({editor:e,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([x,O])=>[x,()=>O({editor:e})]));u={...u,...b}}const f=OA(u);a.push(f);const h=ke(s,"addInputRules",l);Dm(s,e.options.enableInputRules)&&h&&r.push(...h());const m=ke(s,"addPasteRules",l);Dm(s,e.options.enablePasteRules)&&m&&i.push(...m());const g=ke(s,"addProseMirrorPlugins",l);if(g){const b=g();a.push(...b)}return a}).flat();return[ZA({editor:e,rules:r}),...o_({editor:e,rules:i}),...o]}get attributes(){return Dv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Mc(this.extensions);return Object.fromEntries(n.filter(r=>!!ke(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ut(r.name,this.schema)},s=ke(r,"addNodeView",o);if(!s)return[];const l=(a,c,u,f,h)=>{const m=zf(a,i);return s()({node:a,view:c,getPos:u,decorations:f,innerDecorations:h,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Mu(e.name,this.schema)};e.type==="mark"&&(!((n=Ye(ke(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=ke(e,"onBeforeCreate",r),o=ke(e,"onCreate",r),s=ke(e,"onUpdate",r),l=ke(e,"onSelectionUpdate",r),a=ke(e,"onTransaction",r),c=ke(e,"onFocus",r),u=ke(e,"onBlur",r),f=ke(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class En{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(ke(this,"addOptions",{name:this.name}))),this.storage=Ye(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new En(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Pc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new En({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(ke(n,"addOptions",{name:n.name})),n.storage=Ye(ke(n,"addStorage",{name:n.name,options:n.options})),n}}function Rv(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,f)=>{var h;a.isBlock&&c>r&&(l+=o);const m=s==null?void 0:s[a.type.name];if(m)return u&&(l+=m({node:a,pos:c,parent:u,index:f,range:e})),!1;a.isText&&(l+=(h=a==null?void 0:a.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),l}function Bv(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const l_=En.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Dn({key:new Er("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),l=Math.max(...o.map(u=>u.$to.pos)),a=Bv(n);return Rv(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),a_=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),c_=(t=!1)=>({commands:e})=>e.setContent("",t),u_=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(a)),h=c.resolve(u.map(a+l.nodeSize)),m=f.blockRange(h);if(!m)return;const g=rs(m);if(l.type.isTextblock){const{defaultType:b}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(m.start,b)}(g||g===0)&&e.lift(m,g)})}),!0},f_=t=>e=>t(e),d_=()=>({state:t,dispatch:e})=>Mv(t,e),h_=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new je(r.doc.resolve(s-1))),!0},p_=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},m_=t=>({tr:e,state:n,dispatch:r})=>{const i=Ut(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),c=o.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},g_=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},y_=()=>({state:t,dispatch:e})=>Vd(t,e),b_=()=>({commands:t})=>t.keyboardShortcut("Enter"),v_=()=>({state:t,dispatch:e})=>NA(t,e);function Qa(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Wd(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Lv(t,e,n={}){return t.find(r=>r.type===e&&Qa(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function $m(t,e,n={}){return!!Lv(t,e,n)}function qd(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Lv([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,c=l+i.node.nodeSize;for(;s>0&&$m([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&$m([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Ai(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const w_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Ai(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const f=qd(a,o,e);if(f&&f.from<=c&&f.to>=u){const h=je.create(s,f.from,f.to);n.setSelection(h)}}return!0},S_=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Fv(t){return t instanceof je}function Hi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Vv(t,e=null){if(!e)return null;const n=qe.atStart(t),r=qe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?je.create(t,Hi(0,i,o),Hi(t.content.size,i,o)):je.create(t,Hi(e,i,o),Hi(e,i,o))}function x_(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Jd(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const k_=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Jd()||x_())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!Fv(n.state.selection))return s(),!0;const l=Vv(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},C_=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),O_=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),jv=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&jv(r)}return t};function zl(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return jv(n)}function ec(t,e,n){if(t instanceof hi||t instanceof te)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return te.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),ec("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new Cb({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Fs.fromSchema(a).parseSlice(zl(t),n.parseOptions):Fs.fromSchema(a).parse(zl(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=Fs.fromSchema(e);return n.slice?o.parseSlice(zl(t),n.parseOptions).content:o.parse(zl(t),n.parseOptions)}return ec("",e,n)}function E_(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ht||i instanceof zt))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,c,u)=>{s===0&&(s=u)}),t.setSelection(qe.near(t.doc.resolve(s),n))}const T_=t=>!("type"in t),A_=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=ec(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(g){return o.emit("contentError",{editor:o,error:g,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,f=!0;if((T_(l)?l:[l]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,f=f?g.isBlock:!1}),a===c&&f){const{parent:g}=r.doc.resolve(a);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(a-=1,c+=1)}let m;if(u){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof te){let g="";e.forEach(b=>{b.text&&(g+=b.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,a,c)}else m=l,r.replaceWith(a,c,m);n.updateSelection&&E_(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:m})}return!0},__=()=>({state:t,dispatch:e})=>AA(t,e),M_=()=>({state:t,dispatch:e})=>_A(t,e),N_=()=>({state:t,dispatch:e})=>kv(t,e),P_=()=>({state:t,dispatch:e})=>Tv(t,e),I_=()=>({state:t,dispatch:e,tr:n})=>{try{const r=xc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},D_=()=>({state:t,dispatch:e,tr:n})=>{try{const r=xc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},$_=()=>({state:t,dispatch:e})=>EA(t,e),R_=()=>({state:t,dispatch:e})=>TA(t,e);function Hv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function B_(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Jd()||Hv()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const L_=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=B_(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function ll(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Ut(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,h)=>{if(f.isText)return;const m=Math.max(r,h),g=Math.min(i,h+f.nodeSize);l.push({node:f,from:m,to:g})});const a=i-r,c=l.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>Qa(f.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((f,h)=>f+h.to-h.from,0)>=a}const F_=(t,e={})=>({state:n,dispatch:r})=>{const i=Ut(t,n.schema);return ll(n,i,e)?MA(n,r):!1},V_=()=>({state:t,dispatch:e})=>Nv(t,e),j_=t=>({state:e,dispatch:n})=>{const r=Ut(t,e.schema);return HA(r)(e,n)},H_=()=>({state:t,dispatch:e})=>_v(t,e);function Ic(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Rm(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const z_=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Ic(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Ut(t,r.schema)),l==="mark"&&(s=Ai(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,Rm(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&n.addMark(u,u+c.nodeSize,s.create(Rm(f.attrs,e)))})})}),!0):!1},K_=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),U_=()=>({tr:t,dispatch:e})=>{if(e){const n=new Un(t.doc);t.setSelection(n)}return!0},W_=()=>({state:t,dispatch:e})=>Ov(t,e),q_=()=>({state:t,dispatch:e})=>Av(t,e),J_=()=>({state:t,dispatch:e})=>DA(t,e),Y_=()=>({state:t,dispatch:e})=>BA(t,e),G_=()=>({state:t,dispatch:e})=>RA(t,e);function Kf(t,e,n={},r={}){return ec(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const X_=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const f=Kf(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function zv(t,e){const n=Ai(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function Z_(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Q_(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Yd(t){return e=>Q_(e.$from,t)}function eM(t,e){const n={from:0,to:t.content.size};return Rv(t,n,e)}function tM(t,e){const n=Ut(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function nM(t,e){const n=Ic(typeof e=="string"?e:e.name,t.schema);return n==="node"?tM(t,e):n==="mark"?zv(t,e):{}}function Kv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=qd(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function ma(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function Uf(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Ai(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>Qa(f.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:f,$to:h})=>{const m=f.pos,g=h.pos;t.doc.nodesBetween(m,g,(b,x)=>{if(!b.isText&&!b.marks.length)return;const O=Math.max(m,x),A=Math.min(g,x+b.nodeSize),N=A-O;s+=N,l.push(...b.marks.map($=>({mark:$,from:O,to:A})))})}),s===0)return!1;const a=l.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>Qa(f.mark.attrs,n,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),c=l.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,h)=>f+h.to-h.from,0);return(a>0?a+c:a)>=s}function rM(t,e,n={}){if(!e)return ll(t,null,n)||Uf(t,null,n);const r=Ic(e,t.schema);return r==="node"?ll(t,e,n):r==="mark"?Uf(t,e,n):!1}function Bm(t,e){const{nodeExtensions:n}=Mc(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ye(ke(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Gd(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(Gd(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function iM(t){return t instanceof Ie}function oM(t,e,n){var r;const{selection:i}=e;let o=null;if(Fv(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,f,h)=>{if(c)return!1;if(u.isInline){const m=!h||h.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(b=>b.type.excludes(n));c=m&&g}return!c}),c})}const sM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Ai(t,r.schema);if(i)if(s){const c=zv(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(h,m)=>{const g=Math.max(m,u),b=Math.min(m+h.nodeSize,f);h.marks.find(O=>O.type===a)?h.marks.forEach(O=>{a===O.type&&n.addMark(g,b,a.create({...O.attrs,...e}))}):n.addMark(g,b,a.create(e))})});return oM(r,n,a)},lM=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),aM=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Ut(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>Nm(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Nm(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},cM=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Hi(t,0,r.content.size),o=Ie.create(r,i);e.setSelection(o)}return!0},uM=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=je.atStart(r).from,l=je.atEnd(r).to,a=Hi(i,s,l),c=Hi(o,s,l),u=je.create(r,a,c);e.setSelection(u)}return!0},fM=t=>({state:e,dispatch:n})=>{const r=Ut(t,e.schema);return UA(r)(e,n)};function Lm(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const dM=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,c=i.extensionManager.attributes,u=ma(c,l.node().type.name,l.node().attrs);if(o instanceof Ie&&o.node.isBlock)return!l.parentOffset||!Hr(s,l.pos)?!1:(r&&(t&&Lm(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=a.parentOffset===a.parent.content.size,h=l.depth===0?void 0:Z_(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=f&&h?[{type:h,attrs:u}]:void 0,g=Hr(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!g&&Hr(e.doc,e.mapping.map(l.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:u}]:void 0),r){if(g&&(o instanceof je&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),h&&!f&&!l.parentOffset&&l.parent.type!==h)){const b=e.mapping.map(l.before()),x=e.doc.resolve(b);l.node(-1).canReplaceWith(x.index(),x.index()+1,h)&&e.setNodeMarkup(e.mapping.map(l.before()),h)}t&&Lm(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return g},hM=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=Ut(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const f=a.node(-1);if(f.type!==l)return!1;const h=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let O=te.empty;const A=a.index(-1)?1:a.index(-2)?2:3;for(let K=a.depth-A;K>=a.depth-3;K-=1)O=te.from(a.node(K).copy(O));const N=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,$={...ma(h,a.node().type.name,a.node().attrs),...e},I=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill($))||void 0;O=O.append(te.from(l.createAndFill(null,I)||void 0));const L=a.before(a.depth-(A-1));n.replace(L,a.after(-N),new be(O,4-A,0));let V=-1;n.doc.nodesBetween(L,n.doc.content.size,(K,E)=>{if(V>-1)return!1;K.isTextblock&&K.content.size===0&&(V=E+1)}),V>-1&&n.setSelection(je.near(n.doc.resolve(V))),n.scrollIntoView()}return!0}const m=c.pos===a.end()?f.contentMatchAt(0).defaultType:null,g={...ma(h,f.type.name,f.attrs),...e},b={...ma(h,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const x=m?[{type:l,attrs:g},{type:m,attrs:b}]:[{type:l,attrs:g}];if(!Hr(n.doc,a.pos,2))return!1;if(i){const{selection:O,storedMarks:A}=r,{splittableMarks:N}=o.extensionManager,$=A||O.$to.parentOffset&&O.$from.marks();if(n.split(a.pos,2,x).scrollIntoView(),!$||!i)return!0;const I=$.filter(L=>N.includes(L.type.name));n.ensureMarks(I)}return!0},Nu=(t,e)=>{const n=Yd(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ei(t.doc,n.pos)&&t.join(n.pos),!0},Pu=(t,e)=>{const n=Yd(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ei(t.doc,r)&&t.join(r),!0},pM=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:f,splittableMarks:h}=i.extensionManager,m=Ut(t,s.schema),g=Ut(e,s.schema),{selection:b,storedMarks:x}=s,{$from:O,$to:A}=b,N=O.blockRange(A),$=x||b.$to.parentOffset&&b.$from.marks();if(!N)return!1;const I=Yd(L=>Bm(L.type.name,f))(b);if(N.depth>=1&&I&&N.depth-I.depth<=1){if(I.node.type===m)return c.liftListItem(g);if(Bm(I.node.type.name,f)&&m.validContent(I.node.content)&&l)return a().command(()=>(o.setNodeMarkup(I.pos,m),!0)).command(()=>Nu(o,m)).command(()=>Pu(o,m)).run()}return!n||!$||!l?a().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>Nu(o,m)).command(()=>Pu(o,m)).run():a().command(()=>{const L=u().wrapInList(m,r),V=$.filter(K=>h.includes(K.type.name));return o.ensureMarks(V),L?!0:c.clearNodes()}).wrapInList(m,r).command(()=>Nu(o,m)).command(()=>Pu(o,m)).run()},mM=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Ai(t,r.schema);return Uf(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},gM=(t,e,n={})=>({state:r,commands:i})=>{const o=Ut(t,r.schema),s=Ut(e,r.schema),l=ll(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},yM=(t,e={})=>({state:n,commands:r})=>{const i=Ut(t,n.schema);return ll(n,i,e)?r.lift(i):r.wrapIn(i,e)},bM=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},vM=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},wM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Ai(t,r.schema),{$from:c,empty:u,ranges:f}=l;if(!i)return!0;if(u&&s){let{from:h,to:m}=l;const g=(o=c.marks().find(x=>x.type===a))===null||o===void 0?void 0:o.attrs,b=qd(c,a,g);b&&(h=b.from,m=b.to),n.removeMark(h,m,a)}else f.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,a)});return n.removeStoredMark(a),!0},SM=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Ic(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Ut(t,r.schema)),l==="mark"&&(s=Ai(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let f,h,m,g;n.selection.empty?r.doc.nodesBetween(c,u,(b,x)=>{o&&o===b.type&&(m=Math.max(x,c),g=Math.min(x+b.nodeSize,u),f=x,h=b)}):r.doc.nodesBetween(c,u,(b,x)=>{x<c&&o&&o===b.type&&(m=Math.max(x,c),g=Math.min(x+b.nodeSize,u),f=x,h=b),x>=c&&x<=u&&(o&&o===b.type&&n.setNodeMarkup(x,void 0,{...b.attrs,...e}),s&&b.marks.length&&b.marks.forEach(O=>{if(s===O.type){const A=Math.max(x,c),N=Math.min(x+b.nodeSize,u);n.addMark(A,N,s.create({...O.attrs,...e}))}}))}),h&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(b=>{s===b.type&&n.addMark(m,g,s.create({...b.attrs,...e}))}))}),!0):!1},xM=(t,e={})=>({state:n,dispatch:r})=>{const i=Ut(t,n.schema);return LA(i,e)(n,r)},kM=(t,e={})=>({state:n,dispatch:r})=>{const i=Ut(t,n.schema);return FA(i,e)(n,r)};var CM=Object.freeze({__proto__:null,blur:a_,clearContent:c_,clearNodes:u_,command:f_,createParagraphNear:d_,cut:h_,deleteCurrentNode:p_,deleteNode:m_,deleteRange:g_,deleteSelection:y_,enter:b_,exitCode:v_,extendMarkRange:w_,first:S_,focus:k_,forEach:C_,insertContent:O_,insertContentAt:A_,joinBackward:N_,joinDown:M_,joinForward:P_,joinItemBackward:I_,joinItemForward:D_,joinTextblockBackward:$_,joinTextblockForward:R_,joinUp:__,keyboardShortcut:L_,lift:F_,liftEmptyBlock:V_,liftListItem:j_,newlineInCode:H_,resetAttributes:z_,scrollIntoView:K_,selectAll:U_,selectNodeBackward:W_,selectNodeForward:q_,selectParentNode:J_,selectTextblockEnd:Y_,selectTextblockStart:G_,setContent:X_,setMark:sM,setMeta:lM,setNode:aM,setNodeSelection:cM,setTextSelection:uM,sinkListItem:fM,splitBlock:dM,splitListItem:hM,toggleList:pM,toggleMark:mM,toggleNode:gM,toggleWrap:yM,undoInputRule:bM,unsetAllMarks:vM,unsetMark:wM,updateAttributes:SM,wrapIn:xM,wrapInList:kM});const OM=En.create({name:"commands",addCommands(){return{...CM}}}),EM=En.create({name:"drop",addProseMirrorPlugins(){return[new Dn({key:new Er("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),TM=En.create({name:"editable",addProseMirrorPlugins(){return[new Dn({key:new Er("editable"),props:{editable:()=>this.editor.options.editable}})]}}),AM=En.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Dn({key:new Er("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),_M=En.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:f}=a,{pos:h,parent:m}=f,g=f.parent.isTextblock&&h>0?l.doc.resolve(h-1):f,b=g.parent.type.spec.isolating,x=f.pos-f.parentOffset,O=b&&g.parent.childCount===1?x===f.pos:qe.atStart(c).from===h;return!u||!m.type.isTextblock||m.textContent.length||!O||O&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Jd()||Hv()?o:i},addProseMirrorPlugins(){return[new Dn({key:new Er("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(b=>b.getMeta("composition")))return;const r=t.some(b=>b.docChanged)&&!e.doc.eq(n.doc),i=t.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=qe.atStart(e.doc).from,c=qe.atEnd(e.doc).to;if(o||!(s===a&&l===c)||!Gd(n.doc))return;const h=n.tr,m=Ac({state:n,transaction:h}),{commands:g}=new _c({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),MM=En.create({name:"paste",addProseMirrorPlugins(){return[new Dn({key:new Er("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),NM=En.create({name:"tabindex",addProseMirrorPlugins(){return[new Dn({key:new Er("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Li{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Li(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Li(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Li(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new Li(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Li(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const PM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function IM(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let DM=class extends WA{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=IM(PM,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=$v(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[TM,l_.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),OM,AM,_M,NM,EM,MM].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Mo(i,this)}createCommandManager(){this.commandManager=new _c({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Kf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Kf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Vv(n,this.options.autofocus);this.view=new gA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:_o.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return nM(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return rM(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ud(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return eM(this.state.doc,{blockSeparator:n,textSerializers:{...Bv(this.schema),...r}})}get isEmpty(){return Gd(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Li(n,this)}get $doc(){return this.$pos(0)}};function Qo(t){return new Nc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ye(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),u=c+s.length;if(Kv(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+a,c);const h=n.from+a+s.length;o.addMark(n.from+a,h,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function $M(t){return new Nc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ye(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>l?u=l:l=u+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,s+r[0].length-1),o.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Wf(t){return new Nc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ye(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function al(t){return new Nc({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ye(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&_d(a,t.type,o);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:m}=t.editor.extensionManager,g=h||f.$to.parentOffset&&f.$from.marks();if(g){const b=g.filter(x=>m.includes(x.type.name));s.ensureMarks(b)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Ei(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}class In{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ye(ke(this,"addOptions",{name:this.name}))),this.storage=Ye(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new In(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Pc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new In(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ye(ke(n,"addOptions",{name:n.name})),n.storage=Ye(ke(n,"addStorage",{name:n.name,options:n.options})),n}}function es(t){return new t_({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ye(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),f=n.from+a.indexOf(l),h=f+l.length;if(Kv(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(x=>x===t.type&&x!==g.mark.type)).filter(g=>g.to>f).length)return null;h<n.to&&s.delete(h,n.to),f>n.from&&s.delete(n.from+u,f),c=n.from+u+l.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function Fm(t){return $w((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class RM extends DM{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=Fm(this.view.state),this.reactiveExtensionStorage=Fm(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),gg(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const BM=Cg({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=rd(),n=mc();return AS(()=>{const r=t.editor;r&&r.options.element&&e.value&&fc(()=>{if(!e.value||!r.options.element.firstChild)return;const i=yn(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:i}),r.createNodeViews()})}),_g(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return Qg("div",{ref:t=>{this.rootEl=t}})}}),LM=/^\s*>\s$/,FM=In.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[al({find:LM,type:this.type})]}}),VM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,jM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,HM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,zM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,KM=xi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Qo({find:VM,type:this.type}),Qo({find:HM,type:this.type})]},addPasteRules(){return[es({find:jM,type:this.type}),es({find:zM,type:this.type})]}}),UM="listItem",Vm="textStyle",jm=/^\s*([-+*])\s$/,WM=In.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",On(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(UM,this.editor.getAttributes(Vm)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=al({find:jm,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=al({find:jm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Vm),editor:this.editor})),[t]}}),qM=/(^|[^`])`([^`]+)`(?!`)/,JM=/(^|[^`])`([^`]+)`(?!`)/g,YM=xi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Qo({find:qM,type:this.type})]},addPasteRules(){return[es({find:JM,type:this.type})]}}),GM=/^```([a-z]+)?[\s\n]$/,XM=/^~~~([a-z]+)?[\s\n]$/,ZM=In.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",On(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(qe.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Wf({find:GM,type:this.type,getAttributes:t=>({language:t[1]})}),Wf({find:XM,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Dn({key:new Er("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(je.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),QM=In.create({name:"doc",topNode:!0,content:"block+"});function eN(t={}){return new Dn({view(e){return new tN(e,t)}})}class tN{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=l?u.bottom:u.top;l&&a&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let l=i.getBoundingClientRect();o=l.left-i.scrollLeft,s=l.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=$b(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const nN=En.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[eN(this.options)]}});class At extends qe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return At.valid(r)?new At(r):qe.near(r)}content(){return be.empty}eq(e){return e instanceof At&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new At(e.resolve(n.pos))}getBookmark(){return new Xd(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!rN(e)||!iN(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&At.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(At.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!Ie.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(At.valid(l))return l}return null}}}At.prototype.visible=!1;At.findFrom=At.findGapCursorFrom;qe.jsonID("gapcursor",At);class Xd{constructor(e){this.pos=e}map(e){return new Xd(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return At.valid(n)?new At(n):qe.near(n)}}function rN(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function iN(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function oN(){return new Dn({props:{decorations:cN,createSelectionBetween(t,e,n){return e.pos==n.pos&&At.valid(n)?new At(n):null},handleClick:lN,handleKeyDown:sN,handleDOMEvents:{beforeinput:aN}}})}const sN=Sv({ArrowLeft:Kl("horiz",-1),ArrowRight:Kl("horiz",1),ArrowUp:Kl("vert",-1),ArrowDown:Kl("vert",1)});function Kl(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof je){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=At.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new At(c))),!0):!1}}function lN(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!At.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ie.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new At(r))),!0)}function aN(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof At))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=te.empty;for(let s=r.length-1;s>=0;s--)i=te.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new be(i,0,0));return o.setSelection(je.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function cN(t){if(!(t.selection instanceof At))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ft.create(t.doc,[Xn.widget(t.selection.head,e,{key:"gapcursor"})])}const uN=En.create({name:"gapCursor",addProseMirrorPlugins(){return[oN()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ye(ke(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),fN=In.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",On(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&s){const f=a.filter(h=>l.includes(h.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),dN=In.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,On(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Wf({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var tc=200,Kt=function(){};Kt.prototype.append=function(e){return e.length?(e=Kt.from(e),!this.length&&e||e.length<tc&&this.leafAppend(e)||this.length<tc&&e.leafPrepend(this)||this.appendInner(e)):this};Kt.prototype.prepend=function(e){return e.length?Kt.from(e).append(this):this};Kt.prototype.appendInner=function(e){return new hN(this,e)};Kt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Kt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Kt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Kt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Kt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Kt.from=function(e){return e instanceof Kt?e:e&&e.length?new Uv(e):Kt.empty};var Uv=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=tc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=tc)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Kt);Kt.empty=new Uv([]);var hN=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Kt);const pN=500;class sr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((f,h)=>{if(!f.step){i||(i=this.remapping(r,h+1),o=i.maps.length),o--,u.push(f);return}if(i){u.push(new mr(f.map));let m=f.step.map(i.slice(o)),g;m&&s.maybeStep(m).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new mr(g,void 0,void 0,c.length+u.length))),o--,g&&i.appendMap(g,o)}else s.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(o)):f.selection,a=new sr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),h=new mr(e.mapping.maps[u],f,n),m;(m=a&&a.merge(h))&&(h=m,u?o.pop():l=l.slice(0,l.length-1)),o.push(h),n&&(s++,n=void 0),i||(a=h)}let c=s-r.depth;return c>gN&&(l=mN(l,c),s-=c),new sr(l.append(o),s)}remapping(e,n){let r=new nl;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new sr(this.items.append(e.map(n=>new mr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(h=>{h.selection&&l--},i);let a=n;this.items.forEach(h=>{let m=o.getMirror(--a);if(m==null)return;s=Math.min(s,m);let g=o.maps[m];if(h.step){let b=e.steps[m].invert(e.docs[m]),x=h.selection&&h.selection.map(o.slice(a+1,m));x&&l++,r.push(new mr(g,b,x))}else r.push(new mr(g))},i);let c=[];for(let h=n;h<s;h++)c.push(new mr(o.maps[h]));let u=this.items.slice(0,i).append(c).append(r),f=new sr(u,l);return f.emptyItemCount()>pN&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let f=new mr(c.invert(),a,u),h,m=i.length-1;(h=i.length&&i[m].merge(f))?i[m]=h:i.push(f)}}else s.map&&r--},this.items.length,0),new sr(Kt.from(i.reverse()),o)}}sr.empty=new sr(Kt.empty,0);function mN(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class mr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new mr(n.getMap().invert(),n,this.selection)}}}class ri{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const gN=20;function yN(t,e,n,r){let i=n.getMeta(Gi),o;if(i)return i.historyState;n.getMeta(wN)&&(t=new ri(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Gi))return s.getMeta(Gi).redo?new ri(t.done.addTransform(n,void 0,r,ga(e)),t.undone,Hm(n.mapping.maps),t.prevTime,t.prevComposition):new ri(t.done,t.undone.addTransform(n,void 0,r,ga(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!bN(n,t.prevRanges)),c=s?Iu(t.prevRanges,n.mapping):Hm(n.mapping.maps);return new ri(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,ga(e)),sr.empty,c,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new ri(t.done.rebased(n,o),t.undone.rebased(n,o),Iu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ri(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Iu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function bN(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Hm(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function Iu(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function vN(t,e,n){let r=ga(e),i=Gi.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new ri(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(Gi,{redo:n,historyState:a})}let Du=!1,zm=null;function ga(t){let e=t.plugins;if(zm!=e){Du=!1,zm=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Du=!0;break}}return Du}const Gi=new Er("history"),wN=new Er("closeHistory");function SN(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Dn({key:Gi,state:{init(){return new ri(sr.empty,sr.empty,null,0,-1)},apply(e,n,r){return yN(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?qv:r=="historyRedo"?Jv:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Wv(t,e){return(n,r)=>{let i=Gi.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=vN(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const qv=Wv(!1,!0),Jv=Wv(!0,!0),xN=En.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>qv(t,e),redo:()=>({state:t,dispatch:e})=>Jv(t,e)}},addProseMirrorPlugins(){return[SN(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),kN=In.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",On(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):iM(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(je.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Ie.create(s.doc,c.pos)):s.setSelection(je.create(s.doc,c.pos));else{const f=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();f&&(s.insert(u,f),s.setSelection(je.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$M({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),CN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ON=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,EN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,TN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,AN=xi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Qo({find:CN,type:this.type}),Qo({find:EN,type:this.type})]},addPasteRules(){return[es({find:ON,type:this.type}),es({find:TN,type:this.type})]}}),_N=In.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",On(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),MN="listItem",Km="textStyle",Um=/^(\d+)\.\s$/,NN=In.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",On(this.options.HTMLAttributes,n),0]:["ol",On(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(MN,this.editor.getAttributes(Km)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=al({find:Um,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=al({find:Um,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Km)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),PN=In.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),IN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,DN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,$N=xi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Qo({find:IN,type:this.type})]},addPasteRules(){return[es({find:DN,type:this.type})]}}),RN=In.create({name:"text",group:"inline"}),BN=En.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,l,a,c,u,f,h,m,g,b,x,O;const A=[];return this.options.bold!==!1&&A.push(KM.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&A.push(FM.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&A.push(WM.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&A.push(YM.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&A.push(ZM.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&A.push(QM.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&A.push(nN.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&A.push(uN.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&A.push(fN.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&A.push(dN.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&A.push(xN.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&A.push(kN.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&A.push(AN.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&A.push(_N.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&A.push(NN.configure((g=this.options)===null||g===void 0?void 0:g.orderedList)),this.options.paragraph!==!1&&A.push(PN.configure((b=this.options)===null||b===void 0?void 0:b.paragraph)),this.options.strike!==!1&&A.push($N.configure((x=this.options)===null||x===void 0?void 0:x.strike)),this.options.text!==!1&&A.push(RN.configure((O=this.options)===null||O===void 0?void 0:O.text)),A}}),LN={components:{EditorContent:BM},props:{content:{type:String,required:!0}},emits:["update:content"],data(){return{editor:null}},methods:{emitContent(){this.$emit("update:content",this.editor.getHTML())}},mounted(){this.editor=new RM({content:this.content,extensions:[BN]}),this.editor.on("update",this.emitContent)},beforeUnmount(){this.editor&&this.editor.destroy()}};function FN(t,e,n,r,i,o){const s=ut("editor-content");return xe(),Mt(s,{class:"editor",editor:i.editor},null,8,["editor"])}const VN=Ot(LN,[["render",FN]]),jN={components:{FileName:ab,TipTap:VN},methods:{handleChange(){this.$root.UpdateRecord("Files",this.myfile.uuid,this.myfile)},updateContent(t){this.myfile.content=t,console.log(t),this.handleChange()}},name:"FileEditor",data(){return{myfile:null}},async mounted(){this.myfile=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Files.get(this.$root.tools.writer.selectednode)))}},HN={style:{"text-align":"center"}};function zN(t,e,n,r,i,o){const s=ut("FileName"),l=ut("TipTap");return xe(),ze(Xt,null,[j("div",HN,[(xe(),Mt(s,{myuuid:t.$root.tools.writer.selectednode,key:t.$root.tools.writer.selectednode,formmode:!0},null,8,["myuuid"]))]),i.myfile?(xe(),Mt(l,{content:i.myfile.content,"onUpdate:content":o.updateContent,key:i.myfile.uuid},null,8,["content","onUpdate:content"])):it("",!0)],64)}const KN=Ot(jN,[["render",zN]]),UN={mounted(t){const e=()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"};t.style.height="auto",t.style.height=t.scrollHeight+"px",t.addEventListener("input",e),window.addEventListener("resize",e),t._onResize=e},updated(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"},unmounted(t){window.removeEventListener("resize",t._onResize)}},Yv=""+new URL("../resources/bookcover.png",import.meta.url).href,WN={props:{myimage:{type:String,default:""}},data(){return{base64Image:this.myimage}},methods:{onFileChange(t){const e=t.target.files[0];if(e){const n=new FileReader;n.onload=r=>{const i=new Image;i.src=r.target.result,i.onload=()=>{const o=document.createElement("canvas"),s=200,l=s/i.width;o.width=s,o.height=i.height*l,o.getContext("2d").drawImage(i,0,0,o.width,o.height),this.base64Image=o.toDataURL("image/jpeg"),this.$emit("image-changed",this.base64Image)}},n.readAsDataURL(e)}},triggerFileUpload(){this.$refs.fileInput.click()}}},qN=["src"];function JN(t,e,n,r,i,o){return xe(),ze("div",null,[j("input",{type:"file",onChange:e[0]||(e[0]=(...s)=>o.onFileChange&&o.onFileChange(...s)),ref:"fileInput",style:{display:"none"}},null,544),i.base64Image?(xe(),ze("img",{key:0,src:i.base64Image,alt:"Image Preview",class:"image-preview",onClick:e[1]||(e[1]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))},null,8,qN)):it("",!0),i.base64Image?it("",!0):(xe(),ze("img",{key:1,src:Yv,alt:"Image Preview",class:"image-preview",onClick:e[2]||(e[2]=(...s)=>o.triggerFileUpload&&o.triggerFileUpload(...s))}))])}const YN=Ot(WN,[["render",JN],["__scopeId","data-v-e0f8ef46"]]),GN={directives:{autosize:UN},components:{ImageUpload:YN},methods:{handleChange(){this.$root.UpdateRecord("Writer",this.$root.tools.writer.selected,this.mybook)},imageChanged(t){this.mybook.cover=t,this.handleChange()}},name:"BookEditor",data(){return{mybook:null}},async mounted(){this.mybook=await this.$root.useObservable(this.$root.liveQuery(async()=>await this.$root.db.Writer.get(this.$root.tools.writer.selected)))}},XN={key:0,class:"infocontainer"},ZN={class:"bookcover"};function QN(t,e,n,r,i,o){const s=ut("ImageUpload"),l=sS("autosize");return i.mybook?(xe(),ze("div",XN,[j("div",ZN,[Ct(s,{myimage:i.mybook.cover,onImageChanged:o.imageChanged},null,8,["myimage","onImageChanged"])]),e[5]||(e[5]=j("label",null,"Book Title",-1)),Ro(j("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.mybook.title=a),onBlur:e[1]||(e[1]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[Lo,i.mybook.title]]),e[6]||(e[6]=j("label",null,"Author",-1)),Ro(j("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>i.mybook.author=a),onBlur:e[3]||(e[3]=(...a)=>o.handleChange&&o.handleChange(...a))},null,544),[[Lo,i.mybook.author]]),e[7]||(e[7]=j("label",null,"Description",-1)),Ro(j("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.mybook.description=a)},null,512),[[l],[Lo,i.mybook.description]])])):it("",!0)}const eP=Ot(GN,[["render",QN],["__scopeId","data-v-f94fd4d6"]]),tP={name:"WriterHome",components:{DocStructure:HO,FileEditor:KN,BookEditor:eP},data(){return{lhshidden:!1,rhshidden:!1}},computed:{displaylist(){return this.$root.syncdb.Writer.sort((t,e)=>new Date(e.lastupdated)-new Date(t.lastupdated))}},methods:{addNewBook(){let t=JSON.parse(JSON.stringify(this.$root.writerTemplate));t.uuid=this.$root.uuid(),this.$root.AddRecord("Writer",t)}}},nP={key:0},rP={class:"writer-home"},iP={class:"gridcard-grid"},oP=["onClick"],sP={class:"book-3d"},lP={class:"book-3d__inner"},aP=["src","alt"],cP=["alt"],uP={key:1};function fP(t,e,n,r,i,o){const s=ut("DocStructure"),l=ut("FileEditor"),a=ut("BookEditor");return xe(),ze(Xt,null,[t.$root.tools.writer.selected?it("",!0):(xe(),ze("div",nP,[j("div",rP,[j("button",{onClick:e[0]||(e[0]=(...c)=>o.addNewBook&&o.addNewBook(...c))},"Add a New Book"),j("div",iP,[(xe(!0),ze(Xt,null,xa(o.displaylist,(c,u)=>(xe(),ze("div",{class:"gridcard",key:u,onClick:f=>t.$root.tools.writer.selected=c.uuid},[j("div",sP,[j("div",lP,[c.cover?(xe(),ze("img",{key:0,src:c.cover,class:"book-3d__cover",alt:c.title},null,8,aP)):(xe(),ze("img",{key:1,class:"book-3d__cover",src:Yv,alt:c.title},null,8,cP))])]),j("h2",null,Rr(c.title),1),j("p",null,"by "+Rr(c.author),1),j("p",null,Rr(c.description),1),j("p",null,Rr(c.lastupdated),1)],8,oP))),128))])])])),t.$root.tools.writer.selected?(xe(),ze("div",uP,[j("div",{class:di(["lhs",{lhshidden:i.lhshidden}])},[j("button",{onClick:e[1]||(e[1]=c=>i.lhshidden=!i.lhshidden),class:"btn lhsbtn"},e[3]||(e[3]=[j("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"menu"),j("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)])),Ct(s)],2),j("div",{class:di(["main",{lhsmain:i.lhshidden,rhsmain:i.rhshidden}])},[t.$root.tools.writer.selectednode?(xe(),Mt(l,{key:t.$root.tools.writer.selectednode})):it("",!0),t.$root.tools.writer.selectednode?it("",!0):(xe(),Mt(a,{key:1}))],2),j("div",{class:di(["rhs",{rhshidden:i.rhshidden}])},[j("button",{onClick:e[2]||(e[2]=c=>i.rhshidden=!i.rhshidden),class:"btn rhsbtn"},e[4]||(e[4]=[j("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[j("title",null,"menu"),j("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"})],-1)]))],2)])):it("",!0)],64)}const dP=Ot(tP,[["render",fP],["__scopeId","data-v-dfb030bb"]]),hP={name:"MindmapHome",components:{},methods:{}};function pP(t,e,n,r,i,o){return xe(),ze("div",null," mindmap ")}const mP=Ot(hP,[["render",pP]]),gP={name:"TimelineHome",components:{},methods:{}},yP={class:"timeline"};function bP(t,e,n,r,i,o){return xe(),ze("div",yP,e[0]||(e[0]=[VS('<ul data-v-65b4eb25><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>January 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>February 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>March 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>April 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>May 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>June 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>July 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>August 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>September 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>October 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>November 2018</h4></div></li><li data-v-65b4eb25><div class="content" data-v-65b4eb25><h3 data-v-65b4eb25>What is Lorem Ipsum?</h3><p data-v-65b4eb25>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </p></div><div class="time" data-v-65b4eb25><h4 data-v-65b4eb25>December 2018</h4></div></li><div style="clear:both;" data-v-65b4eb25></div></ul>',1)]))}const vP=Ot(gP,[["render",bP],["__scopeId","data-v-65b4eb25"]]),wP={name:"SnowflakeHome",components:{},methods:{}};function SP(t,e,n,r,i,o){return xe(),ze("div",null," Snowflake ")}const xP=Ot(wP,[["render",SP]]),kP={name:"GridplannerHome",components:{},methods:{}};function CP(t,e,n,r,i,o){return xe(),ze("div",null," Gridplanner ")}const OP=Ot(kP,[["render",CP]]),EP={name:"CardsdatabaseHome",components:{},methods:{}};function TP(t,e,n,r,i,o){return xe(),ze("div",null," Cardsdatabase ")}const AP=Ot(EP,[["render",TP]]),_P={name:"App Home",components:{ProjectHome:NC,WriterHome:dP,MindmapHome:mP,TimelineHome:vP,SnowflakeHome:xP,GridplannerHome:OP,CardsdatabaseHome:AP},data(){return{}}};function MP(t,e,n,r,i,o){const s=ut("ProjectHome"),l=ut("WriterHome"),a=ut("MindmapHome"),c=ut("TimelineHome"),u=ut("SnowflakeHome"),f=ut("GridplannerHome"),h=ut("CardsdatabaseHome");return xe(),ze(Xt,null,[t.$root.currentTool?it("",!0):(xe(),Mt(s,{key:0})),t.$root.currentTool==="writer"?(xe(),Mt(l,{key:1})):it("",!0),t.$root.currentTool==="mindmap"?(xe(),Mt(a,{key:2})):it("",!0),t.$root.currentTool==="timeline"?(xe(),Mt(c,{key:3})):it("",!0),t.$root.currentTool==="snowflake"?(xe(),Mt(u,{key:4})):it("",!0),t.$root.currentTool==="gridplanner"?(xe(),Mt(f,{key:5})):it("",!0),t.$root.currentTool==="cardsdatabase"?(xe(),Mt(h,{key:6})):it("",!0)],64)}const NP=Ot(_P,[["render",MP]]),PP={mixins:[Dk,$k,Rk,Bk],components:{TopToolbar:Yk,InstallPopup:rC,FooterBar:Qk,ApplicationSections:NP,Welcome:uC},data(){return{currentTool:null,FileManager:{fileHandle:null,jsonData:null},tools:{current:null,writer:{selected:null,selectednode:null,mybook:null},gridplanner:{selected:null},timeline:{selected:null},snowflake:{selected:null},mindmap:{selected:null},planningboard:{selected:null}}}},created(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(t=>{t.onupdatefound=()=>{const e=t.installing;e&&(e.onstatechange=()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("A new version of the app is available. Would you like to update?")&&window.location.reload()})}})},methods:{}},IP={id:"app"};function DP(t,e,n,r,i,o){const s=ut("TopToolbar"),l=ut("Welcome"),a=ut("ApplicationSections"),c=ut("FooterBar"),u=ut("InstallPopup");return xe(),ze(Xt,null,[j("div",IP,[t.$root.mainwindow?(xe(),Mt(s,{key:0})):it("",!0),j("div",{class:di(["container",{mainwindow:t.$root.mainwindow}])},[t.$root.dbRef?(xe(),Mt(a,{key:1})):(xe(),Mt(l,{key:0}))],2),t.$root.mainwindow?(xe(),Mt(c,{key:1})):it("",!0)]),Ct(u)],64)}const $P=Ot(PP,[["render",DP]]);var Yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gv={exports:{}};/*!
* sweetalert2 v11.4.4
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(Yr,function(){const n="SweetAlert2:",r=d=>{const p=[];for(let v=0;v<d.length;v++)p.indexOf(d[v])===-1&&p.push(d[v]);return p},i=d=>d.charAt(0).toUpperCase()+d.slice(1),o=d=>Array.prototype.slice.call(d),s=d=>{console.warn("".concat(n," ").concat(typeof d=="object"?d.join(" "):d))},l=d=>{console.error("".concat(n," ").concat(d))},a=[],c=d=>{a.includes(d)||(a.push(d),s(d))},u=(d,p)=>{c('"'.concat(d,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},f=d=>typeof d=="function"?d():d,h=d=>d&&typeof d.toPromise=="function",m=d=>h(d)?d.toPromise():Promise.resolve(d),g=d=>d&&Promise.resolve(d)===d,b={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},x=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],O={},A=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],N=d=>Object.prototype.hasOwnProperty.call(b,d),$=d=>x.indexOf(d)!==-1,I=d=>O[d],L=d=>{N(d)||s('Unknown parameter "'.concat(d,'"'))},V=d=>{A.includes(d)&&s('The parameter "'.concat(d,'" is incompatible with toasts'))},K=d=>{I(d)&&u(d,I(d))},E=d=>{!d.backdrop&&d.allowOutsideClick&&s('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const p in d)L(p),d.toast&&V(p),K(p)},S="swal2-",F=d=>{const p={};for(const v in d)p[d[v]]=S+d[v];return p},C=F(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),ce=F(["success","warning","info","question","error"]),Z=()=>document.body.querySelector(".".concat(C.container)),Se=d=>{const p=Z();return p?p.querySelector(d):null},ge=d=>Se(".".concat(d)),Q=()=>ge(C.popup),Te=()=>ge(C.icon),Ze=()=>ge(C.title),Ke=()=>ge(C["html-container"]),tt=()=>ge(C.image),ft=()=>ge(C["progress-steps"]),Bt=()=>ge(C["validation-message"]),Ae=()=>Se(".".concat(C.actions," .").concat(C.confirm)),Qe=()=>Se(".".concat(C.actions," .").concat(C.deny)),Et=()=>ge(C["input-label"]),H=()=>Se(".".concat(C.loader)),z=()=>Se(".".concat(C.actions," .").concat(C.cancel)),q=()=>ge(C.actions),W=()=>ge(C.footer),le=()=>ge(C["timer-progress-bar"]),T=()=>ge(C.close),M=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,R=()=>{const d=o(Q().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((v,_)=>{const oe=parseInt(v.getAttribute("tabindex")),Me=parseInt(_.getAttribute("tabindex"));return oe>Me?1:oe<Me?-1:0}),p=o(Q().querySelectorAll(M)).filter(v=>v.getAttribute("tabindex")!=="-1");return r(d.concat(p)).filter(v=>D(v))},B=()=>X(document.body,C.shown)&&!X(document.body,C["toast-shown"])&&!X(document.body,C["no-backdrop"]),U=()=>Q()&&X(Q(),C.toast),J=()=>Q().hasAttribute("data-loading"),re={previousBodyPadding:null},Y=(d,p)=>{if(d.textContent="",p){const v=new DOMParser().parseFromString(p,"text/html");o(v.querySelector("head").childNodes).forEach(_=>{d.appendChild(_)}),o(v.querySelector("body").childNodes).forEach(_=>{d.appendChild(_)})}},X=(d,p)=>{if(!p)return!1;const v=p.split(/\s+/);for(let _=0;_<v.length;_++)if(!d.classList.contains(v[_]))return!1;return!0},G=(d,p)=>{o(d.classList).forEach(v=>{!Object.values(C).includes(v)&&!Object.values(ce).includes(v)&&!Object.values(p.showClass).includes(v)&&d.classList.remove(v)})},pe=(d,p,v)=>{if(G(d,p),p.customClass&&p.customClass[v]){if(typeof p.customClass[v]!="string"&&!p.customClass[v].forEach)return s("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(typeof p.customClass[v],'"'));ee(d,p.customClass[v])}},se=(d,p)=>{if(!p)return null;switch(p){case"select":case"textarea":case"file":return d.querySelector(".".concat(C.popup," > .").concat(C[p]));case"checkbox":return d.querySelector(".".concat(C.popup," > .").concat(C.checkbox," input"));case"radio":return d.querySelector(".".concat(C.popup," > .").concat(C.radio," input:checked"))||d.querySelector(".".concat(C.popup," > .").concat(C.radio," input:first-child"));case"range":return d.querySelector(".".concat(C.popup," > .").concat(C.range," input"));default:return d.querySelector(".".concat(C.popup," > .").concat(C.input))}},fe=d=>{if(d.focus(),d.type!=="file"){const p=d.value;d.value="",d.value=p}},de=(d,p,v)=>{!d||!p||(typeof p=="string"&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(_=>{Array.isArray(d)?d.forEach(oe=>{v?oe.classList.add(_):oe.classList.remove(_)}):v?d.classList.add(_):d.classList.remove(_)}))},ee=(d,p)=>{de(d,p,!0)},we=(d,p)=>{de(d,p,!1)},Ee=(d,p)=>{const v=o(d.childNodes);for(let _=0;_<v.length;_++)if(X(v[_],p))return v[_]},he=(d,p,v)=>{v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?d.style[p]=typeof v=="number"?"".concat(v,"px"):v:d.style.removeProperty(p)},w=function(d){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d.style.display=p},y=d=>{d.style.display="none"},k=(d,p,v,_)=>{const oe=d.querySelector(p);oe&&(oe.style[v]=_)},P=(d,p,v)=>{p?w(d,v):y(d)},D=d=>!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length)),ne=()=>!D(Ae())&&!D(Qe())&&!D(z()),ie=d=>d.scrollHeight>d.clientHeight,Ce=d=>{const p=window.getComputedStyle(d),v=parseFloat(p.getPropertyValue("animation-duration")||"0"),_=parseFloat(p.getPropertyValue("transition-duration")||"0");return v>0||_>0},ye=function(d){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const v=le();D(v)&&(p&&(v.style.transition="none",v.style.width="100%"),setTimeout(()=>{v.style.transition="width ".concat(d/1e3,"s linear"),v.style.width="0%"},10))},De=()=>{const d=le(),p=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";const v=parseInt(window.getComputedStyle(d).width),_=p/v*100;d.style.removeProperty("transition"),d.style.width="".concat(_,"%")},Je=()=>typeof window>"u"||typeof document>"u",Ge=100,me={},nt=()=>{me.previousActiveElement&&me.previousActiveElement.focus?(me.previousActiveElement.focus(),me.previousActiveElement=null):document.body&&document.body.focus()},et=d=>new Promise(p=>{if(!d)return p();const v=window.scrollX,_=window.scrollY;me.restoreFocusTimeout=setTimeout(()=>{nt(),p()},Ge),window.scrollTo(v,_)}),dt=`
 <div aria-labelledby="`.concat(C.title,'" aria-describedby="').concat(C["html-container"],'" class="').concat(C.popup,`" tabindex="-1">
   <button type="button" class="`).concat(C.close,`"></button>
   <ul class="`).concat(C["progress-steps"],`"></ul>
   <div class="`).concat(C.icon,`"></div>
   <img class="`).concat(C.image,`" />
   <h2 class="`).concat(C.title,'" id="').concat(C.title,`"></h2>
   <div class="`).concat(C["html-container"],'" id="').concat(C["html-container"],`"></div>
   <input class="`).concat(C.input,`" />
   <input type="file" class="`).concat(C.file,`" />
   <div class="`).concat(C.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(C.select,`"></select>
   <div class="`).concat(C.radio,`"></div>
   <label for="`).concat(C.checkbox,'" class="').concat(C.checkbox,`">
     <input type="checkbox" />
     <span class="`).concat(C.label,`"></span>
   </label>
   <textarea class="`).concat(C.textarea,`"></textarea>
   <div class="`).concat(C["validation-message"],'" id="').concat(C["validation-message"],`"></div>
   <div class="`).concat(C.actions,`">
     <div class="`).concat(C.loader,`"></div>
     <button type="button" class="`).concat(C.confirm,`"></button>
     <button type="button" class="`).concat(C.deny,`"></button>
     <button type="button" class="`).concat(C.cancel,`"></button>
   </div>
   <div class="`).concat(C.footer,`"></div>
   <div class="`).concat(C["timer-progress-bar-container"],`">
     <div class="`).concat(C["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),ht=()=>{const d=Z();return d?(d.remove(),we([document.documentElement,document.body],[C["no-backdrop"],C["toast-shown"],C["has-column"]]),!0):!1},Re=()=>{me.currentInstance.resetValidationMessage()},Lt=()=>{const d=Q(),p=Ee(d,C.input),v=Ee(d,C.file),_=d.querySelector(".".concat(C.range," input")),oe=d.querySelector(".".concat(C.range," output")),Me=Ee(d,C.select),_t=d.querySelector(".".concat(C.checkbox," input")),Bn=Ee(d,C.textarea);p.oninput=Re,v.onchange=Re,Me.onchange=Re,_t.onchange=Re,Bn.oninput=Re,_.oninput=()=>{Re(),oe.value=_.value},_.onchange=()=>{Re(),_.nextSibling.value=_.value}},Oe=d=>typeof d=="string"?document.querySelector(d):d,ue=d=>{const p=Q();p.setAttribute("role",d.toast?"alert":"dialog"),p.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||p.setAttribute("aria-modal","true")},Ne=d=>{window.getComputedStyle(d).direction==="rtl"&&ee(Z(),C.rtl)},_e=d=>{const p=ht();if(Je()){l("SweetAlert2 requires document to initialize");return}const v=document.createElement("div");v.className=C.container,p&&ee(v,C["no-transition"]),Y(v,dt);const _=Oe(d.target);_.appendChild(v),ue(d),Ne(_),Lt()},$e=(d,p)=>{d instanceof HTMLElement?p.appendChild(d):typeof d=="object"?Xe(d,p):d&&Y(p,d)},Xe=(d,p)=>{d.jquery?dn(p,d):Y(p,d.toString())},dn=(d,p)=>{if(d.textContent="",0 in p)for(let v=0;v in p;v++)d.appendChild(p[v].cloneNode(!0));else d.appendChild(p.cloneNode(!0))},pt=(()=>{if(Je())return!1;const d=document.createElement("div"),p={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&typeof d.style[v]<"u")return p[v];return!1})(),tn=()=>{const d=document.createElement("div");d.className=C["scrollbar-measure"],document.body.appendChild(d);const p=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),p},Tn=(d,p)=>{const v=q(),_=H();!p.showConfirmButton&&!p.showDenyButton&&!p.showCancelButton?y(v):w(v),pe(v,p,"actions"),lt(v,_,p),Y(_,p.loaderHtml),pe(_,p,"loader")};function lt(d,p,v){const _=Ae(),oe=Qe(),Me=z();ct(_,"confirm",v),ct(oe,"deny",v),ct(Me,"cancel",v),An(_,oe,Me,v),v.reverseButtons&&(v.toast?(d.insertBefore(Me,_),d.insertBefore(oe,_)):(d.insertBefore(Me,p),d.insertBefore(oe,p),d.insertBefore(_,p)))}function An(d,p,v,_){if(!_.buttonsStyling)return we([d,p,v],C.styled);ee([d,p,v],C.styled),_.confirmButtonColor&&(d.style.backgroundColor=_.confirmButtonColor,ee(d,C["default-outline"])),_.denyButtonColor&&(p.style.backgroundColor=_.denyButtonColor,ee(p,C["default-outline"])),_.cancelButtonColor&&(v.style.backgroundColor=_.cancelButtonColor,ee(v,C["default-outline"]))}function ct(d,p,v){P(d,v["show".concat(i(p),"Button")],"inline-block"),Y(d,v["".concat(p,"ButtonText")]),d.setAttribute("aria-label",v["".concat(p,"ButtonAriaLabel")]),d.className=C[p],pe(d,v,"".concat(p,"Button")),ee(d,v["".concat(p,"ButtonClass")])}function hn(d,p){typeof p=="string"?d.style.background=p:p||ee([document.documentElement,document.body],C["no-backdrop"])}function Wt(d,p){p in C?ee(d,C[p]):(s('The "position" parameter is not valid, defaulting to "center"'),ee(d,C.center))}function $n(d,p){if(p&&typeof p=="string"){const v="grow-".concat(p);v in C&&ee(d,C[v])}}const Rn=(d,p)=>{const v=Z();v&&(hn(v,p.backdrop),Wt(v,p.position),$n(v,p.grow),pe(v,p,"container"))};var Ue={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const lo=["input","file","range","select","radio","checkbox","textarea"],Jr=(d,p)=>{const v=Q(),_=Ue.innerParams.get(d),oe=!_||p.input!==_.input;lo.forEach(Me=>{const _t=C[Me],Bn=Ee(v,_t);qt(Me,p.inputAttributes),Bn.className=_t,oe&&y(Bn)}),p.input&&(oe&&is(p),tr(p))},is=d=>{if(!_n[d.input])return l('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(d.input,'"'));const p=Zd(d.input),v=_n[d.input](p,d);w(v),setTimeout(()=>{fe(v)})},fr=d=>{for(let p=0;p<d.attributes.length;p++){const v=d.attributes[p].name;["type","value","style"].includes(v)||d.removeAttribute(v)}},qt=(d,p)=>{const v=se(Q(),d);if(v){fr(v);for(const _ in p)v.setAttribute(_,p[_])}},tr=d=>{const p=Zd(d.input);d.customClass&&ee(p,d.customClass.input)},nr=(d,p)=>{(!d.placeholder||p.inputPlaceholder)&&(d.placeholder=p.inputPlaceholder)},dr=(d,p,v)=>{if(v.inputLabel){d.id=C.input;const _=document.createElement("label"),oe=C["input-label"];_.setAttribute("for",d.id),_.className=oe,ee(_,v.customClass.inputLabel),_.innerText=v.inputLabel,p.insertAdjacentElement("beforebegin",_)}},Zd=d=>{const p=C[d]?C[d]:C.input;return Ee(Q(),p)},_n={};_n.text=_n.email=_n.password=_n.number=_n.tel=_n.url=(d,p)=>(typeof p.inputValue=="string"||typeof p.inputValue=="number"?d.value=p.inputValue:g(p.inputValue)||s('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof p.inputValue,'"')),dr(d,d,p),nr(d,p),d.type=p.input,d),_n.file=(d,p)=>(dr(d,d,p),nr(d,p),d),_n.range=(d,p)=>{const v=d.querySelector("input"),_=d.querySelector("output");return v.value=p.inputValue,v.type=p.input,_.value=p.inputValue,dr(v,d,p),d},_n.select=(d,p)=>{if(d.textContent="",p.inputPlaceholder){const v=document.createElement("option");Y(v,p.inputPlaceholder),v.value="",v.disabled=!0,v.selected=!0,d.appendChild(v)}return dr(d,d,p),d},_n.radio=d=>(d.textContent="",d),_n.checkbox=(d,p)=>{const v=se(Q(),"checkbox");v.value="1",v.id=C.checkbox,v.checked=!!p.inputValue;const _=d.querySelector("span");return Y(_,p.inputPlaceholder),d},_n.textarea=(d,p)=>{d.value=p.inputValue,nr(d,p),dr(d,d,p);const v=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const _=parseInt(window.getComputedStyle(Q()).width),oe=()=>{const Me=d.offsetWidth+v(d);Me>_?Q().style.width="".concat(Me,"px"):Q().style.width=null};new MutationObserver(oe).observe(d,{attributes:!0,attributeFilter:["style"]})}}),d};const Zv=(d,p)=>{const v=Ke();pe(v,p,"htmlContainer"),p.html?($e(p.html,v),w(v,"block")):p.text?(v.textContent=p.text,w(v,"block")):y(v),Jr(d,p)},Qv=(d,p)=>{const v=W();P(v,p.footer),p.footer&&$e(p.footer,v),pe(v,p,"footer")},e0=(d,p)=>{const v=T();Y(v,p.closeButtonHtml),pe(v,p,"closeButton"),P(v,p.showCloseButton),v.setAttribute("aria-label",p.closeButtonAriaLabel)},t0=(d,p)=>{const v=Ue.innerParams.get(d),_=Te();if(v&&p.icon===v.icon){eh(_,p),Qd(_,p);return}if(!p.icon&&!p.iconHtml)return y(_);if(p.icon&&Object.keys(ce).indexOf(p.icon)===-1)return l('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),y(_);w(_),eh(_,p),Qd(_,p),ee(_,p.showClass.icon)},Qd=(d,p)=>{for(const v in ce)p.icon!==v&&we(d,ce[v]);ee(d,ce[p.icon]),o0(d,p),n0(),pe(d,p,"icon")},n0=()=>{const d=Q(),p=window.getComputedStyle(d).getPropertyValue("background-color"),v=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<v.length;_++)v[_].style.backgroundColor=p},r0=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,i0=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,eh=(d,p)=>{d.textContent="",p.iconHtml?Y(d,th(p.iconHtml)):p.icon==="success"?Y(d,r0):p.icon==="error"?Y(d,i0):Y(d,th({question:"?",warning:"!",info:"i"}[p.icon]))},o0=(d,p)=>{if(p.iconColor){d.style.color=p.iconColor,d.style.borderColor=p.iconColor;for(const v of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])k(d,v,"backgroundColor",p.iconColor);k(d,".swal2-success-ring","borderColor",p.iconColor)}},th=d=>'<div class="'.concat(C["icon-content"],'">').concat(d,"</div>"),s0=(d,p)=>{const v=tt();if(!p.imageUrl)return y(v);w(v,""),v.setAttribute("src",p.imageUrl),v.setAttribute("alt",p.imageAlt),he(v,"width",p.imageWidth),he(v,"height",p.imageHeight),v.className=C.image,pe(v,p,"image")},l0=d=>{const p=document.createElement("li");return ee(p,C["progress-step"]),Y(p,d),p},a0=d=>{const p=document.createElement("li");return ee(p,C["progress-step-line"]),d.progressStepsDistance&&(p.style.width=d.progressStepsDistance),p},c0=(d,p)=>{const v=ft();if(!p.progressSteps||p.progressSteps.length===0)return y(v);w(v),v.textContent="",p.currentProgressStep>=p.progressSteps.length&&s("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),p.progressSteps.forEach((_,oe)=>{const Me=l0(_);if(v.appendChild(Me),oe===p.currentProgressStep&&ee(Me,C["active-progress-step"]),oe!==p.progressSteps.length-1){const _t=a0(p);v.appendChild(_t)}})},u0=(d,p)=>{const v=Ze();P(v,p.title||p.titleText,"block"),p.title&&$e(p.title,v),p.titleText&&(v.innerText=p.titleText),pe(v,p,"title")},f0=(d,p)=>{const v=Z(),_=Q();p.toast?(he(v,"width",p.width),_.style.width="100%",_.insertBefore(H(),Te())):he(_,"width",p.width),he(_,"padding",p.padding),p.color&&(_.style.color=p.color),p.background&&(_.style.background=p.background),y(Bt()),d0(_,p)},d0=(d,p)=>{d.className="".concat(C.popup," ").concat(D(d)?p.showClass.popup:""),p.toast?(ee([document.documentElement,document.body],C["toast-shown"]),ee(d,C.toast)):ee(d,C.modal),pe(d,p,"popup"),typeof p.customClass=="string"&&ee(d,p.customClass),p.icon&&ee(d,C["icon-".concat(p.icon)])},nh=(d,p)=>{f0(d,p),Rn(d,p),c0(d,p),t0(d,p),s0(d,p),u0(d,p),e0(d,p),Zv(d,p),Tn(d,p),Qv(d,p),typeof p.didRender=="function"&&p.didRender(Q())},ao=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),h0=()=>{o(document.body.children).forEach(d=>{d===Z()||d.contains(Z())||(d.hasAttribute("aria-hidden")&&d.setAttribute("data-previous-aria-hidden",d.getAttribute("aria-hidden")),d.setAttribute("aria-hidden","true"))})},rh=()=>{o(document.body.children).forEach(d=>{d.hasAttribute("data-previous-aria-hidden")?(d.setAttribute("aria-hidden",d.getAttribute("data-previous-aria-hidden")),d.removeAttribute("data-previous-aria-hidden")):d.removeAttribute("aria-hidden")})},ih=["swal-title","swal-html","swal-footer"],p0=d=>{const p=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!p)return{};const v=p.content;return S0(v),Object.assign(m0(v),g0(v),y0(v),b0(v),v0(v),w0(v,ih))},m0=d=>{const p={};return o(d.querySelectorAll("swal-param")).forEach(v=>{_i(v,["name","value"]);const _=v.getAttribute("name"),oe=v.getAttribute("value");typeof b[_]=="boolean"&&oe==="false"&&(p[_]=!1),typeof b[_]=="object"&&(p[_]=JSON.parse(oe))}),p},g0=d=>{const p={};return o(d.querySelectorAll("swal-button")).forEach(v=>{_i(v,["type","color","aria-label"]);const _=v.getAttribute("type");p["".concat(_,"ButtonText")]=v.innerHTML,p["show".concat(i(_),"Button")]=!0,v.hasAttribute("color")&&(p["".concat(_,"ButtonColor")]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(p["".concat(_,"ButtonAriaLabel")]=v.getAttribute("aria-label"))}),p},y0=d=>{const p={},v=d.querySelector("swal-image");return v&&(_i(v,["src","width","height","alt"]),v.hasAttribute("src")&&(p.imageUrl=v.getAttribute("src")),v.hasAttribute("width")&&(p.imageWidth=v.getAttribute("width")),v.hasAttribute("height")&&(p.imageHeight=v.getAttribute("height")),v.hasAttribute("alt")&&(p.imageAlt=v.getAttribute("alt"))),p},b0=d=>{const p={},v=d.querySelector("swal-icon");return v&&(_i(v,["type","color"]),v.hasAttribute("type")&&(p.icon=v.getAttribute("type")),v.hasAttribute("color")&&(p.iconColor=v.getAttribute("color")),p.iconHtml=v.innerHTML),p},v0=d=>{const p={},v=d.querySelector("swal-input");v&&(_i(v,["type","label","placeholder","value"]),p.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(p.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(p.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(p.inputValue=v.getAttribute("value")));const _=d.querySelectorAll("swal-input-option");return _.length&&(p.inputOptions={},o(_).forEach(oe=>{_i(oe,["value"]);const Me=oe.getAttribute("value"),_t=oe.innerHTML;p.inputOptions[Me]=_t})),p},w0=(d,p)=>{const v={};for(const _ in p){const oe=p[_],Me=d.querySelector(oe);Me&&(_i(Me,[]),v[oe.replace(/^swal-/,"")]=Me.innerHTML.trim())}return v},S0=d=>{const p=ih.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);o(d.children).forEach(v=>{const _=v.tagName.toLowerCase();p.indexOf(_)===-1&&s("Unrecognized element <".concat(_,">"))})},_i=(d,p)=>{o(d.attributes).forEach(v=>{p.indexOf(v.name)===-1&&s(['Unrecognized attribute "'.concat(v.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})};var oh={email:(d,p)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(d)?Promise.resolve():Promise.resolve(p||"Invalid email address"),url:(d,p)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(p||"Invalid URL")};function x0(d){d.inputValidator||Object.keys(oh).forEach(p=>{d.input===p&&(d.inputValidator=oh[p])})}function k0(d){(!d.target||typeof d.target=="string"&&!document.querySelector(d.target)||typeof d.target!="string"&&!d.target.appendChild)&&(s('Target parameter is not valid, defaulting to "body"'),d.target="body")}function C0(d){x0(d),d.showLoaderOnConfirm&&!d.preConfirm&&s(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),k0(d),typeof d.title=="string"&&(d.title=d.title.split(`
`).join("<br />")),_e(d)}class O0{constructor(p,v){this.callback=p,this.remaining=v,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(p){const v=this.running;return v&&this.stop(),this.remaining+=p,v&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const E0=()=>{re.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(re.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(re.previousBodyPadding+tn(),"px"))},T0=()=>{re.previousBodyPadding!==null&&(document.body.style.paddingRight="".concat(re.previousBodyPadding,"px"),re.previousBodyPadding=null)},A0=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!X(document.body,C.iosfix)){const d=document.body.scrollTop;document.body.style.top="".concat(d*-1,"px"),ee(document.body,C.iosfix),M0(),_0()}},_0=()=>{const d=navigator.userAgent,p=!!d.match(/iPad/i)||!!d.match(/iPhone/i),v=!!d.match(/WebKit/i);p&&v&&!d.match(/CriOS/i)&&Q().scrollHeight>window.innerHeight-44&&(Z().style.paddingBottom="".concat(44,"px"))},M0=()=>{const d=Z();let p;d.ontouchstart=v=>{p=N0(v)},d.ontouchmove=v=>{p&&(v.preventDefault(),v.stopPropagation())}},N0=d=>{const p=d.target,v=Z();return P0(d)||I0(d)?!1:p===v||!ie(v)&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!(ie(Ke())&&Ke().contains(p))},P0=d=>d.touches&&d.touches.length&&d.touches[0].touchType==="stylus",I0=d=>d.touches&&d.touches.length>1,D0=()=>{if(X(document.body,C.iosfix)){const d=parseInt(document.body.style.top,10);we(document.body,C.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},sh=10,$0=d=>{const p=Z(),v=Q();typeof d.willOpen=="function"&&d.willOpen(v);const _=window.getComputedStyle(document.body).overflowY;L0(p,v,d),setTimeout(()=>{R0(p,v)},sh),B()&&(B0(p,d.scrollbarPadding,_),h0()),!U()&&!me.previousActiveElement&&(me.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(()=>d.didOpen(v)),we(p,C["no-transition"])},lh=d=>{const p=Q();if(d.target!==p)return;const v=Z();p.removeEventListener(pt,lh),v.style.overflowY="auto"},R0=(d,p)=>{pt&&Ce(p)?(d.style.overflowY="hidden",p.addEventListener(pt,lh)):d.style.overflowY="auto"},B0=(d,p,v)=>{A0(),p&&v!=="hidden"&&E0(),setTimeout(()=>{d.scrollTop=0})},L0=(d,p,v)=>{ee(d,v.showClass.backdrop),p.style.setProperty("opacity","0","important"),w(p,"grid"),setTimeout(()=>{ee(p,v.showClass.popup),p.style.removeProperty("opacity")},sh),ee([document.documentElement,document.body],C.shown),v.heightAuto&&v.backdrop&&!v.toast&&ee([document.documentElement,document.body],C["height-auto"])},co=d=>{let p=Q();p||new Sl,p=Q();const v=H();U()?y(Te()):F0(p,d),w(v),p.setAttribute("data-loading",!0),p.setAttribute("aria-busy",!0),p.focus()},F0=(d,p)=>{const v=q(),_=H();!p&&D(Ae())&&(p=Ae()),w(v),p&&(y(p),_.setAttribute("data-button-to-replace",p.className)),_.parentNode.insertBefore(_,p),ee([d,v],C.loading)},V0=(d,p)=>{p.input==="select"||p.input==="radio"?U0(d,p):["text","email","number","tel","textarea"].includes(p.input)&&(h(p.inputValue)||g(p.inputValue))&&(co(Ae()),W0(d,p))},j0=(d,p)=>{const v=d.getInput();if(!v)return null;switch(p.input){case"checkbox":return H0(v);case"radio":return z0(v);case"file":return K0(v);default:return p.inputAutoTrim?v.value.trim():v.value}},H0=d=>d.checked?1:0,z0=d=>d.checked?d.value:null,K0=d=>d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null,U0=(d,p)=>{const v=Q(),_=oe=>q0[p.input](v,Dc(oe),p);h(p.inputOptions)||g(p.inputOptions)?(co(Ae()),m(p.inputOptions).then(oe=>{d.hideLoading(),_(oe)})):typeof p.inputOptions=="object"?_(p.inputOptions):l("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof p.inputOptions))},W0=(d,p)=>{const v=d.getInput();y(v),m(p.inputValue).then(_=>{v.value=p.input==="number"?parseFloat(_)||0:"".concat(_),w(v),v.focus(),d.hideLoading()}).catch(_=>{l("Error in inputValue promise: ".concat(_)),v.value="",w(v),v.focus(),d.hideLoading()})},q0={select:(d,p,v)=>{const _=Ee(d,C.select),oe=(Me,_t,Bn)=>{const pn=document.createElement("option");pn.value=Bn,Y(pn,_t),pn.selected=ah(Bn,v.inputValue),Me.appendChild(pn)};p.forEach(Me=>{const _t=Me[0],Bn=Me[1];if(Array.isArray(Bn)){const pn=document.createElement("optgroup");pn.label=_t,pn.disabled=!1,_.appendChild(pn),Bn.forEach(fo=>oe(pn,fo[1],fo[0]))}else oe(_,Bn,_t)}),_.focus()},radio:(d,p,v)=>{const _=Ee(d,C.radio);p.forEach(Me=>{const _t=Me[0],Bn=Me[1],pn=document.createElement("input"),fo=document.createElement("label");pn.type="radio",pn.name=C.radio,pn.value=_t,ah(_t,v.inputValue)&&(pn.checked=!0);const jc=document.createElement("span");Y(jc,Bn),jc.className=C.label,fo.appendChild(pn),fo.appendChild(jc),_.appendChild(fo)});const oe=_.querySelectorAll("input");oe.length&&oe[0].focus()}},Dc=d=>{const p=[];return typeof Map<"u"&&d instanceof Map?d.forEach((v,_)=>{let oe=v;typeof oe=="object"&&(oe=Dc(oe)),p.push([_,oe])}):Object.keys(d).forEach(v=>{let _=d[v];typeof _=="object"&&(_=Dc(_)),p.push([v,_])}),p},ah=(d,p)=>p&&p.toString()===d.toString();function ch(){const d=Ue.innerParams.get(this);if(!d)return;const p=Ue.domCache.get(this);y(p.loader),U()?d.icon&&w(Te()):J0(p),we([p.popup,p.actions],C.loading),p.popup.removeAttribute("aria-busy"),p.popup.removeAttribute("data-loading"),p.confirmButton.disabled=!1,p.denyButton.disabled=!1,p.cancelButton.disabled=!1}const J0=d=>{const p=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));p.length?w(p[0],"inline-block"):ne()&&y(d.actions)};function Y0(d){const p=Ue.innerParams.get(d||this),v=Ue.domCache.get(d||this);return v?se(v.popup,p.input):null}var ss={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function uh(d,p,v,_){U()?fh(d,_):(et(v).then(()=>fh(d,_)),me.keydownTarget.removeEventListener("keydown",me.keydownHandler,{capture:me.keydownListenerCapture}),me.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(p.setAttribute("style","display:none !important"),p.removeAttribute("class"),p.innerHTML=""):p.remove(),B()&&(T0(),D0(),rh()),G0()}function G0(){we([document.documentElement,document.body],[C.shown,C["height-auto"],C["no-backdrop"],C["toast-shown"]])}function vl(d){d=e1(d);const p=ss.swalPromiseResolve.get(this),v=Z0(this);this.isAwaitingPromise()?d.isDismissed||(ls(this),p(d)):v&&p(d)}function X0(){return!!Ue.awaitingPromise.get(this)}const Z0=d=>{const p=Q();if(!p)return!1;const v=Ue.innerParams.get(d);if(!v||X(p,v.hideClass.popup))return!1;we(p,v.showClass.popup),ee(p,v.hideClass.popup);const _=Z();return we(_,v.showClass.backdrop),ee(_,v.hideClass.backdrop),t1(d,p,v),!0};function Q0(d){const p=ss.swalPromiseReject.get(this);ls(this),p&&p(d)}const ls=d=>{d.isAwaitingPromise()&&(Ue.awaitingPromise.delete(d),Ue.innerParams.get(d)||d._destroy())},e1=d=>typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d),t1=(d,p,v)=>{const _=Z(),oe=pt&&Ce(p);typeof v.willClose=="function"&&v.willClose(p),oe?n1(d,p,_,v.returnFocus,v.didClose):uh(d,_,v.returnFocus,v.didClose)},n1=(d,p,v,_,oe)=>{me.swalCloseEventFinishedCallback=uh.bind(null,d,v,_,oe),p.addEventListener(pt,function(Me){Me.target===p&&(me.swalCloseEventFinishedCallback(),delete me.swalCloseEventFinishedCallback)})},fh=(d,p)=>{setTimeout(()=>{typeof p=="function"&&p.bind(d.params)(),d._destroy()})};function dh(d,p,v){const _=Ue.domCache.get(d);p.forEach(oe=>{_[oe].disabled=v})}function hh(d,p){if(!d)return!1;if(d.type==="radio"){const v=d.parentNode.parentNode.querySelectorAll("input");for(let _=0;_<v.length;_++)v[_].disabled=p}else d.disabled=p}function r1(){dh(this,["confirmButton","denyButton","cancelButton"],!1)}function i1(){dh(this,["confirmButton","denyButton","cancelButton"],!0)}function o1(){return hh(this.getInput(),!1)}function s1(){return hh(this.getInput(),!0)}function l1(d){const p=Ue.domCache.get(this),v=Ue.innerParams.get(this);Y(p.validationMessage,d),p.validationMessage.className=C["validation-message"],v.customClass&&v.customClass.validationMessage&&ee(p.validationMessage,v.customClass.validationMessage),w(p.validationMessage);const _=this.getInput();_&&(_.setAttribute("aria-invalid",!0),_.setAttribute("aria-describedby",C["validation-message"]),fe(_),ee(_,C.inputerror))}function a1(){const d=Ue.domCache.get(this);d.validationMessage&&y(d.validationMessage);const p=this.getInput();p&&(p.removeAttribute("aria-invalid"),p.removeAttribute("aria-describedby"),we(p,C.inputerror))}function c1(){return Ue.domCache.get(this).progressSteps}function u1(d){const p=Q(),v=Ue.innerParams.get(this);if(!p||X(p,v.hideClass.popup))return s("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const _=f1(d),oe=Object.assign({},v,_);nh(this,oe),Ue.innerParams.set(this,oe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,d),writable:!1,enumerable:!0}})}const f1=d=>{const p={};return Object.keys(d).forEach(v=>{$(v)?p[v]=d[v]:s('Invalid parameter to update: "'.concat(v,`". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`))}),p};function d1(){const d=Ue.domCache.get(this),p=Ue.innerParams.get(this);if(!p){ph(this);return}d.popup&&me.swalCloseEventFinishedCallback&&(me.swalCloseEventFinishedCallback(),delete me.swalCloseEventFinishedCallback),me.deferDisposalTimer&&(clearTimeout(me.deferDisposalTimer),delete me.deferDisposalTimer),typeof p.didDestroy=="function"&&p.didDestroy(),h1(this)}const h1=d=>{ph(d),delete d.params,delete me.keydownHandler,delete me.keydownTarget,delete me.currentInstance},ph=d=>{d.isAwaitingPromise()?($c(Ue,d),Ue.awaitingPromise.set(d,!0)):($c(ss,d),$c(Ue,d))},$c=(d,p)=>{for(const v in d)d[v].delete(p)};var mh=Object.freeze({hideLoading:ch,disableLoading:ch,getInput:Y0,close:vl,isAwaitingPromise:X0,rejectPromise:Q0,handleAwaitingPromise:ls,closePopup:vl,closeModal:vl,closeToast:vl,enableButtons:r1,disableButtons:i1,enableInput:o1,disableInput:s1,showValidationMessage:l1,resetValidationMessage:a1,getProgressSteps:c1,update:u1,_destroy:d1});const p1=d=>{const p=Ue.innerParams.get(d);d.disableButtons(),p.input?gh(d,"confirm"):Bc(d,!0)},m1=d=>{const p=Ue.innerParams.get(d);d.disableButtons(),p.returnInputValueOnDeny?gh(d,"deny"):Rc(d,!1)},g1=(d,p)=>{d.disableButtons(),p(ao.cancel)},gh=(d,p)=>{const v=Ue.innerParams.get(d);if(!v.input)return l('The "input" parameter is needed to be set when using returnInputValueOn'.concat(i(p)));const _=j0(d,v);v.inputValidator?y1(d,_,p):d.getInput().checkValidity()?p==="deny"?Rc(d,_):Bc(d,_):(d.enableButtons(),d.showValidationMessage(v.validationMessage))},y1=(d,p,v)=>{const _=Ue.innerParams.get(d);d.disableInput(),Promise.resolve().then(()=>m(_.inputValidator(p,_.validationMessage))).then(oe=>{d.enableButtons(),d.enableInput(),oe?d.showValidationMessage(oe):v==="deny"?Rc(d,p):Bc(d,p)})},Rc=(d,p)=>{const v=Ue.innerParams.get(d||void 0);v.showLoaderOnDeny&&co(Qe()),v.preDeny?(Ue.awaitingPromise.set(d||void 0,!0),Promise.resolve().then(()=>m(v.preDeny(p,v.validationMessage))).then(_=>{_===!1?(d.hideLoading(),ls(d)):d.closePopup({isDenied:!0,value:typeof _>"u"?p:_})}).catch(_=>bh(d||void 0,_))):d.closePopup({isDenied:!0,value:p})},yh=(d,p)=>{d.closePopup({isConfirmed:!0,value:p})},bh=(d,p)=>{d.rejectPromise(p)},Bc=(d,p)=>{const v=Ue.innerParams.get(d||void 0);v.showLoaderOnConfirm&&co(),v.preConfirm?(d.resetValidationMessage(),Ue.awaitingPromise.set(d||void 0,!0),Promise.resolve().then(()=>m(v.preConfirm(p,v.validationMessage))).then(_=>{D(Bt())||_===!1?(d.hideLoading(),ls(d)):yh(d,typeof _>"u"?p:_)}).catch(_=>bh(d||void 0,_))):yh(d,p)},b1=(d,p,v)=>{Ue.innerParams.get(d).toast?v1(d,p,v):(S1(p),x1(p),k1(d,p,v))},v1=(d,p,v)=>{p.popup.onclick=()=>{const _=Ue.innerParams.get(d);_&&(w1(_)||_.timer||_.input)||v(ao.close)}},w1=d=>d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton;let wl=!1;const S1=d=>{d.popup.onmousedown=()=>{d.container.onmouseup=function(p){d.container.onmouseup=void 0,p.target===d.container&&(wl=!0)}}},x1=d=>{d.container.onmousedown=()=>{d.popup.onmouseup=function(p){d.popup.onmouseup=void 0,(p.target===d.popup||d.popup.contains(p.target))&&(wl=!0)}}},k1=(d,p,v)=>{p.container.onclick=_=>{const oe=Ue.innerParams.get(d);if(wl){wl=!1;return}_.target===p.container&&f(oe.allowOutsideClick)&&v(ao.backdrop)}},C1=()=>D(Q()),vh=()=>Ae()&&Ae().click(),O1=()=>Qe()&&Qe().click(),E1=()=>z()&&z().click(),T1=(d,p,v,_)=>{p.keydownTarget&&p.keydownHandlerAdded&&(p.keydownTarget.removeEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!1),v.toast||(p.keydownHandler=oe=>_1(d,oe,_),p.keydownTarget=v.keydownListenerCapture?window:Q(),p.keydownListenerCapture=v.keydownListenerCapture,p.keydownTarget.addEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!0)},Lc=(d,p,v)=>{const _=R();if(_.length)return p=p+v,p===_.length?p=0:p===-1&&(p=_.length-1),_[p].focus();Q().focus()},wh=["ArrowRight","ArrowDown"],A1=["ArrowLeft","ArrowUp"],_1=(d,p,v)=>{const _=Ue.innerParams.get(d);_&&(p.isComposing||p.keyCode===229||(_.stopKeydownPropagation&&p.stopPropagation(),p.key==="Enter"?M1(d,p,_):p.key==="Tab"?N1(p,_):[...wh,...A1].includes(p.key)?P1(p.key):p.key==="Escape"&&I1(p,_,v)))},M1=(d,p,v)=>{if(f(v.allowEnterKey)&&p.target&&d.getInput()&&p.target.outerHTML===d.getInput().outerHTML){if(["textarea","file"].includes(v.input))return;vh(),p.preventDefault()}},N1=(d,p)=>{const v=d.target,_=R();let oe=-1;for(let Me=0;Me<_.length;Me++)if(v===_[Me]){oe=Me;break}d.shiftKey?Lc(p,oe,-1):Lc(p,oe,1),d.stopPropagation(),d.preventDefault()},P1=d=>{const p=Ae(),v=Qe(),_=z();if(![p,v,_].includes(document.activeElement))return;const oe=wh.includes(d)?"nextElementSibling":"previousElementSibling";let Me=document.activeElement;for(let _t=0;_t<q().children.length;_t++){if(Me=Me[oe],!Me)return;if(D(Me)&&Me instanceof HTMLButtonElement)break}Me instanceof HTMLButtonElement&&Me.focus()},I1=(d,p,v)=>{f(p.allowEscapeKey)&&(d.preventDefault(),v(ao.esc))},D1=d=>typeof d=="object"&&d.jquery,Sh=d=>d instanceof Element||D1(d),$1=d=>{const p={};return typeof d[0]=="object"&&!Sh(d[0])?Object.assign(p,d[0]):["title","html","icon"].forEach((v,_)=>{const oe=d[_];typeof oe=="string"||Sh(oe)?p[v]=oe:oe!==void 0&&l("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(typeof oe))}),p};function R1(){const d=this;for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];return new d(...v)}function B1(d){class p extends this{_main(_,oe){return super._main(_,Object.assign({},d,oe))}}return p}const L1=()=>me.timeout&&me.timeout.getTimerLeft(),xh=()=>{if(me.timeout)return De(),me.timeout.stop()},kh=()=>{if(me.timeout){const d=me.timeout.start();return ye(d),d}},F1=()=>{const d=me.timeout;return d&&(d.running?xh():kh())},V1=d=>{if(me.timeout){const p=me.timeout.increase(d);return ye(p,!0),p}},j1=()=>me.timeout&&me.timeout.isRunning();let Ch=!1;const Fc={};function H1(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Fc[d]=this,Ch||(document.body.addEventListener("click",z1),Ch=!0)}const z1=d=>{for(let p=d.target;p&&p!==document;p=p.parentNode)for(const v in Fc){const _=p.getAttribute(v);if(_){Fc[v].fire({template:_});return}}};var K1=Object.freeze({isValidParameter:N,isUpdatableParameter:$,isDeprecatedParameter:I,argsToParams:$1,isVisible:C1,clickConfirm:vh,clickDeny:O1,clickCancel:E1,getContainer:Z,getPopup:Q,getTitle:Ze,getHtmlContainer:Ke,getImage:tt,getIcon:Te,getInputLabel:Et,getCloseButton:T,getActions:q,getConfirmButton:Ae,getDenyButton:Qe,getCancelButton:z,getLoader:H,getFooter:W,getTimerProgressBar:le,getFocusableElements:R,getValidationMessage:Bt,isLoading:J,fire:R1,mixin:B1,showLoading:co,enableLoading:co,getTimerLeft:L1,stopTimer:xh,resumeTimer:kh,toggleTimer:F1,increaseTimer:V1,isTimerRunning:j1,bindClickHandler:H1});let Vc;class uo{constructor(){if(typeof window>"u")return;Vc=this;for(var p=arguments.length,v=new Array(p),_=0;_<p;_++)v[_]=arguments[_];const oe=Object.freeze(this.constructor.argsToParams(v));Object.defineProperties(this,{params:{value:oe,writable:!1,enumerable:!0,configurable:!0}});const Me=this._main(this.params);Ue.promise.set(this,Me)}_main(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(Object.assign({},v,p)),me.currentInstance&&(me.currentInstance._destroy(),B()&&rh()),me.currentInstance=this;const _=W1(p,v);C0(_),Object.freeze(_),me.timeout&&(me.timeout.stop(),delete me.timeout),clearTimeout(me.restoreFocusTimeout);const oe=q1(this);return nh(this,_),Ue.innerParams.set(this,_),U1(this,oe,_)}then(p){return Ue.promise.get(this).then(p)}finally(p){return Ue.promise.get(this).finally(p)}}const U1=(d,p,v)=>new Promise((_,oe)=>{const Me=_t=>{d.closePopup({isDismissed:!0,dismiss:_t})};ss.swalPromiseResolve.set(d,_),ss.swalPromiseReject.set(d,oe),p.confirmButton.onclick=()=>p1(d),p.denyButton.onclick=()=>m1(d),p.cancelButton.onclick=()=>g1(d,Me),p.closeButton.onclick=()=>Me(ao.close),b1(d,p,Me),T1(d,me,v,Me),V0(d,v),$0(v),J1(me,v,Me),Y1(p,v),setTimeout(()=>{p.container.scrollTop=0})}),W1=(d,p)=>{const v=p0(d),_=Object.assign({},b,p,v,d);return _.showClass=Object.assign({},b.showClass,_.showClass),_.hideClass=Object.assign({},b.hideClass,_.hideClass),_},q1=d=>{const p={popup:Q(),container:Z(),actions:q(),confirmButton:Ae(),denyButton:Qe(),cancelButton:z(),loader:H(),closeButton:T(),validationMessage:Bt(),progressSteps:ft()};return Ue.domCache.set(d,p),p},J1=(d,p,v)=>{const _=le();y(_),p.timer&&(d.timeout=new O0(()=>{v("timer"),delete d.timeout},p.timer),p.timerProgressBar&&(w(_),pe(_,p,"timerProgressBar"),setTimeout(()=>{d.timeout&&d.timeout.running&&ye(p.timer)})))},Y1=(d,p)=>{if(!p.toast){if(!f(p.allowEnterKey))return X1();G1(d,p)||Lc(p,-1,1)}},G1=(d,p)=>p.focusDeny&&D(d.denyButton)?(d.denyButton.focus(),!0):p.focusCancel&&D(d.cancelButton)?(d.cancelButton.focus(),!0):p.focusConfirm&&D(d.confirmButton)?(d.confirmButton.focus(),!0):!1,X1=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(uo.prototype,mh),Object.assign(uo,K1),Object.keys(mh).forEach(d=>{uo[d]=function(){if(Vc)return Vc[d](...arguments)}}),uo.DismissReason=ao,uo.version="11.4.4";const Sl=uo;return Sl.default=Sl,Sl}),typeof Yr<"u"&&Yr.Sweetalert2&&(Yr.swal=Yr.sweetAlert=Yr.Swal=Yr.SweetAlert=Yr.Sweetalert2)})(Gv);var BP=Gv.exports;const Ul=RP(BP);class LP{static install(e,n={}){var r;const i=Ul.mixin(n),o=function(...s){return i.fire.call(i,...s)};Object.assign(o,Ul),Object.keys(Ul).filter(s=>typeof Ul[s]=="function").forEach(s=>{o[s]=i[s].bind(i)}),(r=e.config)!=null&&r.globalProperties&&!e.config.globalProperties.$swal?(e.config.globalProperties.$swal=o,e.provide("$swal",o)):Object.prototype.hasOwnProperty.call(e,"$swal")||(e.prototype.$swal=o,e.swal=o)}}const Xv=wx($P);Xv.use(LP);Xv.mount("#app");
